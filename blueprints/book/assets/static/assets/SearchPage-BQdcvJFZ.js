import{j as s,H as j,b}from"./index-79WFmkwZ.js";import{f as g,r,L as N}from"./react-vendor-bJoUFh3v.js";import{B as y}from"./BookCard-Dr4yaI5b.js";import{u as S}from"./ShelfButton-C-XyOIS6.js";import{S as k}from"./ui-D_Yei50m.js";import"./middleware-WYGlAF-S.js";function C(){const[p]=g(),t=p.get("q")||"",[e,h]=r.useState(null),[n,i]=r.useState(1),[o,m]=r.useState(!1),[c,u]=r.useState(null),x=S(a=>a.setQuery),f=20,d=e?Math.ceil(e.total_count/f):0;return r.useEffect(()=>{if(!t){h(null);return}x(t),i(1)},[t,x]),r.useEffect(()=>{if(!t)return;(async()=>{m(!0),u(null);try{const l=await b.search(t,n,f);h(l)}catch(l){u(l instanceof Error?l.message:"Search failed")}finally{m(!1)}})()},[t,n]),s.jsxs(s.Fragment,{children:[s.jsx(j,{}),s.jsxs("div",{className:"page-container fade-in",children:[t&&s.jsxs("div",{className:"page-title-block",children:[s.jsxs("h1",{className:"page-title",children:['Search results for "',t,'"']}),e&&!o&&s.jsxs("p",{className:"page-subtitle",children:[e.total_count," result",e.total_count!==1?"s":""," found"]})]}),!t&&s.jsxs("div",{className:"empty-state",children:[s.jsx(k,{size:48,className:"empty-state-icon"}),s.jsx("h3",{children:"Search for books"}),s.jsx("p",{children:"Use the search bar above to find books by title, author, or ISBN."})]}),o&&s.jsx("div",{className:"loading-spinner",children:s.jsx("div",{className:"spinner"})}),c&&s.jsxs("div",{className:"empty-state",children:[s.jsx("h3",{children:"Search error"}),s.jsx("p",{children:c})]}),!o&&!c&&e&&e.books.length===0&&s.jsxs("div",{className:"empty-state",children:[s.jsx("h3",{children:"No results found"}),s.jsx("p",{children:"Try a different search term or check your spelling."}),s.jsx(N,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]}),!o&&!c&&e&&e.books.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:e.books.map(a=>s.jsx(y,{book:a},a.id))}),d>1&&s.jsxs("div",{className:"pagination-row",children:[s.jsx("button",{className:"btn btn-secondary btn-sm",disabled:n<=1,onClick:()=>i(a=>Math.max(1,a-1)),children:"Previous"}),s.jsxs("span",{className:"pagination-text",children:["Page ",n," of ",d]}),s.jsx("button",{className:"btn btn-secondary btn-sm",disabled:n>=d,onClick:()=>i(a=>a+1),children:"Next"})]})]})]})]})}export{C as default};
