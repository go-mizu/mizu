import{j as e,H as o,b as l}from"./index-C-ixEFdY.js";import{r as t,L as N}from"./react-vendor-bJoUFh3v.js";import{B as h}from"./BookGrid-Bnk7dYhl.js";import{h as y,i as v,d as b}from"./ui-RIRksdBL.js";function B(){const[n,x]=t.useState([]),[r,g]=t.useState([]),[i,p]=t.useState([]),[j,c]=t.useState(!0),[d,m]=t.useState(null);return t.useEffect(()=>{(async()=>{c(!0),m(null);try{const[a,u,f]=await Promise.all([l.getPopular(12),l.getNewReleases(12),l.getGenres()]);x(a),g(u),p(f)}catch(a){m(a instanceof Error?a.message:"Failed to load browse data")}finally{c(!1)}})()},[]),j?e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]}):d?e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Something went wrong"}),e.jsx("p",{children:d})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsxs("div",{className:"page-container fade-in",children:[n.length>0&&e.jsxs("section",{style:{marginBottom:40},children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:[e.jsx(y,{size:18,style:{marginRight:8,verticalAlign:"text-bottom"}}),"Popular"]})}),e.jsx(h,{books:n})]}),r.length>0&&e.jsxs("section",{style:{marginBottom:40},children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:[e.jsx(v,{size:18,style:{marginRight:8,verticalAlign:"text-bottom"}}),"New Releases"]})}),e.jsx(h,{books:r})]}),i.length>0&&e.jsxs("section",{style:{marginBottom:40},children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:[e.jsx(b,{size:18,style:{marginRight:8,verticalAlign:"text-bottom"}}),"Genres"]})}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:i.map(s=>e.jsxs(N,{to:`/genre/${encodeURIComponent(s.name)}`,className:"genre-tag",style:{fontSize:14,padding:"8px 16px"},children:[s.name,s.book_count>0&&e.jsxs("span",{style:{marginLeft:6,fontSize:12,color:"var(--gr-light)"},children:["(",s.book_count,")"]})]},s.name))})]}),n.length===0&&r.length===0&&i.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Nothing to browse yet"}),e.jsx("p",{children:"Add some books to get started!"})]})]})]})}export{B as default};
