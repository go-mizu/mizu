import{b as a,j as e,H as G}from"./index-D_4FLS-X.js";import{r as t,L as B}from"./react-vendor-bJoUFh3v.js";import{D as I,P as _,B as j,U as y}from"./ui-D_Yei50m.js";function P(){const[d,n]=t.useState([]),[b,v]=t.useState(!0),[k,i]=t.useState(!1),[o,p]=t.useState(""),[h,m]=t.useState(""),[l,N]=t.useState([]),[L,x]=t.useState(!1),[c,g]=t.useState(!1),[u,f]=t.useState(null);t.useEffect(()=>{a.getLists().then(n).catch(()=>{}).finally(()=>v(!1))},[]);const S=()=>{o.trim()&&a.createList({title:o,description:h}).then(s=>{n(r=>[...r,s]),i(!1),p(""),m("")}).catch(()=>{})},w=()=>{if(l.length>0){g(!c);return}x(!0),g(!0),a.browseGoodreadsLists().then(N).catch(()=>{}).finally(()=>x(!1))},C=async s=>{f(s);try{const r=await a.importGoodreadsList(s);n(z=>[...z,r])}catch{}finally{f(null)}};return e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h1",{className:"section-title",children:"Listopia"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:w,children:[e.jsx(I,{size:16})," ",c?"Hide":"Browse"," Goodreads"]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[e.jsx(_,{size:16})," Create List"]})]})]}),c&&e.jsxs("div",{style:{marginBottom:24},children:[e.jsx("h2",{style:{fontFamily:"'Merriweather', Georgia, serif",fontSize:16,color:"var(--gr-brown)",marginBottom:12},children:"Popular Goodreads Lists"}),L?e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})}):l.length===0?e.jsx("p",{style:{color:"var(--gr-light)",fontSize:14},children:"No lists found."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:12},children:l.map((s,r)=>e.jsxs("div",{style:{padding:16,border:"1px solid var(--gr-border)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{minWidth:0},children:[e.jsx("div",{style:{fontWeight:700,fontSize:14,color:"var(--gr-brown)",marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s.title}),e.jsxs("div",{style:{fontSize:12,color:"var(--gr-light)",display:"flex",gap:12},children:[s.book_count>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(j,{size:11})," ",s.book_count.toLocaleString()," books"]}),s.voter_count>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(y,{size:11})," ",s.voter_count.toLocaleString()," voters"]})]})]}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>C(s.url),disabled:u===s.url,style:{flexShrink:0},children:u===s.url?"...":"Import"})]},r))})]}),b?e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})}):d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No lists yet"}),e.jsx("p",{children:"Create your first book list or import from Goodreads."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>i(!0),children:"Create List"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:12},children:d.map(s=>e.jsxs(B,{to:`/list/${s.id}`,style:{display:"block",padding:16,border:"1px solid var(--gr-border)",borderRadius:8,textDecoration:"none",color:"inherit",transition:"background 0.15s"},onMouseEnter:r=>r.currentTarget.style.background="var(--gr-cream)",onMouseLeave:r=>r.currentTarget.style.background="",children:[e.jsx("h3",{style:{fontFamily:"'Merriweather', Georgia, serif",fontWeight:700,fontSize:15,color:"var(--gr-brown)",margin:"0 0 4px"},children:s.title}),s.description&&e.jsx("p",{style:{fontSize:13,color:"var(--gr-light)",marginBottom:8,overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.description}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,fontSize:12,color:"var(--gr-light)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(j,{size:12})," ",s.item_count," books"]}),s.voter_count>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx(y,{size:12})," ",s.voter_count.toLocaleString()," voters"]})]})]},s.id))}),k&&e.jsx("div",{className:"modal-overlay",onClick:()=>i(!1),children:e.jsxs("div",{className:"modal",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{children:"Create New List"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("input",{className:"form-input",value:o,onChange:s=>p(s.target.value),placeholder:"Best Books of 2024"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-input",value:h,onChange:s=>m(s.target.value),placeholder:"A curated list of..."})]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:S,children:"Create"})]})]})})]})]})}export{P as default};
