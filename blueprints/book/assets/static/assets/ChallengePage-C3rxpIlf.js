import{b as g,j as e,H as h}from"./index-79WFmkwZ.js";import{r as n}from"./react-vendor-bJoUFh3v.js";import{j as d}from"./ui-D_Yei50m.js";function v(){const[a,t]=n.useState(null),[m,p]=n.useState(!0),[c,i]=n.useState(""),s=new Date().getFullYear();n.useEffect(()=>{g.getChallenge(s).then(l=>t(l)).catch(()=>{}).finally(()=>p(!1))},[s]);const o=()=>{const l=parseInt(c);l<=0||g.setChallenge(s,l).then(u=>t(u)).catch(()=>{})};if(m)return e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});const r=a&&a.goal>0?Math.min(100,Math.round(a.progress/a.goal*100)):0;return e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsx("div",{className:"page-container page-narrow challenge-page",children:e.jsxs("div",{className:"challenge-card",children:[e.jsxs("div",{className:"challenge-year",children:[s," Reading Challenge"]}),!a||a.goal===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"challenge-empty-head",children:[e.jsx(d,{size:48,className:"challenge-icon"}),e.jsx("h2",{className:"challenge-title",children:"Set Your Reading Goal"}),e.jsx("p",{className:"challenge-hint",children:"How many books do you want to read this year?"})]}),e.jsxs("div",{className:"challenge-goal-input-row",children:[e.jsx("input",{type:"number",min:"1",value:c,onChange:l=>i(l.target.value),placeholder:"e.g. 24",className:"form-input challenge-goal-input"}),e.jsx("span",{className:"challenge-goal-unit",children:"books"})]}),e.jsx("button",{className:"btn btn-primary btn-lg",onClick:o,children:"Start Challenge"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"challenge-title challenge-title-with-icon",children:[e.jsx(d,{size:28,className:"challenge-icon"}),"Reading Challenge"]}),e.jsxs("div",{className:"challenge-progress",children:[a.progress," ",e.jsxs("span",{className:"challenge-progress-total",children:["/ ",a.goal]})]}),e.jsx("div",{className:"challenge-goal",children:"books read"}),e.jsxs("div",{className:"challenge-progress-wrap challenge-progress-wrap-wide",children:[e.jsx("div",{className:"progress-bar progress-bar-lg",children:e.jsx("div",{className:"progress-fill",style:{width:`${r}%`}})}),e.jsxs("div",{className:"progress-label",children:[r,"% complete"]})]}),r>=100&&e.jsx("p",{className:"challenge-success",children:"Congratulations! You've reached your goal!"}),e.jsxs("div",{className:"challenge-update",children:[e.jsx("p",{className:"challenge-update-label",children:"Update your goal"}),e.jsxs("div",{className:"challenge-goal-input-row",children:[e.jsx("input",{type:"number",min:"1",value:c,onChange:l=>i(l.target.value),placeholder:String(a.goal),className:"form-input challenge-goal-input challenge-goal-input-sm"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:o,children:"Update"})]})]})]})]})})]})}export{v as default};
