import{j as e,H as l,b as d}from"./index-D_4FLS-X.js";import{h as N,r as a,L as y}from"./react-vendor-bJoUFh3v.js";import{B as I}from"./BookCard-BhnNLfSz.js";import{C as _,B,U as z,D}from"./ui-D_Yei50m.js";import"./ShelfButton-YBBNoQqA.js";import"./middleware-WYGlAF-S.js";function L(){const{id:i}=N(),[t,c]=a.useState(null),[h,b]=a.useState([]),[v,m]=a.useState(!0),[p,x]=a.useState(null),[o,g]=a.useState(""),[f,u]=a.useState(!1),n=Number(i);a.useEffect(()=>{if(!i)return;(async()=>{m(!0),x(null);try{const[r,S]=await Promise.all([d.getAuthor(n),d.getAuthorBooks(n)]);c(r),b(S)}catch(r){x(r instanceof Error?r.message:"Failed to load author")}finally{m(!1)}})()},[i,n]);const w=async()=>{if(o.trim()){u(!0);try{const s=await d.importGoodreadsAuthor(o.trim());c(r=>r?{...r,...s}:s),g("")}catch{}finally{u(!1)}}};if(v)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});if(p||!t)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Author not found"}),e.jsx("p",{children:p||"This author does not exist."}),e.jsx(y,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]})})]});const k=()=>{const s=[];return t.birth_date&&s.push(`Born ${t.birth_date}`),t.death_date&&s.push(`Died ${t.death_date}`),s.join(" â€¢ ")},j=t.genres?t.genres.split(", ").filter(Boolean):[];return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsxs("div",{className:"page-container fade-in",children:[e.jsxs("div",{style:{display:"flex",gap:24,marginBottom:40},children:[e.jsx("div",{style:{flexShrink:0},children:t.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,style:{width:150,height:200,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}}):e.jsx("div",{style:{width:150,height:200,background:"var(--gr-tan)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,color:"var(--gr-light)"},children:t.name.charAt(0)})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h1",{style:{fontFamily:"'Merriweather', Georgia, serif",fontSize:28,fontWeight:900,color:"var(--gr-brown)",margin:"0 0 8px"},children:t.name}),(t.birth_date||t.death_date)&&e.jsxs("p",{style:{display:"flex",alignItems:"center",gap:6,fontSize:14,color:"var(--gr-light)",marginBottom:12},children:[e.jsx(_,{size:14}),k()]}),t.bio&&e.jsx("div",{style:{fontSize:15,lineHeight:1.7,color:"var(--gr-text)",maxWidth:700},children:t.bio}),e.jsxs("div",{style:{display:"flex",gap:20,marginTop:16,fontSize:14,color:"var(--gr-light)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(B,{size:14}),t.works_count," book",t.works_count!==1?"s":""]}),t.followers>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(z,{size:14}),t.followers.toLocaleString()," followers"]})]}),j.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:12},children:j.map(s=>e.jsx(y,{to:`/genre/${encodeURIComponent(s)}`,className:"genre-tag",children:s},s))}),t.goodreads_id&&e.jsx("div",{style:{marginTop:12,fontSize:13},children:e.jsx("a",{href:`https://www.goodreads.com/author/show/${t.goodreads_id}`,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--gr-teal)",textDecoration:"none"},children:"View on Goodreads"})}),!t.goodreads_id&&e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"text",value:o,onChange:s=>g(s.target.value),placeholder:"Goodreads author ID",className:"form-input",style:{width:200,fontSize:13,padding:"6px 10px"}}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:w,disabled:f||!o.trim(),children:[e.jsx(D,{size:14}),f?"Importing...":"Import"]})]})]})]}),e.jsxs("section",{children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:["Books by ",t.name]})}),h.length>0?e.jsx("div",{children:h.map(s=>e.jsx(I,{book:s},s.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No books found"}),e.jsx("p",{children:"No books by this author are in the library yet."})]})]})]})]})}export{L as default};
