import{b as g,j as e,H as d}from"./index-qY3I5bEj.js";import{r as l}from"./react-vendor-bJoUFh3v.js";import{j as m}from"./ui-D_Yei50m.js";function b(){const[s,i]=l.useState(null),[h,x]=l.useState(!0),[n,c]=l.useState(""),t=new Date().getFullYear();l.useEffect(()=>{g.getChallenge(t).then(a=>i(a)).catch(()=>{}).finally(()=>x(!1))},[t]);const o=()=>{const a=parseInt(n);a<=0||g.setChallenge(t,a).then(j=>i(j)).catch(()=>{})};if(h)return e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});const r=s&&s.goal>0?Math.min(100,Math.round(s.progress/s.goal*100)):0;return e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsx("div",{className:"page-container",style:{maxWidth:600,margin:"0 auto",padding:40},children:e.jsxs("div",{className:"challenge-card",children:[e.jsxs("div",{className:"challenge-year",children:[t," Reading Challenge"]}),!s||s.goal===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-6",children:[e.jsx(m,{size:48,className:"mx-auto text-gr-orange mb-4"}),e.jsx("h2",{className:"challenge-title",children:"Set Your Reading Goal"}),e.jsx("p",{className:"text-gr-light mt-2 mb-6",children:"How many books do you want to read this year?"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx("input",{type:"number",min:"1",value:n,onChange:a=>c(a.target.value),placeholder:"e.g. 24",className:"form-input text-center text-2xl font-bold",style:{width:120}}),e.jsx("span",{className:"text-gr-light text-lg",children:"books"})]}),e.jsx("button",{className:"btn btn-primary btn-lg",onClick:o,children:"Start Challenge"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"challenge-title",children:[e.jsx(m,{size:28,className:"inline text-gr-orange mr-2"}),"Reading Challenge"]}),e.jsxs("div",{className:"challenge-progress",children:[s.progress," ",e.jsxs("span",{className:"text-2xl text-gr-light",children:["/ ",s.goal]})]}),e.jsx("div",{className:"challenge-goal",children:"books read"}),e.jsxs("div",{className:"mt-6 mx-auto",style:{maxWidth:300},children:[e.jsx("div",{className:"progress-bar",style:{height:12},children:e.jsx("div",{className:"progress-fill",style:{width:`${r}%`}})}),e.jsxs("div",{className:"progress-label mt-2",children:[r,"% complete"]})]}),r>=100&&e.jsx("p",{className:"mt-6 text-gr-green font-bold text-lg",children:"Congratulations! You've reached your goal!"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-sm text-gr-light mb-2",children:"Update your goal"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("input",{type:"number",min:"1",value:n,onChange:a=>c(a.target.value),placeholder:String(s.goal),className:"form-input text-center",style:{width:100}}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:o,children:"Update"})]})]})]})]})})]})}export{b as default};
