import{j as e,H as l,b as c}from"./index-nVKRkTIH.js";import{h as B,r,L as b}from"./react-vendor-bJoUFh3v.js";import{B as A}from"./BookCard-Ck91dZdz.js";import{C as D,B as I,U as S,G as C,D as z}from"./ui-Fk1kDDOZ.js";import"./ShelfButton-Cfr5vARB.js";import"./middleware-WYGlAF-S.js";function U(){const{id:n}=B(),[s,h]=r.useState(null),[d,w]=r.useState([]),[k,m]=r.useState(!0),[u,p]=r.useState(null),[o,x]=r.useState(""),[j,f]=r.useState(!1),i=Number(n);r.useEffect(()=>{if(!n)return;(async()=>{m(!0),p(null);try{const[a,_]=await Promise.all([c.getAuthor(i),c.getAuthorBooks(i)]);h(a),w(_)}catch(a){p(a instanceof Error?a.message:"Failed to load author")}finally{m(!1)}})()},[n,i]);const v=async()=>{if(o.trim()){f(!0);try{const t=await c.importSourceAuthor(o.trim());h(a=>a?{...a,...t}:t),x("")}catch{}finally{f(!1)}}};if(k)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});if(u||!s)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Author not found"}),e.jsx("p",{children:u||"This author does not exist."}),e.jsx(b,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]})})]});const y=()=>{const t=[];return s.birth_date&&t.push(`Born ${s.birth_date}`),s.death_date&&t.push(`Died ${s.death_date}`),t.join(" â€¢ ")},N=s.genres?s.genres.split(", ").filter(Boolean):[],g=s.influences?s.influences.split(", ").filter(Boolean):[];return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsxs("div",{className:"page-container fade-in",children:[e.jsxs("div",{className:"author-layout",children:[e.jsx("div",{className:"author-photo-wrap",children:s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"author-photo"}):e.jsx("div",{className:"author-photo-placeholder",children:s.name.charAt(0)})}),e.jsxs("div",{className:"author-content",children:[e.jsx("h1",{className:"author-name",children:s.name}),(s.birth_date||s.death_date)&&e.jsxs("p",{className:"author-date-row",children:[e.jsx(D,{size:14}),y()]}),s.bio&&e.jsx("div",{className:"author-bio",children:s.bio}),e.jsxs("div",{className:"author-stats-row",children:[e.jsxs("span",{className:"meta-with-icon",children:[e.jsx(I,{size:14}),s.works_count," book",s.works_count!==1?"s":""]}),s.followers>0&&e.jsxs("span",{className:"meta-with-icon",children:[e.jsx(S,{size:14}),s.followers.toLocaleString()," followers"]})]}),N.length>0&&e.jsx("div",{className:"genre-list",children:N.map(t=>e.jsx(b,{to:`/genre/${encodeURIComponent(t)}`,className:"genre-tag",children:t},t))}),g.length>0&&e.jsxs("div",{className:"author-note",children:[e.jsx("strong",{children:"Influences:"})," ",g.join(", ")]}),s.website&&e.jsx("div",{className:"author-link-row",children:e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"meta-link",children:[e.jsx(C,{size:13}),"Author website"]})}),s.source_id&&e.jsx("div",{className:"author-link-row",children:e.jsx("a",{href:`https://www.goodreads.com/author/show/${s.source_id}`,target:"_blank",rel:"noopener noreferrer",className:"meta-link",children:"View source profile"})}),!s.source_id&&e.jsxs("div",{className:"author-import-row",children:[e.jsx("input",{type:"text",value:o,onChange:t=>x(t.target.value),placeholder:"Source author ID",className:"form-input author-import-input"}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:v,disabled:j||!o.trim(),children:[e.jsx(z,{size:14}),j?"Importing...":"Import"]})]})]})]}),e.jsxs("section",{children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:["Books by ",s.name]})}),d.length>0?e.jsx("div",{children:d.map(t=>e.jsx(A,{book:t},t.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No books found"}),e.jsx("p",{children:"No books by this author are in the library yet."})]})]})]})]})}export{U as default};
