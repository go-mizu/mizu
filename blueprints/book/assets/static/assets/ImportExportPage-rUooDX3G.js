import{j as e,H as b,b as x}from"./index-smKHW-e9.js";import{r}from"./react-vendor-bJoUFh3v.js";import{U as j,F as N,m as v,D as p}from"./ui-CwMuETwS.js";function D(){const[h,l]=r.useState(!1),[i,n]=r.useState(null),[c,a]=r.useState(null),[g,o]=r.useState(!1),d=r.useRef(null),m=async t=>{if(!t.name.endsWith(".csv")){a("Please upload a CSV file");return}l(!0),a(null),n(null);try{const s=await x.importCSV(t);n(s)}catch{a("Failed to import CSV file")}finally{l(!1)}},f=t=>{t.preventDefault(),o(!1);const s=t.dataTransfer.files[0];s&&m(s)},u=t=>{const s=t.target.files?.[0];s&&m(s)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs("div",{className:"page-container",style:{maxWidth:700,margin:"0 auto"},children:[e.jsx("h1",{className:"font-serif text-2xl font-bold text-gr-brown mb-8",children:"Import & Export"}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"section-title mb-4",children:[e.jsx(j,{size:20,className:"inline mr-2"}),"Import from Goodreads"]}),e.jsx("p",{className:"text-sm text-gr-light mb-4",children:"Upload your Goodreads library export CSV file. Go to Goodreads → My Books → Import and Export → Export Library to download it."}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-10 text-center transition-colors cursor-pointer ${g?"border-gr-teal bg-gr-cream":"border-gr-border hover:border-gr-teal"}`,onDragOver:t=>{t.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onDrop:f,onClick:()=>d.current?.click(),children:[e.jsx(N,{size:36,className:"mx-auto text-gr-light mb-3"}),e.jsxs("p",{className:"text-sm text-gr-text mb-1",children:["Drop your CSV file here, or ",e.jsx("span",{className:"text-gr-teal font-bold",children:"click to browse"})]}),e.jsx("p",{className:"text-xs text-gr-light",children:"Supports Goodreads export CSV format"}),e.jsx("input",{ref:d,type:"file",accept:".csv",className:"hidden",onChange:u})]}),h&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gr-light",children:[e.jsx("div",{className:"spinner",style:{width:16,height:16}})," Importing..."]}),i&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-gr-green",children:[e.jsx(v,{size:16})," Successfully imported ",i.imported," books"]}),c&&e.jsx("div",{className:"mt-4 text-sm text-red-600",children:c})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"section-title mb-4",children:[e.jsx(p,{size:20,className:"inline mr-2"}),"Export Library"]}),e.jsx("p",{className:"text-sm text-gr-light mb-4",children:"Download your library as a Goodreads-compatible CSV file. Includes all books, ratings, reviews, shelves, and reading dates."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>x.exportCSV(),children:[e.jsx(p,{size:16})," Export as CSV"]})]})]})]})}export{D as default};
