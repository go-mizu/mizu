import{j as e,H as n,b as x}from"./index-C-ixEFdY.js";import{h as p,r,L as b}from"./react-vendor-bJoUFh3v.js";import{B as y}from"./BookCard-CEOB1_wh.js";import{C as v}from"./ui-RIRksdBL.js";import"./ShelfButton-DeyYxMQ2.js";import"./middleware-WYGlAF-S.js";function A(){const{id:o}=p(),[t,m]=r.useState(null),[l,u]=r.useState([]),[g,d]=r.useState(!0),[h,c]=r.useState(null),i=Number(o);if(r.useEffect(()=>{if(!o)return;(async()=>{d(!0),c(null);try{const[a,f]=await Promise.all([x.getAuthor(i),x.getAuthorBooks(i)]);m(a),u(f)}catch(a){c(a instanceof Error?a.message:"Failed to load author")}finally{d(!1)}})()},[o,i]),g)return e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});if(h||!t)return e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Author not found"}),e.jsx("p",{children:h||"This author does not exist."}),e.jsx(b,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]})})]});const j=()=>{const s=[];return t.birth_date&&s.push(`Born ${t.birth_date}`),t.death_date&&s.push(`Died ${t.death_date}`),s.join(" â€¢ ")};return e.jsxs(e.Fragment,{children:[e.jsx(n,{}),e.jsxs("div",{className:"page-container fade-in",children:[e.jsxs("div",{style:{display:"flex",gap:24,marginBottom:40},children:[e.jsx("div",{style:{flexShrink:0},children:t.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,style:{width:150,height:200,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}}):e.jsx("div",{style:{width:150,height:200,background:"var(--gr-tan)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,color:"var(--gr-light)"},children:t.name.charAt(0)})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h1",{style:{fontFamily:"'Merriweather', Georgia, serif",fontSize:28,fontWeight:900,color:"var(--gr-brown)",margin:"0 0 8px"},children:t.name}),(t.birth_date||t.death_date)&&e.jsxs("p",{style:{display:"flex",alignItems:"center",gap:6,fontSize:14,color:"var(--gr-light)",marginBottom:12},children:[e.jsx(v,{size:14}),j()]}),t.bio&&e.jsx("div",{style:{fontSize:15,lineHeight:1.7,color:"var(--gr-text)",maxWidth:700},children:t.bio}),e.jsxs("div",{style:{marginTop:16,fontSize:14,color:"var(--gr-light)"},children:[t.works_count," book",t.works_count!==1?"s":""]})]})]}),e.jsxs("section",{children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:["Books by ",t.name]})}),l.length>0?e.jsx("div",{children:l.map(s=>e.jsx(y,{book:s},s.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No books found"}),e.jsx("p",{children:"No books by this author are in the library yet."})]})]})]})]})}export{A as default};
