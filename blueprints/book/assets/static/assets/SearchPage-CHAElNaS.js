import{j as e,H as j,b as p}from"./index-D_4FLS-X.js";import{f as b,r as a,L as y}from"./react-vendor-bJoUFh3v.js";import{B as S}from"./BookCard-BhnNLfSz.js";import{u as v}from"./ShelfButton-YBBNoQqA.js";import{S as k}from"./ui-D_Yei50m.js";import"./middleware-WYGlAF-S.js";function C(){const[g]=b(),t=g.get("q")||"",[s,h]=a.useState(null),[o,c]=a.useState(1),[n,m]=a.useState(!1),[i,u]=a.useState(null),f=v(r=>r.setQuery),x=20,d=s?Math.ceil(s.total_count/x):0;return a.useEffect(()=>{if(!t){h(null);return}f(t),c(1)},[t,f]),a.useEffect(()=>{if(!t)return;(async()=>{m(!0),u(null);try{const l=await p.search(t,o,x);h(l)}catch(l){u(l instanceof Error?l.message:"Search failed")}finally{m(!1)}})()},[t,o]),e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{className:"page-container fade-in",children:[t&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsxs("h1",{style:{fontFamily:"'Merriweather', Georgia, serif",fontSize:20,fontWeight:700,color:"var(--gr-brown)"},children:['Search results for "',t,'"']}),s&&!n&&e.jsxs("p",{style:{fontSize:14,color:"var(--gr-light)",marginTop:4},children:[s.total_count," result",s.total_count!==1?"s":""," found"]})]}),!t&&e.jsxs("div",{className:"empty-state",children:[e.jsx(k,{size:48,style:{color:"var(--gr-border)",marginBottom:16}}),e.jsx("h3",{children:"Search for books"}),e.jsx("p",{children:"Use the search bar above to find books by title, author, or ISBN."})]}),n&&e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})}),i&&e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Search error"}),e.jsx("p",{children:i})]}),!n&&!i&&s&&s.books.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No results found"}),e.jsx("p",{children:"Try a different search term or check your spelling."}),e.jsx(y,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]}),!n&&!i&&s&&s.books.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:s.books.map(r=>e.jsx(S,{book:r},r.id))}),d>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:16,marginTop:32,paddingBottom:20},children:[e.jsx("button",{className:"btn btn-secondary btn-sm",disabled:o<=1,onClick:()=>c(r=>Math.max(1,r-1)),children:"Previous"}),e.jsxs("span",{style:{fontSize:14,color:"var(--gr-light)"},children:["Page ",o," of ",d]}),e.jsx("button",{className:"btn btn-secondary btn-sm",disabled:o>=d,onClick:()=>c(r=>r+1),children:"Next"})]})]})]})]})}export{C as default};
