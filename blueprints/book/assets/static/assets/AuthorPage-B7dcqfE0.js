import{j as e,H as l,b as c}from"./index-qY3I5bEj.js";import{h as N,r as o,L as b}from"./react-vendor-bJoUFh3v.js";import{B as _}from"./BookCard-DIwNNh3K.js";import{C as z,B,U as D,G as A,D as C}from"./ui-D_Yei50m.js";import"./ShelfButton-b_U-t-Eh.js";import"./middleware-WYGlAF-S.js";function W(){const{id:n}=N(),[t,d]=o.useState(null),[h,v]=o.useState([]),[w,p]=o.useState(!0),[x,g]=o.useState(null),[a,m]=o.useState(""),[u,f]=o.useState(!1),i=Number(n);o.useEffect(()=>{if(!n)return;(async()=>{p(!0),g(null);try{const[r,I]=await Promise.all([c.getAuthor(i),c.getAuthorBooks(i)]);d(r),v(I)}catch(r){g(r instanceof Error?r.message:"Failed to load author")}finally{p(!1)}})()},[n,i]);const S=async()=>{if(a.trim()){f(!0);try{const s=await c.importSourceAuthor(a.trim());d(r=>r?{...r,...s}:s),m("")}catch{}finally{f(!1)}}};if(w)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});if(x||!t)return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Author not found"}),e.jsx("p",{children:x||"This author does not exist."}),e.jsx(b,{to:"/browse",className:"btn btn-secondary",children:"Browse books"})]})})]});const k=()=>{const s=[];return t.birth_date&&s.push(`Born ${t.birth_date}`),t.death_date&&s.push(`Died ${t.death_date}`),s.join(" â€¢ ")},j=t.genres?t.genres.split(", ").filter(Boolean):[],y=t.influences?t.influences.split(", ").filter(Boolean):[];return e.jsxs(e.Fragment,{children:[e.jsx(l,{}),e.jsxs("div",{className:"page-container fade-in",children:[e.jsxs("div",{style:{display:"flex",gap:24,marginBottom:40},children:[e.jsx("div",{style:{flexShrink:0},children:t.photo_url?e.jsx("img",{src:t.photo_url,alt:t.name,style:{width:150,height:200,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.12)"}}):e.jsx("div",{style:{width:150,height:200,background:"var(--gr-tan)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:48,color:"var(--gr-light)"},children:t.name.charAt(0)})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("h1",{style:{fontFamily:"'Merriweather', Georgia, serif",fontSize:28,fontWeight:900,color:"var(--gr-brown)",margin:"0 0 8px"},children:t.name}),(t.birth_date||t.death_date)&&e.jsxs("p",{style:{display:"flex",alignItems:"center",gap:6,fontSize:14,color:"var(--gr-light)",marginBottom:12},children:[e.jsx(z,{size:14}),k()]}),t.bio&&e.jsx("div",{style:{fontSize:15,lineHeight:1.7,color:"var(--gr-text)",maxWidth:700},children:t.bio}),e.jsxs("div",{style:{display:"flex",gap:20,marginTop:16,fontSize:14,color:"var(--gr-light)"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(B,{size:14}),t.works_count," book",t.works_count!==1?"s":""]}),t.followers>0&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:14}),t.followers.toLocaleString()," followers"]})]}),j.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:12},children:j.map(s=>e.jsx(b,{to:`/genre/${encodeURIComponent(s)}`,className:"genre-tag",children:s},s))}),y.length>0&&e.jsxs("div",{style:{marginTop:10,fontSize:13,color:"var(--gr-light)"},children:[e.jsx("strong",{style:{color:"var(--gr-text)"},children:"Influences:"})," ",y.join(", ")]}),t.website&&e.jsx("div",{style:{marginTop:10,fontSize:13},children:e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--gr-teal)",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:6},children:[e.jsx(A,{size:13}),"Author website"]})}),t.source_id&&e.jsx("div",{style:{marginTop:12,fontSize:13},children:e.jsx("a",{href:`https://www.goodreads.com/author/show/${t.source_id}`,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--gr-teal)",textDecoration:"none"},children:"View source profile"})}),!t.source_id&&e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"text",value:a,onChange:s=>m(s.target.value),placeholder:"Source author ID",className:"form-input",style:{width:200,fontSize:13,padding:"6px 10px"}}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:S,disabled:u||!a.trim(),children:[e.jsx(C,{size:14}),u?"Importing...":"Import"]})]})]})]}),e.jsxs("section",{children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title",children:["Books by ",t.name]})}),h.length>0?e.jsx("div",{children:h.map(s=>e.jsx(_,{book:s},s.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No books found"}),e.jsx("p",{children:"No books by this author are in the library yet."})]})]})]})]})}export{W as default};
