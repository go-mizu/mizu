name = "book"
main = "src/index.ts"
compatibility_date = "2026-02-09"
compatibility_flags = ["nodejs_compat"]

[[kv_namespaces]]
binding = "KV"
id = "792dde75c5dc4818af5718f7d63da323"

[[d1_databases]]
binding = "DB"
database_name = "book-db"
database_id = "1e71453e-8a20-4a53-88a1-9bff2e0703a3"

[assets]
directory = "./public"
binding = "ASSETS"

[[queues.producers]]
queue = "book-enrich-queue"
binding = "ENRICH_QUEUE"

[[queues.consumers]]
queue = "book-enrich-queue"
max_batch_size = 5
max_batch_timeout = 10
max_retries = 3
dead_letter_queue = "book-enrich-dlq"

[[analytics_engine_datasets]]
binding = "ANALYTICS"
dataset = "book_api_metrics"

[observability.traces]
enabled = true
head_sampling_rate = 1

[vars]
ENVIRONMENT = "production"
