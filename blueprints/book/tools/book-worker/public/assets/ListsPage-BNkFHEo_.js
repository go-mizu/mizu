import{b as f,j as s,H as T}from"./index-C0ggNRUQ.js";import{r as i,L as h}from"./react-vendor-bJoUFh3v.js";import{S as w,B as _,U as F,m as z}from"./ui-DGMHXml3.js";function E(){const[a,v]=i.useState([]),[m,L]=i.useState([]),[n,b]=i.useState(""),[y,x]=i.useState(!0),[c,g]=i.useState(""),[j,S]=i.useState([]),u=e=>{x(!0),f.getLists(e).then(({lists:t,tags:C})=>{v(t),L(C)}).catch(()=>{}).finally(()=>x(!1))};i.useEffect(()=>{u(),f.getGenres().then(S).catch(()=>{})},[]);const p=e=>{const t=n===e?"":e;b(t),g(""),u(t||void 0)},r=i.useMemo(()=>{if(!c.trim())return a;const e=c.toLowerCase();return a.filter(t=>t.title.toLowerCase().includes(e)||(t.description||"").toLowerCase().includes(e)||(t.tag||"").toLowerCase().includes(e))},[a,c]),N=r.filter(e=>!e.source_url),o=r.filter(e=>e.source_url),l={};for(const e of o){const t=e.tag||"other";l[t]||(l[t]=[]),l[t].push(e)}const k=Object.keys(l).sort();return s.jsxs(s.Fragment,{children:[s.jsx(T,{}),s.jsxs("div",{className:"page-container",children:[s.jsxs("div",{className:"listopia-header",children:[s.jsx("h1",{className:"page-title page-title-lg",children:"Listopia"}),s.jsx("p",{className:"page-subtitle",children:"Curated book lists voted by millions of readers"}),s.jsxs("div",{className:"listopia-search",children:[s.jsx(w,{size:16,className:"listopia-search-icon"}),s.jsx("input",{className:"form-input listopia-search-input",value:c,onChange:e=>g(e.target.value),placeholder:"Search lists..."})]})]}),m.length>0&&s.jsxs("div",{className:"list-tag-bar",children:[s.jsx("button",{className:`list-tag-pill ${n?"":"active"}`,onClick:()=>p(""),children:"All"}),m.map(e=>s.jsx("button",{className:`list-tag-pill ${n===e?"active":""}`,onClick:()=>p(e),children:e},e))]}),y?s.jsx("div",{className:"loading-spinner",children:s.jsx("div",{className:"spinner"})}):r.length===0?s.jsx("div",{className:"empty-state",children:c?s.jsxs(s.Fragment,{children:[s.jsxs("h3",{children:['No lists match "',c,'"']}),s.jsx("p",{children:"Try a different search term."})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:"No lists yet"}),s.jsx("p",{children:"Lists are being imported. Please refresh in a moment."})]})}):s.jsxs(s.Fragment,{children:[N.length>0&&s.jsxs("section",{className:"list-section",children:[s.jsx("h2",{className:"list-section-heading",children:"My Lists"}),s.jsx("div",{className:"list-grid",children:N.map(e=>s.jsx(d,{list:e},e.id))})]}),n||c?o.length>0&&s.jsx("section",{className:"list-section",children:s.jsx("div",{className:"list-grid",children:o.map(e=>s.jsx(d,{list:e},e.id))})}):k.map(e=>s.jsxs("section",{className:"list-section",children:[s.jsx("h2",{className:"list-section-heading",children:e}),s.jsx("div",{className:"list-grid",children:l[e].map(t=>s.jsx(d,{list:t},t.id))})]},e))]}),j.length>0&&s.jsxs("section",{className:"list-section",style:{marginTop:36},children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"list-section-heading",children:"Browse by Genre"}),s.jsx(h,{to:"/browse",className:"section-link",children:"View all"})]}),s.jsx("div",{className:"genre-list",children:j.slice(0,24).map(e=>s.jsxs(h,{to:`/genre/${e.slug}`,className:"genre-tag",children:[e.name,s.jsx("span",{className:"genre-count",children:e.book_count})]},e.slug))})]})]})]})}function d({list:a}){return s.jsxs(h,{to:`/list/${a.id}`,className:"local-list-card",children:[s.jsx("h3",{className:"local-list-title",children:a.title}),a.description&&s.jsx("p",{className:"local-list-description",children:a.description}),s.jsxs("div",{className:"local-list-meta",children:[s.jsxs("span",{className:"source-meta-item",children:[s.jsx(_,{size:12})," ",a.item_count," books"]}),a.voter_count>0&&s.jsxs("span",{className:"source-meta-item",children:[s.jsx(F,{size:12})," ",a.voter_count.toLocaleString()," voters"]}),a.tag&&s.jsxs("span",{className:"source-meta-item list-tag-badge",children:[s.jsx(z,{size:10})," ",a.tag]})]})]})}export{E as default};
