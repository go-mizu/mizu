import{j as e,H as o,b as c}from"./index-_5h7tsLS.js";import{r as a,L as A}from"./react-vendor-bJoUFh3v.js";import{B as u}from"./BookGrid-C9hlJN2i.js";import{j as k,k as v,f as b}from"./ui-hgVKSatf.js";function E(){const[l,N]=a.useState([]),[d,f]=a.useState([]),[h,y]=a.useState([]),[w,m]=a.useState(!0),[x,j]=a.useState(null);if(a.useEffect(()=>{(async()=>{m(!0),j(null);try{const[t,p,g]=await Promise.all([c.getPopular(12),c.getNewReleases(12),c.getGenres()]);N(Array.isArray(t)?t:[]),f(Array.isArray(p)?p:[]),y(Array.isArray(g)?g:[])}catch(t){j(t instanceof Error?t.message:"Failed to load browse data")}finally{m(!1)}})()},[]),w)return e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"loading-spinner",children:e.jsx("div",{className:"spinner"})})]});if(x)return e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Something went wrong"}),e.jsx("p",{children:x})]})})]});const r=Array.isArray(l)?l:[],n=Array.isArray(d)?d:[],i=Array.isArray(h)?h:[];return e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsxs("div",{className:"page-container fade-in",children:[r.length>0&&e.jsxs("section",{className:"page-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title section-title-with-icon",children:[e.jsx(k,{size:18}),"Popular"]})}),e.jsx(u,{books:r})]}),n.length>0&&e.jsxs("section",{className:"page-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title section-title-with-icon",children:[e.jsx(v,{size:18}),"New Releases"]})}),e.jsx(u,{books:n})]}),i.length>0&&e.jsxs("section",{className:"page-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("span",{className:"section-title section-title-with-icon",children:[e.jsx(b,{size:18}),"Genres"]})}),e.jsx("div",{className:"genre-list",children:i.map(s=>e.jsxs(A,{to:`/genre/${encodeURIComponent(s.name)}`,className:"genre-tag genre-pill",children:[s.name,s.book_count>0&&e.jsxs("span",{className:"genre-count",children:["(",s.book_count,")"]})]},s.name))})]}),r.length===0&&n.length===0&&i.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Nothing to browse yet"}),e.jsx("p",{children:"Add some books to get started."})]})]})]})}export{E as default};
