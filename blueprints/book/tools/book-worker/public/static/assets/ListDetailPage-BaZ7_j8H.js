import{b as d,j as s,H as r,B as j}from"./index-Cw4N14fR.js";import{h as u,u as b,r as l,L as n}from"./react-vendor-bJoUFh3v.js";import{A as k,o as g,U as p,n as N,p as v,a as f}from"./ui-Fk1kDDOZ.js";function z(){const{id:a}=u(),t=b(),[e,i]=l.useState(null),[h,x]=l.useState(!0);l.useEffect(()=>{a&&d.getList(Number(a)).then(i).catch(()=>{}).finally(()=>x(!1))},[a]);const m=()=>{!e||!confirm("Delete this list?")||d.deleteList(e.id).then(()=>t("/lists")).catch(()=>{})};if(h)return s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsx("div",{className:"loading-spinner",children:s.jsx("div",{className:"spinner"})})]});if(!e)return s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsx("div",{className:"empty-state",children:s.jsx("h3",{children:"List not found"})})]});const c=e.items||[];return s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsxs("div",{className:"page-container",children:[s.jsxs("div",{className:"list-detail-top-bar",children:[s.jsxs(n,{to:"/lists",className:"back-link",children:[s.jsx(k,{size:14})," Back to Lists"]}),s.jsxs("button",{className:"btn btn-secondary btn-sm btn-danger-text",onClick:m,children:[s.jsx(g,{size:14})," Delete"]})]}),s.jsxs("div",{className:"list-detail-header",children:[s.jsx("h1",{className:"list-detail-title",children:e.title}),e.description&&s.jsx("p",{className:"page-subtitle",children:e.description}),s.jsxs("div",{className:"list-detail-meta",children:[s.jsxs("span",{children:[e.item_count," books"]}),e.voter_count>0&&s.jsxs("span",{className:"meta-with-icon",children:[s.jsx(p,{size:13})," ",e.voter_count.toLocaleString()," voters"]}),e.tag&&s.jsxs("span",{className:"meta-with-icon list-tag-badge",children:[s.jsx(N,{size:12})," ",e.tag]}),e.source_url&&s.jsxs("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"meta-link",children:[s.jsx(v,{size:13})," Source"]})]})]}),c.length>0?s.jsx("div",{className:"list-book-table",children:c.map(o=>o.book&&s.jsx(L,{item:o},o.id))}):s.jsxs("div",{className:"empty-state",children:[s.jsx("h3",{children:"No books in this list yet"}),s.jsx("p",{children:"Books will appear here once they are imported."})]})]})]})}function L({item:a}){const t=a.book,e=t.average_rating||0;return s.jsxs("div",{className:"list-book-row",children:[s.jsx("div",{className:"list-book-rank",children:a.position}),s.jsx(n,{to:`/book/${t.id}`,className:"list-book-cover-link",children:s.jsx(j,{src:t.cover_url,title:t.title,size:"sm"})}),s.jsxs("div",{className:"list-book-info",children:[s.jsx(n,{to:`/book/${t.id}`,className:"list-book-title",children:t.title}),t.series&&s.jsxs("span",{className:"list-book-series",children:["(",t.series,")"]}),s.jsxs("div",{className:"list-book-author",children:["by ",t.author_names||"Unknown"]})]}),s.jsxs("div",{className:"list-book-rating",children:[s.jsx("div",{className:"list-book-stars",children:[1,2,3,4,5].map(i=>s.jsx(f,{size:13,fill:i<=Math.round(e)?"var(--gr-star)":"none",color:i<=Math.round(e)?"var(--gr-star)":"#ccc"},i))}),e>0&&s.jsxs("span",{className:"list-book-avg",children:[e.toFixed(2)," avg"]}),t.ratings_count>0&&s.jsxs("span",{className:"list-book-ratings-count",children:[t.ratings_count.toLocaleString()," ratings"]})]}),a.votes>0&&s.jsxs("div",{className:"list-book-score",children:[s.jsx("span",{className:"list-book-score-num",children:a.votes.toLocaleString()}),s.jsx("span",{className:"list-book-score-label",children:"score"})]})]})}export{z as default};
