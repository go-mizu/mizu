{{define "page/search.html"}}
{{template "layout/app.html" .}}
{{end}}

{{define "search-content"}}
<div class="search-page">
    {{if .Query}}
    <div class="search-header">
        <h1 class="search-title">Search results</h1>
        <p class="search-meta">
            {{if .Results}}
                {{len .Results}} result{{if ne (len .Results) 1}}s{{end}} for "<strong>{{.Query}}</strong>"
            {{else}}
                No results for "<strong>{{.Query}}</strong>"
            {{end}}
        </p>
    </div>

    {{if .Results}}
    <ul class="search-results">
        {{range .Results}}
        <li class="search-result">
            <a href="/page?id={{.ID}}" class="result-link">
                <h2 class="result-title">{{.Title}}</h2>
                <div class="result-meta">
                    <span class="result-wiki">{{.WikiName}}</span>
                    <span class="result-sep">&middot;</span>
                    <span class="result-lang">{{.InLanguage}}</span>
                </div>
            </a>
        </li>
        {{end}}
    </ul>
    {{else}}
    <div class="search-empty">
        <svg class="search-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
        </svg>
        <h2 class="search-empty-title">No articles found</h2>
        <p class="search-empty-text">
            Try different keywords or check your spelling.
            {{if or .WikiName .InLanguage}}
            You can also <a href="/?q={{.Query}}">remove filters</a> to see more results.
            {{end}}
        </p>
    </div>
    {{end}}

    {{else}}
    <div class="search-empty">
        <svg class="search-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
        </svg>
        <h2 class="search-empty-title">Search FineWiki</h2>
        <p class="search-empty-text">
            Enter a search term in the box above to find articles.
        </p>
    </div>
    {{end}}
</div>

<style>
.search-page {
    max-width: 700px;
}

.search-header {
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.search-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--fg);
    margin: 0 0 0.25rem 0;
}

.search-meta {
    font-size: 0.9375rem;
    color: var(--fg-muted);
    margin: 0;
}

.search-meta strong {
    color: var(--fg);
}

.search-results {
    list-style: none;
    padding: 0;
    margin: 0;
}

.search-result {
    margin: 0;
    border-bottom: 1px solid var(--border);
}

.search-result:last-child {
    border-bottom: none;
}

.result-link {
    display: block;
    padding: 1rem 0;
    color: inherit;
    text-decoration: none;
    transition: all 0.15s ease;
}

.result-link:hover {
    text-decoration: none;
}

.result-link:hover .result-title {
    color: var(--accent);
}

.result-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--fg);
    margin: 0 0 0.375rem 0;
    transition: color 0.15s ease;
}

.result-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    color: var(--fg-muted);
}

.result-sep {
    color: var(--border);
}

.result-wiki {
    padding: 0.125rem 0.5rem;
    background: var(--surface);
    border-radius: var(--radius-sm);
}

.search-empty {
    text-align: center;
    padding: 3rem 1rem;
}

.search-empty-icon {
    width: 64px;
    height: 64px;
    color: var(--fg-muted);
    opacity: 0.5;
    margin-bottom: 1rem;
}

.search-empty-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--fg);
    margin: 0 0 0.5rem 0;
}

.search-empty-text {
    font-size: 0.9375rem;
    color: var(--fg-muted);
    margin: 0;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
}
</style>
{{end}}
