import{j as e}from"./markdown-DRpjVqyA.js";import{a as S,r,L as l}from"./react-vendor-DqWpB-k-.js";import{b as c}from"./index-cRIhjQq6.js";import{m as z,S as k,n as j,h as D,o as g,f as E,T as L}from"./ui-DxqIiTN1.js";function I(){const b=S(),[d,x]=r.useState([]),[m,h]=r.useState(0),[N,f]=r.useState(!0),[u,n]=r.useState(null),y=async()=>{try{f(!0);const{sessions:s,total:t}=await c.listSessions(50,0);x(s),h(t)}catch(s){n(s instanceof Error?s.message:"Failed to load sessions")}finally{f(!1)}};r.useEffect(()=>{y()},[]);const p=async()=>{try{const{session:s}=await c.createSession();b(`/ai/session/${s.id}`)}catch(s){n(s instanceof Error?s.message:"Failed to create session")}},v=async(s,t)=>{if(t.preventDefault(),t.stopPropagation(),!!confirm("Delete this session?"))try{await c.deleteSession(s),x(a=>a.filter(o=>o.id!==s)),h(a=>a-1)}catch(a){n(a instanceof Error?a.message:"Failed to delete session")}},w=s=>{const t=new Date(s),o=new Date().getTime()-t.getTime(),i=Math.floor(o/(1e3*60*60*24));return i===0?"Today":i===1?"Yesterday":i<7?`${i} days ago`:t.toLocaleDateString()};return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("header",{className:"sticky top-0 bg-white border-b border-[#e0e0e0] z-50",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{to:"/",className:"p-2 text-[#5f6368] hover:bg-[#f1f3f4] rounded-full transition-colors",children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:24,className:"text-[#1a73e8]"}),e.jsx("h1",{className:"text-xl font-medium text-[#202124]",children:"AI Research Sessions"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-[#1a73e8] text-white rounded-full hover:bg-[#1557b0] transition-colors",children:[e.jsx(j,{size:18}),"New Session"]}),e.jsx(l,{to:"/settings",className:"p-2 text-[#5f6368] hover:bg-[#f1f3f4] rounded-full transition-colors",children:e.jsx(D,{size:20})})]})]})})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-lg",children:u}),N?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#1a73e8] border-t-transparent rounded-full animate-spin"})}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{size:48,className:"mx-auto text-[#9aa0a6] mb-4"}),e.jsx("h2",{className:"text-xl font-medium text-[#202124] mb-2",children:"No research sessions yet"}),e.jsx("p",{className:"text-[#5f6368] mb-6",children:"Start a new AI research session to explore topics in depth"}),e.jsxs("button",{type:"button",onClick:p,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#1a73e8] text-white rounded-full hover:bg-[#1557b0] transition-colors",children:[e.jsx(j,{size:20}),"Start New Session"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-[#5f6368] mb-4",children:[m," session",m!==1?"s":""]}),e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsx(l,{to:`/ai/session/${s.id}`,className:"block p-4 bg-white border border-[#e0e0e0] rounded-lg hover:border-[#1a73e8] hover:shadow-sm transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(g,{size:16,className:"text-[#5f6368]"}),e.jsx("h3",{className:"font-medium text-[#202124] truncate",children:s.title||"Untitled Session"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#5f6368]",children:[e.jsx(E,{size:14}),e.jsx("span",{children:w(s.updated_at)})]})]}),e.jsx("button",{type:"button",onClick:t=>v(s.id,t),className:"p-2 text-[#5f6368] hover:text-red-600 hover:bg-red-50 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(L,{size:16})})]})},s.id))})]})]})]})}export{I as default};
