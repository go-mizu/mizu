{
  "version": 3,
  "sources": ["../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/_internal/utils.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/perf_hooks/performance.mjs", "../../../node_modules/.pnpm/@cloudflare+unenv-preset@2.12.0_unenv@2.0.0-rc.24_workerd@1.20260131.0/node_modules/@cloudflare/unenv-preset/dist/runtime/polyfill/performance.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/process/hrtime.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/process/process.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/tty/read-stream.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/tty/write-stream.mjs", "../../../node_modules/.pnpm/unenv@2.0.0-rc.24/node_modules/unenv/dist/runtime/node/internal/process/node-version.mjs", "../../../node_modules/.pnpm/@cloudflare+unenv-preset@2.12.0_unenv@2.0.0-rc.24_workerd@1.20260131.0/node_modules/@cloudflare/unenv-preset/dist/runtime/node/process.mjs", "../../../node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/_virtual_unenv_global_polyfill-@cloudflare-unenv-preset-node-process", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/compose.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/request/constants.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/utils/body.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/utils/url.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/request.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/utils/html.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/context.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/utils/constants.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/hono-base.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/hono.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/middleware/cors/index.js", "../../../node_modules/.pnpm/hono@4.11.7/node_modules/hono/dist/middleware/timing/timing.js", "../../../src/routes/health.ts", "../../../src/engines/engine.ts", "../../../src/lib/html-parser.ts", "../../../src/engines/google.ts", "../../../src/engines/bing.ts", "../../../src/engines/duckduckgo.ts", "../../../src/engines/brave.ts", "../../../src/engines/wikipedia.ts", "../../../src/engines/youtube.ts", "../../../src/engines/reddit.ts", "../../../src/lib/xml-parser.ts", "../../../src/engines/arxiv.ts", "../../../src/engines/github.ts", "../../../src/engines/metasearch.ts", "../../../src/store/cache.ts", "../../../src/store/kv.ts", "../../../src/services/search.ts", "../../../src/services/bang.ts", "../../../src/services/instant.ts", "../../../src/services/knowledge.ts", "../../../src/routes/search.ts", "../../../src/services/suggest.ts", "../../../src/routes/suggest.ts", "../../../src/routes/instant.ts", "../../../src/routes/knowledge.ts", "../../../src/lib/utils.ts", "../../../src/routes/preferences.ts", "../../../src/routes/lenses.ts", "../../../src/routes/history.ts", "../../../src/routes/settings.ts", "../../../src/routes/bangs.ts", "../../../src/routes/widgets.ts", "../../../src/index.ts", "../../../node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-a0xNuq/middleware-insertion-facade.js", "../../../node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/common.ts", "../bundle-a0xNuq/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/.wrangler/tmp/dev-JN9pr5",
  "sourcesContent": ["/* @__NO_SIDE_EFFECTS__ */\nexport function rawHeaders(headers) {\n\tconst rawHeaders = [];\n\tfor (const key in headers) {\n\t\tif (Array.isArray(headers[key])) {\n\t\t\tfor (const h of headers[key]) {\n\t\t\t\trawHeaders.push(key, h);\n\t\t\t}\n\t\t} else {\n\t\t\trawHeaders.push(key, headers[key]);\n\t\t}\n\t}\n\treturn rawHeaders;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function mergeFns(...functions) {\n\treturn function(...args) {\n\t\tfor (const fn of functions) {\n\t\t\tfn(...args);\n\t\t}\n\t};\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function createNotImplementedError(name) {\n\treturn new Error(`[unenv] ${name} is not implemented yet!`);\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplemented(name) {\n\tconst fn = () => {\n\t\tthrow createNotImplementedError(name);\n\t};\n\treturn Object.assign(fn, { __unenv__: true });\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedAsync(name) {\n\tconst fn = notImplemented(name);\n\tfn.__promisify__ = () => notImplemented(name + \".__promisify__\");\n\tfn.native = fn;\n\treturn fn;\n}\n/* @__NO_SIDE_EFFECTS__ */\nexport function notImplementedClass(name) {\n\treturn class {\n\t\t__unenv__ = true;\n\t\tconstructor() {\n\t\t\tthrow new Error(`[unenv] ${name} is not implemented yet!`);\n\t\t}\n\t};\n}\n", "import { createNotImplementedError } from \"../../../_internal/utils.mjs\";\nconst _timeOrigin = globalThis.performance?.timeOrigin ?? Date.now();\nconst _performanceNow = globalThis.performance?.now ? globalThis.performance.now.bind(globalThis.performance) : () => Date.now() - _timeOrigin;\nconst nodeTiming = {\n\tname: \"node\",\n\tentryType: \"node\",\n\tstartTime: 0,\n\tduration: 0,\n\tnodeStart: 0,\n\tv8Start: 0,\n\tbootstrapComplete: 0,\n\tenvironment: 0,\n\tloopStart: 0,\n\tloopExit: 0,\n\tidleTime: 0,\n\tuvMetricsInfo: {\n\t\tloopCount: 0,\n\t\tevents: 0,\n\t\teventsWaiting: 0\n\t},\n\tdetail: undefined,\n\ttoJSON() {\n\t\treturn this;\n\t}\n};\n// PerformanceEntry\nexport class PerformanceEntry {\n\t__unenv__ = true;\n\tdetail;\n\tentryType = \"event\";\n\tname;\n\tstartTime;\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tthis.startTime = options?.startTime || _performanceNow();\n\t\tthis.detail = options?.detail;\n\t}\n\tget duration() {\n\t\treturn _performanceNow() - this.startTime;\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tentryType: this.entryType,\n\t\t\tstartTime: this.startTime,\n\t\t\tduration: this.duration,\n\t\t\tdetail: this.detail\n\t\t};\n\t}\n}\n// PerformanceMark\nexport const PerformanceMark = class PerformanceMark extends PerformanceEntry {\n\tentryType = \"mark\";\n\tconstructor() {\n\t\t// @ts-ignore\n\t\tsuper(...arguments);\n\t}\n\tget duration() {\n\t\treturn 0;\n\t}\n};\n// PerformanceMark\nexport class PerformanceMeasure extends PerformanceEntry {\n\tentryType = \"measure\";\n}\n// PerformanceResourceTiming\nexport class PerformanceResourceTiming extends PerformanceEntry {\n\tentryType = \"resource\";\n\tserverTiming = [];\n\tconnectEnd = 0;\n\tconnectStart = 0;\n\tdecodedBodySize = 0;\n\tdomainLookupEnd = 0;\n\tdomainLookupStart = 0;\n\tencodedBodySize = 0;\n\tfetchStart = 0;\n\tinitiatorType = \"\";\n\tname = \"\";\n\tnextHopProtocol = \"\";\n\tredirectEnd = 0;\n\tredirectStart = 0;\n\trequestStart = 0;\n\tresponseEnd = 0;\n\tresponseStart = 0;\n\tsecureConnectionStart = 0;\n\tstartTime = 0;\n\ttransferSize = 0;\n\tworkerStart = 0;\n\tresponseStatus = 0;\n}\n// PerformanceObserverEntryList\nexport class PerformanceObserverEntryList {\n\t__unenv__ = true;\n\tgetEntries() {\n\t\treturn [];\n\t}\n\tgetEntriesByName(_name, _type) {\n\t\treturn [];\n\t}\n\tgetEntriesByType(type) {\n\t\treturn [];\n\t}\n}\n// Performance\nexport class Performance {\n\t__unenv__ = true;\n\ttimeOrigin = _timeOrigin;\n\teventCounts = new Map();\n\t_entries = [];\n\t_resourceTimingBufferSize = 0;\n\tnavigation = undefined;\n\ttiming = undefined;\n\ttimerify(_fn, _options) {\n\t\tthrow createNotImplementedError(\"Performance.timerify\");\n\t}\n\tget nodeTiming() {\n\t\treturn nodeTiming;\n\t}\n\teventLoopUtilization() {\n\t\treturn {};\n\t}\n\tmarkResourceTiming() {\n\t\t// TODO: create a new PerformanceResourceTiming entry\n\t\t// so that performance.getEntries, getEntriesByName, and getEntriesByType return it\n\t\t// see: https://nodejs.org/api/perf_hooks.html#performancemarkresourcetimingtiminginfo-requestedurl-initiatortype-global-cachemode-bodyinfo-responsestatus-deliverytype\n\t\treturn new PerformanceResourceTiming(\"\");\n\t}\n\tonresourcetimingbufferfull = null;\n\tnow() {\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Performance/now\n\t\tif (this.timeOrigin === _timeOrigin) {\n\t\t\treturn _performanceNow();\n\t\t}\n\t\treturn Date.now() - this.timeOrigin;\n\t}\n\tclearMarks(markName) {\n\t\tthis._entries = markName ? this._entries.filter((e) => e.name !== markName) : this._entries.filter((e) => e.entryType !== \"mark\");\n\t}\n\tclearMeasures(measureName) {\n\t\tthis._entries = measureName ? this._entries.filter((e) => e.name !== measureName) : this._entries.filter((e) => e.entryType !== \"measure\");\n\t}\n\tclearResourceTimings() {\n\t\tthis._entries = this._entries.filter((e) => e.entryType !== \"resource\" || e.entryType !== \"navigation\");\n\t}\n\tgetEntries() {\n\t\treturn this._entries;\n\t}\n\tgetEntriesByName(name, type) {\n\t\treturn this._entries.filter((e) => e.name === name && (!type || e.entryType === type));\n\t}\n\tgetEntriesByType(type) {\n\t\treturn this._entries.filter((e) => e.entryType === type);\n\t}\n\tmark(name, options) {\n\t\t// @ts-expect-error constructor is not protected\n\t\tconst entry = new PerformanceMark(name, options);\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tmeasure(measureName, startOrMeasureOptions, endMark) {\n\t\tlet start;\n\t\tlet end;\n\t\tif (typeof startOrMeasureOptions === \"string\") {\n\t\t\tstart = this.getEntriesByName(startOrMeasureOptions, \"mark\")[0]?.startTime;\n\t\t\tend = this.getEntriesByName(endMark, \"mark\")[0]?.startTime;\n\t\t} else {\n\t\t\tstart = Number.parseFloat(startOrMeasureOptions?.start) || this.now();\n\t\t\tend = Number.parseFloat(startOrMeasureOptions?.end) || this.now();\n\t\t}\n\t\tconst entry = new PerformanceMeasure(measureName, {\n\t\t\tstartTime: start,\n\t\t\tdetail: {\n\t\t\t\tstart,\n\t\t\t\tend\n\t\t\t}\n\t\t});\n\t\tthis._entries.push(entry);\n\t\treturn entry;\n\t}\n\tsetResourceTimingBufferSize(maxSize) {\n\t\tthis._resourceTimingBufferSize = maxSize;\n\t}\n\taddEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.addEventListener\");\n\t}\n\tremoveEventListener(type, listener, options) {\n\t\tthrow createNotImplementedError(\"Performance.removeEventListener\");\n\t}\n\tdispatchEvent(event) {\n\t\tthrow createNotImplementedError(\"Performance.dispatchEvent\");\n\t}\n\ttoJSON() {\n\t\treturn this;\n\t}\n}\n// PerformanceObserver\nexport class PerformanceObserver {\n\t__unenv__ = true;\n\tstatic supportedEntryTypes = [];\n\t_callback = null;\n\tconstructor(callback) {\n\t\tthis._callback = callback;\n\t}\n\ttakeRecords() {\n\t\treturn [];\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.disconnect\");\n\t}\n\tobserve(options) {\n\t\tthrow createNotImplementedError(\"PerformanceObserver.observe\");\n\t}\n\tbind(fn) {\n\t\treturn fn;\n\t}\n\trunInAsyncScope(fn, thisArg, ...args) {\n\t\treturn fn.call(thisArg, ...args);\n\t}\n\tasyncId() {\n\t\treturn 0;\n\t}\n\ttriggerAsyncId() {\n\t\treturn 0;\n\t}\n\temitDestroy() {\n\t\treturn this;\n\t}\n}\n// workerd implements a subset of globalThis.performance (as of last check, only timeOrigin set to 0 + now() implemented)\n// We already use performance.now() from globalThis.performance, if provided (see top of this file)\n// If we detect this condition, we can just use polyfill instead.\nexport const performance = globalThis.performance && \"addEventListener\" in globalThis.performance ? globalThis.performance : new Performance();\n", "import {\n  performance,\n  Performance,\n  PerformanceEntry,\n  PerformanceMark,\n  PerformanceMeasure,\n  PerformanceObserver,\n  PerformanceObserverEntryList,\n  PerformanceResourceTiming\n} from \"node:perf_hooks\";\nglobalThis.performance = performance;\nglobalThis.Performance = Performance;\nglobalThis.PerformanceEntry = PerformanceEntry;\nglobalThis.PerformanceMark = PerformanceMark;\nglobalThis.PerformanceMeasure = PerformanceMeasure;\nglobalThis.PerformanceObserver = PerformanceObserver;\nglobalThis.PerformanceObserverEntryList = PerformanceObserverEntryList;\nglobalThis.PerformanceResourceTiming = PerformanceResourceTiming;\n", "// https://nodejs.org/api/process.html#processhrtime\nexport const hrtime = /* @__PURE__ */ Object.assign(function hrtime(startTime) {\n\tconst now = Date.now();\n\t// millis to seconds\n\tconst seconds = Math.trunc(now / 1e3);\n\t// convert millis to nanos\n\tconst nanos = now % 1e3 * 1e6;\n\tif (startTime) {\n\t\tlet diffSeconds = seconds - startTime[0];\n\t\tlet diffNanos = nanos - startTime[0];\n\t\tif (diffNanos < 0) {\n\t\t\tdiffSeconds = diffSeconds - 1;\n\t\t\tdiffNanos = 1e9 + diffNanos;\n\t\t}\n\t\treturn [diffSeconds, diffNanos];\n\t}\n\treturn [seconds, nanos];\n}, { bigint: function bigint() {\n\t// Convert milliseconds to nanoseconds\n\treturn BigInt(Date.now() * 1e6);\n} });\n", "import { EventEmitter } from \"node:events\";\nimport { ReadStream, WriteStream } from \"node:tty\";\nimport { notImplemented, createNotImplementedError } from \"../../../_internal/utils.mjs\";\n// node-version.ts is generated at build time\nimport { NODE_VERSION } from \"./node-version.mjs\";\nexport class Process extends EventEmitter {\n\tenv;\n\thrtime;\n\tnextTick;\n\tconstructor(impl) {\n\t\tsuper();\n\t\tthis.env = impl.env;\n\t\tthis.hrtime = impl.hrtime;\n\t\tthis.nextTick = impl.nextTick;\n\t\tfor (const prop of [...Object.getOwnPropertyNames(Process.prototype), ...Object.getOwnPropertyNames(EventEmitter.prototype)]) {\n\t\t\tconst value = this[prop];\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tthis[prop] = value.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\t// --- event emitter ---\n\temitWarning(warning, type, code) {\n\t\tconsole.warn(`${code ? `[${code}] ` : \"\"}${type ? `${type}: ` : \"\"}${warning}`);\n\t}\n\temit(...args) {\n\t\t// @ts-ignore\n\t\treturn super.emit(...args);\n\t}\n\tlisteners(eventName) {\n\t\treturn super.listeners(eventName);\n\t}\n\t// --- stdio (lazy initializers) ---\n\t#stdin;\n\t#stdout;\n\t#stderr;\n\tget stdin() {\n\t\treturn this.#stdin ??= new ReadStream(0);\n\t}\n\tget stdout() {\n\t\treturn this.#stdout ??= new WriteStream(1);\n\t}\n\tget stderr() {\n\t\treturn this.#stderr ??= new WriteStream(2);\n\t}\n\t// --- cwd ---\n\t#cwd = \"/\";\n\tchdir(cwd) {\n\t\tthis.#cwd = cwd;\n\t}\n\tcwd() {\n\t\treturn this.#cwd;\n\t}\n\t// --- dummy props and getters ---\n\tarch = \"\";\n\tplatform = \"\";\n\targv = [];\n\targv0 = \"\";\n\texecArgv = [];\n\texecPath = \"\";\n\ttitle = \"\";\n\tpid = 200;\n\tppid = 100;\n\tget version() {\n\t\treturn `v${NODE_VERSION}`;\n\t}\n\tget versions() {\n\t\treturn { node: NODE_VERSION };\n\t}\n\tget allowedNodeEnvironmentFlags() {\n\t\treturn new Set();\n\t}\n\tget sourceMapsEnabled() {\n\t\treturn false;\n\t}\n\tget debugPort() {\n\t\treturn 0;\n\t}\n\tget throwDeprecation() {\n\t\treturn false;\n\t}\n\tget traceDeprecation() {\n\t\treturn false;\n\t}\n\tget features() {\n\t\treturn {};\n\t}\n\tget release() {\n\t\treturn {};\n\t}\n\tget connected() {\n\t\treturn false;\n\t}\n\tget config() {\n\t\treturn {};\n\t}\n\tget moduleLoadList() {\n\t\treturn [];\n\t}\n\tconstrainedMemory() {\n\t\treturn 0;\n\t}\n\tavailableMemory() {\n\t\treturn 0;\n\t}\n\tuptime() {\n\t\treturn 0;\n\t}\n\tresourceUsage() {\n\t\treturn {};\n\t}\n\t// --- noop methods ---\n\tref() {\n\t\t// noop\n\t}\n\tunref() {\n\t\t// noop\n\t}\n\t// --- unimplemented methods ---\n\tumask() {\n\t\tthrow createNotImplementedError(\"process.umask\");\n\t}\n\tgetBuiltinModule() {\n\t\treturn undefined;\n\t}\n\tgetActiveResourcesInfo() {\n\t\tthrow createNotImplementedError(\"process.getActiveResourcesInfo\");\n\t}\n\texit() {\n\t\tthrow createNotImplementedError(\"process.exit\");\n\t}\n\treallyExit() {\n\t\tthrow createNotImplementedError(\"process.reallyExit\");\n\t}\n\tkill() {\n\t\tthrow createNotImplementedError(\"process.kill\");\n\t}\n\tabort() {\n\t\tthrow createNotImplementedError(\"process.abort\");\n\t}\n\tdlopen() {\n\t\tthrow createNotImplementedError(\"process.dlopen\");\n\t}\n\tsetSourceMapsEnabled() {\n\t\tthrow createNotImplementedError(\"process.setSourceMapsEnabled\");\n\t}\n\tloadEnvFile() {\n\t\tthrow createNotImplementedError(\"process.loadEnvFile\");\n\t}\n\tdisconnect() {\n\t\tthrow createNotImplementedError(\"process.disconnect\");\n\t}\n\tcpuUsage() {\n\t\tthrow createNotImplementedError(\"process.cpuUsage\");\n\t}\n\tsetUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.setUncaughtExceptionCaptureCallback\");\n\t}\n\thasUncaughtExceptionCaptureCallback() {\n\t\tthrow createNotImplementedError(\"process.hasUncaughtExceptionCaptureCallback\");\n\t}\n\tinitgroups() {\n\t\tthrow createNotImplementedError(\"process.initgroups\");\n\t}\n\topenStdin() {\n\t\tthrow createNotImplementedError(\"process.openStdin\");\n\t}\n\tassert() {\n\t\tthrow createNotImplementedError(\"process.assert\");\n\t}\n\tbinding() {\n\t\tthrow createNotImplementedError(\"process.binding\");\n\t}\n\t// --- attached interfaces ---\n\tpermission = { has: /* @__PURE__ */ notImplemented(\"process.permission.has\") };\n\treport = {\n\t\tdirectory: \"\",\n\t\tfilename: \"\",\n\t\tsignal: \"SIGUSR2\",\n\t\tcompact: false,\n\t\treportOnFatalError: false,\n\t\treportOnSignal: false,\n\t\treportOnUncaughtException: false,\n\t\tgetReport: /* @__PURE__ */ notImplemented(\"process.report.getReport\"),\n\t\twriteReport: /* @__PURE__ */ notImplemented(\"process.report.writeReport\")\n\t};\n\tfinalization = {\n\t\tregister: /* @__PURE__ */ notImplemented(\"process.finalization.register\"),\n\t\tunregister: /* @__PURE__ */ notImplemented(\"process.finalization.unregister\"),\n\t\tregisterBeforeExit: /* @__PURE__ */ notImplemented(\"process.finalization.registerBeforeExit\")\n\t};\n\tmemoryUsage = Object.assign(() => ({\n\t\tarrayBuffers: 0,\n\t\trss: 0,\n\t\texternal: 0,\n\t\theapTotal: 0,\n\t\theapUsed: 0\n\t}), { rss: () => 0 });\n\t// --- undefined props ---\n\tmainModule = undefined;\n\tdomain = undefined;\n\t// optional\n\tsend = undefined;\n\texitCode = undefined;\n\tchannel = undefined;\n\tgetegid = undefined;\n\tgeteuid = undefined;\n\tgetgid = undefined;\n\tgetgroups = undefined;\n\tgetuid = undefined;\n\tsetegid = undefined;\n\tseteuid = undefined;\n\tsetgid = undefined;\n\tsetgroups = undefined;\n\tsetuid = undefined;\n\t// internals\n\t_events = undefined;\n\t_eventsCount = undefined;\n\t_exiting = undefined;\n\t_maxListeners = undefined;\n\t_debugEnd = undefined;\n\t_debugProcess = undefined;\n\t_fatalException = undefined;\n\t_getActiveHandles = undefined;\n\t_getActiveRequests = undefined;\n\t_kill = undefined;\n\t_preload_modules = undefined;\n\t_rawDebug = undefined;\n\t_startProfilerIdleNotifier = undefined;\n\t_stopProfilerIdleNotifier = undefined;\n\t_tickCallback = undefined;\n\t_disconnect = undefined;\n\t_handleQueue = undefined;\n\t_pendingMessage = undefined;\n\t_channel = undefined;\n\t_send = undefined;\n\t_linkedBinding = undefined;\n}\n", "export class ReadStream {\n\tfd;\n\tisRaw = false;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tsetRawMode(mode) {\n\t\tthis.isRaw = mode;\n\t\treturn this;\n\t}\n}\n", "export class WriteStream {\n\tfd;\n\tcolumns = 80;\n\trows = 24;\n\tisTTY = false;\n\tconstructor(fd) {\n\t\tthis.fd = fd;\n\t}\n\tclearLine(dir, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tclearScreenDown(callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tcursorTo(x, y, callback) {\n\t\tcallback && typeof callback === \"function\" && callback();\n\t\treturn false;\n\t}\n\tmoveCursor(dx, dy, callback) {\n\t\tcallback && callback();\n\t\treturn false;\n\t}\n\tgetColorDepth(env) {\n\t\treturn 1;\n\t}\n\thasColors(count, env) {\n\t\treturn false;\n\t}\n\tgetWindowSize() {\n\t\treturn [this.columns, this.rows];\n\t}\n\twrite(str, encoding, cb) {\n\t\tif (str instanceof Uint8Array) {\n\t\t\tstr = new TextDecoder().decode(str);\n\t\t}\n\t\ttry {\n\t\t\tconsole.log(str);\n\t\t} catch {}\n\t\tcb && typeof cb === \"function\" && cb();\n\t\treturn false;\n\t}\n}\n", "// Extracted from .nvmrc\nexport const NODE_VERSION = \"22.14.0\";\n", "import { hrtime as UnenvHrTime } from \"unenv/node/internal/process/hrtime\";\nimport { Process as UnenvProcess } from \"unenv/node/internal/process/process\";\nconst globalProcess = globalThis[\"process\"];\nexport const getBuiltinModule = globalProcess.getBuiltinModule;\nconst workerdProcess = getBuiltinModule(\"node:process\");\nconst isWorkerdProcessV2 = globalThis.Cloudflare.compatibilityFlags.enable_nodejs_process_v2;\nconst unenvProcess = new UnenvProcess({\n  env: globalProcess.env,\n  // `hrtime` is only available from workerd process v2\n  hrtime: isWorkerdProcessV2 ? workerdProcess.hrtime : UnenvHrTime,\n  // `nextTick` is available from workerd process v1\n  nextTick: workerdProcess.nextTick\n});\nexport const { exit, features, platform } = workerdProcess;\nexport const {\n  // Always implemented by workerd\n  env,\n  // Only implemented in workerd v2\n  hrtime,\n  // Always implemented by workerd\n  nextTick\n} = unenvProcess;\nexport const {\n  _channel,\n  _disconnect,\n  _events,\n  _eventsCount,\n  _handleQueue,\n  _maxListeners,\n  _pendingMessage,\n  _send,\n  assert,\n  disconnect,\n  mainModule\n} = unenvProcess;\nexport const {\n  // @ts-expect-error `_debugEnd` is missing typings\n  _debugEnd,\n  // @ts-expect-error `_debugProcess` is missing typings\n  _debugProcess,\n  // @ts-expect-error `_exiting` is missing typings\n  _exiting,\n  // @ts-expect-error `_fatalException` is missing typings\n  _fatalException,\n  // @ts-expect-error `_getActiveHandles` is missing typings\n  _getActiveHandles,\n  // @ts-expect-error `_getActiveRequests` is missing typings\n  _getActiveRequests,\n  // @ts-expect-error `_kill` is missing typings\n  _kill,\n  // @ts-expect-error `_linkedBinding` is missing typings\n  _linkedBinding,\n  // @ts-expect-error `_preload_modules` is missing typings\n  _preload_modules,\n  // @ts-expect-error `_rawDebug` is missing typings\n  _rawDebug,\n  // @ts-expect-error `_startProfilerIdleNotifier` is missing typings\n  _startProfilerIdleNotifier,\n  // @ts-expect-error `_stopProfilerIdleNotifier` is missing typings\n  _stopProfilerIdleNotifier,\n  // @ts-expect-error `_tickCallback` is missing typings\n  _tickCallback,\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  arch,\n  argv,\n  argv0,\n  availableMemory,\n  // @ts-expect-error `binding` is missing typings\n  binding,\n  channel,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  // @ts-expect-error `domain` is missing typings\n  domain,\n  emit,\n  emitWarning,\n  eventNames,\n  execArgv,\n  execPath,\n  exitCode,\n  finalization,\n  getActiveResourcesInfo,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getMaxListeners,\n  getuid,\n  hasUncaughtExceptionCaptureCallback,\n  // @ts-expect-error `initgroups` is missing typings\n  initgroups,\n  kill,\n  listenerCount,\n  listeners,\n  loadEnvFile,\n  memoryUsage,\n  // @ts-expect-error `moduleLoadList` is missing typings\n  moduleLoadList,\n  off,\n  on,\n  once,\n  // @ts-expect-error `openStdin` is missing typings\n  openStdin,\n  permission,\n  pid,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  // @ts-expect-error `reallyExit` is missing typings\n  reallyExit,\n  ref,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  send,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  setuid,\n  setUncaughtExceptionCaptureCallback,\n  sourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  throwDeprecation,\n  title,\n  traceDeprecation,\n  umask,\n  unref,\n  uptime,\n  version,\n  versions\n} = isWorkerdProcessV2 ? workerdProcess : unenvProcess;\nconst _process = {\n  abort,\n  addListener,\n  allowedNodeEnvironmentFlags,\n  hasUncaughtExceptionCaptureCallback,\n  setUncaughtExceptionCaptureCallback,\n  loadEnvFile,\n  sourceMapsEnabled,\n  arch,\n  argv,\n  argv0,\n  chdir,\n  config,\n  connected,\n  constrainedMemory,\n  availableMemory,\n  cpuUsage,\n  cwd,\n  debugPort,\n  dlopen,\n  disconnect,\n  emit,\n  emitWarning,\n  env,\n  eventNames,\n  execArgv,\n  execPath,\n  exit,\n  finalization,\n  features,\n  getBuiltinModule,\n  getActiveResourcesInfo,\n  getMaxListeners,\n  hrtime,\n  kill,\n  listeners,\n  listenerCount,\n  memoryUsage,\n  nextTick,\n  on,\n  off,\n  once,\n  pid,\n  platform,\n  ppid,\n  prependListener,\n  prependOnceListener,\n  rawListeners,\n  release,\n  removeAllListeners,\n  removeListener,\n  report,\n  resourceUsage,\n  setMaxListeners,\n  setSourceMapsEnabled,\n  stderr,\n  stdin,\n  stdout,\n  title,\n  throwDeprecation,\n  traceDeprecation,\n  umask,\n  uptime,\n  version,\n  versions,\n  // @ts-expect-error old API\n  domain,\n  initgroups,\n  moduleLoadList,\n  reallyExit,\n  openStdin,\n  assert,\n  binding,\n  send,\n  exitCode,\n  channel,\n  getegid,\n  geteuid,\n  getgid,\n  getgroups,\n  getuid,\n  setegid,\n  seteuid,\n  setgid,\n  setgroups,\n  setuid,\n  permission,\n  mainModule,\n  _events,\n  _eventsCount,\n  _exiting,\n  _maxListeners,\n  _debugEnd,\n  _debugProcess,\n  _fatalException,\n  _getActiveHandles,\n  _getActiveRequests,\n  _kill,\n  _preload_modules,\n  _rawDebug,\n  _startProfilerIdleNotifier,\n  _stopProfilerIdleNotifier,\n  _tickCallback,\n  _disconnect,\n  _handleQueue,\n  _pendingMessage,\n  _channel,\n  _send,\n  _linkedBinding\n};\nexport default _process;\n", "import { default as defaultExport } from \"@cloudflare/unenv-preset/node/process\";\nglobalThis.process = defaultExport;", "// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = /* @__PURE__ */ Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  /**\n   * `.raw` can get the raw Request object.\n   *\n   * @see {@link https://hono.dev/docs/api/request#raw}\n   *\n   * @example\n   * ```ts\n   * // For Cloudflare Workers\n   * app.post('/', async (c) => {\n   *   const metadata = c.req.raw.cf?.hostMetadata?\n   *   ...\n   * })\n   * ```\n   */\n  raw;\n  #validatedData;\n  // Short name of validatedData\n  #matchResult;\n  routeIndex = 0;\n  /**\n   * `.path` can get the pathname of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#path}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const pathname = c.req.path // `/about/me`\n   * })\n   * ```\n   */\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  /**\n   * `.json()` can parse Request body of type `application/json`\n   *\n   * @see {@link https://hono.dev/docs/api/request#json}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.json()\n   * })\n   * ```\n   */\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  /**\n   * `.text()` can parse Request body of type `text/plain`\n   *\n   * @see {@link https://hono.dev/docs/api/request#text}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.text()\n   * })\n   * ```\n   */\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  /**\n   * `.arrayBuffer()` parse Request body as an `ArrayBuffer`\n   *\n   * @see {@link https://hono.dev/docs/api/request#arraybuffer}\n   *\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.arrayBuffer()\n   * })\n   * ```\n   */\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  /**\n   * Parses the request body as a `Blob`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.blob();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#blob\n   */\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  /**\n   * Parses the request body as `FormData`.\n   * @example\n   * ```ts\n   * app.post('/entry', async (c) => {\n   *   const body = await c.req.formData();\n   * });\n   * ```\n   * @see https://hono.dev/docs/api/request#formdata\n   */\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  /**\n   * Adds validated data to the request.\n   *\n   * @param target - The target of the validation.\n   * @param data - The validated data to add.\n   */\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  /**\n   * `.url()` can get the request url strings.\n   *\n   * @see {@link https://hono.dev/docs/api/request#url}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const url = c.req.url // `http://localhost:8787/about/me`\n   *   ...\n   * })\n   * ```\n   */\n  get url() {\n    return this.raw.url;\n  }\n  /**\n   * `.method()` can get the method name of the request.\n   *\n   * @see {@link https://hono.dev/docs/api/request#method}\n   *\n   * @example\n   * ```ts\n   * app.get('/about/me', (c) => {\n   *   const method = c.req.method // `GET`\n   * })\n   * ```\n   */\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  /**\n   * `.matchedRoutes()` can return a matched route in the handler\n   *\n   * @deprecated\n   *\n   * Use matchedRoutes helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#matchedroutes}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async function logger(c, next) {\n   *   await next()\n   *   c.req.matchedRoutes.forEach(({ handler, method, path }, i) => {\n   *     const name = handler.name || (handler.length < 2 ? '[handler]' : '[middleware]')\n   *     console.log(\n   *       method,\n   *       ' ',\n   *       path,\n   *       ' '.repeat(Math.max(10 - path.length, 0)),\n   *       name,\n   *       i === c.req.routeIndex ? '<- respond from here' : ''\n   *     )\n   *   })\n   * })\n   * ```\n   */\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  /**\n   * `routePath()` can retrieve the path registered within the handler\n   *\n   * @deprecated\n   *\n   * Use routePath helper defined in \"hono/route\" instead.\n   *\n   * @see {@link https://hono.dev/docs/api/request#routepath}\n   *\n   * @example\n   * ```ts\n   * app.get('/posts/:id', (c) => {\n   *   return c.json({ path: c.req.routePath })\n   * })\n   * ```\n   */\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  /**\n   * `.env` can get bindings (environment variables, secrets, KV namespaces, D1 database, R2 bucket etc.) in Cloudflare Workers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#env}\n   *\n   * @example\n   * ```ts\n   * // Environment object for Cloudflare Workers\n   * app.get('*', async c => {\n   *   const counter = c.env.COUNTER\n   * })\n   * ```\n   */\n  env = {};\n  #var;\n  finalized = false;\n  /**\n   * `.error` can get the error object from the middleware if the Handler throws an error.\n   *\n   * @see {@link https://hono.dev/docs/api/context#error}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   await next()\n   *   if (c.error) {\n   *     // do something...\n   *   }\n   * })\n   * ```\n   */\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  /**\n   * Creates an instance of the Context class.\n   *\n   * @param req - The Request object.\n   * @param options - Optional configuration options for the context.\n   */\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  /**\n   * `.req` is the instance of {@link HonoRequest}.\n   */\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#event}\n   * The FetchEvent associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have a FetchEvent.\n   */\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#executionctx}\n   * The ExecutionContext associated with the current request.\n   *\n   * @throws Will throw an error if the context does not have an ExecutionContext.\n   */\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  /**\n   * @see {@link https://hono.dev/docs/api/context#res}\n   * The Response object for the current request.\n   */\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  /**\n   * Sets the Response object for the current request.\n   *\n   * @param _res - The Response object to set.\n   */\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  /**\n   * `.render()` can create a response within a layout.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   return c.render('Hello!')\n   * })\n   * ```\n   */\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  /**\n   * Sets the layout for the response.\n   *\n   * @param layout - The layout to set.\n   * @returns The layout function.\n   */\n  setLayout = (layout) => this.#layout = layout;\n  /**\n   * Gets the current layout for the response.\n   *\n   * @returns The current layout function.\n   */\n  getLayout = () => this.#layout;\n  /**\n   * `.setRenderer()` can set the layout in the custom middleware.\n   *\n   * @see {@link https://hono.dev/docs/api/context#render-setrenderer}\n   *\n   * @example\n   * ```tsx\n   * app.use('*', async (c, next) => {\n   *   c.setRenderer((content) => {\n   *     return c.html(\n   *       <html>\n   *         <body>\n   *           <p>{content}</p>\n   *         </body>\n   *       </html>\n   *     )\n   *   })\n   *   await next()\n   * })\n   * ```\n   */\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  /**\n   * `.header()` can set headers.\n   *\n   * @see {@link https://hono.dev/docs/api/context#header}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  /**\n   * `.set()` can set the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.use('*', async (c, next) => {\n   *   c.set('message', 'Hono is hot!!')\n   *   await next()\n   * })\n   * ```\n   */\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  /**\n   * `.get()` can use the value specified by the key.\n   *\n   * @see {@link https://hono.dev/docs/api/context#set-get}\n   *\n   * @example\n   * ```ts\n   * app.get('/', (c) => {\n   *   const message = c.get('message')\n   *   return c.text(`The message is \"${message}\"`)\n   * })\n   * ```\n   */\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  /**\n   * `.var` can access the value of a variable.\n   *\n   * @see {@link https://hono.dev/docs/api/context#var}\n   *\n   * @example\n   * ```ts\n   * const result = c.var.client.oneMethod()\n   * ```\n   */\n  // c.var.propName is a read-only\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  /**\n   * `.body()` can return the HTTP response.\n   * You can set headers with `.header()` and set HTTP status code with `.status`.\n   * This can also be set in `.text()`, `.json()` and so on.\n   *\n   * @see {@link https://hono.dev/docs/api/context#body}\n   *\n   * @example\n   * ```ts\n   * app.get('/welcome', (c) => {\n   *   // Set headers\n   *   c.header('X-Message', 'Hello!')\n   *   c.header('Content-Type', 'text/plain')\n   *   // Set HTTP status code\n   *   c.status(201)\n   *\n   *   // Return the response body\n   *   return c.body('Thank you for coming')\n   * })\n   * ```\n   */\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  /**\n   * `.text()` can render text as `Content-Type:text/plain`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#text}\n   *\n   * @example\n   * ```ts\n   * app.get('/say', (c) => {\n   *   return c.text('Hello!')\n   * })\n   * ```\n   */\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  /**\n   * `.json()` can render JSON as `Content-Type:application/json`.\n   *\n   * @see {@link https://hono.dev/docs/api/context#json}\n   *\n   * @example\n   * ```ts\n   * app.get('/api', (c) => {\n   *   return c.json({ message: 'Hello!' })\n   * })\n   * ```\n   */\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  /**\n   * `.redirect()` can Redirect, default status code is 302.\n   *\n   * @see {@link https://hono.dev/docs/api/context#redirect}\n   *\n   * @example\n   * ```ts\n   * app.get('/redirect', (c) => {\n   *   return c.redirect('/')\n   * })\n   * app.get('/redirect-permanently', (c) => {\n   *   return c.redirect('/', 301)\n   * })\n   * ```\n   */\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      // Multibyes should be encoded\n      // eslint-disable-next-line no-control-regex\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  /**\n   * `.notFound()` can return the Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/context#notfound}\n   *\n   * @example\n   * ```ts\n   * app.get('/notfound', (c) => {\n   *   return c.notFound()\n   * })\n   * ```\n   */\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class _Hono {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  /*\n    This class is like an abstract class and does not have a router.\n    To use it, inherit the class and implement router in the constructor.\n  */\n  router;\n  getPath;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new _Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  // Cannot use `#` because it requires visibility at JavaScript runtime.\n  errorHandler = errorHandler;\n  /**\n   * `.route()` allows grouping other Hono instance in routes.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#grouping}\n   *\n   * @param {string} path - base Path\n   * @param {Hono} app - other Hono instance\n   * @returns {Hono} routed Hono instance\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * const app2 = new Hono()\n   *\n   * app2.get(\"/user\", (c) => c.text(\"user\"))\n   * app.route(\"/api\", app2) // GET /api/user\n   * ```\n   */\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  /**\n   * `.basePath()` allows base paths to be specified.\n   *\n   * @see {@link https://hono.dev/docs/api/routing#base-path}\n   *\n   * @param {string} path - base Path\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * const api = new Hono().basePath('/api')\n   * ```\n   */\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  /**\n   * `.onError()` handles an error and returns a customized Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#error-handling}\n   *\n   * @param {ErrorHandler} handler - request Handler for error\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.onError((err, c) => {\n   *   console.error(`${err}`)\n   *   return c.text('Custom Error Message', 500)\n   * })\n   * ```\n   */\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  /**\n   * `.notFound()` allows you to customize a Not Found Response.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#not-found}\n   *\n   * @param {NotFoundHandler} handler - request handler for not-found\n   * @returns {Hono} changed Hono instance\n   *\n   * @example\n   * ```ts\n   * app.notFound((c) => {\n   *   return c.text('Custom 404 Message', 404)\n   * })\n   * ```\n   */\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  /**\n   * `.mount()` allows you to mount applications built with other frameworks into your Hono application.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#mount}\n   *\n   * @param {string} path - base Path\n   * @param {Function} applicationHandler - other Request Handler\n   * @param {MountOptions} [options] - options of `.mount()`\n   * @returns {Hono} mounted Hono instance\n   *\n   * @example\n   * ```ts\n   * import { Router as IttyRouter } from 'itty-router'\n   * import { Hono } from 'hono'\n   * // Create itty-router application\n   * const ittyRouter = IttyRouter()\n   * // GET /itty-router/hello\n   * ittyRouter.get('/hello', () => new Response('Hello from itty-router'))\n   *\n   * const app = new Hono()\n   * app.mount('/itty-router', ittyRouter.handle)\n   * ```\n   *\n   * @example\n   * ```ts\n   * const app = new Hono()\n   * // Send the request to another application without modification.\n   * app.mount('/app', anotherApp, {\n   *   replaceRequest: (req) => req,\n   * })\n   * ```\n   */\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  /**\n   * `.fetch()` will be entry point of your app.\n   *\n   * @see {@link https://hono.dev/docs/api/hono#fetch}\n   *\n   * @param {Request} request - request Object of request\n   * @param {Env} Env - env Object\n   * @param {ExecutionContext} - context of execution\n   * @returns {Response | Promise<Response>} response of request\n   *\n   */\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  /**\n   * `.request()` is a useful method for testing.\n   * You can pass a URL or pathname to send a GET request.\n   * app will return a Response object.\n   * ```ts\n   * test('GET /hello is ok', async () => {\n   *   const res = await app.request('/hello')\n   *   expect(res.status).toBe(200)\n   * })\n   * ```\n   * @see https://hono.dev/docs/api/hono#request\n   */\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  /**\n   * `.fire()` automatically adds a global fetch event listener.\n   * This can be useful for environments that adhere to the Service Worker API, such as non-ES module Cloudflare Workers.\n   * @deprecated\n   * Use `fire` from `hono/service-worker` instead.\n   * ```ts\n   * import { Hono } from 'hono'\n   * import { fire } from 'hono/service-worker'\n   *\n   * const app = new Hono()\n   * // ...\n   * fire(app)\n   * ```\n   * @see https://hono.dev/docs/api/hono#fire\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API\n   * @see https://developers.cloudflare.com/workers/reference/migrate-to-module-workers/\n   */\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = ((method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  });\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = /* @__PURE__ */ Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class _Node {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new _Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new _Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class _Node {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new _Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  /**\n   * Creates an instance of the Hono class.\n   *\n   * @param options - Optional configuration options for the Hono instance.\n   */\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "// src/middleware/timing/timing.ts\nimport \"../../context.js\";\nvar getTime = () => {\n  try {\n    return performance.now();\n  } catch {\n  }\n  return Date.now();\n};\nvar timing = (config) => {\n  const options = {\n    total: true,\n    enabled: true,\n    totalDescription: \"Total Response Time\",\n    autoEnd: true,\n    crossOrigin: false,\n    ...config\n  };\n  return async function timing2(c, next) {\n    const headers = [];\n    const timers = /* @__PURE__ */ new Map();\n    if (c.get(\"metric\")) {\n      return await next();\n    }\n    c.set(\"metric\", { headers, timers });\n    if (options.total) {\n      startTime(c, \"total\", options.totalDescription);\n    }\n    await next();\n    if (options.total) {\n      endTime(c, \"total\");\n    }\n    if (options.autoEnd) {\n      timers.forEach((_, key) => endTime(c, key));\n    }\n    const enabled = typeof options.enabled === \"function\" ? options.enabled(c) : options.enabled;\n    if (enabled) {\n      c.res.headers.append(\"Server-Timing\", headers.join(\",\"));\n      const crossOrigin = typeof options.crossOrigin === \"function\" ? options.crossOrigin(c) : options.crossOrigin;\n      if (crossOrigin) {\n        c.res.headers.append(\n          \"Timing-Allow-Origin\",\n          typeof crossOrigin === \"string\" ? crossOrigin : \"*\"\n        );\n      }\n    }\n  };\n};\nvar setMetric = (c, name, valueDescription, description, precision) => {\n  const metrics = c.get(\"metric\");\n  if (!metrics) {\n    console.warn(\"Metrics not initialized! Please add the `timing()` middleware to this route!\");\n    return;\n  }\n  if (typeof valueDescription === \"number\") {\n    const dur = valueDescription.toFixed(precision || 1);\n    const metric = description ? `${name};dur=${dur};desc=\"${description}\"` : `${name};dur=${dur}`;\n    metrics.headers.push(metric);\n  } else {\n    const metric = valueDescription ? `${name};desc=\"${valueDescription}\"` : `${name}`;\n    metrics.headers.push(metric);\n  }\n};\nvar startTime = (c, name, description) => {\n  const metrics = c.get(\"metric\");\n  if (!metrics) {\n    console.warn(\"Metrics not initialized! Please add the `timing()` middleware to this route!\");\n    return;\n  }\n  metrics.timers.set(name, { description, start: getTime() });\n};\nvar endTime = (c, name, precision) => {\n  const metrics = c.get(\"metric\");\n  if (!metrics) {\n    console.warn(\"Metrics not initialized! Please add the `timing()` middleware to this route!\");\n    return;\n  }\n  const timer = metrics.timers.get(name);\n  if (!timer) {\n    console.warn(`Timer \"${name}\" does not exist!`);\n    return;\n  }\n  const { description, start } = timer;\n  const duration = getTime() - start;\n  setMetric(c, name, duration, description, precision);\n  metrics.timers.delete(name);\n};\nasync function wrapTime(c, name, callable, description, precision) {\n  startTime(c, name, description);\n  try {\n    return await callable;\n  } finally {\n    endTime(c, name, precision);\n  }\n}\nexport {\n  endTime,\n  setMetric,\n  startTime,\n  timing,\n  wrapTime\n};\n", "import { Hono } from 'hono'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', (c) => {\n  return c.json({ status: 'ok' })\n})\n\nexport default app\n", "/**\n * Engine interfaces and base types for the search engine abstraction layer.\n * Ported from Go: pkg/engine/local/engines/engine.go\n */\n\n// ========== Core Types ==========\n\nexport type Category =\n  | 'general'\n  | 'images'\n  | 'videos'\n  | 'news'\n  | 'science'\n  | 'it'\n  | 'social';\n\nexport type TimeRange = '' | 'day' | 'week' | 'month' | 'year';\n\nexport type SafeSearch = 0 | 1 | 2; // 0=off, 1=moderate, 2=strict\n\n// ========== Engine Parameters ==========\n\nexport interface EngineParams {\n  page: number;\n  locale: string;\n  safeSearch: SafeSearch;\n  timeRange: TimeRange;\n  engineData: Record<string, string>;\n}\n\n// ========== Engine Result ==========\n\nexport interface EngineResult {\n  url: string;\n  title: string;\n  content: string;\n  engine: string;\n  score: number;\n  category: Category;\n  template?: string;\n\n  // Image fields\n  imageUrl?: string;\n  thumbnailUrl?: string;\n  resolution?: string;\n\n  // Video fields\n  embedUrl?: string;\n  duration?: string;\n  channel?: string;\n  views?: number;\n\n  // News/social fields\n  source?: string;\n  publishedAt?: string;\n\n  // Science fields\n  authors?: string[];\n  doi?: string;\n  journal?: string;\n\n  // IT fields\n  stars?: number;\n  language?: string;\n  topics?: string[];\n}\n\n// ========== Engine Results Collection ==========\n\nexport interface EngineResults {\n  results: EngineResult[];\n  suggestions: string[];\n  corrections: string[];\n  engineData: Record<string, string>;\n}\n\nexport function newEngineResults(): EngineResults {\n  return {\n    results: [],\n    suggestions: [],\n    corrections: [],\n    engineData: {},\n  };\n}\n\n// ========== Request Config ==========\n\nexport interface RequestConfig {\n  url: string;\n  method: string;\n  headers: Record<string, string>;\n  cookies: string[];\n  body?: string;\n}\n\n// ========== Online Engine Interface ==========\n\nexport interface OnlineEngine {\n  name: string;\n  shortcut: string;\n  categories: Category[];\n  supportsPaging: boolean;\n  maxPage: number;\n  timeout: number;\n  weight: number;\n  disabled: boolean;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig;\n  parseResponse(body: string, params: EngineParams): EngineResults;\n}\n\n// ========== Engine Execution Helper ==========\n\n/**\n * Execute an engine's search request: build the request, fetch with timeout,\n * and parse the response. Returns the parsed EngineResults.\n */\nexport async function executeEngine(\n  engine: OnlineEngine,\n  query: string,\n  params: EngineParams\n): Promise<EngineResults> {\n  const config = engine.buildRequest(query, params);\n\n  const headers = new Headers(config.headers);\n  if (config.cookies.length > 0) {\n    headers.set('Cookie', config.cookies.join('; '));\n  }\n\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), engine.timeout);\n\n  try {\n    const response = await fetch(config.url, {\n      method: config.method,\n      headers,\n      body: config.body || undefined,\n      signal: controller.signal,\n      redirect: 'follow',\n    });\n\n    if (!response.ok) {\n      throw new Error(\n        `${engine.name}: HTTP ${response.status} ${response.statusText}`\n      );\n    }\n\n    const body = await response.text();\n    const results = engine.parseResponse(body, params);\n\n    // Tag all results with the engine name and default score from weight\n    for (const r of results.results) {\n      r.engine = engine.name;\n      if (r.score === 0) {\n        r.score = engine.weight;\n      }\n    }\n\n    return results;\n  } finally {\n    clearTimeout(timeoutId);\n  }\n}\n", "/**\n * Lightweight HTML text extraction utilities for Cloudflare Workers.\n * Uses string operations and regex -- no DOM parser available.\n */\n\n/**\n * Decode common HTML entities to their text equivalents.\n */\nexport function decodeHtmlEntities(text: string): string {\n  let result = text;\n  // Named entities\n  result = result.replace(/&amp;/g, '&');\n  result = result.replace(/&lt;/g, '<');\n  result = result.replace(/&gt;/g, '>');\n  result = result.replace(/&quot;/g, '\"');\n  result = result.replace(/&#39;/g, \"'\");\n  result = result.replace(/&apos;/g, \"'\");\n  result = result.replace(/&nbsp;/g, ' ');\n  result = result.replace(/&mdash;/g, '\\u2014');\n  result = result.replace(/&ndash;/g, '\\u2013');\n  result = result.replace(/&laquo;/g, '\\u00AB');\n  result = result.replace(/&raquo;/g, '\\u00BB');\n  result = result.replace(/&hellip;/g, '\\u2026');\n  result = result.replace(/&copy;/g, '\\u00A9');\n  result = result.replace(/&reg;/g, '\\u00AE');\n  result = result.replace(/&trade;/g, '\\u2122');\n\n  // Numeric entities (decimal): &#NNN;\n  result = result.replace(/&#(\\d+);/g, (_match, code) => {\n    const num = parseInt(code, 10);\n    return num > 0 && num < 0x10ffff ? String.fromCodePoint(num) : '';\n  });\n\n  // Numeric entities (hexadecimal): &#xHHH;\n  result = result.replace(/&#x([0-9a-fA-F]+);/g, (_match, code) => {\n    const num = parseInt(code, 16);\n    return num > 0 && num < 0x10ffff ? String.fromCodePoint(num) : '';\n  });\n\n  return result;\n}\n\n/**\n * Strip all HTML tags from text and decode entities.\n */\nexport function extractText(html: string): string {\n  // Remove script and style blocks entirely\n  let result = html.replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '');\n  result = result.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '');\n\n  // Replace <br>, <p>, <div>, <li> tags with spaces for readability\n  result = result.replace(/<br\\s*\\/?>/gi, ' ');\n  result = result.replace(/<\\/?(p|div|li|h[1-6]|tr|td|th)\\b[^>]*>/gi, ' ');\n\n  // Strip remaining tags\n  result = result.replace(/<[^>]+>/g, '');\n\n  // Decode entities\n  result = decodeHtmlEntities(result);\n\n  // Collapse whitespace\n  result = result.replace(/\\s+/g, ' ').trim();\n\n  return result;\n}\n\n/**\n * Extract the value of a specific attribute from the first occurrence of a tag.\n * Returns empty string if not found.\n *\n * Example: extractAttribute('<a href=\"https://example.com\">', 'a', 'href')\n *          => 'https://example.com'\n */\nexport function extractAttribute(\n  html: string,\n  tag: string,\n  attr: string\n): string {\n  // Match the opening tag\n  const tagPattern = new RegExp(\n    `<${tag}\\\\b[^>]*?\\\\b${attr}\\\\s*=\\\\s*(?:\"([^\"]*)\"|'([^']*)')`,\n    'i'\n  );\n  const match = html.match(tagPattern);\n  if (match) {\n    return decodeHtmlEntities(match[1] ?? match[2] ?? '');\n  }\n  return '';\n}\n\n/**\n * Find all elements matching a simple selector.\n * Supports:\n *   - Tag name: \"div\", \"a\", \"h2\"\n *   - Class: \".className\" or \"div.className\"\n *   - ID: \"#idName\" or \"div#idName\"\n *   - Attribute: \"div[role='link']\"\n *   - Data attribute: \"div[data-sncf='1']\"\n *\n * Returns an array of the outer HTML strings for each matched element.\n */\nexport function findElements(html: string, selector: string): string[] {\n  let tag = '';\n  let className = '';\n  let idName = '';\n  let attrName = '';\n  let attrValue = '';\n\n  // Parse selector\n  const attrMatch = selector.match(\n    /^(\\w+)?\\[([a-zA-Z0-9_-]+)\\s*=\\s*['\"]([^'\"]*)['\"]\\]$/\n  );\n  if (attrMatch) {\n    tag = attrMatch[1] || '';\n    attrName = attrMatch[2];\n    attrValue = attrMatch[3];\n  } else if (selector.includes('#')) {\n    const parts = selector.split('#');\n    tag = parts[0] || '';\n    idName = parts[1];\n  } else if (selector.includes('.')) {\n    const parts = selector.split('.');\n    tag = parts[0] || '';\n    className = parts[1];\n  } else {\n    tag = selector;\n  }\n\n  const results: string[] = [];\n  const tagToSearch = tag || '[a-zA-Z][a-zA-Z0-9]*';\n\n  // Build pattern to find opening tags\n  let openPattern: RegExp;\n  if (attrName) {\n    openPattern = new RegExp(\n      `<(${tagToSearch})\\\\b[^>]*?\\\\b${attrName}\\\\s*=\\\\s*[\"']${escapeRegex(attrValue)}[\"'][^>]*>`,\n      'gi'\n    );\n  } else if (idName) {\n    openPattern = new RegExp(\n      `<(${tagToSearch})\\\\b[^>]*?\\\\bid\\\\s*=\\\\s*[\"']${escapeRegex(idName)}[\"'][^>]*>`,\n      'gi'\n    );\n  } else if (className) {\n    openPattern = new RegExp(\n      `<(${tagToSearch})\\\\b[^>]*?\\\\bclass\\\\s*=\\\\s*[\"'][^\"']*\\\\b${escapeRegex(className)}\\\\b[^\"']*[\"'][^>]*>`,\n      'gi'\n    );\n  } else {\n    openPattern = new RegExp(`<(${tagToSearch})\\\\b[^>]*>`, 'gi');\n  }\n\n  let openMatch: RegExpExecArray | null;\n  while ((openMatch = openPattern.exec(html)) !== null) {\n    const startIndex = openMatch.index;\n    const matchedTag = openMatch[1].toLowerCase();\n\n    // Check for self-closing\n    if (openMatch[0].endsWith('/>')) {\n      results.push(openMatch[0]);\n      continue;\n    }\n\n    // Find the matching closing tag, handling nesting\n    let depth = 1;\n    let searchPos = startIndex + openMatch[0].length;\n    const closeTagPattern = new RegExp(\n      `<(/?)${matchedTag}\\\\b[^>]*>`,\n      'gi'\n    );\n    closeTagPattern.lastIndex = searchPos;\n\n    let closeMatch: RegExpExecArray | null;\n    while (depth > 0 && (closeMatch = closeTagPattern.exec(html)) !== null) {\n      if (closeMatch[1] === '/') {\n        depth--;\n      } else if (!closeMatch[0].endsWith('/>')) {\n        depth++;\n      }\n      if (depth === 0) {\n        const endIndex = closeMatch.index + closeMatch[0].length;\n        results.push(html.slice(startIndex, endIndex));\n      }\n    }\n\n    // If we could not find the closing tag, take a reasonable chunk\n    if (depth > 0) {\n      const maxChunk = Math.min(startIndex + 10000, html.length);\n      results.push(html.slice(startIndex, maxChunk));\n    }\n  }\n\n  return results;\n}\n\n/**\n * Escape special regex characters in a string.\n */\nfunction escapeRegex(str: string): string {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n/**\n * Extract all href values from anchor tags in an HTML fragment.\n */\nexport function extractLinks(html: string): string[] {\n  const links: string[] = [];\n  const re = /<a\\b[^>]*?\\bhref\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)')/gi;\n  let match: RegExpExecArray | null;\n  while ((match = re.exec(html)) !== null) {\n    const href = match[1] ?? match[2];\n    if (href) {\n      links.push(decodeHtmlEntities(href));\n    }\n  }\n  return links;\n}\n", "/**\n * Google Search Engine adapters.\n * Ported from Go: pkg/engine/local/engines/google.go\n *\n * Uses SearXNG-style GSA user agents and arc_id bypass techniques.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\nimport { extractText, findElements, decodeHtmlEntities } from '../lib/html-parser';\n\n// ========== GSA User Agents ==========\n\nconst gsaUserAgents: string[] = [\n  'Mozilla/5.0 (iPhone; CPU iPhone OS 17_6_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) GSA/399.2.845414227 Mobile/15E148 Safari/604.1',\n  'Mozilla/5.0 (iPhone; CPU iPhone OS 18_3_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) GSA/399.2.845414227 Mobile/15E148 Safari/604.1',\n  'Mozilla/5.0 (iPhone; CPU iPhone OS 18_5_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) GSA/399.2.845414227 Mobile/15E148 Safari/604.1',\n  'Mozilla/5.0 (Linux; Android 14; SM-S928B Build/UP1A.231005.007) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.230 Mobile Safari/537.36 GSA/15.3.36.28.arm64',\n  'Mozilla/5.0 (Linux; Android 13; Pixel 7 Pro) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.6099.144 Mobile Safari/537.36 GSA/14.50.15.29.arm64',\n];\n\nconst ARC_ID_RANGE =\n  'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-';\n\n// Module-level arc_id cache (regenerates every hour)\nlet cachedArcId = '';\nlet arcIdTimestamp = 0;\n\n/**\n * Generate a 23-character random arc_id string (like SearXNG).\n */\nfunction generateArcId(): string {\n  const bytes = new Uint8Array(23);\n  crypto.getRandomValues(bytes);\n  let result = '';\n  for (let i = 0; i < 23; i++) {\n    result += ARC_ID_RANGE[bytes[i] % ARC_ID_RANGE.length];\n  }\n  return result;\n}\n\n/**\n * Get or regenerate the cached arc_id (changes hourly).\n */\nfunction getArcId(): string {\n  const now = Date.now();\n  if (!cachedArcId || now - arcIdTimestamp > 3600_000) {\n    cachedArcId = generateArcId();\n    arcIdTimestamp = now;\n  }\n  return cachedArcId;\n}\n\n/**\n * Format the async parameter for Google's UI request.\n * Format: arc_id:srp_<random_23_chars>_1<start:02>,use_ac:true,_fmt:prog\n */\nfunction uiAsync(start: number): string {\n  const startPadded = start.toString().padStart(2, '0');\n  const arcId = `arc_id:srp_${getArcId()}_1${startPadded}`;\n  return `${arcId},use_ac:true,_fmt:prog`;\n}\n\nfunction getRandomGSAUserAgent(): string {\n  const idx = Math.floor(Math.random() * gsaUserAgents.length);\n  return gsaUserAgents[idx];\n}\n\n// ========== Time Range & Safe Search Maps ==========\n\nconst timeRangeMap: Record<string, string> = {\n  day: 'd',\n  week: 'w',\n  month: 'm',\n  year: 'y',\n};\n\nconst safeSearchMap: Record<number, string> = {\n  0: 'off',\n  1: 'medium',\n  2: 'high',\n};\n\n// ========== URL Unwrapper ==========\n\n/**\n * Unwrap a Google /url?q=... redirect to get the real URL.\n */\nfunction unwrapGoogleUrl(href: string): string {\n  if (href.startsWith('/url?')) {\n    const match = href.match(/[?&]q=([^&]+)/);\n    if (match) {\n      let decoded = decodeURIComponent(match[1]);\n      const saIdx = decoded.indexOf('&sa=U');\n      if (saIdx > 0) {\n        decoded = decoded.slice(0, saIdx);\n      }\n      return decoded;\n    }\n    const urlMatch = href.match(/[?&]url=([^&]+)/);\n    if (urlMatch) {\n      return decodeURIComponent(urlMatch[1]);\n    }\n  }\n  return href;\n}\n\n// ========== GoogleEngine ==========\n\nexport class GoogleEngine implements OnlineEngine {\n  name = 'google';\n  shortcut = 'g';\n  categories: Category[] = ['general'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const start = (params.page - 1) * 10;\n    const asyncParam = uiAsync(start);\n\n    // Derive language/region\n    const locale = params.locale || 'en-US';\n    const parts = locale.split('-');\n    const langCode = parts[0] || 'en';\n    const regionCode = parts[1] || 'US';\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('hl', `${langCode}-${regionCode}`);\n\n    if (locale !== 'all') {\n      searchParams.set('lr', `lang_${langCode}`);\n    }\n    if (locale.includes('-')) {\n      searchParams.set('cr', `country${regionCode}`);\n    }\n\n    searchParams.set('ie', 'utf8');\n    searchParams.set('oe', 'utf8');\n    searchParams.set('filter', '0');\n    searchParams.set('start', start.toString());\n    searchParams.set('asearch', 'arc');\n    searchParams.set('async', asyncParam);\n\n    // Time range\n    if (params.timeRange && timeRangeMap[params.timeRange]) {\n      searchParams.set('tbs', `qdr:${timeRangeMap[params.timeRange]}`);\n    }\n\n    // Safe search\n    const safeValue = safeSearchMap[params.safeSearch];\n    if (safeValue) {\n      searchParams.set('safe', safeValue);\n    }\n\n    return {\n      url: `https://www.google.com/search?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': getRandomGSAUserAgent(),\n        Accept: '*/*',\n      },\n      cookies: ['CONSENT=YES+'],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Check for CAPTCHA/sorry page\n    if (body.includes('sorry.google.com') || body.includes('/sorry/')) {\n      return results;\n    }\n\n    // Parse MjjYud containers (primary result format)\n    const mjjYudElements = findElements(body, 'div.MjjYud');\n    for (const el of mjjYudElements) {\n      const result = this.parseMjjYudResult(el);\n      if (result) {\n        results.results.push(result);\n      }\n    }\n\n    // Fallback: parse \"g\" class containers\n    if (results.results.length === 0) {\n      const gElements = findElements(body, 'div.g');\n      for (const el of gElements) {\n        if (el.includes('g-blk')) continue;\n        const result = this.parseGResult(el);\n        if (result) {\n          results.results.push(result);\n        }\n      }\n    }\n\n    // Parse suggestions from ouy7Mc class\n    const suggestionElements = findElements(body, 'div.ouy7Mc');\n    for (const el of suggestionElements) {\n      const linkPattern = /<a\\b[^>]*>([^<]*(?:<[^/][^>]*>[^<]*)*)<\\/a>/gi;\n      let match: RegExpExecArray | null;\n      while ((match = linkPattern.exec(el)) !== null) {\n        const text = extractText(match[1]).trim();\n        if (text) {\n          results.suggestions.push(text);\n        }\n      }\n    }\n\n    return results;\n  }\n\n  private parseMjjYudResult(\n    html: string\n  ): EngineResults['results'][number] | null {\n    // Find title from div[role=\"link\"]\n    let title = '';\n    const roleLinkElements = findElements(html, 'div[role=\\'link\\']');\n    if (roleLinkElements.length > 0) {\n      title = extractText(roleLinkElements[0]).trim();\n    }\n\n    // Find URL from first <a> tag\n    let url = '';\n    const hrefMatch = html.match(\n      /<a\\b[^>]*?\\bhref\\s*=\\s*\"([^\"]+)\"/i\n    );\n    if (hrefMatch) {\n      const href = decodeHtmlEntities(hrefMatch[1]);\n      if (!href.startsWith('#')) {\n        if (href.startsWith('/url?')) {\n          url = unwrapGoogleUrl(href);\n        } else if (href.startsWith('http://') || href.startsWith('https://')) {\n          url = href;\n        }\n      }\n    }\n\n    if (!url || !title) return null;\n\n    // Filter Google internal URLs\n    if (url.includes('google.com') && !url.includes('translate.google')) {\n      return null;\n    }\n\n    // Find content from div[data-sncf=\"1\"]\n    let content = '';\n    const sncfElements = findElements(html, 'div[data-sncf=\\'1\\']');\n    if (sncfElements.length > 0) {\n      // Extract text without scripts\n      let cleaned = sncfElements[0].replace(\n        /<script[^>]*>[\\s\\S]*?<\\/script>/gi,\n        ''\n      );\n      content = extractText(cleaned).trim();\n    }\n\n    return {\n      url,\n      title,\n      content,\n      engine: this.name,\n      score: this.weight,\n      category: 'general',\n    };\n  }\n\n  private parseGResult(\n    html: string\n  ): EngineResults['results'][number] | null {\n    // Find link with href in <a> tag\n    let url = '';\n    let title = '';\n\n    const linkMatch = html.match(\n      /<a\\b[^>]*?\\bhref\\s*=\\s*\"(https?:\\/\\/[^\"]+|\\/url\\?[^\"]+)\"/i\n    );\n    if (linkMatch) {\n      const href = decodeHtmlEntities(linkMatch[1]);\n      if (href.startsWith('/url?')) {\n        url = unwrapGoogleUrl(href);\n      } else {\n        url = href;\n      }\n    }\n\n    if (!url) return null;\n\n    // Filter Google internal URLs\n    if (\n      url.includes('google.com/search') ||\n      (url.includes('google.com') && !url.includes('translate.google'))\n    ) {\n      return null;\n    }\n\n    // Title from <h3>\n    const h3Match = html.match(/<h3[^>]*>([\\s\\S]*?)<\\/h3>/i);\n    if (h3Match) {\n      title = extractText(h3Match[1]).trim();\n    }\n    if (!title) {\n      // Fallback: text inside the first <a>\n      const aContent = html.match(/<a\\b[^>]*>([\\s\\S]*?)<\\/a>/i);\n      if (aContent) {\n        title = extractText(aContent[1]).trim();\n      }\n    }\n\n    if (!title) return null;\n\n    // Content from snippet classes\n    let content = '';\n    const snippetPatterns = [\n      /class=\"[^\"]*VwiC3b[^\"]*\"[^>]*>([\\s\\S]*?)<\\/(?:div|span)>/i,\n      /class=\"[^\"]*IsZvec[^\"]*\"[^>]*>([\\s\\S]*?)<\\/(?:div|span)>/i,\n      /data-sncf=\"1\"[^>]*>([\\s\\S]*?)<\\/div>/i,\n    ];\n    for (const pattern of snippetPatterns) {\n      const match = html.match(pattern);\n      if (match) {\n        const text = extractText(match[1]).trim();\n        if (text.length > content.length) {\n          content = text;\n        }\n      }\n    }\n\n    return {\n      url,\n      title,\n      content,\n      engine: this.name,\n      score: this.weight,\n      category: 'general',\n    };\n  }\n}\n\n// ========== GoogleImagesEngine ==========\n\nexport class GoogleImagesEngine implements OnlineEngine {\n  name = 'google images';\n  shortcut = 'gi';\n  categories: Category[] = ['images'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('tbm', 'isch');\n    searchParams.set('asearch', 'isch');\n    searchParams.set('hl', 'en');\n    searchParams.set('safe', 'off');\n\n    // Zero-based pagination for images\n    const ijn = params.page - 1;\n    searchParams.set('async', `_fmt:json,p:1,ijn:${ijn}`);\n\n    return {\n      url: `https://www.google.com/search?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': getRandomGSAUserAgent(),\n        Accept: '*/*',\n      },\n      cookies: ['CONSENT=YES+'],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Try to find ischj JSON in the response\n    const jsonStart = body.indexOf('{\"ischj\"');\n    if (jsonStart !== -1) {\n      let jsonEnd = body.indexOf('\\n', jsonStart);\n      if (jsonEnd === -1) jsonEnd = body.length;\n      const jsonStr = body.slice(jsonStart, jsonEnd);\n\n      try {\n        const data = JSON.parse(jsonStr) as {\n          ischj?: {\n            metadata?: Array<{\n              result?: {\n                referrer_url?: string;\n                page_title?: string;\n                site_title?: string;\n              };\n              original_image?: {\n                url?: string;\n                width?: number;\n                height?: number;\n              };\n              thumbnail?: { url?: string };\n            }>;\n          };\n        };\n\n        if (data.ischj?.metadata) {\n          for (const item of data.ischj.metadata) {\n            if (item.original_image?.url) {\n              results.results.push({\n                url: item.result?.referrer_url || '',\n                title: item.result?.page_title || '',\n                content: '',\n                engine: this.name,\n                score: this.weight,\n                category: 'images',\n                template: 'images',\n                imageUrl: item.original_image.url,\n                thumbnailUrl: item.thumbnail?.url || '',\n                source: item.result?.site_title || '',\n                resolution: `${item.original_image.width || 0}x${item.original_image.height || 0}`,\n              });\n            }\n          }\n        }\n      } catch {\n        // JSON parse failed, fall through to regex\n      }\n    }\n\n    // Fallback: extract image URLs using regex\n    if (results.results.length === 0) {\n      const re =\n        /\\[\"(https:\\/\\/[^\"]+\\.(?:jpg|jpeg|png|gif|webp)[^\"]*)\",(\\d+),(\\d+)\\]/g;\n      let match: RegExpExecArray | null;\n      while ((match = re.exec(body)) !== null) {\n        results.results.push({\n          url: match[1],\n          title: '',\n          content: '',\n          engine: this.name,\n          score: this.weight,\n          category: 'images',\n          template: 'images',\n          imageUrl: match[1],\n          resolution: `${match[2]}x${match[3]}`,\n        });\n      }\n    }\n\n    return results;\n  }\n}\n", "/**\n * Bing Search Engine adapters.\n * Ported from Go: pkg/engine/local/engines/bing.go\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\nimport { extractText, findElements, decodeHtmlEntities } from '../lib/html-parser';\n\nconst BING_USER_AGENT =\n  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36';\n\n// ========== URL Decoding ==========\n\n/**\n * Decode Bing's base64-encoded redirect URLs.\n * Bing wraps URLs as /ck/a?u=a1<base64_encoded_url>&...\n */\nfunction decodeBingUrl(bingUrl: string): string {\n  try {\n    const parsed = new URL(bingUrl);\n    const paramU = parsed.searchParams.get('u');\n    if (!paramU) return bingUrl;\n\n    // Remove \"a1\" prefix (base64 URL encoding marker)\n    if (paramU.length > 2 && paramU.startsWith('a1')) {\n      let encoded = paramU.slice(2);\n      // URL-safe base64 uses - and _ instead of + and /\n      encoded = encoded.replace(/-/g, '+').replace(/_/g, '/');\n      // Add padding if needed\n      const padding = 4 - (encoded.length % 4);\n      if (padding < 4) {\n        encoded += '='.repeat(padding);\n      }\n      try {\n        const decoded = atob(encoded);\n        return decoded;\n      } catch {\n        return bingUrl;\n      }\n    }\n  } catch {\n    // URL parse failed\n  }\n  return bingUrl;\n}\n\n// ========== Time Range Maps ==========\n\nconst generalTimeRange: Record<string, string> = {\n  day: '1',\n  week: '2',\n  month: '3',\n  year: '5',\n};\n\nconst imagesTimeRange: Record<string, number> = {\n  day: 1440,\n  week: 10080,\n  month: 44640,\n  year: 525600,\n};\n\nconst newsTimeRange: Record<string, string> = {\n  day: '4',\n  week: '7',\n  month: '9',\n};\n\n// ========== BingEngine (General Search) ==========\n\nexport class BingEngine implements OnlineEngine {\n  name = 'bing';\n  shortcut = 'b';\n  categories: Category[] = ['general'];\n  supportsPaging = true;\n  maxPage = 200;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const locale = params.locale || 'en-US';\n    const parts = locale.split('-');\n    const lang = (parts[0] || 'en').toLowerCase();\n    const region = `${lang}-${(parts[1] || 'us').toLowerCase()}`;\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('pq', query);\n\n    // Pagination\n    if (params.page > 1) {\n      const first = (params.page - 1) * 10 + 1;\n      searchParams.set('first', first.toString());\n      if (params.page === 2) {\n        searchParams.set('FORM', 'PERE');\n      } else {\n        searchParams.set('FORM', `PERE${params.page - 2}`);\n      }\n    }\n\n    // Time range\n    if (params.timeRange && generalTimeRange[params.timeRange]) {\n      const tr = generalTimeRange[params.timeRange];\n      if (params.timeRange === 'year') {\n        const unixDay = Math.floor(Date.now() / 86400000);\n        searchParams.set(\n          'filters',\n          `ex1:\"ez${tr}_${unixDay - 365}_${unixDay}\"`\n        );\n      } else {\n        searchParams.set('filters', `ex1:\"ez${tr}\"`);\n      }\n    }\n\n    // Cookies for language/region\n    const cookies = [\n      `_EDGE_CD=m=${region}&u=${lang}`,\n      `_EDGE_S=mkt=${region}&ui=${lang}`,\n      `SRCHHPGUSR=SRCHLANG=${lang}`,\n    ];\n\n    return {\n      url: `https://www.bing.com/search?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': BING_USER_AGENT,\n        Accept:\n          'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Accept-Language': 'en-US,en;q=0.9',\n        DNT: '1',\n        'Upgrade-Insecure-Requests': '1',\n      },\n      cookies,\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Find li.b_algo elements (Bing result items)\n    const algoItems = findElements(body, 'li.b_algo');\n\n    for (const item of algoItems) {\n      const result = this.parseResult(item);\n      if (result) {\n        results.results.push(result);\n      }\n    }\n\n    return results;\n  }\n\n  private parseResult(\n    html: string\n  ): EngineResults['results'][number] | null {\n    let url = '';\n    let title = '';\n    let content = '';\n\n    // Find h2 > a for title and URL\n    const h2Match = html.match(/<h2[^>]*>([\\s\\S]*?)<\\/h2>/i);\n    if (h2Match) {\n      const h2Content = h2Match[1];\n      const linkMatch = h2Content.match(\n        /<a\\b[^>]*?\\bhref\\s*=\\s*\"([^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/i\n      );\n      if (linkMatch) {\n        const href = decodeHtmlEntities(linkMatch[1]);\n        if (href.startsWith('https://www.bing.com/ck/a?')) {\n          url = decodeBingUrl(href);\n        } else if (href.startsWith('http')) {\n          url = href;\n        }\n        title = extractText(linkMatch[2]).trim();\n      }\n    }\n\n    if (!url || !title) return null;\n\n    // Find content in <p> or b_caption\n    const pMatch = html.match(/<p[^>]*>([\\s\\S]*?)<\\/p>/i);\n    if (pMatch) {\n      content = extractText(pMatch[1]).trim();\n    }\n    if (!content) {\n      const captionElements = findElements(html, 'div.b_caption');\n      if (captionElements.length > 0) {\n        content = extractText(captionElements[0]).trim();\n      }\n    }\n\n    return {\n      url,\n      title,\n      content,\n      engine: this.name,\n      score: this.weight,\n      category: 'general',\n    };\n  }\n}\n\n// ========== BingImagesEngine ==========\n\nexport class BingImagesEngine implements OnlineEngine {\n  name = 'bing images';\n  shortcut = 'bi';\n  categories: Category[] = ['images'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('async', '1');\n    searchParams.set('count', '35');\n\n    let first = 1;\n    if (params.page > 1) {\n      first = (params.page - 1) * 35 + 1;\n    }\n    searchParams.set('first', first.toString());\n\n    // Time range filter\n    if (params.timeRange && imagesTimeRange[params.timeRange]) {\n      searchParams.set(\n        'qft',\n        `filterui:age-lt${imagesTimeRange[params.timeRange]}`\n      );\n    }\n\n    return {\n      url: `https://www.bing.com/images/async?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': BING_USER_AGENT,\n        Accept: 'text/html',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Parse image metadata from JSON in HTML \"m\" attribute\n    const iuscPattern = /class=\"iusc\"[^>]*m=\"([^\"]+)\"/g;\n    let match: RegExpExecArray | null;\n\n    while ((match = iuscPattern.exec(body)) !== null) {\n      // Decode HTML entities in the JSON string\n      let jsonStr = match[1]\n        .replace(/&quot;/g, '\"')\n        .replace(/&amp;/g, '&')\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>');\n\n      try {\n        const metadata = JSON.parse(jsonStr) as {\n          purl?: string;\n          murl?: string;\n          turl?: string;\n          desc?: string;\n          t?: string;\n        };\n\n        if (metadata.murl) {\n          results.results.push({\n            url: metadata.purl || '',\n            title: metadata.t || '',\n            content: metadata.desc || '',\n            engine: this.name,\n            score: this.weight,\n            category: 'images',\n            template: 'images',\n            imageUrl: metadata.murl,\n            thumbnailUrl: metadata.turl || '',\n          });\n        }\n      } catch {\n        // JSON parse failed, skip this item\n      }\n    }\n\n    // Fallback: extract murl from encoded format\n    if (results.results.length === 0) {\n      const fallbackPattern = /murl&quot;:&quot;([^&]+)&quot;/g;\n      let fbMatch: RegExpExecArray | null;\n      while ((fbMatch = fallbackPattern.exec(body)) !== null) {\n        const imgUrl = decodeURIComponent(fbMatch[1]);\n        if (imgUrl) {\n          results.results.push({\n            url: imgUrl,\n            title: '',\n            content: '',\n            engine: this.name,\n            score: this.weight,\n            category: 'images',\n            template: 'images',\n            imageUrl: imgUrl,\n          });\n        }\n      }\n    }\n\n    return results;\n  }\n}\n\n// ========== BingNewsEngine ==========\n\nexport class BingNewsEngine implements OnlineEngine {\n  name = 'bing news';\n  shortcut = 'bn';\n  categories: Category[] = ['news'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const locale = params.locale || 'en-US';\n    const parts = locale.split('-');\n    const lang = (parts[0] || 'en').toLowerCase();\n    const country = (parts[1] || 'us').toLowerCase();\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('InfiniteScroll', '1');\n    searchParams.set('form', 'PTFTNR');\n    searchParams.set('setlang', lang);\n    searchParams.set('cc', country);\n\n    // Pagination\n    let first = 1;\n    let sfx = 0;\n    if (params.page > 1) {\n      first = (params.page - 1) * 10 + 1;\n      sfx = params.page - 1;\n    }\n    searchParams.set('first', first.toString());\n    searchParams.set('SFX', sfx.toString());\n\n    // Time range\n    if (params.timeRange && newsTimeRange[params.timeRange]) {\n      searchParams.set(\n        'qft',\n        `interval=\"${newsTimeRange[params.timeRange]}\"`\n      );\n    }\n\n    return {\n      url: `https://www.bing.com/news/infinitescrollajax?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': BING_USER_AGENT,\n        Accept: 'text/html',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Find news items\n    const newsItems = findElements(body, 'div.newsitem');\n    const newsCards = findElements(body, 'div.news-card');\n    const allItems = [...newsItems, ...newsCards];\n\n    for (const item of allItems) {\n      const result = this.parseNewsResult(item);\n      if (result) {\n        results.results.push(result);\n      }\n    }\n\n    return results;\n  }\n\n  private parseNewsResult(\n    html: string\n  ): EngineResults['results'][number] | null {\n    let url = '';\n    let title = '';\n    let content = '';\n    let source = '';\n    let thumbnailUrl = '';\n\n    // Find title link\n    const linkPattern =\n      /<a\\b[^>]*?\\bhref\\s*=\\s*\"(https?:\\/\\/[^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi;\n    let linkMatch: RegExpExecArray | null;\n    while ((linkMatch = linkPattern.exec(html)) !== null) {\n      const linkText = extractText(linkMatch[2]).trim();\n      if (linkText && !url) {\n        url = decodeHtmlEntities(linkMatch[1]);\n        title = linkText;\n        break;\n      }\n    }\n\n    if (!url) return null;\n\n    // Find snippet\n    const snippetElements = findElements(html, 'div.snippet');\n    const summaryElements = findElements(html, 'div.summary');\n    const snippetHtml = snippetElements[0] || summaryElements[0] || '';\n    if (snippetHtml) {\n      content = extractText(snippetHtml).trim();\n    }\n\n    // Find thumbnail\n    const imgMatch = html.match(\n      /<img\\b[^>]*?\\bsrc\\s*=\\s*\"([^\"]+)\"/i\n    );\n    if (imgMatch && !imgMatch[1].startsWith('data:image')) {\n      thumbnailUrl = imgMatch[1];\n      if (!thumbnailUrl.startsWith('http')) {\n        thumbnailUrl = 'https://www.bing.com' + thumbnailUrl;\n      }\n    }\n\n    // Find source\n    const sourceElements = findElements(html, 'div.source');\n    if (sourceElements.length > 0) {\n      source = extractText(sourceElements[0]).trim();\n    }\n\n    return {\n      url,\n      title,\n      content,\n      engine: this.name,\n      score: this.weight,\n      category: 'news',\n      template: 'news',\n      thumbnailUrl,\n      source,\n    };\n  }\n}\n", "/**\n * DuckDuckGo Search Engine adapters.\n * Ported from Go: pkg/engine/local/engines/duckduckgo.go\n *\n * Uses JSON APIs (i.js, v.js, news.js) which work without CAPTCHA.\n * VQD token fetching with 1-hour caching.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\n\nconst DDG_USER_AGENT =\n  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36';\n\n// ========== VQD Token Cache ==========\n\ninterface VqdEntry {\n  value: string;\n  expires: number;\n}\n\nconst vqdCache = new Map<string, VqdEntry>();\n\n/**\n * Fetch or return cached VQD token for a query.\n * VQD is required for DDG's bot protection on JSON APIs.\n */\nasync function getVqd(query: string, region: string): Promise<string> {\n  const cacheKey = `${query}//${region}`;\n\n  // Check cache\n  const cached = vqdCache.get(cacheKey);\n  if (cached && Date.now() < cached.expires) {\n    return cached.value;\n  }\n\n  // Fetch VQD from DuckDuckGo\n  const reqUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}`;\n\n  const response = await fetch(reqUrl, {\n    headers: {\n      'User-Agent': DDG_USER_AGENT,\n      Accept:\n        'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n      'Accept-Language': 'en-US,en;q=0.9',\n    },\n    redirect: 'manual',\n  });\n\n  if (!response.ok && response.status !== 301 && response.status !== 302) {\n    throw new Error(`DDG VQD request failed: ${response.status}`);\n  }\n\n  const body = await response.text();\n\n  // Extract VQD using regex\n  let vqd = '';\n  const doubleQuoteMatch = body.match(/vqd=\"([^\"]+)\"/);\n  if (doubleQuoteMatch) {\n    vqd = doubleQuoteMatch[1];\n  } else {\n    const singleQuoteMatch = body.match(/vqd='([^']+)'/);\n    if (singleQuoteMatch) {\n      vqd = singleQuoteMatch[1];\n    }\n  }\n\n  if (!vqd) {\n    throw new Error('Could not extract VQD from DDG response');\n  }\n\n  // Cache for 1 hour\n  vqdCache.set(cacheKey, {\n    value: vqd,\n    expires: Date.now() + 3600_000,\n  });\n\n  return vqd;\n}\n\n/**\n * Store a VQD token in cache (e.g., from a response).\n */\nfunction setVqd(query: string, region: string, vqd: string): void {\n  const cacheKey = `${query}//${region}`;\n  vqdCache.set(cacheKey, {\n    value: vqd,\n    expires: Date.now() + 3600_000,\n  });\n}\n\n// ========== Region Mapping ==========\n\nconst ddgRegions: Record<string, string> = {\n  'en-US': 'us-en',\n  'en-GB': 'uk-en',\n  'de-DE': 'de-de',\n  'fr-FR': 'fr-fr',\n  'es-ES': 'es-es',\n  'it-IT': 'it-it',\n  'ja-JP': 'jp-jp',\n  'ko-KR': 'kr-kr',\n  'zh-CN': 'cn-zh',\n  'ru-RU': 'ru-ru',\n};\n\nfunction getDdgRegion(locale: string): string {\n  return ddgRegions[locale] || 'wt-wt';\n}\n\n// ========== Sec-Fetch Headers ==========\n\nconst secFetchHeaders: Record<string, string> = {\n  'Sec-Fetch-Dest': 'document',\n  'Sec-Fetch-Mode': 'navigate',\n  'Sec-Fetch-Site': 'same-origin',\n  'Sec-Fetch-User': '?1',\n  'Upgrade-Insecure-Requests': '1',\n};\n\n// ========== DuckDuckGoImagesEngine ==========\n\nexport class DuckDuckGoImagesEngine implements OnlineEngine {\n  name = 'duckduckgo images';\n  shortcut = 'ddi';\n  categories: Category[] = ['images'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  /**\n   * NOTE: This engine requires an async VQD fetch before building the request.\n   * The caller should pre-fetch VQD and pass it in params.engineData['vqd'].\n   * If not provided, executeEngine will fail. Use the companion helper\n   * `prepareVqd(query, locale)` before calling executeEngine.\n   */\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const region = getDdgRegion(params.locale);\n    const vqd = params.engineData['vqd'] || '';\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('o', 'json');\n    searchParams.set('l', region);\n    searchParams.set('f', ',,,,,');\n    searchParams.set('vqd', vqd);\n\n    if (params.page > 1) {\n      searchParams.set('s', ((params.page - 1) * 100).toString());\n    }\n\n    // SafeSearch\n    if (params.safeSearch === 0) {\n      searchParams.set('p', '-1');\n    } else if (params.safeSearch === 2) {\n      searchParams.set('p', '1');\n    }\n\n    return {\n      url: `https://duckduckgo.com/i.js?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': DDG_USER_AGENT,\n        Accept: 'application/json, text/javascript, */*; q=0.01',\n        Referer: 'https://duckduckgo.com/',\n        'X-Requested-With': 'XMLHttpRequest',\n        ...secFetchHeaders,\n      },\n      cookies: [`l=${region}`, `ah=${region}`],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    const jsonStart = body.indexOf('{');\n    if (jsonStart === -1) return results;\n\n    try {\n      const data = JSON.parse(body.slice(jsonStart)) as {\n        results?: Array<{\n          image?: string;\n          thumbnail?: string;\n          title?: string;\n          url?: string;\n          source?: string;\n          width?: number;\n          height?: number;\n        }>;\n      };\n\n      if (data.results) {\n        for (const item of data.results) {\n          if (item.image) {\n            results.results.push({\n              url: item.url || '',\n              title: item.title || '',\n              content: '',\n              engine: this.name,\n              score: this.weight,\n              category: 'images',\n              template: 'images',\n              imageUrl: item.image,\n              thumbnailUrl: item.thumbnail || '',\n              source: item.source || '',\n              resolution: `${item.width || 0}x${item.height || 0}`,\n            });\n          }\n        }\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n\n// ========== DuckDuckGoVideosEngine ==========\n\nexport class DuckDuckGoVideosEngine implements OnlineEngine {\n  name = 'duckduckgo videos';\n  shortcut = 'ddv';\n  categories: Category[] = ['videos'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const region = getDdgRegion(params.locale);\n    const vqd = params.engineData['vqd'] || '';\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('o', 'json');\n    searchParams.set('l', region);\n    searchParams.set('f', ',,,,,');\n    searchParams.set('vqd', vqd);\n\n    if (params.page > 1) {\n      searchParams.set('s', ((params.page - 1) * 60).toString());\n    }\n\n    if (params.safeSearch === 0) {\n      searchParams.set('p', '-1');\n    } else if (params.safeSearch === 2) {\n      searchParams.set('p', '1');\n    }\n\n    return {\n      url: `https://duckduckgo.com/v.js?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': DDG_USER_AGENT,\n        Accept: 'application/json, text/javascript, */*; q=0.01',\n        Referer: 'https://duckduckgo.com/',\n        'X-Requested-With': 'XMLHttpRequest',\n        ...secFetchHeaders,\n      },\n      cookies: [`l=${region}`],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    const jsonStart = body.indexOf('{');\n    if (jsonStart === -1) return results;\n\n    try {\n      const data = JSON.parse(body.slice(jsonStart)) as {\n        results?: Array<{\n          content?: string;\n          title?: string;\n          description?: string;\n          duration?: string;\n          provider?: string;\n          uploader?: string;\n          published?: string;\n          images?: { small?: string; medium?: string; large?: string };\n          embed_url?: string;\n        }>;\n      };\n\n      if (data.results) {\n        for (const item of data.results) {\n          let thumbnail =\n            item.images?.medium ||\n            item.images?.small ||\n            item.images?.large ||\n            '';\n\n          let content = item.description || '';\n          if (item.uploader && content) {\n            content = `by ${item.uploader} - ${content}`;\n          } else if (item.uploader) {\n            content = `by ${item.uploader}`;\n          }\n\n          results.results.push({\n            url: item.content || '',\n            title: item.title || '',\n            content,\n            engine: this.name,\n            score: this.weight,\n            category: 'videos',\n            template: 'videos',\n            duration: item.duration || '',\n            source: item.provider || '',\n            thumbnailUrl: thumbnail,\n            embedUrl: item.embed_url || '',\n          });\n        }\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n\n// ========== DuckDuckGoNewsEngine ==========\n\nexport class DuckDuckGoNewsEngine implements OnlineEngine {\n  name = 'duckduckgo news';\n  shortcut = 'ddn';\n  categories: Category[] = ['news'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 10_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const region = getDdgRegion(params.locale);\n    const vqd = params.engineData['vqd'] || '';\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('o', 'json');\n    searchParams.set('l', region);\n    searchParams.set('f', ',,,,,');\n    searchParams.set('vqd', vqd);\n\n    if (params.page > 1) {\n      searchParams.set('s', ((params.page - 1) * 30).toString());\n    }\n\n    return {\n      url: `https://duckduckgo.com/news.js?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        'User-Agent': DDG_USER_AGENT,\n        Accept: 'application/json, text/javascript, */*; q=0.01',\n        Referer: 'https://duckduckgo.com/',\n        'X-Requested-With': 'XMLHttpRequest',\n        ...secFetchHeaders,\n      },\n      cookies: [`l=${region}`],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    const jsonStart = body.indexOf('{');\n    if (jsonStart === -1) return results;\n\n    try {\n      const data = JSON.parse(body.slice(jsonStart)) as {\n        results?: Array<{\n          url?: string;\n          title?: string;\n          excerpt?: string;\n          source?: string;\n          image?: string;\n          date?: number;\n          relative_time?: string;\n        }>;\n      };\n\n      if (data.results) {\n        for (const item of data.results) {\n          let publishedAt = '';\n          if (item.date && item.date > 0) {\n            publishedAt = new Date(item.date * 1000).toISOString();\n          }\n\n          results.results.push({\n            url: item.url || '',\n            title: item.title || '',\n            content: item.excerpt || '',\n            engine: this.name,\n            score: this.weight,\n            category: 'news',\n            template: 'news',\n            source: item.source || '',\n            thumbnailUrl: item.image || '',\n            publishedAt,\n          });\n        }\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n\n// ========== VQD Helper ==========\n\n/**\n * Pre-fetch VQD token for DuckDuckGo engines.\n * Call this before executeEngine for any DDG engine.\n * Returns the VQD token to set in params.engineData['vqd'].\n */\nexport async function prepareVqd(\n  query: string,\n  locale: string\n): Promise<string> {\n  const region = getDdgRegion(locale);\n  return getVqd(query, region);\n}\n\nexport { setVqd };\n", "/**\n * Brave Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/brave.go\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\nimport { extractText, findElements, decodeHtmlEntities } from '../lib/html-parser';\n\nconst timeRangeMap: Record<string, string> = {\n  day: 'pd',\n  week: 'pw',\n  month: 'pm',\n  year: 'py',\n};\n\nexport class BraveEngine implements OnlineEngine {\n  name = 'brave';\n  shortcut = 'br';\n  categories: Category[] = ['general'];\n  supportsPaging = true;\n  maxPage = 50;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('source', 'web');\n\n    // Pagination\n    if (params.page > 1) {\n      searchParams.set('offset', (params.page - 1).toString());\n    }\n\n    // Time range\n    if (params.timeRange && timeRangeMap[params.timeRange]) {\n      searchParams.set('tf', timeRangeMap[params.timeRange]);\n    }\n\n    // Safe search cookie\n    let safeValue = 'moderate';\n    if (params.safeSearch === 2) {\n      safeValue = 'strict';\n    } else if (params.safeSearch === 0) {\n      safeValue = 'off';\n    }\n\n    return {\n      url: `https://search.brave.com/search?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'text/html',\n        'Accept-Language': 'en-US,en;q=0.9',\n      },\n      cookies: [`safesearch=${safeValue}`],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Find \"snippet\" class divs\n    const snippetElements = findElements(body, 'div.snippet');\n\n    for (const el of snippetElements) {\n      const result = this.parseResult(el);\n      if (result) {\n        results.results.push(result);\n      }\n    }\n\n    return results;\n  }\n\n  private parseResult(\n    html: string\n  ): EngineResults['results'][number] | null {\n    let url = '';\n    let title = '';\n    let content = '';\n\n    // Find <a> with href starting with http\n    const linkPattern =\n      /<a\\b[^>]*?\\bhref\\s*=\\s*\"(https?:\\/\\/[^\"]+)\"[^>]*>([\\s\\S]*?)<\\/a>/gi;\n    let linkMatch: RegExpExecArray | null;\n    while ((linkMatch = linkPattern.exec(html)) !== null) {\n      const href = decodeHtmlEntities(linkMatch[1]);\n      if (href.startsWith('http')) {\n        url = href;\n        title = extractText(linkMatch[2]).trim();\n        break;\n      }\n    }\n\n    if (!url || !title) return null;\n\n    // Find content in div with \"content\" class\n    const contentElements = findElements(html, 'div.content');\n    if (contentElements.length > 0) {\n      const text = extractText(contentElements[0]).trim();\n      if (text.length > content.length) {\n        content = text;\n      }\n    }\n\n    // Also try snippet-description class\n    const descElements = findElements(html, 'div.snippet-description');\n    if (descElements.length > 0) {\n      const text = extractText(descElements[0]).trim();\n      if (text.length > content.length) {\n        content = text;\n      }\n    }\n\n    return {\n      url,\n      title,\n      content,\n      engine: this.name,\n      score: this.weight,\n      category: 'general',\n    };\n  }\n}\n", "/**\n * Wikipedia Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/wikipedia.go\n *\n * Uses the MediaWiki API (JSON) with support for 10+ languages.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\n\n// Language map: ISO code -> Wikipedia subdomain\nconst languageMap: Record<string, string> = {\n  en: 'en',\n  de: 'de',\n  fr: 'fr',\n  es: 'es',\n  it: 'it',\n  pt: 'pt',\n  ja: 'ja',\n  ko: 'ko',\n  zh: 'zh',\n  ru: 'ru',\n  ar: 'ar',\n  hi: 'hi',\n  nl: 'nl',\n  pl: 'pl',\n  sv: 'sv',\n  vi: 'vi',\n  uk: 'uk',\n  he: 'he',\n  id: 'id',\n  cs: 'cs',\n  fi: 'fi',\n  da: 'da',\n  no: 'no',\n  hu: 'hu',\n  ro: 'ro',\n  tr: 'tr',\n  th: 'th',\n  el: 'el',\n  fa: 'fa',\n  ca: 'ca',\n};\n\n/**\n * Strip HTML tags from a string and decode entities.\n */\nfunction stripHtmlTags(s: string): string {\n  let result = s;\n  // Remove all HTML tags\n  let start = result.indexOf('<');\n  while (start !== -1) {\n    const end = result.indexOf('>', start);\n    if (end === -1) break;\n    result = result.slice(0, start) + result.slice(end + 1);\n    start = result.indexOf('<');\n  }\n  // Decode HTML entities\n  result = result.replace(/&quot;/g, '\"');\n  result = result.replace(/&amp;/g, '&');\n  result = result.replace(/&lt;/g, '<');\n  result = result.replace(/&gt;/g, '>');\n  result = result.replace(/&#39;/g, \"'\");\n  result = result.replace(/&nbsp;/g, ' ');\n  return result.trim();\n}\n\nexport class WikipediaEngine implements OnlineEngine {\n  name = 'wikipedia';\n  shortcut = 'w';\n  categories: Category[] = ['general'];\n  supportsPaging = true;\n  maxPage = 10;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    // Determine language from locale\n    let lang = 'en';\n    if (params.locale) {\n      const parts = params.locale.split('-');\n      const langCode = parts[0].toLowerCase();\n      if (languageMap[langCode]) {\n        lang = languageMap[langCode];\n      }\n    }\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('action', 'query');\n    searchParams.set('list', 'search');\n    searchParams.set('srsearch', query);\n    searchParams.set('srwhat', 'text');\n    searchParams.set('srlimit', '10');\n    searchParams.set('srprop', 'snippet|titlesnippet|timestamp');\n    searchParams.set('format', 'json');\n    searchParams.set('utf8', '1');\n\n    if (params.page > 1) {\n      searchParams.set('sroffset', ((params.page - 1) * 10).toString());\n    }\n\n    return {\n      url: `https://${lang}.wikipedia.org/w/api.php?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'User-Agent':\n          'MizuSearch/1.0 (https://github.com/go-mizu/mizu; mizu@example.com)',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    try {\n      const data = JSON.parse(body) as {\n        query?: {\n          search?: Array<{\n            ns?: number;\n            title?: string;\n            pageid?: number;\n            snippet?: string;\n            timestamp?: string;\n          }>;\n          searchinfo?: { totalhits?: number };\n        };\n      };\n\n      if (!data.query?.search) return results;\n\n      // Extract language from the URL that was used\n      // We'll use 'en' as default; the actual lang was encoded in the URL\n      const lang = 'en';\n\n      for (const item of data.query.search) {\n        if (!item.title) continue;\n\n        const articleUrl = `https://${lang}.wikipedia.org/wiki/${encodeURIComponent(item.title.replace(/ /g, '_'))}`;\n        const snippet = stripHtmlTags(item.snippet || '');\n\n        results.results.push({\n          url: articleUrl,\n          title: item.title,\n          content: snippet,\n          engine: this.name,\n          score: this.weight,\n          category: 'general',\n        });\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n", "/**\n * YouTube Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/youtube.go\n *\n * Scrapes ytInitialData JSON from YouTube search results page.\n * No API key required.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\n\n// Time range encoding in sp parameter (YouTube's filter encoding)\nconst timeRangeMap: Record<string, string> = {\n  day: 'Ag',\n  week: 'Aw',\n  month: 'BA',\n  year: 'BQ',\n};\n\n// ========== YouTube JSON Types ==========\n\ninterface YtVideoRenderer {\n  videoId?: string;\n  thumbnail?: {\n    thumbnails?: Array<{\n      url?: string;\n      width?: number;\n      height?: number;\n    }>;\n  };\n  title?: {\n    runs?: Array<{ text?: string }>;\n  };\n  descriptionSnippet?: {\n    runs?: Array<{ text?: string }>;\n  };\n  lengthText?: {\n    simpleText?: string;\n  };\n  ownerText?: {\n    runs?: Array<{ text?: string }>;\n  };\n  viewCountText?: {\n    simpleText?: string;\n  };\n  publishedTimeText?: {\n    simpleText?: string;\n  };\n}\n\ninterface YtInitialData {\n  contents?: {\n    twoColumnSearchResultsRenderer?: {\n      primaryContents?: {\n        sectionListRenderer?: {\n          contents?: Array<{\n            itemSectionRenderer?: {\n              contents?: Array<{\n                videoRenderer?: YtVideoRenderer;\n              }>;\n            };\n          }>;\n        };\n      };\n    };\n  };\n}\n\nexport class YouTubeEngine implements OnlineEngine {\n  name = 'youtube';\n  shortcut = 'yt';\n  categories: Category[] = ['videos'];\n  supportsPaging = true;\n  maxPage = 5;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('search_query', query);\n\n    // Time range filter encoded in sp parameter\n    if (params.timeRange && timeRangeMap[params.timeRange]) {\n      const sp = `EgIIA${timeRangeMap[params.timeRange]}%3D%3D`;\n      searchParams.set('sp', sp);\n    }\n\n    return {\n      url: `https://www.youtube.com/results?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'text/html',\n        'Accept-Language': 'en-US,en;q=0.9',\n      },\n      cookies: ['CONSENT=YES+'],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Extract ytInitialData JSON from HTML\n    const match = body.match(\n      /var ytInitialData = ({.+?});<\\/script>/\n    );\n    if (!match) return results;\n\n    let data: YtInitialData;\n    try {\n      data = JSON.parse(match[1]);\n    } catch {\n      return results;\n    }\n\n    // Navigate to video results\n    const sectionContents =\n      data.contents?.twoColumnSearchResultsRenderer?.primaryContents\n        ?.sectionListRenderer?.contents;\n\n    if (!sectionContents) return results;\n\n    for (const section of sectionContents) {\n      const items = section.itemSectionRenderer?.contents;\n      if (!items) continue;\n\n      for (const item of items) {\n        const vr = item.videoRenderer;\n        if (!vr?.videoId) continue;\n\n        // Build title from runs\n        let title = '';\n        if (vr.title?.runs) {\n          title = vr.title.runs.map((r) => r.text || '').join('');\n        }\n\n        // Build description from runs\n        let description = '';\n        if (vr.descriptionSnippet?.runs) {\n          description = vr.descriptionSnippet.runs\n            .map((r) => r.text || '')\n            .join('');\n        }\n\n        // Get channel name\n        let channel = '';\n        if (vr.ownerText?.runs && vr.ownerText.runs.length > 0) {\n          channel = vr.ownerText.runs[0].text || '';\n        }\n\n        // Get thumbnail (last one is usually highest quality)\n        let thumbnailUrl = '';\n        const thumbnails = vr.thumbnail?.thumbnails;\n        if (thumbnails && thumbnails.length > 0) {\n          thumbnailUrl = thumbnails[thumbnails.length - 1].url || '';\n        }\n\n        // Duration\n        const duration = vr.lengthText?.simpleText || '';\n\n        // View count\n        let views = 0;\n        const viewText = vr.viewCountText?.simpleText || '';\n        const viewMatch = viewText.match(/([\\d,]+)\\s*view/i);\n        if (viewMatch) {\n          views = parseInt(viewMatch[1].replace(/,/g, ''), 10) || 0;\n        }\n\n        const videoUrl = `https://www.youtube.com/watch?v=${vr.videoId}`;\n        const embedUrl = `https://www.youtube-nocookie.com/embed/${vr.videoId}`;\n\n        results.results.push({\n          url: videoUrl,\n          title,\n          content: description,\n          engine: this.name,\n          score: this.weight,\n          category: 'videos',\n          template: 'videos',\n          duration,\n          embedUrl,\n          thumbnailUrl,\n          channel,\n          views,\n        });\n      }\n    }\n\n    return results;\n  }\n}\n", "/**\n * Reddit Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/reddit.go\n *\n * Uses reddit.com/search.json for JSON results.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\n\n// Invalid thumbnail values to filter out\nconst INVALID_THUMBNAILS = new Set(['self', 'default', 'nsfw', 'spoiler', '']);\n\n/**\n * Check if a URL is valid (has scheme and host).\n */\nfunction isValidUrl(s: string): boolean {\n  if (!s || INVALID_THUMBNAILS.has(s)) return false;\n  try {\n    const url = new URL(s);\n    return url.protocol === 'http:' || url.protocol === 'https:';\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Truncate text to maxLen characters with ellipsis.\n */\nfunction truncateText(s: string, maxLen: number): string {\n  if (s.length <= maxLen) return s;\n  return s.slice(0, maxLen) + '...';\n}\n\nexport class RedditEngine implements OnlineEngine {\n  name = 'reddit';\n  shortcut = 're';\n  categories: Category[] = ['social'];\n  supportsPaging = false;\n  maxPage = 1;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, _params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('limit', '25');\n\n    return {\n      url: `https://www.reddit.com/search.json?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'User-Agent': 'Mozilla/5.0 (compatible; SearXNG)',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    try {\n      const data = JSON.parse(body) as {\n        data?: {\n          children?: Array<{\n            data?: {\n              title?: string;\n              selftext?: string;\n              permalink?: string;\n              url?: string;\n              thumbnail?: string;\n              created_utc?: number;\n              subreddit?: string;\n              author?: string;\n              score?: number;\n              num_comments?: number;\n            };\n          }>;\n        };\n      };\n\n      if (!data.data?.children) return results;\n\n      for (const child of data.data.children) {\n        const post = child.data;\n        if (!post?.permalink || !post.title) continue;\n\n        const url = `https://www.reddit.com${post.permalink}`;\n        const content = truncateText(post.selftext || '', 500);\n\n        let publishedAt = '';\n        if (post.created_utc && post.created_utc > 0) {\n          publishedAt = new Date(post.created_utc * 1000).toISOString();\n        }\n\n        let thumbnailUrl = '';\n        let imageUrl = '';\n        if (isValidUrl(post.thumbnail || '')) {\n          thumbnailUrl = post.thumbnail!;\n          if (isValidUrl(post.url || '')) {\n            imageUrl = post.url!;\n          }\n        }\n\n        results.results.push({\n          url,\n          title: post.title,\n          content,\n          engine: this.name,\n          score: this.weight,\n          category: 'social',\n          publishedAt,\n          thumbnailUrl,\n          imageUrl: imageUrl || undefined,\n          template: thumbnailUrl ? 'images' : undefined,\n          source: post.subreddit ? `r/${post.subreddit}` : undefined,\n          channel: post.author || undefined,\n        });\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n", "/**\n * Simple XML parser for Cloudflare Workers.\n * Provides basic element extraction by tag name.\n * Used primarily for arXiv ATOM feed parsing.\n */\n\nimport { decodeHtmlEntities } from './html-parser';\n\nexport interface XmlElement {\n  tag: string;\n  attributes: Record<string, string>;\n  content: string;\n  children: XmlElement[];\n}\n\n/**\n * Extract all elements with a given tag name from XML text.\n * Returns the full inner content (including nested tags) as a string.\n */\nexport function getElementsByTagName(\n  xml: string,\n  tagName: string\n): string[] {\n  const results: string[] = [];\n  const openPattern = new RegExp(`<${tagName}(?:\\\\s[^>]*)?>`, 'gi');\n  const closeTag = `</${tagName}>`;\n\n  let openMatch: RegExpExecArray | null;\n  while ((openMatch = openPattern.exec(xml)) !== null) {\n    const contentStart = openMatch.index + openMatch[0].length;\n\n    // Check for self-closing tag\n    if (openMatch[0].endsWith('/>')) {\n      results.push('');\n      continue;\n    }\n\n    // Find matching close tag, handling nesting\n    let depth = 1;\n    let pos = contentStart;\n\n    while (depth > 0 && pos < xml.length) {\n      const nextOpen = xml.indexOf(`<${tagName}`, pos);\n      const nextClose = xml.toLowerCase().indexOf(closeTag.toLowerCase(), pos);\n\n      if (nextClose === -1) {\n        // No closing tag found, take rest of string\n        break;\n      }\n\n      if (nextOpen !== -1 && nextOpen < nextClose) {\n        // Check if it is truly an opening tag (not a different tag starting with same prefix)\n        const afterTag = xml[nextOpen + tagName.length + 1];\n        if (\n          afterTag === '>' ||\n          afterTag === ' ' ||\n          afterTag === '/' ||\n          afterTag === '\\n' ||\n          afterTag === '\\r' ||\n          afterTag === '\\t'\n        ) {\n          // Check for self-closing\n          const openEnd = xml.indexOf('>', nextOpen);\n          if (openEnd !== -1 && xml[openEnd - 1] !== '/') {\n            depth++;\n          }\n        }\n        pos = nextOpen + tagName.length + 1;\n      } else {\n        depth--;\n        if (depth === 0) {\n          results.push(xml.slice(contentStart, nextClose));\n        }\n        pos = nextClose + closeTag.length;\n      }\n    }\n  }\n\n  return results;\n}\n\n/**\n * Get the text content of the first element with the given tag name.\n * Strips inner XML tags and decodes entities.\n */\nexport function getTextContent(xml: string, tagName: string): string {\n  const elements = getElementsByTagName(xml, tagName);\n  if (elements.length === 0) {\n    return '';\n  }\n  // Strip all XML/HTML tags\n  const stripped = elements[0].replace(/<[^>]+>/g, '');\n  return decodeHtmlEntities(stripped).trim();\n}\n\n/**\n * Get text content of all elements with the given tag name.\n */\nexport function getAllTextContent(xml: string, tagName: string): string[] {\n  const elements = getElementsByTagName(xml, tagName);\n  return elements.map((el) => {\n    const stripped = el.replace(/<[^>]+>/g, '');\n    return decodeHtmlEntities(stripped).trim();\n  });\n}\n\n/**\n * Get an attribute value from the first element with a given tag name.\n * If attrName is specified, returns the value of that attribute.\n */\nexport function getElementAttribute(\n  xml: string,\n  tagName: string,\n  attrName: string\n): string[] {\n  const results: string[] = [];\n  const pattern = new RegExp(\n    `<${tagName}\\\\b[^>]*?\\\\b${attrName}\\\\s*=\\\\s*(?:\"([^\"]*)\"|'([^']*)')`,\n    'gi'\n  );\n\n  let match: RegExpExecArray | null;\n  while ((match = pattern.exec(xml)) !== null) {\n    results.push(decodeHtmlEntities(match[1] ?? match[2] ?? ''));\n  }\n\n  return results;\n}\n\n/**\n * Parse an XML string into a simplified element structure.\n * This is a lightweight parser -- it does not handle all XML edge cases,\n * but works well for clean XML like arXiv ATOM feeds.\n */\nexport function parseXml(xml: string): XmlElement[] {\n  const elements: XmlElement[] = [];\n  const tagPattern = /<(\\w[\\w:-]*)((?:\\s+[\\w:-]+\\s*=\\s*(?:\"[^\"]*\"|'[^']*'))*)\\s*(\\/?)>/g;\n\n  let match: RegExpExecArray | null;\n  while ((match = tagPattern.exec(xml)) !== null) {\n    const tag = match[1];\n    const attrsRaw = match[2] || '';\n    const selfClosing = match[3] === '/';\n\n    // Parse attributes\n    const attributes: Record<string, string> = {};\n    const attrPattern = /([\\w:-]+)\\s*=\\s*(?:\"([^\"]*)\"|'([^']*)')/g;\n    let attrMatch: RegExpExecArray | null;\n    while ((attrMatch = attrPattern.exec(attrsRaw)) !== null) {\n      attributes[attrMatch[1]] = decodeHtmlEntities(\n        attrMatch[2] ?? attrMatch[3] ?? ''\n      );\n    }\n\n    if (selfClosing) {\n      elements.push({ tag, attributes, content: '', children: [] });\n    } else {\n      // Find content until closing tag\n      const closeTag = `</${tag}>`;\n      const closeIndex = xml\n        .toLowerCase()\n        .indexOf(closeTag.toLowerCase(), match.index + match[0].length);\n      if (closeIndex !== -1) {\n        const content = xml.slice(\n          match.index + match[0].length,\n          closeIndex\n        );\n        elements.push({\n          tag,\n          attributes,\n          content,\n          children: parseXml(content),\n        });\n      }\n    }\n  }\n\n  return elements;\n}\n", "/**\n * arXiv Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/arxiv.go\n *\n * Uses export.arxiv.org/api/query XML (ATOM) endpoint.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\nimport {\n  getElementsByTagName,\n  getTextContent,\n  getElementAttribute,\n} from '../lib/xml-parser';\n\nexport class ArxivEngine implements OnlineEngine {\n  name = 'arxiv';\n  shortcut = 'arx';\n  categories: Category[] = ['science'];\n  supportsPaging = true;\n  maxPage = 10;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, params: EngineParams): RequestConfig {\n    const maxResults = 10;\n    let start = 0;\n    if (params.page > 1) {\n      start = (params.page - 1) * maxResults;\n    }\n\n    const searchParams = new URLSearchParams();\n    searchParams.set('search_query', `all:${query}`);\n    searchParams.set('start', start.toString());\n    searchParams.set('max_results', maxResults.toString());\n\n    return {\n      url: `https://export.arxiv.org/api/query?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'application/atom+xml',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    // Parse ATOM XML entries\n    const entries = getElementsByTagName(body, 'entry');\n\n    for (const entry of entries) {\n      // Extract ID (URL)\n      const id = getTextContent(entry, 'id').trim();\n      if (!id) continue;\n\n      // Extract title\n      const title = getTextContent(entry, 'title')\n        .replace(/\\s+/g, ' ')\n        .trim();\n\n      // Extract summary\n      const summary = getTextContent(entry, 'summary')\n        .replace(/\\s+/g, ' ')\n        .trim();\n\n      // Extract authors\n      const authorNames = getElementsByTagName(entry, 'author');\n      const authors: string[] = [];\n      for (const authorXml of authorNames) {\n        const name = getTextContent(authorXml, 'name').trim();\n        if (name) {\n          authors.push(name);\n        }\n      }\n\n      // Extract published date\n      const published = getTextContent(entry, 'published').trim();\n      let publishedAt = '';\n      if (published) {\n        try {\n          publishedAt = new Date(published).toISOString();\n        } catch {\n          publishedAt = published;\n        }\n      }\n\n      // Find PDF link\n      const linkHrefs = getElementAttribute(entry, 'link', 'href');\n      const linkTitles = getElementAttribute(entry, 'link', 'title');\n      let pdfUrl = '';\n      for (let i = 0; i < linkTitles.length; i++) {\n        if (linkTitles[i] === 'pdf' && linkHrefs[i]) {\n          pdfUrl = linkHrefs[i];\n          break;\n        }\n      }\n\n      // Extract DOI\n      const doi = getTextContent(entry, 'doi').trim();\n\n      // Extract journal reference\n      const journal = getTextContent(entry, 'journal_ref').trim();\n\n      // Build content with PDF link appended\n      let content = summary;\n      if (pdfUrl) {\n        content += ` [PDF: ${pdfUrl}]`;\n      }\n\n      results.results.push({\n        url: id,\n        title,\n        content,\n        engine: this.name,\n        score: this.weight,\n        category: 'science',\n        template: 'paper',\n        authors,\n        publishedAt,\n        doi: doi || undefined,\n        journal: journal || undefined,\n      });\n    }\n\n    return results;\n  }\n}\n", "/**\n * GitHub Search Engine adapter.\n * Ported from Go: pkg/engine/local/engines/github.go\n *\n * Uses api.github.com/search/repositories, sorted by stars.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  RequestConfig,\n  EngineResults,\n  Category,\n} from './engine';\nimport { newEngineResults } from './engine';\n\n// ========== GitHub API Types ==========\n\ninterface GitHubRepo {\n  id?: number;\n  full_name?: string;\n  html_url?: string;\n  description?: string;\n  fork?: boolean;\n  language?: string;\n  stargazers_count?: number;\n  watchers_count?: number;\n  forks_count?: number;\n  open_issues_count?: number;\n  license?: {\n    name?: string;\n    spdx_id?: string;\n  };\n  topics?: string[];\n  updated_at?: string;\n  created_at?: string;\n  homepage?: string;\n  clone_url?: string;\n  owner?: {\n    login?: string;\n    avatar_url?: string;\n  };\n}\n\ninterface GitHubSearchResponse {\n  total_count?: number;\n  items?: GitHubRepo[];\n}\n\nexport class GitHubEngine implements OnlineEngine {\n  name = 'github';\n  shortcut = 'gh';\n  categories: Category[] = ['it'];\n  supportsPaging = false;\n  maxPage = 1;\n  timeout = 5_000;\n  weight = 1.0;\n  disabled = false;\n\n  buildRequest(query: string, _params: EngineParams): RequestConfig {\n    const searchParams = new URLSearchParams();\n    searchParams.set('q', query);\n    searchParams.set('sort', 'stars');\n    searchParams.set('order', 'desc');\n\n    return {\n      url: `https://api.github.com/search/repositories?${searchParams.toString()}`,\n      method: 'GET',\n      headers: {\n        Accept: 'application/vnd.github.preview.text-match+json',\n        'User-Agent': 'SearXNG',\n      },\n      cookies: [],\n    };\n  }\n\n  parseResponse(body: string, _params: EngineParams): EngineResults {\n    const results = newEngineResults();\n\n    try {\n      const data = JSON.parse(body) as GitHubSearchResponse;\n\n      if (!data.items) return results;\n\n      for (const item of data.items) {\n        if (!item.html_url || !item.full_name) continue;\n\n        // Build content with description and metadata\n        let content = item.description || '';\n        const meta: string[] = [];\n\n        if (item.stargazers_count !== undefined && item.stargazers_count > 0) {\n          meta.push(`${formatStars(item.stargazers_count)} stars`);\n        }\n        if (item.language) {\n          meta.push(item.language);\n        }\n        if (item.topics && item.topics.length > 0) {\n          meta.push(item.topics.slice(0, 5).join(', '));\n        }\n\n        if (meta.length > 0) {\n          content = content\n            ? `${content} | ${meta.join(' | ')}`\n            : meta.join(' | ');\n        }\n\n        let publishedAt = '';\n        if (item.updated_at) {\n          try {\n            publishedAt = new Date(item.updated_at).toISOString();\n          } catch {\n            publishedAt = item.updated_at;\n          }\n        }\n\n        results.results.push({\n          url: item.html_url,\n          title: item.full_name,\n          content,\n          engine: this.name,\n          score: this.weight,\n          category: 'it',\n          template: 'packages',\n          thumbnailUrl: item.owner?.avatar_url || '',\n          publishedAt,\n          stars: item.stargazers_count || 0,\n          language: item.language || '',\n          topics: item.topics || [],\n        });\n      }\n    } catch {\n      // Parse error\n    }\n\n    return results;\n  }\n}\n\n/**\n * Format star count with K/M suffixes for readability.\n */\nfunction formatStars(count: number): string {\n  if (count >= 1_000_000) {\n    return (count / 1_000_000).toFixed(1) + 'M';\n  }\n  if (count >= 1_000) {\n    return (count / 1_000).toFixed(1) + 'k';\n  }\n  return count.toString();\n}\n", "/**\n * MetaSearch - aggregates results from multiple search engines.\n *\n * Provides engine registry, parallel execution, deduplication,\n * score merging, and pagination.\n */\n\nimport type {\n  OnlineEngine,\n  EngineParams,\n  EngineResult,\n  EngineResults,\n  Category,\n} from './engine';\nimport { executeEngine } from './engine';\nimport { GoogleEngine, GoogleImagesEngine } from './google';\nimport { BingEngine, BingImagesEngine, BingNewsEngine } from './bing';\nimport {\n  DuckDuckGoImagesEngine,\n  DuckDuckGoVideosEngine,\n  DuckDuckGoNewsEngine,\n} from './duckduckgo';\nimport { BraveEngine } from './brave';\nimport { WikipediaEngine } from './wikipedia';\nimport { YouTubeEngine } from './youtube';\nimport { RedditEngine } from './reddit';\nimport { ArxivEngine } from './arxiv';\nimport { GitHubEngine } from './github';\n\n// ========== MetaSearch Result ==========\n\nexport interface MetaSearchResult {\n  results: EngineResult[];\n  suggestions: string[];\n  corrections: string[];\n  totalEngines: number;\n  successfulEngines: number;\n  failedEngines: string[];\n}\n\n// ========== MetaSearch Class ==========\n\nexport class MetaSearch {\n  private engines: Map<string, OnlineEngine> = new Map();\n\n  /**\n   * Register an engine in the registry.\n   */\n  register(engine: OnlineEngine): void {\n    this.engines.set(engine.name, engine);\n  }\n\n  /**\n   * Get an engine by name.\n   */\n  get(name: string): OnlineEngine | undefined {\n    return this.engines.get(name);\n  }\n\n  /**\n   * Get all engines for a given category.\n   * Only returns enabled engines.\n   */\n  getByCategory(category: Category): OnlineEngine[] {\n    const matched: OnlineEngine[] = [];\n    for (const engine of this.engines.values()) {\n      if (engine.disabled) continue;\n      if (engine.categories.includes(category)) {\n        matched.push(engine);\n      }\n    }\n    return matched;\n  }\n\n  /**\n   * Get all registered engine names.\n   */\n  listEngines(): string[] {\n    return Array.from(this.engines.keys());\n  }\n\n  /**\n   * Perform a metasearch across all engines in the given category.\n   *\n   * 1. Gets engines for the category\n   * 2. Executes all in parallel with Promise.allSettled\n   * 3. Collects results and suggestions\n   * 4. Deduplicates by URL (merges scores for duplicates)\n   * 5. Sorts by score descending\n   * 6. Returns paginated results with metadata\n   */\n  async search(\n    query: string,\n    category: Category,\n    params: EngineParams\n  ): Promise<MetaSearchResult> {\n    const engines = this.getByCategory(category);\n\n    if (engines.length === 0) {\n      return {\n        results: [],\n        suggestions: [],\n        corrections: [],\n        totalEngines: 0,\n        successfulEngines: 0,\n        failedEngines: [],\n      };\n    }\n\n    // Execute all engines in parallel\n    const promises = engines.map((engine) =>\n      executeEngine(engine, query, params).then(\n        (result) => ({ engine: engine.name, result, error: null }),\n        (error) => ({\n          engine: engine.name,\n          result: null as EngineResults | null,\n          error: error instanceof Error ? error.message : String(error),\n        })\n      )\n    );\n\n    const settled = await Promise.allSettled(promises);\n\n    // Collect results\n    const allResults: EngineResult[] = [];\n    const allSuggestions: string[] = [];\n    const allCorrections: string[] = [];\n    const failedEngines: string[] = [];\n    let successfulEngines = 0;\n\n    for (const outcome of settled) {\n      if (outcome.status === 'rejected') {\n        continue;\n      }\n\n      const { engine: engineName, result, error } = outcome.value;\n\n      if (error || !result) {\n        failedEngines.push(engineName);\n        continue;\n      }\n\n      successfulEngines++;\n      allResults.push(...result.results);\n      allSuggestions.push(...result.suggestions);\n      allCorrections.push(...result.corrections);\n    }\n\n    // Deduplicate by URL (merge scores when duplicate)\n    const deduped = this.deduplicateResults(allResults);\n\n    // Sort by score descending\n    deduped.sort((a, b) => b.score - a.score);\n\n    // Deduplicate suggestions\n    const uniqueSuggestions = [...new Set(allSuggestions)];\n    const uniqueCorrections = [...new Set(allCorrections)];\n\n    return {\n      results: deduped,\n      suggestions: uniqueSuggestions,\n      corrections: uniqueCorrections,\n      totalEngines: engines.length,\n      successfulEngines,\n      failedEngines,\n    };\n  }\n\n  /**\n   * Deduplicate results by URL.\n   * When two results share the same URL, merge their scores\n   * (additive) and keep the one with more content.\n   */\n  private deduplicateResults(results: EngineResult[]): EngineResult[] {\n    const urlMap = new Map<string, EngineResult>();\n\n    for (const result of results) {\n      const normalizedUrl = this.normalizeUrl(result.url);\n\n      if (!normalizedUrl) continue;\n\n      const existing = urlMap.get(normalizedUrl);\n      if (existing) {\n        // Merge scores\n        existing.score += result.score;\n\n        // Keep longer content\n        if (result.content.length > existing.content.length) {\n          existing.content = result.content;\n        }\n\n        // Keep title if current is empty\n        if (!existing.title && result.title) {\n          existing.title = result.title;\n        }\n\n        // Merge thumbnail\n        if (!existing.thumbnailUrl && result.thumbnailUrl) {\n          existing.thumbnailUrl = result.thumbnailUrl;\n        }\n      } else {\n        // Clone the result to avoid mutation\n        urlMap.set(normalizedUrl, { ...result });\n      }\n    }\n\n    return Array.from(urlMap.values());\n  }\n\n  /**\n   * Normalize a URL for deduplication.\n   * Strips trailing slashes, removes www. prefix, lowercases host.\n   */\n  private normalizeUrl(url: string): string {\n    if (!url) return '';\n\n    try {\n      const parsed = new URL(url);\n      let host = parsed.hostname.toLowerCase();\n      if (host.startsWith('www.')) {\n        host = host.slice(4);\n      }\n      let path = parsed.pathname;\n      if (path.endsWith('/') && path.length > 1) {\n        path = path.slice(0, -1);\n      }\n      return `${parsed.protocol}//${host}${path}${parsed.search}`;\n    } catch {\n      return url.toLowerCase();\n    }\n  }\n}\n\n/**\n * Create a MetaSearch instance pre-loaded with all built-in engines.\n */\nexport function createDefaultMetaSearch(): MetaSearch {\n  const ms = new MetaSearch();\n\n  // General search engines\n  ms.register(new GoogleEngine());\n  ms.register(new BingEngine());\n  ms.register(new BraveEngine());\n  ms.register(new WikipediaEngine());\n\n  // Image search engines\n  ms.register(new GoogleImagesEngine());\n  ms.register(new BingImagesEngine());\n  ms.register(new DuckDuckGoImagesEngine());\n\n  // Video search engines\n  ms.register(new YouTubeEngine());\n  ms.register(new DuckDuckGoVideosEngine());\n\n  // News search engines\n  ms.register(new BingNewsEngine());\n  ms.register(new DuckDuckGoNewsEngine());\n\n  // Specialized engines\n  ms.register(new ArxivEngine());\n  ms.register(new GitHubEngine());\n  ms.register(new RedditEngine());\n\n  return ms;\n}\n", "import type {\n  SearchResponse,\n  Suggestion,\n  KnowledgePanel,\n  InstantAnswer,\n} from '../types';\n\nconst TTL_SEARCH = 300;       // 5 minutes\nconst TTL_SUGGEST = 60;       // 1 minute\nconst TTL_KNOWLEDGE = 3600;   // 1 hour\nconst TTL_INSTANT = 600;      // 10 minutes\n\nexport class CacheStore {\n  private kv: KVNamespace;\n\n  constructor(kv: KVNamespace) {\n    this.kv = kv;\n  }\n\n  // --- Search results cache ---\n\n  async getSearch(hash: string): Promise<SearchResponse | null> {\n    const raw = await this.kv.get(`cache:search:${hash}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as SearchResponse;\n  }\n\n  async setSearch(hash: string, response: SearchResponse): Promise<void> {\n    await this.kv.put(`cache:search:${hash}`, JSON.stringify(response), {\n      expirationTtl: TTL_SEARCH,\n    });\n  }\n\n  // --- Suggestions cache ---\n\n  async getSuggest(hash: string): Promise<Suggestion[] | null> {\n    const raw = await this.kv.get(`cache:suggest:${hash}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as Suggestion[];\n  }\n\n  async setSuggest(hash: string, suggestions: Suggestion[]): Promise<void> {\n    await this.kv.put(`cache:suggest:${hash}`, JSON.stringify(suggestions), {\n      expirationTtl: TTL_SUGGEST,\n    });\n  }\n\n  // --- Knowledge panel cache ---\n\n  async getKnowledge(query: string): Promise<KnowledgePanel | null> {\n    const raw = await this.kv.get(`cache:knowledge:${query}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as KnowledgePanel;\n  }\n\n  async setKnowledge(query: string, panel: KnowledgePanel): Promise<void> {\n    await this.kv.put(`cache:knowledge:${query}`, JSON.stringify(panel), {\n      expirationTtl: TTL_KNOWLEDGE,\n    });\n  }\n\n  // --- Instant answer cache ---\n\n  async getInstant(hash: string): Promise<InstantAnswer | null> {\n    const raw = await this.kv.get(`cache:instant:${hash}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as InstantAnswer;\n  }\n\n  async setInstant(hash: string, answer: InstantAnswer): Promise<void> {\n    await this.kv.put(`cache:instant:${hash}`, JSON.stringify(answer), {\n      expirationTtl: TTL_INSTANT,\n    });\n  }\n}\n", "import type {\n  SearchSettings,\n  UserPreference,\n  SearchLens,\n  SearchHistory,\n  Bang,\n} from '../types';\n\nexport interface WidgetSettings {\n  calculator: boolean;\n  unit_converter: boolean;\n  currency: boolean;\n  weather: boolean;\n  dictionary: boolean;\n  time_zones: boolean;\n  knowledge_panel: boolean;\n}\n\nconst DEFAULT_SETTINGS: SearchSettings = {\n  safe_search: 'moderate',\n  results_per_page: 10,\n  region: '',\n  language: 'en',\n  theme: 'system',\n  open_in_new_tab: false,\n  show_thumbnails: true,\n};\n\nconst DEFAULT_WIDGET_SETTINGS: WidgetSettings = {\n  calculator: true,\n  unit_converter: true,\n  currency: true,\n  weather: true,\n  dictionary: true,\n  time_zones: true,\n  knowledge_panel: true,\n};\n\nconst MAX_HISTORY = 100;\n\nexport class KVStore {\n  private kv: KVNamespace;\n\n  constructor(kv: KVNamespace) {\n    this.kv = kv;\n  }\n\n  // --- Settings ---\n\n  async getSettings(): Promise<SearchSettings> {\n    const raw = await this.kv.get('settings:default');\n    if (!raw) {\n      return { ...DEFAULT_SETTINGS };\n    }\n    return JSON.parse(raw) as SearchSettings;\n  }\n\n  async updateSettings(settings: Partial<SearchSettings>): Promise<SearchSettings> {\n    const current = await this.getSettings();\n    const merged: SearchSettings = { ...current, ...settings };\n    await this.kv.put('settings:default', JSON.stringify(merged));\n    return merged;\n  }\n\n  // --- Preferences ---\n\n  async listPreferences(): Promise<UserPreference[]> {\n    const index = await this.getIndex('preferences:_index');\n    const preferences: UserPreference[] = [];\n    for (const domain of index) {\n      const pref = await this.getPreference(domain);\n      if (pref) {\n        preferences.push(pref);\n      }\n    }\n    return preferences;\n  }\n\n  async getPreference(domain: string): Promise<UserPreference | null> {\n    const raw = await this.kv.get(`preferences:${domain}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as UserPreference;\n  }\n\n  async setPreference(pref: UserPreference): Promise<void> {\n    await this.kv.put(`preferences:${pref.domain}`, JSON.stringify(pref));\n    await this.addToIndex('preferences:_index', pref.domain);\n  }\n\n  async deletePreference(domain: string): Promise<void> {\n    await this.kv.delete(`preferences:${domain}`);\n    await this.removeFromIndex('preferences:_index', domain);\n  }\n\n  // --- Lenses ---\n\n  async listLenses(): Promise<SearchLens[]> {\n    const index = await this.getIndex('lenses:_index');\n    const lenses: SearchLens[] = [];\n    for (const id of index) {\n      const lens = await this.getLens(id);\n      if (lens) {\n        lenses.push(lens);\n      }\n    }\n    return lenses;\n  }\n\n  async getLens(id: string): Promise<SearchLens | null> {\n    const raw = await this.kv.get(`lenses:${id}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as SearchLens;\n  }\n\n  async createLens(lens: SearchLens): Promise<void> {\n    await this.kv.put(`lenses:${lens.id}`, JSON.stringify(lens));\n    await this.addToIndex('lenses:_index', lens.id);\n  }\n\n  async updateLens(id: string, lens: Partial<SearchLens>): Promise<SearchLens | null> {\n    const current = await this.getLens(id);\n    if (!current) return null;\n    const updated: SearchLens = {\n      ...current,\n      ...lens,\n      id,\n      updated_at: new Date().toISOString(),\n    };\n    await this.kv.put(`lenses:${id}`, JSON.stringify(updated));\n    return updated;\n  }\n\n  async deleteLens(id: string): Promise<void> {\n    await this.kv.delete(`lenses:${id}`);\n    await this.removeFromIndex('lenses:_index', id);\n  }\n\n  // --- History ---\n\n  async listHistory(limit?: number): Promise<SearchHistory[]> {\n    const index = await this.getIndex('history:_index');\n    const sliced = limit ? index.slice(0, limit) : index;\n    const entries: SearchHistory[] = [];\n    for (const id of sliced) {\n      const entry = await this.getHistoryEntry(id);\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n    return entries;\n  }\n\n  private async getHistoryEntry(id: string): Promise<SearchHistory | null> {\n    const raw = await this.kv.get(`history:${id}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as SearchHistory;\n  }\n\n  async addHistory(entry: SearchHistory): Promise<void> {\n    await this.kv.put(`history:${entry.id}`, JSON.stringify(entry));\n\n    const index = await this.getIndex('history:_index');\n    // Prepend newest first\n    const updated = [entry.id, ...index.filter((id) => id !== entry.id)];\n    // Trim to max history size and clean up old entries\n    if (updated.length > MAX_HISTORY) {\n      const removed = updated.slice(MAX_HISTORY);\n      for (const id of removed) {\n        await this.kv.delete(`history:${id}`);\n      }\n    }\n    await this.setIndex('history:_index', updated.slice(0, MAX_HISTORY));\n  }\n\n  async deleteHistory(id: string): Promise<void> {\n    await this.kv.delete(`history:${id}`);\n    await this.removeFromIndex('history:_index', id);\n  }\n\n  async clearHistory(): Promise<void> {\n    const index = await this.getIndex('history:_index');\n    for (const id of index) {\n      await this.kv.delete(`history:${id}`);\n    }\n    await this.setIndex('history:_index', []);\n  }\n\n  // --- Bangs ---\n\n  async listBangs(): Promise<Bang[]> {\n    const index = await this.getIndex('bangs:_index');\n    const bangs: Bang[] = [];\n    for (const trigger of index) {\n      const bang = await this.getBang(trigger);\n      if (bang) {\n        bangs.push(bang);\n      }\n    }\n    return bangs;\n  }\n\n  async getBang(trigger: string): Promise<Bang | null> {\n    const raw = await this.kv.get(`bangs:${trigger}`);\n    if (!raw) return null;\n    return JSON.parse(raw) as Bang;\n  }\n\n  async createBang(bang: Bang): Promise<void> {\n    await this.kv.put(`bangs:${bang.trigger}`, JSON.stringify(bang));\n    await this.addToIndex('bangs:_index', bang.trigger);\n    if (!bang.is_builtin) {\n      await this.addToIndex('bangs:_custom', bang.trigger);\n    }\n  }\n\n  async deleteBang(trigger: string): Promise<void> {\n    await this.kv.delete(`bangs:${trigger}`);\n    await this.removeFromIndex('bangs:_index', trigger);\n    await this.removeFromIndex('bangs:_custom', trigger);\n  }\n\n  // --- Widget Settings ---\n\n  async getWidgetSettings(): Promise<WidgetSettings> {\n    const raw = await this.kv.get('widgets:settings');\n    if (!raw) {\n      return { ...DEFAULT_WIDGET_SETTINGS };\n    }\n    return JSON.parse(raw) as WidgetSettings;\n  }\n\n  async updateWidgetSettings(settings: Partial<WidgetSettings>): Promise<WidgetSettings> {\n    const current = await this.getWidgetSettings();\n    const merged: WidgetSettings = { ...current, ...settings };\n    await this.kv.put('widgets:settings', JSON.stringify(merged));\n    return merged;\n  }\n\n  // --- Index helpers ---\n\n  private async getIndex(key: string): Promise<string[]> {\n    const raw = await this.kv.get(key);\n    if (!raw) return [];\n    return JSON.parse(raw) as string[];\n  }\n\n  private async setIndex(key: string, index: string[]): Promise<void> {\n    await this.kv.put(key, JSON.stringify(index));\n  }\n\n  private async addToIndex(key: string, value: string): Promise<void> {\n    const index = await this.getIndex(key);\n    if (!index.includes(value)) {\n      index.push(value);\n      await this.setIndex(key, index);\n    }\n  }\n\n  private async removeFromIndex(key: string, value: string): Promise<void> {\n    const index = await this.getIndex(key);\n    const filtered = index.filter((item) => item !== value);\n    if (filtered.length !== index.length) {\n      await this.setIndex(key, filtered);\n    }\n  }\n}\n", "import type {\n  SearchResponse,\n  SearchResult,\n  SearchOptions,\n  SearchHistory,\n  InstantAnswer,\n} from '../types';\nimport type { CacheStore } from '../store/cache';\nimport type { KVStore } from '../store/kv';\nimport type { BangService } from './bang';\nimport type { InstantService } from './instant';\nimport type { KnowledgeService } from './knowledge';\nimport type { MetaSearch } from '../engines/metasearch';\nimport type { Category, EngineParams, EngineResult, TimeRange } from '../engines/engine';\n\n/**\n * Convert time range string to TimeRange type.\n */\nfunction parseTimeRange(tr: string | undefined): TimeRange {\n  if (tr === 'day' || tr === 'week' || tr === 'month' || tr === 'year') {\n    return tr;\n  }\n  return '';\n}\n\n/**\n * Convert SearchOptions to EngineParams and Category for metasearch.\n */\nfunction toEngineParams(options: SearchOptions): { category: Category; params: EngineParams } {\n  let category: Category = 'general';\n  if (options.file_type === 'image') {\n    category = 'images';\n  } else if (options.file_type === 'video') {\n    category = 'videos';\n  } else if (options.file_type === 'news') {\n    category = 'news';\n  }\n\n  return {\n    category,\n    params: {\n      page: options.page,\n      locale: options.language ?? 'en',\n      timeRange: parseTimeRange(options.time_range),\n      safeSearch: options.safe_search === 'strict' ? 2 : (options.safe_search === 'off' ? 0 : 1),\n      engineData: {},\n    },\n  };\n}\n\n/**\n * Convert EngineResult to SearchResult format.\n */\nfunction toSearchResult(r: EngineResult, index: number): SearchResult {\n  return {\n    id: `${Date.now().toString(36)}-${index}`,\n    url: r.url,\n    title: r.title,\n    snippet: r.content,\n    domain: extractDomain(r.url),\n    thumbnail: r.thumbnailUrl ? { url: r.thumbnailUrl } : undefined,\n    published: r.publishedAt,\n    score: r.score,\n    crawled_at: new Date().toISOString(),\n    engine: r.engine,\n    engines: [r.engine],\n  };\n}\n\nfunction extractDomain(url: string): string {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return '';\n  }\n}\n\n// Instant answer detection patterns\nconst CALC_PATTERN = /^\\d+[\\s]*[+\\-*/^%][\\s]*\\d+/;\nconst FUNC_PATTERN = /^(sqrt|sin|cos|tan|log|ln|abs|ceil|floor|round)\\s*\\(/i;\nconst UNIT_PATTERN = /^(\\d+\\.?\\d*)\\s*(mm|cm|m|km|in|ft|yd|mi|mg|g|kg|lb|oz|ton|c|f|k|ml|l|gal|qt|pt|cup|tbsp|tsp|fl_oz|mm2|cm2|m2|km2|in2|ft2|acre|hectare|m\\/s|km\\/h|mph|knots|b|kb|mb|gb|tb|pb|ms|s|min|hr|day|week|month|year)\\s+(to|in)\\s+(mm|cm|m|km|in|ft|yd|mi|mg|g|kg|lb|oz|ton|c|f|k|ml|l|gal|qt|pt|cup|tbsp|tsp|fl_oz|mm2|cm2|m2|km2|in2|ft2|acre|hectare|m\\/s|km\\/h|mph|knots|b|kb|mb|gb|tb|pb|ms|s|min|hr|day|week|month|year)$/i;\nconst CURRENCY_PATTERN = /^(\\d+\\.?\\d*)\\s*(usd|eur|gbp|jpy|cad|aud|chf|cny|inr|krw|brl|mxn|sgd|hkd|nzd|sek|nok|dkk|pln|zar|try|thb|idr|php|czk|ils|clp|myr|twd|ars|cop|sar|aed|egp|vnd|bgn|hrk|huf|isk|ron|rub)\\s+(to|in)\\s+(usd|eur|gbp|jpy|cad|aud|chf|cny|inr|krw|brl|mxn|sgd|hkd|nzd|sek|nok|dkk|pln|zar|try|thb|idr|php|czk|ils|clp|myr|twd|ars|cop|sar|aed|egp|vnd|bgn|hrk|huf|isk|ron|rub)$/i;\nconst WEATHER_PATTERN = /^weather\\s+(in\\s+)?(.+)/i;\nconst DEFINE_PATTERN = /^(?:define|meaning\\s+of)\\s+(.+)/i;\nconst TIME_PATTERN = /^(?:time\\s+in|what\\s+time.*in)\\s+(.+)/i;\n\nfunction generateId(): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 8);\n  return `${timestamp}-${random}`;\n}\n\nfunction hashSearchKey(query: string, options: SearchOptions): string {\n  const key = `${query}|${options.page}|${options.per_page}|${options.time_range ?? ''}|${options.region ?? ''}|${options.language ?? ''}|${options.safe_search ?? ''}|${options.site ?? ''}|${options.lens ?? ''}`;\n  let hash = 0;\n  for (let i = 0; i < key.length; i++) {\n    const char = key.charCodeAt(i);\n    hash = ((hash << 5) - hash + char) | 0;\n  }\n  return Math.abs(hash).toString(36);\n}\n\nexport class SearchService {\n  private metasearch: MetaSearch;\n  private cache: CacheStore;\n  private kvStore: KVStore;\n  private bangService: BangService;\n  private instantService: InstantService;\n  private knowledgeService: KnowledgeService;\n\n  constructor(\n    metasearch: MetaSearch,\n    cache: CacheStore,\n    kvStore: KVStore,\n    bangService: BangService,\n    instantService: InstantService,\n    knowledgeService: KnowledgeService,\n  ) {\n    this.metasearch = metasearch;\n    this.cache = cache;\n    this.kvStore = kvStore;\n    this.bangService = bangService;\n    this.instantService = instantService;\n    this.knowledgeService = knowledgeService;\n  }\n\n  /**\n   * Main search method. Handles bang redirects, caching, instant answers,\n   * knowledge panels, and metasearch aggregation.\n   */\n  async search(query: string, options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    const trimmedQuery = query.trim();\n\n    if (!trimmedQuery) {\n      return this.emptyResponse(trimmedQuery, options, 0);\n    }\n\n    // 1. Check for bang redirect\n    const bangResult = await this.bangService.parse(trimmedQuery);\n    if (bangResult.redirect) {\n      return {\n        ...this.emptyResponse(bangResult.query, options, Date.now() - startTime),\n        redirect: bangResult.redirect,\n        bang: bangResult.bang?.trigger,\n        category: bangResult.category,\n      };\n    }\n\n    const searchQuery = bangResult.query;\n    const cacheHash = hashSearchKey(searchQuery, options);\n\n    // 2. Check cache\n    const cachedResponse = await this.cache.getSearch(cacheHash);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n\n    // 3. Run instant answer detection and metasearch in parallel\n    const { category, params } = toEngineParams(options);\n    const [instantAnswer, knowledgePanel, metaResult] = await Promise.all([\n      this.detectInstantAnswer(searchQuery),\n      options.page === 1 ? this.knowledgeService.getPanel(searchQuery) : Promise.resolve(null),\n      this.metasearch.search(searchQuery, category, params),\n    ]);\n\n    // 4. Convert and paginate results\n    const allResults = metaResult.results.map(toSearchResult);\n    const startIndex = (options.page - 1) * options.per_page;\n    const endIndex = startIndex + options.per_page;\n    const paginatedResults = allResults.slice(startIndex, endIndex);\n    const totalResults = allResults.length;\n    const hasMore = endIndex < totalResults;\n\n    const response: SearchResponse = {\n      query: searchQuery,\n      corrected_query: metaResult.corrections[0],\n      total_results: totalResults,\n      results: paginatedResults,\n      suggestions: metaResult.suggestions,\n      instant_answer: instantAnswer ?? undefined,\n      knowledge_panel: knowledgePanel ?? undefined,\n      search_time_ms: Date.now() - startTime,\n      page: options.page,\n      per_page: options.per_page,\n      has_more: hasMore,\n    };\n\n    // 5. Cache the result\n    await this.cache.setSearch(cacheHash, response);\n\n    // 6. Add to search history (fire-and-forget, don't await)\n    this.addToHistory(searchQuery, totalResults).catch(() => {\n      // Silently ignore history errors\n    });\n\n    return response;\n  }\n\n  /**\n   * Search for images.\n   */\n  async searchImages(query: string, options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    const imageOptions: SearchOptions = { ...options, file_type: 'image' };\n    const cacheHash = hashSearchKey(`img:${query}`, imageOptions);\n\n    const cachedResponse = await this.cache.getSearch(cacheHash);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n\n    const { params } = toEngineParams(imageOptions);\n    const metaResult = await this.metasearch.search(query, 'images', params);\n    const allResults = metaResult.results.map(toSearchResult);\n    const startIndex = (options.page - 1) * options.per_page;\n    const endIndex = startIndex + options.per_page;\n    const paginatedResults = allResults.slice(startIndex, endIndex);\n    const totalResults = allResults.length;\n    const hasMore = endIndex < totalResults;\n\n    const response: SearchResponse = {\n      query,\n      total_results: totalResults,\n      results: paginatedResults,\n      search_time_ms: Date.now() - startTime,\n      page: options.page,\n      per_page: options.per_page,\n      has_more: hasMore,\n    };\n\n    await this.cache.setSearch(cacheHash, response);\n    return response;\n  }\n\n  /**\n   * Search for videos.\n   */\n  async searchVideos(query: string, options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    const videoOptions: SearchOptions = { ...options, file_type: 'video' };\n    const cacheHash = hashSearchKey(`vid:${query}`, videoOptions);\n\n    const cachedResponse = await this.cache.getSearch(cacheHash);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n\n    const { params } = toEngineParams(videoOptions);\n    const metaResult = await this.metasearch.search(query, 'videos', params);\n    const allResults = metaResult.results.map(toSearchResult);\n    const startIndex = (options.page - 1) * options.per_page;\n    const endIndex = startIndex + options.per_page;\n    const paginatedResults = allResults.slice(startIndex, endIndex);\n    const totalResults = allResults.length;\n    const hasMore = endIndex < totalResults;\n\n    const response: SearchResponse = {\n      query,\n      total_results: totalResults,\n      results: paginatedResults,\n      search_time_ms: Date.now() - startTime,\n      page: options.page,\n      per_page: options.per_page,\n      has_more: hasMore,\n    };\n\n    await this.cache.setSearch(cacheHash, response);\n    return response;\n  }\n\n  /**\n   * Search for news.\n   */\n  async searchNews(query: string, options: SearchOptions): Promise<SearchResponse> {\n    const startTime = Date.now();\n    const newsOptions: SearchOptions = { ...options, file_type: 'news' };\n    const cacheHash = hashSearchKey(`news:${query}`, newsOptions);\n\n    const cachedResponse = await this.cache.getSearch(cacheHash);\n    if (cachedResponse) {\n      return cachedResponse;\n    }\n\n    const { params } = toEngineParams(newsOptions);\n    const metaResult = await this.metasearch.search(query, 'news', params);\n    const allResults = metaResult.results.map(toSearchResult);\n    const startIndex = (options.page - 1) * options.per_page;\n    const endIndex = startIndex + options.per_page;\n    const paginatedResults = allResults.slice(startIndex, endIndex);\n    const totalResults = allResults.length;\n    const hasMore = endIndex < totalResults;\n\n    const response: SearchResponse = {\n      query,\n      total_results: totalResults,\n      results: paginatedResults,\n      search_time_ms: Date.now() - startTime,\n      page: options.page,\n      per_page: options.per_page,\n      has_more: hasMore,\n    };\n\n    await this.cache.setSearch(cacheHash, response);\n    return response;\n  }\n\n  /**\n   * Detect and compute instant answers based on query patterns.\n   */\n  private async detectInstantAnswer(query: string): Promise<InstantAnswer | null> {\n    try {\n      // Calculator: \"2 + 3\", \"sqrt(16)\", etc.\n      if (CALC_PATTERN.test(query) || FUNC_PATTERN.test(query)) {\n        const result = this.instantService.calculate(query);\n        return {\n          type: 'calculator',\n          query,\n          result: result.formatted,\n          data: result,\n        };\n      }\n\n      // Unit conversion: \"10 km to mi\"\n      if (UNIT_PATTERN.test(query)) {\n        const result = this.instantService.convert(query);\n        return {\n          type: 'unit_conversion',\n          query,\n          result: `${result.from_value} ${result.from_unit} = ${result.to_value} ${result.to_unit}`,\n          data: result,\n        };\n      }\n\n      // Currency conversion: \"100 usd to eur\"\n      if (CURRENCY_PATTERN.test(query)) {\n        const result = await this.instantService.currency(query);\n        return {\n          type: 'currency',\n          query,\n          result: `${result.from_amount} ${result.from_currency} = ${result.to_amount.toFixed(2)} ${result.to_currency}`,\n          data: result,\n        };\n      }\n\n      // Weather: \"weather in London\"\n      const weatherMatch = query.match(WEATHER_PATTERN);\n      if (weatherMatch) {\n        const location = weatherMatch[2].trim();\n        const result = await this.instantService.weather(location);\n        return {\n          type: 'weather',\n          query,\n          result: `${result.temperature}${result.unit} ${result.condition} in ${result.location}`,\n          data: result,\n        };\n      }\n\n      // Define: \"define serendipity\" or \"meaning of serendipity\"\n      const defineMatch = query.match(DEFINE_PATTERN);\n      if (defineMatch) {\n        const word = defineMatch[1].trim();\n        const result = await this.instantService.define(word);\n        return {\n          type: 'definition',\n          query,\n          result: result.definitions[0] ?? '',\n          data: result,\n        };\n      }\n\n      // Time: \"time in Tokyo\" or \"what time is it in London\"\n      const timeMatch = query.match(TIME_PATTERN);\n      if (timeMatch) {\n        const location = timeMatch[1].trim();\n        const result = this.instantService.time(location);\n        return {\n          type: 'time',\n          query,\n          result: `${result.time} in ${result.location}`,\n          data: result,\n        };\n      }\n\n      return null;\n    } catch {\n      // If instant answer detection fails, return null and let the search proceed\n      return null;\n    }\n  }\n\n  /**\n   * Add a search query to history.\n   */\n  private async addToHistory(query: string, totalResults: number): Promise<void> {\n    const entry: SearchHistory = {\n      id: generateId(),\n      query,\n      results: totalResults,\n      searched_at: new Date().toISOString(),\n    };\n    await this.kvStore.addHistory(entry);\n  }\n\n  /**\n   * Build an empty search response.\n   */\n  private emptyResponse(\n    query: string,\n    options: SearchOptions,\n    timeMs: number,\n  ): SearchResponse {\n    return {\n      query,\n      total_results: 0,\n      results: [],\n      search_time_ms: timeMs,\n      page: options.page,\n      per_page: options.per_page,\n      has_more: false,\n    };\n  }\n}\n", "import type { Bang } from '../types';\nimport type { KVStore } from '../store/kv';\n\nexport interface BangParseResult {\n  redirect?: string;\n  bang?: { name: string; trigger: string };\n  query: string;\n  category?: string;\n}\n\nconst BUILTIN_BANGS: Omit<Bang, 'id' | 'created_at'>[] = [\n  { trigger: 'g', name: 'Google', url_template: 'https://www.google.com/search?q={query}', category: 'search', is_builtin: true },\n  { trigger: 'ddg', name: 'DuckDuckGo', url_template: 'https://duckduckgo.com/?q={query}', category: 'search', is_builtin: true },\n  { trigger: 'b', name: 'Bing', url_template: 'https://www.bing.com/search?q={query}', category: 'search', is_builtin: true },\n  { trigger: 'yt', name: 'YouTube', url_template: 'https://www.youtube.com/results?search_query={query}', category: 'video', is_builtin: true },\n  { trigger: 'w', name: 'Wikipedia', url_template: 'https://en.wikipedia.org/wiki/Special:Search?search={query}', category: 'reference', is_builtin: true },\n  { trigger: 'r', name: 'Reddit', url_template: 'https://www.reddit.com/search/?q={query}', category: 'social', is_builtin: true },\n  { trigger: 'gh', name: 'GitHub', url_template: 'https://github.com/search?q={query}', category: 'code', is_builtin: true },\n  { trigger: 'so', name: 'Stack Overflow', url_template: 'https://stackoverflow.com/search?q={query}', category: 'code', is_builtin: true },\n  { trigger: 'npm', name: 'npm', url_template: 'https://www.npmjs.com/search?q={query}', category: 'code', is_builtin: true },\n  { trigger: 'amz', name: 'Amazon', url_template: 'https://www.amazon.com/s?k={query}', category: 'shopping', is_builtin: true },\n  { trigger: 'imdb', name: 'IMDb', url_template: 'https://www.imdb.com/find?q={query}', category: 'media', is_builtin: true },\n  { trigger: 'mdn', name: 'MDN', url_template: 'https://developer.mozilla.org/en-US/search?q={query}', category: 'code', is_builtin: true },\n  { trigger: 'i', name: 'Images', url_template: '/images?q={query}', category: 'internal', is_builtin: true },\n  { trigger: 'n', name: 'News', url_template: '/news?q={query}', category: 'internal', is_builtin: true },\n  { trigger: 'v', name: 'Videos', url_template: '/videos?q={query}', category: 'internal', is_builtin: true },\n];\n\n// Build a lookup map from trigger to bang data for quick access\nconst BUILTIN_MAP = new Map<string, Omit<Bang, 'id' | 'created_at'>>();\nfor (const bang of BUILTIN_BANGS) {\n  BUILTIN_MAP.set(bang.trigger, bang);\n}\n\nexport class BangService {\n  private kvStore: KVStore;\n\n  constructor(kvStore: KVStore) {\n    this.kvStore = kvStore;\n  }\n\n  /**\n   * Parse a query for bang commands.\n   * Bangs can appear at the start (!g query) or end (query !g) of the query.\n   * Returns a redirect URL for external bangs, a category for internal bangs,\n   * or the cleaned query if no bang matches.\n   */\n  async parse(query: string): Promise<BangParseResult> {\n    const trimmed = query.trim();\n    if (!trimmed) {\n      return { query: trimmed };\n    }\n\n    let trigger: string | null = null;\n    let cleanQuery: string;\n\n    // Check for bang at start: !trigger query\n    const startMatch = trimmed.match(/^!(\\S+)\\s*(.*)/);\n    if (startMatch) {\n      trigger = startMatch[1].toLowerCase();\n      cleanQuery = startMatch[2].trim();\n    } else {\n      // Check for bang at end: query !trigger\n      const endMatch = trimmed.match(/(.*)\\s+!(\\S+)$/);\n      if (endMatch) {\n        trigger = endMatch[2].toLowerCase();\n        cleanQuery = endMatch[1].trim();\n      } else {\n        return { query: trimmed };\n      }\n    }\n\n    // Look up the trigger in built-in bangs first\n    let bangData = BUILTIN_MAP.get(trigger);\n\n    // If not found in built-ins, check custom bangs from KV\n    if (!bangData) {\n      const customBang = await this.kvStore.getBang(trigger);\n      if (customBang) {\n        bangData = customBang;\n      }\n    }\n\n    if (!bangData) {\n      // No matching bang found -- return original query\n      return { query: trimmed };\n    }\n\n    const encodedQuery = encodeURIComponent(cleanQuery || '');\n    const url = bangData.url_template.replace('{query}', encodedQuery);\n\n    // Internal bangs start with / and represent category redirects\n    if (url.startsWith('/')) {\n      return {\n        query: cleanQuery,\n        bang: { name: bangData.name, trigger: bangData.trigger },\n        category: bangData.category,\n        redirect: url,\n      };\n    }\n\n    // External bang redirect\n    return {\n      redirect: url,\n      bang: { name: bangData.name, trigger: bangData.trigger },\n      query: cleanQuery,\n    };\n  }\n\n  /**\n   * List all bangs: built-in bangs combined with custom bangs from KV.\n   */\n  async listBangs(): Promise<Bang[]> {\n    const now = new Date().toISOString();\n    const builtins: Bang[] = BUILTIN_BANGS.map((b, idx) => ({\n      ...b,\n      id: idx + 1,\n      created_at: now,\n    }));\n\n    const customBangs = await this.kvStore.listBangs();\n\n    return [...builtins, ...customBangs];\n  }\n\n  /**\n   * Create a custom bang and persist to KV.\n   */\n  async createBang(bang: Bang): Promise<void> {\n    // Prevent overriding built-in bangs\n    if (BUILTIN_MAP.has(bang.trigger)) {\n      throw new Error(`Cannot override built-in bang: !${bang.trigger}`);\n    }\n    await this.kvStore.createBang(bang);\n  }\n\n  /**\n   * Delete a custom bang from KV by trigger.\n   */\n  async deleteBang(trigger: string): Promise<void> {\n    if (BUILTIN_MAP.has(trigger)) {\n      throw new Error(`Cannot delete built-in bang: !${trigger}`);\n    }\n    await this.kvStore.deleteBang(trigger);\n  }\n}\n", "import type {\n  CalculatorResult,\n  UnitConversionResult,\n  CurrencyResult,\n  WeatherResult,\n  DefinitionResult,\n  TimeResult,\n} from '../types';\nimport type { CacheStore } from '../store/cache';\n\n// ========== Safe math evaluator (no eval) ==========\n\ntype Token =\n  | { type: 'number'; value: number }\n  | { type: 'op'; value: string }\n  | { type: 'lparen' }\n  | { type: 'rparen' }\n  | { type: 'func'; value: string }\n  | { type: 'comma' };\n\nconst CONSTANTS: Record<string, number> = {\n  pi: Math.PI,\n  e: Math.E,\n};\n\nconst FUNCTIONS: Record<string, (args: number[]) => number> = {\n  sqrt: (a) => Math.sqrt(a[0]),\n  sin: (a) => Math.sin(a[0]),\n  cos: (a) => Math.cos(a[0]),\n  tan: (a) => Math.tan(a[0]),\n  log: (a) => Math.log10(a[0]),\n  ln: (a) => Math.log(a[0]),\n  abs: (a) => Math.abs(a[0]),\n  ceil: (a) => Math.ceil(a[0]),\n  floor: (a) => Math.floor(a[0]),\n  round: (a) => Math.round(a[0]),\n  pow: (a) => Math.pow(a[0], a[1]),\n  min: (a) => Math.min(...a),\n  max: (a) => Math.max(...a),\n};\n\nfunction tokenize(expr: string): Token[] {\n  const tokens: Token[] = [];\n  let i = 0;\n  const s = expr.replace(/\\s+/g, '');\n\n  while (i < s.length) {\n    const ch = s[i];\n\n    // Number (including decimals)\n    if (/\\d/.test(ch) || (ch === '.' && i + 1 < s.length && /\\d/.test(s[i + 1]))) {\n      let num = '';\n      while (i < s.length && (/\\d/.test(s[i]) || s[i] === '.')) {\n        num += s[i];\n        i++;\n      }\n      tokens.push({ type: 'number', value: parseFloat(num) });\n      continue;\n    }\n\n    // Alpha (function name or constant)\n    if (/[a-zA-Z_]/.test(ch)) {\n      let name = '';\n      while (i < s.length && /[a-zA-Z_0-9]/.test(s[i])) {\n        name += s[i];\n        i++;\n      }\n      const lower = name.toLowerCase();\n      if (CONSTANTS[lower] !== undefined) {\n        tokens.push({ type: 'number', value: CONSTANTS[lower] });\n      } else if (FUNCTIONS[lower]) {\n        tokens.push({ type: 'func', value: lower });\n      } else {\n        throw new Error(`Unknown identifier: ${name}`);\n      }\n      continue;\n    }\n\n    if (ch === '(') {\n      tokens.push({ type: 'lparen' });\n      i++;\n      continue;\n    }\n\n    if (ch === ')') {\n      tokens.push({ type: 'rparen' });\n      i++;\n      continue;\n    }\n\n    if (ch === ',') {\n      tokens.push({ type: 'comma' });\n      i++;\n      continue;\n    }\n\n    if ('+-*/%^'.includes(ch)) {\n      tokens.push({ type: 'op', value: ch });\n      i++;\n      continue;\n    }\n\n    throw new Error(`Unexpected character: ${ch}`);\n  }\n\n  return tokens;\n}\n\n// Recursive descent parser\n// Grammar:\n//   expr     -> term (('+' | '-') term)*\n//   term     -> exponent (('*' | '/' | '%') exponent)*\n//   exponent -> unary ('^' unary)*\n//   unary    -> ('-' | '+') unary | primary\n//   primary  -> NUMBER | '(' expr ')' | FUNC '(' args ')'\n//   args     -> expr (',' expr)*\n\nclass Parser {\n  private tokens: Token[];\n  private pos: number;\n\n  constructor(tokens: Token[]) {\n    this.tokens = tokens;\n    this.pos = 0;\n  }\n\n  parse(): number {\n    const result = this.expr();\n    if (this.pos < this.tokens.length) {\n      throw new Error('Unexpected token at end of expression');\n    }\n    return result;\n  }\n\n  private peek(): Token | undefined {\n    return this.tokens[this.pos];\n  }\n\n  private consume(): Token {\n    const tok = this.tokens[this.pos];\n    this.pos++;\n    return tok;\n  }\n\n  private isOpToken(tok: Token | undefined, ops: string[]): tok is { type: 'op'; value: string } {\n    return tok?.type === 'op' && 'value' in tok && ops.includes(tok.value);\n  }\n\n  private expr(): number {\n    let left = this.term();\n    while (this.isOpToken(this.peek(), ['+', '-'])) {\n      const tok = this.consume() as { type: 'op'; value: string };\n      const right = this.term();\n      left = tok.value === '+' ? left + right : left - right;\n    }\n    return left;\n  }\n\n  private term(): number {\n    let left = this.exponent();\n    while (this.isOpToken(this.peek(), ['*', '/', '%'])) {\n      const tok = this.consume() as { type: 'op'; value: string };\n      const right = this.exponent();\n      if (tok.value === '*') left = left * right;\n      else if (tok.value === '/') {\n        if (right === 0) throw new Error('Division by zero');\n        left = left / right;\n      } else left = left % right;\n    }\n    return left;\n  }\n\n  private exponent(): number {\n    let base = this.unary();\n    while (this.isOpToken(this.peek(), ['^'])) {\n      this.consume();\n      const exp = this.unary();\n      base = Math.pow(base, exp);\n    }\n    return base;\n  }\n\n  private unary(): number {\n    if (this.isOpToken(this.peek(), ['-'])) {\n      this.consume();\n      return -this.unary();\n    }\n    if (this.isOpToken(this.peek(), ['+'])) {\n      this.consume();\n      return this.unary();\n    }\n    return this.primary();\n  }\n\n  private primary(): number {\n    const tok = this.peek();\n\n    if (!tok) {\n      throw new Error('Unexpected end of expression');\n    }\n\n    if (tok.type === 'number') {\n      this.consume();\n      return tok.value;\n    }\n\n    if (tok.type === 'func') {\n      const funcName = tok.value;\n      this.consume();\n      const lparen = this.peek();\n      if (lparen?.type !== 'lparen') {\n        throw new Error(`Expected '(' after function ${funcName}`);\n      }\n      this.consume();\n      const args = this.parseArgs();\n      const rparen = this.peek();\n      if (rparen?.type !== 'rparen') {\n        throw new Error(`Expected ')' after function arguments`);\n      }\n      this.consume();\n      const fn = FUNCTIONS[funcName];\n      if (!fn) throw new Error(`Unknown function: ${funcName}`);\n      return fn(args);\n    }\n\n    if (tok.type === 'lparen') {\n      this.consume();\n      const val = this.expr();\n      const rparen = this.peek();\n      if (rparen?.type !== 'rparen') {\n        throw new Error(`Expected ')'`);\n      }\n      this.consume();\n      return val;\n    }\n\n    throw new Error(`Unexpected token: ${JSON.stringify(tok)}`);\n  }\n\n  private parseArgs(): number[] {\n    const args: number[] = [];\n    if (this.peek()?.type === 'rparen') {\n      return args;\n    }\n    args.push(this.expr());\n    while (this.peek()?.type === 'comma') {\n      this.consume();\n      args.push(this.expr());\n    }\n    return args;\n  }\n}\n\nfunction formatNumber(n: number): string {\n  if (!isFinite(n)) return String(n);\n  const abs = Math.abs(n);\n  if (abs >= 1e15 || (abs < 1e-6 && abs > 0)) {\n    return n.toExponential(6);\n  }\n  // Up to 10 decimal places, strip trailing zeros\n  const fixed = n.toFixed(10).replace(/\\.?0+$/, '');\n  // Add commas to integer part\n  const parts = fixed.split('.');\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  return parts.join('.');\n}\n\n// ========== Unit conversion ==========\n\ninterface UnitDef {\n  category: string;\n  toBase: (v: number) => number;\n  fromBase: (v: number) => number;\n}\n\nfunction linearUnit(category: string, factor: number): UnitDef {\n  return {\n    category,\n    toBase: (v) => v * factor,\n    fromBase: (v) => v / factor,\n  };\n}\n\nconst UNITS: Record<string, UnitDef> = {\n  // Length (base: meters)\n  mm: linearUnit('length', 0.001),\n  cm: linearUnit('length', 0.01),\n  m: linearUnit('length', 1),\n  km: linearUnit('length', 1000),\n  in: linearUnit('length', 0.0254),\n  ft: linearUnit('length', 0.3048),\n  yd: linearUnit('length', 0.9144),\n  mi: linearUnit('length', 1609.344),\n\n  // Weight (base: grams)\n  mg: linearUnit('weight', 0.001),\n  g: linearUnit('weight', 1),\n  kg: linearUnit('weight', 1000),\n  lb: linearUnit('weight', 453.592),\n  oz: linearUnit('weight', 28.3495),\n  ton: linearUnit('weight', 907185),\n\n  // Temperature (base: celsius)\n  c: {\n    category: 'temperature',\n    toBase: (v) => v,\n    fromBase: (v) => v,\n  },\n  f: {\n    category: 'temperature',\n    toBase: (v) => (v - 32) * (5 / 9),\n    fromBase: (v) => v * (9 / 5) + 32,\n  },\n  k: {\n    category: 'temperature',\n    toBase: (v) => v - 273.15,\n    fromBase: (v) => v + 273.15,\n  },\n\n  // Volume (base: milliliters)\n  ml: linearUnit('volume', 1),\n  l: linearUnit('volume', 1000),\n  gal: linearUnit('volume', 3785.41),\n  qt: linearUnit('volume', 946.353),\n  pt: linearUnit('volume', 473.176),\n  cup: linearUnit('volume', 236.588),\n  tbsp: linearUnit('volume', 14.7868),\n  tsp: linearUnit('volume', 4.92892),\n  fl_oz: linearUnit('volume', 29.5735),\n\n  // Area (base: square meters)\n  mm2: linearUnit('area', 1e-6),\n  cm2: linearUnit('area', 1e-4),\n  m2: linearUnit('area', 1),\n  km2: linearUnit('area', 1e6),\n  in2: linearUnit('area', 6.4516e-4),\n  ft2: linearUnit('area', 0.092903),\n  acre: linearUnit('area', 4046.86),\n  hectare: linearUnit('area', 10000),\n\n  // Speed (base: m/s)\n  'm/s': linearUnit('speed', 1),\n  'km/h': linearUnit('speed', 1 / 3.6),\n  mph: linearUnit('speed', 0.44704),\n  knots: linearUnit('speed', 0.514444),\n\n  // Data (base: bytes)\n  b: linearUnit('data', 1),\n  kb: linearUnit('data', 1024),\n  mb: linearUnit('data', 1024 ** 2),\n  gb: linearUnit('data', 1024 ** 3),\n  tb: linearUnit('data', 1024 ** 4),\n  pb: linearUnit('data', 1024 ** 5),\n\n  // Time (base: seconds)\n  ms: linearUnit('time', 0.001),\n  s: linearUnit('time', 1),\n  min: linearUnit('time', 60),\n  hr: linearUnit('time', 3600),\n  day: linearUnit('time', 86400),\n  week: linearUnit('time', 604800),\n  month: linearUnit('time', 2592000),\n  year: linearUnit('time', 31536000),\n};\n\n// ========== Timezone mapping ==========\n\nconst TIMEZONE_MAP: Record<string, string> = {\n  'new york': 'America/New_York',\n  'los angeles': 'America/Los_Angeles',\n  'chicago': 'America/Chicago',\n  'denver': 'America/Denver',\n  'london': 'Europe/London',\n  'paris': 'Europe/Paris',\n  'berlin': 'Europe/Berlin',\n  'tokyo': 'Asia/Tokyo',\n  'sydney': 'Australia/Sydney',\n  'moscow': 'Europe/Moscow',\n  'dubai': 'Asia/Dubai',\n  'mumbai': 'Asia/Kolkata',\n  'delhi': 'Asia/Kolkata',\n  'shanghai': 'Asia/Shanghai',\n  'beijing': 'Asia/Shanghai',\n  'hong kong': 'Asia/Hong_Kong',\n  'singapore': 'Asia/Singapore',\n  'seoul': 'Asia/Seoul',\n  'toronto': 'America/Toronto',\n  'vancouver': 'America/Vancouver',\n  'sao paulo': 'America/Sao_Paulo',\n  'mexico city': 'America/Mexico_City',\n  'cairo': 'Africa/Cairo',\n  'johannesburg': 'Africa/Johannesburg',\n  'istanbul': 'Europe/Istanbul',\n  'bangkok': 'Asia/Bangkok',\n  'jakarta': 'Asia/Jakarta',\n  'amsterdam': 'Europe/Amsterdam',\n  'rome': 'Europe/Rome',\n  'madrid': 'Europe/Madrid',\n  'lisbon': 'Europe/Lisbon',\n  'zurich': 'Europe/Zurich',\n  'vienna': 'Europe/Vienna',\n  'warsaw': 'Europe/Warsaw',\n  'athens': 'Europe/Athens',\n  'helsinki': 'Europe/Helsinki',\n  'stockholm': 'Europe/Stockholm',\n  'oslo': 'Europe/Oslo',\n  'copenhagen': 'Europe/Copenhagen',\n  'honolulu': 'Pacific/Honolulu',\n  'anchorage': 'America/Anchorage',\n  'phoenix': 'America/Phoenix',\n  'auckland': 'Pacific/Auckland',\n  'perth': 'Australia/Perth',\n  'melbourne': 'Australia/Melbourne',\n  'brisbane': 'Australia/Brisbane',\n  'est': 'America/New_York',\n  'cst': 'America/Chicago',\n  'mst': 'America/Denver',\n  'pst': 'America/Los_Angeles',\n  'gmt': 'Europe/London',\n  'utc': 'UTC',\n  'cet': 'Europe/Paris',\n  'jst': 'Asia/Tokyo',\n  'ist': 'Asia/Kolkata',\n  'aest': 'Australia/Sydney',\n};\n\n// ========== Supported currencies ==========\n\nconst SUPPORTED_CURRENCIES = new Set([\n  'usd', 'eur', 'gbp', 'jpy', 'cad', 'aud', 'chf', 'cny', 'inr',\n  'krw', 'brl', 'mxn', 'sgd', 'hkd', 'nzd', 'sek', 'nok', 'dkk',\n  'pln', 'zar', 'try', 'thb', 'idr', 'php', 'czk', 'ils', 'clp',\n  'myr', 'twd', 'ars', 'cop', 'sar', 'aed', 'egp', 'vnd', 'bgn',\n  'hrk', 'huf', 'isk', 'ron', 'rub',\n]);\n\n// Weather condition to icon mapping\nconst WEATHER_ICONS: Record<string, string> = {\n  'sunny': 'sun',\n  'clear': 'sun',\n  'partly cloudy': 'cloud-sun',\n  'cloudy': 'cloud',\n  'overcast': 'cloud',\n  'mist': 'smog',\n  'fog': 'smog',\n  'patchy rain possible': 'cloud-rain',\n  'patchy rain nearby': 'cloud-rain',\n  'light rain': 'cloud-rain',\n  'moderate rain': 'cloud-showers-heavy',\n  'heavy rain': 'cloud-showers-heavy',\n  'light snow': 'snowflake',\n  'moderate snow': 'snowflake',\n  'heavy snow': 'snowflake',\n  'thunderstorm': 'bolt',\n  'blizzard': 'snowflake',\n};\n\nfunction weatherIcon(condition: string): string {\n  const lower = condition.toLowerCase();\n  for (const [key, icon] of Object.entries(WEATHER_ICONS)) {\n    if (lower.includes(key)) return icon;\n  }\n  return 'cloud';\n}\n\nexport class InstantService {\n  private cache: CacheStore;\n  private currencyRates: Map<string, { rates: Record<string, number>; fetched_at: number }>;\n\n  constructor(cache: CacheStore) {\n    this.cache = cache;\n    this.currencyRates = new Map();\n  }\n\n  calculate(expr: string): CalculatorResult {\n    const tokens = tokenize(expr);\n    const parser = new Parser(tokens);\n    const result = parser.parse();\n\n    return {\n      expression: expr,\n      result,\n      formatted: formatNumber(result),\n    };\n  }\n\n  convert(expr: string): UnitConversionResult {\n    const match = expr.match(/^([\\d.]+)\\s*([a-zA-Z/_2]+)\\s+(?:to|in)\\s+([a-zA-Z/_2]+)$/i);\n    if (!match) {\n      throw new Error('Invalid conversion format. Use: <number> <unit> to <unit>');\n    }\n\n    const value = parseFloat(match[1]);\n    const fromUnitKey = match[2].toLowerCase();\n    const toUnitKey = match[3].toLowerCase();\n\n    const fromUnit = UNITS[fromUnitKey];\n    const toUnit = UNITS[toUnitKey];\n\n    if (!fromUnit) throw new Error(`Unknown unit: ${match[2]}`);\n    if (!toUnit) throw new Error(`Unknown unit: ${match[3]}`);\n    if (fromUnit.category !== toUnit.category) {\n      throw new Error(`Cannot convert between ${fromUnit.category} and ${toUnit.category}`);\n    }\n\n    const baseValue = fromUnit.toBase(value);\n    const result = toUnit.fromBase(baseValue);\n\n    return {\n      from_value: value,\n      from_unit: fromUnitKey,\n      to_value: result,\n      to_unit: toUnitKey,\n      category: fromUnit.category,\n    };\n  }\n\n  async currency(expr: string): Promise<CurrencyResult> {\n    const match = expr.match(/^([\\d.]+)\\s*([a-zA-Z]{3})\\s+(?:to|in)\\s+([a-zA-Z]{3})$/i);\n    if (!match) {\n      throw new Error('Invalid currency format. Use: <number> <currency> to <currency>');\n    }\n\n    const value = parseFloat(match[1]);\n    const fromCurrency = match[2].toUpperCase();\n    const toCurrency = match[3].toUpperCase();\n\n    if (!SUPPORTED_CURRENCIES.has(fromCurrency.toLowerCase())) {\n      throw new Error(`Unsupported currency: ${fromCurrency}`);\n    }\n    if (!SUPPORTED_CURRENCIES.has(toCurrency.toLowerCase())) {\n      throw new Error(`Unsupported currency: ${toCurrency}`);\n    }\n\n    const rate = await this.fetchRate(fromCurrency, toCurrency);\n    const result = value * rate;\n\n    return {\n      from_amount: value,\n      from_currency: fromCurrency,\n      to_amount: result,\n      to_currency: toCurrency,\n      rate,\n      updated_at: new Date().toISOString(),\n    };\n  }\n\n  private async fetchRate(from: string, to: string): Promise<number> {\n    const cacheKey = `${from}_${to}`;\n\n    // Check in-memory cache first\n    const cached = this.currencyRates.get(cacheKey);\n    const now = Date.now();\n    if (cached && now - cached.fetched_at < 3600000) {\n      return cached.rates[to] ?? 1;\n    }\n\n    // Check KV cache (persists across requests within TTL)\n    const kvCached = await this.cache.getInstant(`currency:${cacheKey}`);\n    if (kvCached && kvCached.data) {\n      const rateData = kvCached.data as { rates: Record<string, number> };\n      const rate = rateData.rates[to];\n      if (rate !== undefined) {\n        this.currencyRates.set(cacheKey, { rates: rateData.rates, fetched_at: now });\n        return rate;\n      }\n    }\n\n    const url = `https://api.frankfurter.app/latest?from=${from}&to=${to}`;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error(`Currency API error: ${response.status}`);\n    }\n\n    const data = (await response.json()) as { rates: Record<string, number> };\n\n    // Store in both in-memory and KV caches\n    this.currencyRates.set(cacheKey, { rates: data.rates, fetched_at: now });\n    await this.cache.setInstant(`currency:${cacheKey}`, {\n      type: 'currency_rates',\n      query: cacheKey,\n      result: JSON.stringify(data.rates),\n      data: { rates: data.rates },\n    });\n\n    const rate = data.rates[to];\n    if (rate === undefined) {\n      throw new Error(`No rate found for ${from} to ${to}`);\n    }\n    return rate;\n  }\n\n  async weather(location: string): Promise<WeatherResult> {\n    const encoded = encodeURIComponent(location.trim());\n    const url = `https://wttr.in/${encoded}?format=j1`;\n\n    const response = await fetch(url, {\n      headers: { 'User-Agent': 'mizu-search/1.0' },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Weather API error: ${response.status}`);\n    }\n\n    const data = (await response.json()) as {\n      current_condition: Array<{\n        temp_C: string;\n        weatherDesc: Array<{ value: string }>;\n        humidity: string;\n        windspeedKmph: string;\n        winddir16Point: string;\n      }>;\n      nearest_area: Array<{\n        areaName: Array<{ value: string }>;\n        country: Array<{ value: string }>;\n      }>;\n    };\n\n    const current = data.current_condition[0];\n    const area = data.nearest_area?.[0];\n    const areaName = area?.areaName?.[0]?.value ?? location;\n    const country = area?.country?.[0]?.value ?? '';\n    const displayLocation = country ? `${areaName}, ${country}` : areaName;\n    const condition = current.weatherDesc[0]?.value ?? 'Unknown';\n\n    return {\n      location: displayLocation,\n      temperature: parseInt(current.temp_C, 10),\n      unit: 'C',\n      condition,\n      humidity: parseInt(current.humidity, 10),\n      wind_speed: parseInt(current.windspeedKmph, 10),\n      wind_unit: 'km/h',\n      icon: weatherIcon(condition),\n    };\n  }\n\n  async define(word: string): Promise<DefinitionResult> {\n    const encoded = encodeURIComponent(word.trim().toLowerCase());\n    const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${encoded}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error(`Dictionary API error: ${response.status}`);\n    }\n\n    const data = (await response.json()) as Array<{\n      word: string;\n      phonetic?: string;\n      phonetics?: Array<{ text?: string }>;\n      meanings: Array<{\n        partOfSpeech: string;\n        definitions: Array<{ definition: string; example?: string }>;\n        synonyms: string[];\n        antonyms: string[];\n      }>;\n    }>;\n\n    if (!data.length) {\n      throw new Error(`No definition found for: ${word}`);\n    }\n\n    const entry = data[0];\n    const firstMeaning = entry.meanings[0];\n    const phonetic =\n      entry.phonetic ?? entry.phonetics?.find((p) => p.text)?.text ?? undefined;\n\n    // Collect examples from definitions\n    const examples: string[] = [];\n    for (const def of firstMeaning?.definitions ?? []) {\n      if (def.example) {\n        examples.push(def.example);\n      }\n    }\n\n    // Collect antonyms from all meanings\n    const allAntonyms: string[] = [];\n    for (const meaning of entry.meanings) {\n      allAntonyms.push(...meaning.antonyms);\n    }\n\n    return {\n      word: entry.word,\n      phonetic,\n      part_of_speech: firstMeaning?.partOfSpeech ?? 'unknown',\n      definitions: firstMeaning?.definitions.map((d) => d.definition).slice(0, 5) ?? [],\n      synonyms: firstMeaning?.synonyms?.slice(0, 10),\n      antonyms: [...new Set(allAntonyms)].slice(0, 10),\n      examples: examples.slice(0, 3),\n    };\n  }\n\n  time(location: string): TimeResult {\n    const normalized = location.trim().toLowerCase();\n    const timezone = TIMEZONE_MAP[normalized];\n\n    if (!timezone) {\n      // Try using the location directly as a timezone identifier\n      try {\n        new Intl.DateTimeFormat('en-US', { timeZone: location.trim() });\n        return this.formatTime(location.trim(), location.trim());\n      } catch {\n        throw new Error(`Unknown location or timezone: ${location}`);\n      }\n    }\n\n    return this.formatTime(location.trim(), timezone);\n  }\n\n  private formatTime(location: string, timezone: string): TimeResult {\n    const now = new Date();\n\n    const timeFormatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezone,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      hour12: true,\n    });\n\n    const dateFormatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezone,\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n\n    const offsetFormatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezone,\n      timeZoneName: 'longOffset',\n    });\n\n    const offsetParts = offsetFormatter.formatToParts(now);\n    const offsetPart = offsetParts.find((p) => p.type === 'timeZoneName');\n    const offset = offsetPart?.value ?? timezone;\n\n    return {\n      location: location.charAt(0).toUpperCase() + location.slice(1),\n      time: timeFormatter.format(now),\n      date: dateFormatter.format(now),\n      timezone,\n      offset,\n    };\n  }\n}\n", "import type { KnowledgePanel, Fact, Link } from '../types';\nimport type { CacheStore } from '../store/cache';\n\ninterface WikipediaSummary {\n  title: string;\n  description?: string;\n  extract: string;\n  thumbnail?: {\n    source: string;\n    width: number;\n    height: number;\n  };\n  content_urls?: {\n    desktop?: { page: string };\n    mobile?: { page: string };\n  };\n  type: string;\n}\n\ninterface WikidataEntity {\n  labels?: Record<string, { value: string }>;\n  descriptions?: Record<string, { value: string }>;\n  claims?: Record<string, WikidataClaim[]>;\n  sitelinks?: Record<string, { title: string; url?: string }>;\n}\n\ninterface WikidataClaim {\n  mainsnak?: {\n    datavalue?: {\n      value: string | { text?: string; amount?: string; time?: string; id?: string };\n      type: string;\n    };\n    datatype?: string;\n  };\n}\n\n// Property IDs for common Wikidata facts\nconst WIKIDATA_PROPERTIES: Record<string, string> = {\n  P569: 'Born',\n  P570: 'Died',\n  P19: 'Place of birth',\n  P20: 'Place of death',\n  P27: 'Nationality',\n  P106: 'Occupation',\n  P1412: 'Languages spoken',\n  P17: 'Country',\n  P36: 'Capital',\n  P1082: 'Population',\n  P571: 'Founded',\n  P112: 'Founded by',\n  P159: 'Headquarters',\n  P452: 'Industry',\n  P856: 'Official website',\n  P1448: 'Official name',\n  P18: 'Image',\n};\n\nexport class KnowledgeService {\n  private cache: CacheStore;\n\n  constructor(cache: CacheStore) {\n    this.cache = cache;\n  }\n\n  /**\n   * Get a knowledge panel for a query.\n   * Checks cache first, then tries Wikipedia and Wikidata APIs.\n   */\n  async getPanel(query: string): Promise<KnowledgePanel | null> {\n    const normalizedQuery = query.trim().toLowerCase();\n\n    if (!normalizedQuery) {\n      return null;\n    }\n\n    // Check cache\n    const cached = await this.cache.getKnowledge(normalizedQuery);\n    if (cached) {\n      return cached;\n    }\n\n    // Try Wikipedia summary API\n    const panel = await this.fetchWikipediaPanel(normalizedQuery);\n    if (!panel) {\n      return null;\n    }\n\n    // Try to enrich with Wikidata facts\n    const enrichedPanel = await this.enrichWithWikidata(panel, normalizedQuery);\n\n    // Cache the result\n    await this.cache.setKnowledge(normalizedQuery, enrichedPanel);\n\n    return enrichedPanel;\n  }\n\n  private async fetchWikipediaPanel(query: string): Promise<KnowledgePanel | null> {\n    // Encode the query for use in the URL, converting spaces to underscores\n    // as expected by the Wikipedia API\n    const encoded = encodeURIComponent(query.replace(/\\s+/g, '_'));\n    const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encoded}`;\n\n    try {\n      const response = await fetch(url, {\n        headers: {\n          'User-Agent': 'mizu-search/1.0 (search engine)',\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        // Try a search-based fallback\n        return this.searchWikipedia(query);\n      }\n\n      const data = (await response.json()) as WikipediaSummary;\n\n      // Skip disambiguation and other non-article pages\n      if (data.type === 'disambiguation' || data.type === 'no-extract') {\n        return this.searchWikipedia(query);\n      }\n\n      if (!data.extract || data.extract.length < 20) {\n        return null;\n      }\n\n      const links: Link[] = [];\n      if (data.content_urls?.desktop?.page) {\n        links.push({\n          title: 'Wikipedia',\n          url: data.content_urls.desktop.page,\n          icon: 'wikipedia',\n        });\n      }\n\n      return {\n        title: data.title,\n        subtitle: data.description,\n        description: data.extract,\n        image: data.thumbnail?.source,\n        facts: [],\n        links,\n        source: 'Wikipedia',\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Fallback: search Wikipedia and use the first result.\n   */\n  private async searchWikipedia(query: string): Promise<KnowledgePanel | null> {\n    const encoded = encodeURIComponent(query);\n    const url = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encoded}&format=json&utf8=1&srlimit=1&srprop=snippet`;\n\n    try {\n      const response = await fetch(url, {\n        headers: {\n          'User-Agent': 'mizu-search/1.0 (search engine)',\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!response.ok) return null;\n\n      const data = (await response.json()) as {\n        query: {\n          search: Array<{\n            title: string;\n            pageid: number;\n            snippet: string;\n          }>;\n        };\n      };\n\n      const results = data.query?.search;\n      if (!results || results.length === 0) return null;\n\n      const firstResult = results[0];\n      // Fetch the full summary using the found title\n      const titleEncoded = encodeURIComponent(firstResult.title.replace(/\\s+/g, '_'));\n      const summaryUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${titleEncoded}`;\n\n      const summaryResponse = await fetch(summaryUrl, {\n        headers: {\n          'User-Agent': 'mizu-search/1.0 (search engine)',\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!summaryResponse.ok) return null;\n\n      const summaryData = (await summaryResponse.json()) as WikipediaSummary;\n\n      if (!summaryData.extract || summaryData.extract.length < 20) {\n        return null;\n      }\n\n      const links: Link[] = [];\n      if (summaryData.content_urls?.desktop?.page) {\n        links.push({\n          title: 'Wikipedia',\n          url: summaryData.content_urls.desktop.page,\n          icon: 'wikipedia',\n        });\n      }\n\n      return {\n        title: summaryData.title,\n        subtitle: summaryData.description,\n        description: summaryData.extract,\n        image: summaryData.thumbnail?.source,\n        facts: [],\n        links,\n        source: 'Wikipedia',\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Enrich a knowledge panel with Wikidata structured facts.\n   */\n  private async enrichWithWikidata(\n    panel: KnowledgePanel,\n    query: string,\n  ): Promise<KnowledgePanel> {\n    try {\n      // Search Wikidata for the entity\n      const searchEncoded = encodeURIComponent(query);\n      const searchUrl = `https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${searchEncoded}&language=en&format=json&limit=1`;\n\n      const searchResponse = await fetch(searchUrl, {\n        headers: {\n          'User-Agent': 'mizu-search/1.0 (search engine)',\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!searchResponse.ok) return panel;\n\n      const searchData = (await searchResponse.json()) as {\n        search: Array<{ id: string; label: string; description?: string }>;\n      };\n\n      if (!searchData.search || searchData.search.length === 0) {\n        return panel;\n      }\n\n      const entityId = searchData.search[0].id;\n\n      // Fetch entity details\n      const entityUrl = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${entityId}&languages=en&format=json&props=claims|labels|descriptions|sitelinks`;\n\n      const entityResponse = await fetch(entityUrl, {\n        headers: {\n          'User-Agent': 'mizu-search/1.0 (search engine)',\n          'Accept': 'application/json',\n        },\n      });\n\n      if (!entityResponse.ok) return panel;\n\n      const entityData = (await entityResponse.json()) as {\n        entities: Record<string, WikidataEntity>;\n      };\n\n      const entity = entityData.entities[entityId];\n      if (!entity || !entity.claims) return panel;\n\n      // Extract facts from claims\n      const facts: Fact[] = [];\n      for (const [propId, label] of Object.entries(WIKIDATA_PROPERTIES)) {\n        const claims = entity.claims[propId];\n        if (!claims || claims.length === 0) continue;\n\n        const claim = claims[0];\n        const value = this.extractClaimValue(claim);\n        if (value) {\n          facts.push({ label, value });\n        }\n      }\n\n      // Add Wikidata link\n      const links = [...(panel.links ?? [])];\n      links.push({\n        title: 'Wikidata',\n        url: `https://www.wikidata.org/wiki/${entityId}`,\n        icon: 'wikidata',\n      });\n\n      return {\n        ...panel,\n        facts: facts.length > 0 ? facts : panel.facts,\n        links,\n      };\n    } catch {\n      // If Wikidata enrichment fails, return original panel\n      return panel;\n    }\n  }\n\n  /**\n   * Extract a human-readable value from a Wikidata claim.\n   */\n  private extractClaimValue(claim: WikidataClaim): string | null {\n    const datavalue = claim.mainsnak?.datavalue;\n    if (!datavalue) return null;\n\n    switch (datavalue.type) {\n      case 'string':\n        return typeof datavalue.value === 'string' ? datavalue.value : null;\n\n      case 'monolingualtext':\n        if (typeof datavalue.value === 'object' && datavalue.value?.text) {\n          return datavalue.value.text;\n        }\n        return null;\n\n      case 'quantity':\n        if (typeof datavalue.value === 'object' && datavalue.value?.amount) {\n          const amount = datavalue.value.amount.replace(/^\\+/, '');\n          // Format large numbers with commas\n          const num = parseFloat(amount);\n          if (!isNaN(num)) {\n            return num.toLocaleString('en-US');\n          }\n          return amount;\n        }\n        return null;\n\n      case 'time':\n        if (typeof datavalue.value === 'object' && datavalue.value?.time) {\n          // Wikidata time format: +YYYY-MM-DDT00:00:00Z\n          const timeStr = datavalue.value.time;\n          const match = timeStr.match(/^\\+?(-?\\d{4})-(\\d{2})-(\\d{2})/);\n          if (match) {\n            const year = parseInt(match[1], 10);\n            const month = parseInt(match[2], 10);\n            const day = parseInt(match[3], 10);\n            if (month > 0 && day > 0) {\n              const date = new Date(year, month - 1, day);\n              return date.toLocaleDateString('en-US', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n              });\n            }\n            return String(year);\n          }\n          return null;\n        }\n        return null;\n\n      case 'wikibase-entityid':\n        // This is a reference to another entity -- just return the ID\n        // A full implementation would resolve these, but that would require\n        // additional API calls for each one\n        if (typeof datavalue.value === 'object' && datavalue.value?.id) {\n          return datavalue.value.id;\n        }\n        return null;\n\n      default:\n        if (typeof datavalue.value === 'string') {\n          return datavalue.value;\n        }\n        return null;\n    }\n  }\n}\n", "import { Hono } from 'hono'\nimport { createDefaultMetaSearch } from '../engines/metasearch'\nimport { CacheStore } from '../store/cache'\nimport { KVStore } from '../store/kv'\nimport { SearchService } from '../services/search'\nimport { BangService } from '../services/bang'\nimport { InstantService } from '../services/instant'\nimport { KnowledgeService } from '../services/knowledge'\nimport type { SearchOptions } from '../types'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nfunction extractSearchOptions(c: { req: { query: (key: string) => string | undefined } }): SearchOptions {\n  return {\n    page: parseInt(c.req.query('page') ?? '1', 10),\n    per_page: parseInt(c.req.query('per_page') ?? '10', 10),\n    time_range: c.req.query('time') ?? '',\n    region: c.req.query('region') ?? '',\n    language: c.req.query('lang') ?? 'en',\n    safe_search: c.req.query('safe') ?? 'moderate',\n  }\n}\n\nfunction createServices(kv: KVNamespace) {\n  const cache = new CacheStore(kv)\n  const kvStore = new KVStore(kv)\n  const metaSearch = createDefaultMetaSearch()\n  const bangService = new BangService(kvStore)\n  const instantService = new InstantService(cache)\n  const knowledgeService = new KnowledgeService(cache)\n  const searchService = new SearchService(metaSearch, cache, kvStore, bangService, instantService, knowledgeService)\n  return { searchService }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const options = extractSearchOptions(c)\n  const { searchService } = createServices(c.env.SEARCH_KV)\n  const results = await searchService.search(q, options)\n  return c.json(results)\n})\n\napp.get('/images', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const options = extractSearchOptions(c)\n  const { searchService } = createServices(c.env.SEARCH_KV)\n  const results = await searchService.searchImages(q, options)\n  return c.json(results)\n})\n\napp.get('/videos', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const options = extractSearchOptions(c)\n  const { searchService } = createServices(c.env.SEARCH_KV)\n  const results = await searchService.searchVideos(q, options)\n  return c.json(results)\n})\n\napp.get('/news', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const options = extractSearchOptions(c)\n  const { searchService } = createServices(c.env.SEARCH_KV)\n  const results = await searchService.searchNews(q, options)\n  return c.json(results)\n})\n\nexport default app\n", "import type { Suggestion } from '../types';\nimport type { CacheStore } from '../store/cache';\n\nconst TRENDING_SUGGESTIONS: Suggestion[] = [\n  { text: 'artificial intelligence news', type: 'trending', frequency: 95 },\n  { text: 'climate change solutions', type: 'trending', frequency: 88 },\n  { text: 'programming tutorials', type: 'trending', frequency: 85 },\n  { text: 'space exploration updates', type: 'trending', frequency: 82 },\n  { text: 'healthy recipes', type: 'trending', frequency: 78 },\n  { text: 'web development frameworks', type: 'trending', frequency: 76 },\n  { text: 'machine learning projects', type: 'trending', frequency: 74 },\n  { text: 'renewable energy technology', type: 'trending', frequency: 72 },\n  { text: 'open source software', type: 'trending', frequency: 70 },\n  { text: 'cybersecurity best practices', type: 'trending', frequency: 68 },\n];\n\nexport class SuggestService {\n  private cache: CacheStore;\n\n  constructor(cache: CacheStore) {\n    this.cache = cache;\n  }\n\n  /**\n   * Get search suggestions for a query.\n   * Checks cache first, then fetches from Google suggestions API.\n   */\n  async suggest(query: string): Promise<Suggestion[]> {\n    const trimmed = query.trim();\n    if (!trimmed) {\n      return [];\n    }\n\n    // Build cache key from the query\n    const hash = this.hashQuery(trimmed);\n\n    // Check cache\n    const cached = await this.cache.getSuggest(hash);\n    if (cached) {\n      return cached;\n    }\n\n    // Fetch suggestions from Google\n    const encoded = encodeURIComponent(trimmed);\n    const url = `https://suggestqueries.google.com/complete/search?client=firefox&q=${encoded}`;\n\n    try {\n      const response = await fetch(url, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (compatible; mizu-search/1.0)',\n        },\n      });\n\n      if (!response.ok) {\n        return [];\n      }\n\n      // Google returns JSON: [query, [suggestions], [], { \"google:suggesttype\": [...] }]\n      const data = (await response.json()) as [string, string[], ...unknown[]];\n\n      if (!Array.isArray(data) || !Array.isArray(data[1])) {\n        return [];\n      }\n\n      const suggestions: Suggestion[] = data[1].map((text: string) => ({\n        text,\n        type: 'query' as const,\n      }));\n\n      // Cache the suggestions\n      await this.cache.setSuggest(hash, suggestions);\n\n      return suggestions;\n    } catch {\n      // On network errors, return empty rather than throwing\n      return [];\n    }\n  }\n\n  /**\n   * Return a list of trending search suggestions.\n   */\n  async trending(): Promise<Suggestion[]> {\n    return [...TRENDING_SUGGESTIONS];\n  }\n\n  /**\n   * Simple hash function for cache keys.\n   * Uses a basic string hash suitable for KV cache keys.\n   */\n  private hashQuery(query: string): string {\n    let hash = 0;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charCodeAt(i);\n      hash = ((hash << 5) - hash + char) | 0;\n    }\n    return Math.abs(hash).toString(36);\n  }\n}\n", "import { Hono } from 'hono'\nimport { SuggestService } from '../services/suggest'\nimport { CacheStore } from '../store/cache'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const suggestService = new SuggestService(cache)\n  const suggestions = await suggestService.suggest(q)\n  return c.json(suggestions)\n})\n\napp.get('/trending', async (c) => {\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const suggestService = new SuggestService(cache)\n  const trending = await suggestService.trending()\n  return c.json(trending)\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { InstantService } from '../services/instant'\nimport { CacheStore } from '../store/cache'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/calculate', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = instantService.calculate(q)\n  return c.json({\n    type: 'calculation',\n    query: q,\n    answer: result,\n  })\n})\n\napp.get('/convert', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = instantService.convert(q)\n  return c.json({\n    type: 'conversion',\n    query: q,\n    answer: result,\n  })\n})\n\napp.get('/currency', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = await instantService.currency(q)\n  return c.json({\n    type: 'currency',\n    query: q,\n    answer: result,\n  })\n})\n\napp.get('/weather', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = await instantService.weather(q)\n  return c.json({\n    type: 'weather',\n    query: q,\n    answer: result,\n  })\n})\n\napp.get('/define', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = await instantService.define(q)\n  return c.json({\n    type: 'definition',\n    query: q,\n    answer: result,\n  })\n})\n\napp.get('/time', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const instantService = new InstantService(cache)\n  const result = instantService.time(q)\n  return c.json({\n    type: 'time',\n    query: q,\n    answer: result,\n  })\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { KnowledgeService } from '../services/knowledge'\nimport { CacheStore } from '../store/cache'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/:query', async (c) => {\n  const query = c.req.param('query')\n  if (!query) {\n    return c.json({ error: 'Missing required parameter: query' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const knowledgeService = new KnowledgeService(cache)\n  const panel = await knowledgeService.getPanel(query)\n\n  if (!panel) {\n    return c.json({ error: 'No knowledge panel found' }, 404)\n  }\n\n  return c.json(panel)\n})\n\nexport default app\n", "/**\n * Utility functions for the search worker.\n */\n\n/**\n * Generate a random 16-character hex string.\n */\nexport function generateId(): string {\n  const bytes = new Uint8Array(8);\n  crypto.getRandomValues(bytes);\n  return Array.from(bytes)\n    .map((b) => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\n/**\n * Hash a query string and params into a SHA-256 hex digest for cache keys.\n */\nexport async function hashQuery(\n  query: string,\n  params: Record<string, string | number | boolean>\n): Promise<string> {\n  const raw = query + JSON.stringify(params);\n  const encoded = new TextEncoder().encode(raw);\n  const digest = await crypto.subtle.digest('SHA-256', encoded);\n  const bytes = new Uint8Array(digest);\n  return Array.from(bytes)\n    .map((b) => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\n/**\n * Strip dangerous HTML tags (script, style, iframe, object, embed, form)\n * while keeping basic formatting tags (b, i, em, strong, p, br, ul, ol, li).\n */\nexport function sanitizeHtml(text: string): string {\n  const dangerousTags = [\n    'script',\n    'style',\n    'iframe',\n    'object',\n    'embed',\n    'form',\n    'input',\n    'textarea',\n    'select',\n    'button',\n    'link',\n    'meta',\n    'base',\n    'applet',\n  ];\n\n  let result = text;\n\n  for (const tag of dangerousTags) {\n    // Remove opening and closing tags and their content for script/style\n    if (tag === 'script' || tag === 'style') {\n      const re = new RegExp(\n        `<${tag}[^>]*>[\\\\s\\\\S]*?<\\\\/${tag}>`,\n        'gi'\n      );\n      result = result.replace(re, '');\n    }\n    // Remove self-closing and opening/closing tags for the rest\n    const openClose = new RegExp(\n      `<\\\\/?${tag}[^>]*\\\\/?>`,\n      'gi'\n    );\n    result = result.replace(openClose, '');\n  }\n\n  return result;\n}\n\n/**\n * Extract the hostname from a URL string.\n * Returns empty string if parsing fails.\n */\nexport function extractDomain(url: string): string {\n  try {\n    const parsed = new URL(url);\n    return parsed.hostname;\n  } catch {\n    // Try a regex fallback for partial URLs\n    const match = url.match(/^(?:https?:\\/\\/)?([^/?#]+)/);\n    return match ? match[1] : '';\n  }\n}\n\n/**\n * Truncate text to maxLen characters, adding ellipsis if truncated.\n */\nexport function truncate(text: string, maxLen: number): string {\n  if (text.length <= maxLen) {\n    return text;\n  }\n  return text.slice(0, maxLen) + '...';\n}\n", "import { Hono } from 'hono'\nimport { KVStore } from '../store/kv'\nimport { generateId } from '../lib/utils'\nimport type { UserPreference } from '../types'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const preferences = await kvStore.listPreferences()\n  return c.json(preferences)\n})\n\napp.post('/', async (c) => {\n  const body = await c.req.json<{\n    domain: string\n    action: string\n    level?: number\n  }>()\n\n  if (!body.domain || !body.action) {\n    return c.json({ error: 'Missing required fields: domain, action' }, 400)\n  }\n\n  const pref: UserPreference = {\n    id: generateId(),\n    domain: body.domain,\n    action: body.action,\n    level: body.level ?? 0,\n    created_at: new Date().toISOString(),\n  }\n\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.setPreference(pref)\n  return c.json({ success: true })\n})\n\napp.delete('/:domain', async (c) => {\n  const domain = c.req.param('domain')\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.deletePreference(domain)\n  return c.json({ success: true })\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { KVStore } from '../store/kv'\nimport { generateId } from '../lib/utils'\nimport type { SearchLens } from '../types'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const lenses = await kvStore.listLenses()\n  return c.json(lenses)\n})\n\napp.post('/', async (c) => {\n  const body = await c.req.json<Partial<SearchLens>>()\n  const now = new Date().toISOString()\n  const lens: SearchLens = {\n    id: generateId(),\n    name: body.name ?? 'Untitled',\n    description: body.description,\n    domains: body.domains,\n    exclude: body.exclude,\n    include_keywords: body.include_keywords,\n    exclude_keywords: body.exclude_keywords,\n    keywords: body.keywords,\n    region: body.region,\n    file_type: body.file_type,\n    date_before: body.date_before,\n    date_after: body.date_after,\n    is_public: body.is_public ?? false,\n    is_built_in: false,\n    is_shared: body.is_shared ?? false,\n    share_link: body.share_link,\n    user_id: body.user_id,\n    created_at: now,\n    updated_at: now,\n  }\n\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.createLens(lens)\n  return c.json(lens, 201)\n})\n\napp.get('/:id', async (c) => {\n  const id = c.req.param('id')\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const lens = await kvStore.getLens(id)\n\n  if (!lens) {\n    return c.json({ error: 'Lens not found' }, 404)\n  }\n\n  return c.json(lens)\n})\n\napp.put('/:id', async (c) => {\n  const id = c.req.param('id')\n  const body = await c.req.json()\n\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const lens = await kvStore.updateLens(id, body)\n  return c.json(lens)\n})\n\napp.delete('/:id', async (c) => {\n  const id = c.req.param('id')\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.deleteLens(id)\n  return c.json({ success: true })\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { KVStore } from '../store/kv'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const history = await kvStore.listHistory()\n  return c.json(history)\n})\n\napp.delete('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.clearHistory()\n  return c.json({ success: true })\n})\n\napp.delete('/:id', async (c) => {\n  const id = c.req.param('id')\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  await kvStore.deleteHistory(id)\n  return c.json({ success: true })\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { KVStore } from '../store/kv'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const settings = await kvStore.getSettings()\n  return c.json(settings)\n})\n\napp.put('/', async (c) => {\n  const body = await c.req.json()\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const settings = await kvStore.updateSettings(body)\n  return c.json(settings)\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { BangService } from '../services/bang'\nimport { KVStore } from '../store/kv'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\napp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const bangService = new BangService(kvStore)\n  const bangs = await bangService.listBangs()\n  return c.json(bangs)\n})\n\napp.get('/parse', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const bangService = new BangService(kvStore)\n  const result = await bangService.parse(q)\n  return c.json(result)\n})\n\napp.post('/', async (c) => {\n  const body = await c.req.json()\n\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const bangService = new BangService(kvStore)\n  const bang = await bangService.createBang(body)\n  return c.json(bang, 201)\n})\n\napp.delete('/:id', async (c) => {\n  const id = c.req.param('id')\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const bangService = new BangService(kvStore)\n  await bangService.deleteBang(id)\n  return c.json({ success: true })\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { KVStore } from '../store/kv'\nimport { SuggestService } from '../services/suggest'\nimport { CacheStore } from '../store/cache'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\ninterface CheatsheetItem {\n  syntax: string\n  description: string\n}\n\ninterface CheatsheetSection {\n  title: string\n  items: CheatsheetItem[]\n}\n\ninterface Cheatsheet {\n  language: string\n  title: string\n  sections: CheatsheetSection[]\n}\n\nconst CHEATSHEETS: Record<string, Cheatsheet> = {\n  javascript: {\n    language: 'javascript',\n    title: 'JavaScript Cheatsheet',\n    sections: [\n      {\n        title: 'Variables & Types',\n        items: [\n          { syntax: 'const x = 1', description: 'Declare a block-scoped constant' },\n          { syntax: 'let y = 2', description: 'Declare a block-scoped variable' },\n          { syntax: 'typeof x', description: 'Returns the type of a variable as a string' },\n          { syntax: 'Array.isArray(arr)', description: 'Check if a value is an array' },\n          { syntax: 'x ?? fallback', description: 'Nullish coalescing - use fallback if x is null/undefined' },\n          { syntax: 'x?.prop', description: 'Optional chaining - access property safely' },\n        ],\n      },\n      {\n        title: 'Functions',\n        items: [\n          { syntax: 'function name(a, b) {}', description: 'Function declaration with hoisting' },\n          { syntax: 'const fn = (a, b) => a + b', description: 'Arrow function expression' },\n          { syntax: 'const fn = (...args) => {}', description: 'Rest parameters collect remaining arguments' },\n          { syntax: 'fn(a, ...arr)', description: 'Spread syntax expands array into arguments' },\n          { syntax: 'function fn(a = 1) {}', description: 'Default parameter values' },\n          { syntax: 'const { a, b } = obj', description: 'Destructuring assignment from objects' },\n        ],\n      },\n      {\n        title: 'Arrays',\n        items: [\n          { syntax: 'arr.map(x => x * 2)', description: 'Create new array by transforming each element' },\n          { syntax: 'arr.filter(x => x > 0)', description: 'Create new array with elements passing a test' },\n          { syntax: 'arr.reduce((acc, x) => acc + x, 0)', description: 'Reduce array to single value' },\n          { syntax: 'arr.find(x => x.id === 1)', description: 'Find first element matching condition' },\n          { syntax: 'arr.some(x => x > 5)', description: 'Test if any element passes condition' },\n          { syntax: 'arr.flat(depth)', description: 'Flatten nested arrays to specified depth' },\n          { syntax: '[...arr1, ...arr2]', description: 'Concatenate arrays using spread' },\n        ],\n      },\n      {\n        title: 'Async',\n        items: [\n          { syntax: 'async function fn() {}', description: 'Declare async function returning a Promise' },\n          { syntax: 'const result = await promise', description: 'Wait for promise to resolve' },\n          { syntax: 'Promise.all([p1, p2])', description: 'Wait for all promises to resolve' },\n          { syntax: 'Promise.race([p1, p2])', description: 'Resolve with the first settled promise' },\n          { syntax: 'try { await fn() } catch(e) {}', description: 'Handle async errors with try/catch' },\n        ],\n      },\n    ],\n  },\n  python: {\n    language: 'python',\n    title: 'Python Cheatsheet',\n    sections: [\n      {\n        title: 'Variables & Types',\n        items: [\n          { syntax: 'x: int = 10', description: 'Variable with type annotation' },\n          { syntax: 'type(x)', description: 'Get the type of a variable' },\n          { syntax: 'isinstance(x, int)', description: 'Check if object is instance of a type' },\n          { syntax: 'x = y if cond else z', description: 'Ternary conditional expression' },\n          { syntax: 'a, b = 1, 2', description: 'Multiple assignment / tuple unpacking' },\n          { syntax: 'f\"Hello {name}\"', description: 'F-string for string interpolation' },\n        ],\n      },\n      {\n        title: 'Collections',\n        items: [\n          { syntax: '[x*2 for x in lst]', description: 'List comprehension' },\n          { syntax: '{k: v for k, v in items}', description: 'Dictionary comprehension' },\n          { syntax: 'set(lst)', description: 'Create a set from an iterable' },\n          { syntax: 'dict.get(key, default)', description: 'Get value with a default fallback' },\n          { syntax: 'lst.sort(key=lambda x: x.name)', description: 'Sort list in-place by key function' },\n          { syntax: 'enumerate(lst)', description: 'Iterate with index and value' },\n          { syntax: 'zip(lst1, lst2)', description: 'Iterate over multiple lists in parallel' },\n        ],\n      },\n      {\n        title: 'Functions & Classes',\n        items: [\n          { syntax: 'def fn(a: int, b: int = 0) -> int:', description: 'Function with type hints and default' },\n          { syntax: 'lambda x: x * 2', description: 'Anonymous function expression' },\n          { syntax: '*args, **kwargs', description: 'Variadic positional and keyword arguments' },\n          { syntax: '@decorator', description: 'Apply a decorator to a function or class' },\n          { syntax: 'class Foo(Bar):', description: 'Class definition with inheritance' },\n          { syntax: '@property', description: 'Define a getter property on a class' },\n        ],\n      },\n      {\n        title: 'Control Flow',\n        items: [\n          { syntax: 'for x in range(10):', description: 'Loop over a range of numbers' },\n          { syntax: 'while cond:', description: 'Loop while condition is true' },\n          { syntax: 'with open(f) as fh:', description: 'Context manager for resource handling' },\n          { syntax: 'try: ... except E as e:', description: 'Exception handling with specific type' },\n          { syntax: 'match value: case pattern:', description: 'Structural pattern matching (3.10+)' },\n        ],\n      },\n    ],\n  },\n  go: {\n    language: 'go',\n    title: 'Go Cheatsheet',\n    sections: [\n      {\n        title: 'Variables & Types',\n        items: [\n          { syntax: 'var x int = 10', description: 'Explicit variable declaration with type' },\n          { syntax: 'x := 10', description: 'Short variable declaration with type inference' },\n          { syntax: 'const Pi = 3.14', description: 'Constant declaration' },\n          { syntax: 'type Point struct { X, Y int }', description: 'Define a struct type' },\n          { syntax: 'type Reader interface { Read([]byte) (int, error) }', description: 'Define an interface' },\n          { syntax: 'p := &Point{1, 2}', description: 'Create pointer to struct literal' },\n        ],\n      },\n      {\n        title: 'Functions & Methods',\n        items: [\n          { syntax: 'func add(a, b int) int {}', description: 'Function with parameters and return type' },\n          { syntax: 'func div(a, b int) (int, error) {}', description: 'Function with multiple return values' },\n          { syntax: 'func (p *Point) Scale(f int) {}', description: 'Method with pointer receiver' },\n          { syntax: 'func process(fn func(int) int) {}', description: 'Function as parameter' },\n          { syntax: 'defer file.Close()', description: 'Defer execution until function returns' },\n          { syntax: 'func variadic(nums ...int) {}', description: 'Variadic function parameters' },\n        ],\n      },\n      {\n        title: 'Concurrency',\n        items: [\n          { syntax: 'go fn()', description: 'Launch a goroutine' },\n          { syntax: 'ch := make(chan int)', description: 'Create an unbuffered channel' },\n          { syntax: 'ch := make(chan int, 10)', description: 'Create a buffered channel' },\n          { syntax: 'select { case v := <-ch: ... }', description: 'Select on multiple channel operations' },\n          { syntax: 'var mu sync.Mutex', description: 'Mutex for protecting shared state' },\n          { syntax: 'var wg sync.WaitGroup', description: 'Wait for a group of goroutines to finish' },\n        ],\n      },\n      {\n        title: 'Collections',\n        items: [\n          { syntax: 'sl := []int{1, 2, 3}', description: 'Slice literal' },\n          { syntax: 'sl = append(sl, 4)', description: 'Append to a slice' },\n          { syntax: 'm := map[string]int{\"a\": 1}', description: 'Map literal' },\n          { syntax: 'v, ok := m[\"key\"]', description: 'Map lookup with existence check' },\n          { syntax: 'for i, v := range sl {}', description: 'Range over slice with index and value' },\n          { syntax: 'copy(dst, src)', description: 'Copy elements between slices' },\n        ],\n      },\n    ],\n  },\n  rust: {\n    language: 'rust',\n    title: 'Rust Cheatsheet',\n    sections: [\n      {\n        title: 'Variables & Types',\n        items: [\n          { syntax: 'let x: i32 = 10;', description: 'Immutable variable binding with type' },\n          { syntax: 'let mut y = 20;', description: 'Mutable variable binding' },\n          { syntax: 'const MAX: u32 = 100;', description: 'Compile-time constant' },\n          { syntax: 'let s = String::from(\"hello\");', description: 'Create an owned String from a literal' },\n          { syntax: 'let r: &str = &s;', description: 'Borrow as a string slice reference' },\n          { syntax: 'type Point = (f64, f64);', description: 'Type alias for a tuple' },\n        ],\n      },\n      {\n        title: 'Ownership & Borrowing',\n        items: [\n          { syntax: 'let s2 = s1.clone();', description: 'Deep clone to avoid move' },\n          { syntax: 'fn borrow(s: &String) {}', description: 'Immutable reference parameter' },\n          { syntax: 'fn mutate(s: &mut String) {}', description: 'Mutable reference parameter' },\n          { syntax: \"let r = &v[0..3];\", description: 'Slice reference to a portion of a collection' },\n          { syntax: \"Box::new(value)\", description: 'Heap-allocate a value with Box' },\n          { syntax: \"Rc::clone(&shared)\", description: 'Reference-counted shared ownership' },\n        ],\n      },\n      {\n        title: 'Enums & Pattern Matching',\n        items: [\n          { syntax: 'enum Option<T> { Some(T), None }', description: 'Generic enum for optional values' },\n          { syntax: 'match value { Pat => expr }', description: 'Exhaustive pattern matching' },\n          { syntax: 'if let Some(v) = opt { }', description: 'Conditional pattern match' },\n          { syntax: 'value.unwrap_or(default)', description: 'Unwrap Option/Result with fallback' },\n          { syntax: 'result?', description: 'Propagate errors with the ? operator' },\n        ],\n      },\n      {\n        title: 'Traits & Generics',\n        items: [\n          { syntax: 'trait Summary { fn summarize(&self) -> String; }', description: 'Define a trait with a method' },\n          { syntax: 'impl Summary for Article {}', description: 'Implement a trait for a type' },\n          { syntax: 'fn print<T: Display>(val: T) {}', description: 'Generic function with trait bound' },\n          { syntax: 'fn process(item: &dyn Summary) {}', description: 'Dynamic dispatch with trait object' },\n          { syntax: '#[derive(Debug, Clone)]', description: 'Auto-derive trait implementations' },\n        ],\n      },\n    ],\n  },\n  html: {\n    language: 'html',\n    title: 'HTML Cheatsheet',\n    sections: [\n      {\n        title: 'Document Structure',\n        items: [\n          { syntax: '<!DOCTYPE html>', description: 'HTML5 document type declaration' },\n          { syntax: '<html lang=\"en\">', description: 'Root element with language attribute' },\n          { syntax: '<head>', description: 'Container for metadata, links, and scripts' },\n          { syntax: '<meta charset=\"utf-8\">', description: 'Character encoding declaration' },\n          { syntax: '<meta name=\"viewport\" content=\"width=device-width\">', description: 'Responsive viewport setting' },\n          { syntax: '<link rel=\"stylesheet\" href=\"style.css\">', description: 'Link external stylesheet' },\n        ],\n      },\n      {\n        title: 'Semantic Elements',\n        items: [\n          { syntax: '<header>', description: 'Introductory content or navigation container' },\n          { syntax: '<nav>', description: 'Navigation links section' },\n          { syntax: '<main>', description: 'Dominant content of the document' },\n          { syntax: '<article>', description: 'Self-contained composition' },\n          { syntax: '<section>', description: 'Thematic grouping of content' },\n          { syntax: '<aside>', description: 'Content tangentially related to surrounding content' },\n          { syntax: '<footer>', description: 'Footer for nearest section or root' },\n        ],\n      },\n      {\n        title: 'Forms',\n        items: [\n          { syntax: '<form action=\"/submit\" method=\"post\">', description: 'Form with action URL and method' },\n          { syntax: '<input type=\"text\" name=\"q\" required>', description: 'Text input with validation' },\n          { syntax: '<input type=\"email\" placeholder=\"you@example.com\">', description: 'Email input with placeholder' },\n          { syntax: '<select name=\"option\"><option>A</option></select>', description: 'Dropdown select element' },\n          { syntax: '<textarea rows=\"4\" cols=\"50\"></textarea>', description: 'Multi-line text input' },\n          { syntax: '<button type=\"submit\">Send</button>', description: 'Submit button element' },\n        ],\n      },\n      {\n        title: 'Media & Embedding',\n        items: [\n          { syntax: '<img src=\"img.png\" alt=\"Description\">', description: 'Image with alt text for accessibility' },\n          { syntax: '<picture><source srcset=\"img.webp\" type=\"image/webp\"></picture>', description: 'Responsive image with multiple sources' },\n          { syntax: '<video src=\"vid.mp4\" controls></video>', description: 'Video element with playback controls' },\n          { syntax: '<audio src=\"sound.mp3\" controls></audio>', description: 'Audio element with playback controls' },\n          { syntax: '<canvas id=\"c\" width=\"300\" height=\"200\"></canvas>', description: 'Drawing surface for graphics' },\n        ],\n      },\n    ],\n  },\n  css: {\n    language: 'css',\n    title: 'CSS Cheatsheet',\n    sections: [\n      {\n        title: 'Selectors',\n        items: [\n          { syntax: '.class', description: 'Select elements by class name' },\n          { syntax: '#id', description: 'Select element by ID' },\n          { syntax: 'parent > child', description: 'Direct child combinator' },\n          { syntax: 'a:hover', description: 'Pseudo-class for hover state' },\n          { syntax: 'p::first-line', description: 'Pseudo-element for first line of text' },\n          { syntax: '[data-attr=\"value\"]', description: 'Attribute selector with value match' },\n          { syntax: ':has(.child)', description: 'Parent selector based on child (CSS4)' },\n        ],\n      },\n      {\n        title: 'Layout',\n        items: [\n          { syntax: 'display: flex;', description: 'Enable flexbox layout on container' },\n          { syntax: 'display: grid;', description: 'Enable grid layout on container' },\n          { syntax: 'grid-template-columns: repeat(3, 1fr);', description: 'Three equal-width grid columns' },\n          { syntax: 'justify-content: center;', description: 'Center items along main axis' },\n          { syntax: 'align-items: center;', description: 'Center items along cross axis' },\n          { syntax: 'gap: 1rem;', description: 'Gap between flex or grid items' },\n        ],\n      },\n      {\n        title: 'Responsive',\n        items: [\n          { syntax: '@media (max-width: 768px) {}', description: 'Media query for mobile screens' },\n          { syntax: 'clamp(1rem, 2vw, 3rem)', description: 'Fluid value between min and max' },\n          { syntax: '@container (min-width: 400px) {}', description: 'Container query for component-level responsiveness' },\n          { syntax: 'aspect-ratio: 16 / 9;', description: 'Maintain aspect ratio on element' },\n          { syntax: 'min-width: 0;', description: 'Prevent flex/grid children from overflowing' },\n        ],\n      },\n      {\n        title: 'Custom Properties & Functions',\n        items: [\n          { syntax: '--color: #333;', description: 'Define a CSS custom property' },\n          { syntax: 'var(--color, fallback)', description: 'Use custom property with fallback' },\n          { syntax: 'calc(100% - 2rem)', description: 'Perform calculations in values' },\n          { syntax: 'color: oklch(70% 0.15 200);', description: 'OKLCH color space for perceptually uniform colors' },\n          { syntax: '@layer base, components;', description: 'Declare cascade layers for specificity control' },\n        ],\n      },\n    ],\n  },\n  sql: {\n    language: 'sql',\n    title: 'SQL Cheatsheet',\n    sections: [\n      {\n        title: 'Queries',\n        items: [\n          { syntax: 'SELECT col FROM table WHERE cond;', description: 'Basic select with condition' },\n          { syntax: 'SELECT DISTINCT col FROM table;', description: 'Select unique values only' },\n          { syntax: 'SELECT * FROM t ORDER BY col DESC LIMIT 10;', description: 'Sort descending and limit rows' },\n          { syntax: 'SELECT * FROM t WHERE col LIKE \"%pattern%\";', description: 'Pattern matching with wildcards' },\n          { syntax: 'SELECT * FROM t WHERE col IN (1, 2, 3);', description: 'Match against a list of values' },\n          { syntax: 'SELECT * FROM t WHERE col BETWEEN 1 AND 10;', description: 'Range condition inclusive' },\n        ],\n      },\n      {\n        title: 'Joins & Subqueries',\n        items: [\n          { syntax: 'SELECT * FROM a INNER JOIN b ON a.id = b.a_id;', description: 'Inner join matching rows from both tables' },\n          { syntax: 'SELECT * FROM a LEFT JOIN b ON a.id = b.a_id;', description: 'Left join keeps all rows from left table' },\n          { syntax: 'SELECT * FROM a CROSS JOIN b;', description: 'Cartesian product of two tables' },\n          { syntax: 'SELECT * FROM t WHERE id IN (SELECT id FROM t2);', description: 'Subquery in WHERE clause' },\n          { syntax: 'WITH cte AS (SELECT ...) SELECT * FROM cte;', description: 'Common Table Expression (CTE)' },\n        ],\n      },\n      {\n        title: 'Aggregation',\n        items: [\n          { syntax: 'SELECT COUNT(*) FROM table;', description: 'Count total rows' },\n          { syntax: 'SELECT col, COUNT(*) FROM t GROUP BY col;', description: 'Group and count per group' },\n          { syntax: 'SELECT col, SUM(val) FROM t GROUP BY col HAVING SUM(val) > 100;', description: 'Filter groups with HAVING' },\n          { syntax: 'SELECT AVG(col), MIN(col), MAX(col) FROM t;', description: 'Aggregate functions for statistics' },\n          { syntax: 'SELECT ROW_NUMBER() OVER (ORDER BY col) FROM t;', description: 'Window function for row numbering' },\n        ],\n      },\n      {\n        title: 'Data Modification',\n        items: [\n          { syntax: 'INSERT INTO t (col1, col2) VALUES (v1, v2);', description: 'Insert a new row' },\n          { syntax: 'UPDATE t SET col = val WHERE cond;', description: 'Update existing rows' },\n          { syntax: 'DELETE FROM t WHERE cond;', description: 'Delete rows matching condition' },\n          { syntax: 'CREATE TABLE t (id INT PRIMARY KEY, name TEXT);', description: 'Create a new table' },\n          { syntax: 'ALTER TABLE t ADD COLUMN col TYPE;', description: 'Add a column to existing table' },\n        ],\n      },\n    ],\n  },\n  bash: {\n    language: 'bash',\n    title: 'Bash Cheatsheet',\n    sections: [\n      {\n        title: 'Variables & Strings',\n        items: [\n          { syntax: 'VAR=\"value\"', description: 'Assign a variable (no spaces around =)' },\n          { syntax: '${VAR:-default}', description: 'Use default if variable is unset' },\n          { syntax: '${#VAR}', description: 'Get length of variable value' },\n          { syntax: '${VAR//old/new}', description: 'Replace all occurrences in variable' },\n          { syntax: '$(command)', description: 'Command substitution - capture output' },\n          { syntax: '\"$VAR\"', description: 'Double quotes preserve variable expansion' },\n        ],\n      },\n      {\n        title: 'Control Flow',\n        items: [\n          { syntax: 'if [[ $x -gt 0 ]]; then ... fi', description: 'Conditional with numeric comparison' },\n          { syntax: 'for f in *.txt; do ... done', description: 'Loop over glob pattern matches' },\n          { syntax: 'while read -r line; do ... done < file', description: 'Read file line by line' },\n          { syntax: 'case \"$VAR\" in pat) cmd;; esac', description: 'Pattern matching switch statement' },\n          { syntax: '[[ -f file ]] && echo exists', description: 'Test if file exists with short-circuit' },\n          { syntax: 'cmd1 || cmd2', description: 'Run cmd2 only if cmd1 fails' },\n        ],\n      },\n      {\n        title: 'Pipes & Redirection',\n        items: [\n          { syntax: 'cmd1 | cmd2', description: 'Pipe stdout of cmd1 to stdin of cmd2' },\n          { syntax: 'cmd > file', description: 'Redirect stdout to file (overwrite)' },\n          { syntax: 'cmd >> file', description: 'Redirect stdout to file (append)' },\n          { syntax: 'cmd 2>&1', description: 'Redirect stderr to stdout' },\n          { syntax: 'cmd < file', description: 'Read stdin from file' },\n          { syntax: 'cmd1 | tee file | cmd2', description: 'Split output to file and next command' },\n        ],\n      },\n      {\n        title: 'Common Commands',\n        items: [\n          { syntax: 'find . -name \"*.log\" -mtime +7 -delete', description: 'Find and delete files older than 7 days' },\n          { syntax: 'grep -rn \"pattern\" dir/', description: 'Recursively search for pattern with line numbers' },\n          { syntax: 'awk \\'{print $1}\\' file', description: 'Print first column of each line' },\n          { syntax: 'sed -i \\'s/old/new/g\\' file', description: 'In-place find and replace in file' },\n          { syntax: 'xargs -I{} cmd {}', description: 'Execute command for each stdin line' },\n        ],\n      },\n    ],\n  },\n  git: {\n    language: 'git',\n    title: 'Git Cheatsheet',\n    sections: [\n      {\n        title: 'Basic Commands',\n        items: [\n          { syntax: 'git init', description: 'Initialize a new repository' },\n          { syntax: 'git clone <url>', description: 'Clone a remote repository' },\n          { syntax: 'git add -p', description: 'Interactively stage hunks' },\n          { syntax: 'git commit -m \"message\"', description: 'Commit staged changes with message' },\n          { syntax: 'git status', description: 'Show working tree status' },\n          { syntax: 'git diff --staged', description: 'Show staged changes vs last commit' },\n        ],\n      },\n      {\n        title: 'Branching',\n        items: [\n          { syntax: 'git branch feature', description: 'Create a new branch' },\n          { syntax: 'git checkout -b feature', description: 'Create and switch to new branch' },\n          { syntax: 'git switch main', description: 'Switch to an existing branch' },\n          { syntax: 'git merge feature', description: 'Merge branch into current branch' },\n          { syntax: 'git rebase main', description: 'Rebase current branch onto main' },\n          { syntax: 'git branch -d feature', description: 'Delete a merged branch' },\n        ],\n      },\n      {\n        title: 'Remote Operations',\n        items: [\n          { syntax: 'git remote add origin <url>', description: 'Add a remote repository' },\n          { syntax: 'git fetch origin', description: 'Download objects and refs from remote' },\n          { syntax: 'git pull --rebase', description: 'Fetch and rebase local commits on top' },\n          { syntax: 'git push -u origin feature', description: 'Push branch and set upstream tracking' },\n          { syntax: 'git push origin --delete feature', description: 'Delete a remote branch' },\n        ],\n      },\n      {\n        title: 'History & Undo',\n        items: [\n          { syntax: 'git log --oneline --graph', description: 'Compact log with branch graph' },\n          { syntax: 'git stash', description: 'Stash uncommitted changes' },\n          { syntax: 'git stash pop', description: 'Apply and remove most recent stash' },\n          { syntax: 'git reset HEAD~1', description: 'Undo last commit, keep changes staged' },\n          { syntax: 'git revert <hash>', description: 'Create commit undoing a specific commit' },\n          { syntax: 'git cherry-pick <hash>', description: 'Apply a commit from another branch' },\n        ],\n      },\n    ],\n  },\n  regex: {\n    language: 'regex',\n    title: 'Regular Expressions Cheatsheet',\n    sections: [\n      {\n        title: 'Character Classes',\n        items: [\n          { syntax: '.', description: 'Match any character except newline' },\n          { syntax: '\\\\d', description: 'Match any digit (0-9)' },\n          { syntax: '\\\\w', description: 'Match word character (letter, digit, underscore)' },\n          { syntax: '\\\\s', description: 'Match whitespace (space, tab, newline)' },\n          { syntax: '[abc]', description: 'Match any character in the set' },\n          { syntax: '[^abc]', description: 'Match any character NOT in the set' },\n          { syntax: '[a-z]', description: 'Match any character in the range' },\n        ],\n      },\n      {\n        title: 'Quantifiers',\n        items: [\n          { syntax: '*', description: 'Match 0 or more times (greedy)' },\n          { syntax: '+', description: 'Match 1 or more times (greedy)' },\n          { syntax: '?', description: 'Match 0 or 1 time (optional)' },\n          { syntax: '{n}', description: 'Match exactly n times' },\n          { syntax: '{n,m}', description: 'Match between n and m times' },\n          { syntax: '*?', description: 'Match 0 or more times (lazy/non-greedy)' },\n        ],\n      },\n      {\n        title: 'Anchors & Boundaries',\n        items: [\n          { syntax: '^', description: 'Match start of string (or line with m flag)' },\n          { syntax: '$', description: 'Match end of string (or line with m flag)' },\n          { syntax: '\\\\b', description: 'Match word boundary' },\n          { syntax: '(?=pattern)', description: 'Positive lookahead assertion' },\n          { syntax: '(?!pattern)', description: 'Negative lookahead assertion' },\n          { syntax: '(?<=pattern)', description: 'Positive lookbehind assertion' },\n        ],\n      },\n      {\n        title: 'Groups & References',\n        items: [\n          { syntax: '(pattern)', description: 'Capturing group' },\n          { syntax: '(?:pattern)', description: 'Non-capturing group' },\n          { syntax: '(?<name>pattern)', description: 'Named capturing group' },\n          { syntax: '\\\\1', description: 'Backreference to first capturing group' },\n          { syntax: 'a|b', description: 'Alternation - match a or b' },\n          { syntax: '(?i)', description: 'Case-insensitive flag' },\n        ],\n      },\n    ],\n  },\n}\n\nconst AVAILABLE_LANGUAGES = Object.keys(CHEATSHEETS)\n\nconst DEFAULT_WIDGET_SETTINGS = {\n  weather: true,\n  calculator: true,\n  converter: true,\n  dictionary: true,\n  cheatsheets: true,\n  relatedSearches: true,\n  knowledgePanel: true,\n}\n\n// Widget settings sub-app (mounted at /api/widgets)\nconst widgetSettingsApp = new Hono<Env>()\n\nwidgetSettingsApp.get('/', async (c) => {\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const settings = await kvStore.getWidgetSettings()\n  return c.json(settings ?? DEFAULT_WIDGET_SETTINGS)\n})\n\nwidgetSettingsApp.put('/', async (c) => {\n  const body = await c.req.json()\n  const kvStore = new KVStore(c.env.SEARCH_KV)\n  const settings = await kvStore.updateWidgetSettings(body)\n  return c.json(settings)\n})\n\n// Cheatsheet sub-app (mounted at /api/cheatsheet)\nconst cheatsheetApp = new Hono<Env>()\n\ncheatsheetApp.get('/:language', (c) => {\n  const language = c.req.param('language').toLowerCase()\n  const cheatsheet = CHEATSHEETS[language]\n\n  if (!cheatsheet) {\n    return c.json(\n      { error: `Cheatsheet not found for language: ${language}`, available: AVAILABLE_LANGUAGES },\n      404\n    )\n  }\n\n  return c.json(cheatsheet)\n})\n\n// Cheatsheets list sub-app (mounted at /api/cheatsheets)\nconst cheatsheetsListApp = new Hono<Env>()\n\ncheatsheetsListApp.get('/', (c) => {\n  const list = AVAILABLE_LANGUAGES.map((lang) => ({\n    language: lang,\n    title: CHEATSHEETS[lang].title,\n  }))\n  return c.json(list)\n})\n\n// Related searches sub-app (mounted at /api/related)\nconst relatedApp = new Hono<Env>()\n\nrelatedApp.get('/', async (c) => {\n  const q = c.req.query('q') ?? ''\n  if (!q) {\n    return c.json({ error: 'Missing required parameter: q' }, 400)\n  }\n\n  const cache = new CacheStore(c.env.SEARCH_KV)\n  const suggestService = new SuggestService(cache)\n  const suggestions = await suggestService.suggest(q)\n  return c.json({ query: q, related: suggestions })\n})\n\nexport {\n  widgetSettingsApp as widgetsRoutes,\n  cheatsheetApp as cheatsheetRoutes,\n  cheatsheetsListApp as cheatsheetsListRoutes,\n  relatedApp as relatedRoutes,\n}\n\nexport default widgetSettingsApp\n", "import { Hono } from 'hono'\nimport { cors } from 'hono/cors'\nimport { timing } from 'hono/timing'\n\nimport healthRoutes from './routes/health'\nimport searchRoutes from './routes/search'\nimport suggestRoutes from './routes/suggest'\nimport instantRoutes from './routes/instant'\nimport knowledgeRoutes from './routes/knowledge'\nimport preferencesRoutes from './routes/preferences'\nimport lensesRoutes from './routes/lenses'\nimport historyRoutes from './routes/history'\nimport settingsRoutes from './routes/settings'\nimport bangsRoutes from './routes/bangs'\nimport {\n  widgetsRoutes,\n  cheatsheetRoutes,\n  cheatsheetsListRoutes,\n  relatedRoutes,\n} from './routes/widgets'\n\ntype Env = {\n  Bindings: {\n    SEARCH_KV: KVNamespace\n    ENVIRONMENT: string\n  }\n}\n\nconst app = new Hono<Env>()\n\n// Global middleware\napp.use('*', cors())\napp.use('*', timing())\n\n// Health check\napp.route('/health', healthRoutes)\n\n// API route groups\napp.route('/api/search', searchRoutes)\napp.route('/api/suggest', suggestRoutes)\napp.route('/api/instant', instantRoutes)\napp.route('/api/knowledge', knowledgeRoutes)\napp.route('/api/preferences', preferencesRoutes)\napp.route('/api/lenses', lensesRoutes)\napp.route('/api/history', historyRoutes)\napp.route('/api/settings', settingsRoutes)\napp.route('/api/bangs', bangsRoutes)\napp.route('/api/widgets', widgetsRoutes)\napp.route('/api/cheatsheet', cheatsheetRoutes)\napp.route('/api/cheatsheets', cheatsheetsListRoutes)\napp.route('/api/related', relatedRoutes)\n\n// Serve static frontend files for all other routes\n// Cloudflare Workers serves static assets from wrangler.toml [site] config\n// The index.html is served for all non-API routes (SPA fallback)\napp.get('*', async (c) => {\n  // In production, static files are served by Cloudflare automatically\n  // This is just a fallback that returns the index page content-type hint\n  return c.html('<!DOCTYPE html><html><head><meta http-equiv=\"refresh\" content=\"0;url=/\"></head><body></body></html>')\n})\n\nexport default app\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/src/index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/src/index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/.wrangler/tmp/bundle-a0xNuq/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/node_modules/.pnpm/wrangler@4.62.0_@cloudflare+workers-types@4.20260205.0/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/.wrangler/tmp/bundle-a0xNuq/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/apple/github/go-mizu/mizu/blueprints/search/app/worker/.wrangler/tmp/bundle-a0xNuq/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["PerformanceMark", "performance", "performance", "hrtime", "startTime", "env", "cwd", "hrtime", "match", "raw", "app", "env", "Node", "_Node", "Node", "Hono", "config", "Hono", "config", "match", "title", "title", "match", "timeRangeMap", "title", "timeRangeMap", "match", "title", "channel", "match", "title", "raw", "raw", "domain", "startTime", "match", "rate", "match", "app", "Hono", "app", "Hono", "app", "Hono", "app", "Hono", "generateId", "app", "Hono", "generateId", "domain", "app", "Hono", "generateId", "app", "Hono", "app", "Hono", "app", "Hono", "DEFAULT_WIDGET_SETTINGS", "Hono", "app", "Hono", "env", "env", "env", "env"]
}
