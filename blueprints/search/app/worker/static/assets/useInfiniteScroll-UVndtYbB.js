import{r as e}from"./react-vendor-DqWpB-k-.js";function p(o,i={}){const{threshold:c=200,enabled:t=!0}=i,u=e.useRef(null),[f,s]=e.useState(!1),[r,a]=e.useState(!0),n=e.useRef(!1),l=e.useCallback(async()=>{if(!t||n.current||!r)return;const w=window.scrollY,h=document.documentElement.scrollHeight,g=window.innerHeight;if(h-w-g<c){n.current=!0,s(!0);try{await o()}finally{n.current=!1,s(!1)}}},[t,r,c,o]);e.useEffect(()=>{if(t)return window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l)},[t,l]);const d=e.useCallback(()=>{a(!0),s(!1),n.current=!1},[]);return{containerRef:u,isLoading:f,setIsLoading:s,hasMore:r,setHasMore:a,reset:d}}export{p as u};
