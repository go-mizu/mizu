const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatPage-B5D9IQi6.js","assets/markdown-Bs6XdLEX.js","assets/utils-BuvrnUzC.js","assets/react-vendor-ZmPOmYi1.js","assets/OverviewPage-CRW4Y--A.js","assets/ChannelsPage-Dz3FUAUs.js","assets/InstancesPage-BzpyR_gc.js","assets/SessionsPage-Db09LFdA.js","assets/CronPage-jh8toFUb.js","assets/SkillsPage-CO3bscrE.js","assets/NodesPage-Dl7wMwCj.js","assets/ConfigPage-tHw1llhc.js","assets/DebugPage-DLEe4Bh8.js","assets/LogsPage-id3W2hL7.js"])))=>i.map(i=>d[i]);
var z=Object.defineProperty;var O=(t,n,o)=>n in t?z(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var g=(t,n,o)=>O(t,typeof n!="symbol"?n+"":n,o);import{j as e,a as i}from"./markdown-Bs6XdLEX.js";import{r as V}from"./react-vendor-ZmPOmYi1.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();var _={},y;function A(){if(y)return _;y=1;var t=V();return _.createRoot=t.createRoot,_.hydrateRoot=t.hydrateRoot,_}var I=A();const D="modulepreload",H=function(t){return"/"+t},E={},m=function(n,o,r){let a=Promise.resolve();if(o&&o.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(o.map(u=>{if(u=H(u),u in E)return;E[u]=!0;const f=u.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":D,f||(p.as="script"),p.crossOrigin="",p.href=u,h&&p.setAttribute("nonce",h),document.head.appendChild(p),f)return new Promise((b,M)=>{p.addEventListener("load",b),p.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&s(d.reason);return n().catch(s)})};class q{constructor(){g(this,"ws",null);g(this,"connected",!1);g(this,"hello",null);g(this,"_rid",0);g(this,"_pending",{});g(this,"_handlers",{})}connect(n){return new Promise((o,r)=>{try{this.ws=new WebSocket(n)}catch(a){r(a);return}this.ws.onopen=()=>{this.ws.send(JSON.stringify({type:"hello",token:""}))},this.ws.onmessage=a=>{let s;try{s=JSON.parse(a.data)}catch{return}if(s.type==="hello-ok"){this.connected=!0,this.hello=s,this._emit("connected",s),o(this.hello);return}if(s.type==="hello-error"){r(new Error(s.error||"auth failed"));return}if(s.type==="event"){this._emit("event",s),this._emit("event:"+s.event,s.payload);return}if(s.id&&this._pending[s.id]){const{resolve:c,reject:d}=this._pending[s.id];delete this._pending[s.id],s.error?d(new Error(s.error)):c(s.result)}},this.ws.onclose=()=>{this.connected=!1,this._emit("disconnected")},this.ws.onerror=()=>{this.connected=!1,r(new Error("connection failed"))}})}rpc(n,o){return new Promise((r,a)=>{if(!this.ws||this.ws.readyState!==WebSocket.OPEN){a(new Error("not connected"));return}const s="r-"+ ++this._rid;this._pending[s]={resolve:r,reject:a},this.ws.send(JSON.stringify({id:s,method:n,params:o||{}})),setTimeout(()=>{this._pending[s]&&(delete this._pending[s],a(new Error("timeout")))},15e3)})}on(n,o){return this._handlers[n]||(this._handlers[n]=[]),this._handlers[n].push(o),()=>{this._handlers[n]=this._handlers[n].filter(r=>r!==o)}}_emit(n,o){(this._handlers[n]||[]).forEach(r=>r(o))}close(){this.ws&&this.ws.close()}}const P={messageSquare:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",barChart:"M12 20V10M18 20V4M6 20v-4",link:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",radio:"M12 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14",fileText:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM14 2v6h6M16 13H8M16 17H8M10 9H8",loader:"M12 2v4m0 12v4m-7.07-15.07 2.83 2.83m8.48 8.48 2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48 2.83-2.83",zap:"M13 2 3 14h9l-1 8 10-12h-9l1-8z",monitor:"M2 3h20v14H2zM8 21h8M12 17v4",settings:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",bug:"m8 2 1.88 1.88M14.12 3.88 16 2M9 7.13v-1a3.003 3.003 0 1 1 6 0v1M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6M12 20v-9M6.53 9C4.6 8.8 3 7.1 3 5M6 13H2M22 13h-4M17.47 9c1.93-.2 3.53-1.9 3.53-4M9.5 16a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0M13.5 16a.5.5 0 1 0 1 0 .5.5 0 0 0-1 0",scrollText:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4M19 17V5a2 2 0 0 0-2-2H4M15 8h-5M15 12h-5",refresh:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8M21 3v5h-5M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16M3 21v-5h5",x:"M18 6 6 18M6 6l12 12",play:"m5 3 14 9-14 9V3z",trash:"M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",plus:"M12 5v14M5 12h14",send:"m22 2-7 20-4-9-9-4z",eye:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7z M12 12m-3 0a3 3 0 1 0 6 0 3 3 0 1 0-6 0",folder:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z",search:"M11 11m-8 0a8 8 0 1 0 16 0 8 8 0 1 0-16 0M21 21l-4.35-4.35",save:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2zM17 21v-8H7v8M7 3v5h8",copy:"M20 9h-9a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2zM5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1",download:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3",sun:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0-8 0M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41",moon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",panelLeft:"M3 3h18v18H3zM9 3v18",chevronDown:"M6 9l6 6 6-6",check:"M20 6 9 17l-5-5",pencil:"M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z M15 5l4 4"};function w({name:t,size:n=16}){const o=P[t]||P.folder;return e.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.split(/(?=[Mm])/).filter(Boolean).map((r,a)=>e.jsx("path",{d:r.trim()},a))})}function B(){return document.documentElement.getAttribute("data-theme")||"dark"}function $({connected:t,collapsed:n,onToggleCollapse:o}){const[r,a]=i.useState(B);i.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),localStorage.setItem("openbot-theme",r)},[r]),i.useEffect(()=>{const c=localStorage.getItem("openbot-theme");c&&(a(c),document.documentElement.setAttribute("data-theme",c))},[]);function s(){a(c=>c==="dark"?"light":"dark")}return e.jsxs("div",{className:"topbar",children:[e.jsxs("div",{className:"topbar-left",children:[e.jsx("button",{className:"nav-collapse-btn",onClick:o,title:n?"Expand":"Collapse",children:e.jsx(w,{name:"panelLeft",size:16})}),e.jsx("div",{className:"brand",children:e.jsxs("div",{className:"brand-text",children:[e.jsx("div",{className:"brand-title",children:"OpenBot"}),e.jsx("div",{className:"brand-sub",children:"Control Dashboard"})]})})]}),e.jsxs("div",{className:"topbar-right",children:[e.jsxs("button",{className:"theme-btn",onClick:s,children:[e.jsx(w,{name:r==="dark"?"sun":"moon",size:14}),e.jsx("span",{children:r==="dark"?"Light":"Dark"})]}),e.jsxs("div",{className:"pill",children:[e.jsx("span",{className:"statusDot"+(t?" ok":"")}),e.jsx("span",{className:"mono",children:t?"Connected":"Disconnected"})]})]})]})}const G=[{label:"Chat",tabs:["chat"]},{label:"Control",tabs:["overview","channels","instances","sessions","cron"]},{label:"Agent",tabs:["skills","nodes"]},{label:"Settings",tabs:["config","debug","logs"]}],N={chat:{title:"Chat",sub:"Direct gateway chat session for quick interventions.",icon:"messageSquare"},overview:{title:"Overview",sub:"Gateway status, entry points, and a fast health read.",icon:"barChart"},channels:{title:"Channels",sub:"Manage channels and settings.",icon:"link"},instances:{title:"Instances",sub:"Presence beacons from connected clients and nodes.",icon:"radio"},sessions:{title:"Sessions",sub:"Inspect active sessions and adjust per-session defaults.",icon:"fileText"},cron:{title:"Cron Jobs",sub:"Schedule wakeups and recurring agent runs.",icon:"loader"},skills:{title:"Skills",sub:"Manage skill availability and API key injection.",icon:"zap"},nodes:{title:"Nodes",sub:"Paired devices, capabilities, and command exposure.",icon:"monitor"},config:{title:"Config",sub:"Edit configuration safely.",icon:"settings"},debug:{title:"Debug",sub:"Gateway snapshots, events, and manual RPC calls.",icon:"bug"},logs:{title:"Logs",sub:"Live tail of the gateway logs.",icon:"scrollText"}};function J({tab:t,onNavigate:n}){return e.jsx("nav",{className:"nav",children:G.map(o=>e.jsxs("div",{className:"nav-group",children:[e.jsx("div",{className:"nav-label",children:e.jsx("span",{children:o.label})}),e.jsx("div",{className:"nav-group__items",children:o.tabs.map(r=>{const a=N[r];return e.jsxs("button",{className:"nav-item"+(t===r?" active":""),onClick:()=>n(r),children:[e.jsx("span",{className:"nav-icon",children:e.jsx(w,{name:a.icon})}),e.jsx("span",{children:a.title})]},r)})})]},o.label))})}function U({tab:t}){const n=N[t]||{title:"",sub:""};return e.jsx("div",{className:"content-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:n.title}),e.jsx("p",{className:"page-sub",children:n.sub})]})})}const S=i.createContext({toast:()=>{}});function ce(){return i.useContext(S)}function W({children:t}){const[n,o]=i.useState([]),r=i.useRef(0),a=i.useCallback((s,c="info")=>{const d=++r.current;o(h=>[...h,{id:d,message:s,type:c}]),setTimeout(()=>{o(h=>h.map(u=>u.id===d?{...u,exiting:!0}:u)),setTimeout(()=>{o(h=>h.filter(u=>u.id!==d))},200)},3e3)},[]);return e.jsxs(S.Provider,{value:{toast:a},children:[t,e.jsx("div",{className:"toast-container",children:n.map(s=>e.jsx("div",{className:`toast ${s.type}${s.exiting?" exiting":""}`,children:s.message},s.id))})]})}const F=i.lazy(()=>m(()=>import("./ChatPage-B5D9IQi6.js"),__vite__mapDeps([0,1,2,3])).then(t=>({default:t.ChatPage}))),C=i.lazy(()=>m(()=>import("./OverviewPage-CRW4Y--A.js"),__vite__mapDeps([4,1,3])).then(t=>({default:t.OverviewPage}))),K=i.lazy(()=>m(()=>import("./ChannelsPage-Dz3FUAUs.js"),__vite__mapDeps([5,1,2,3])).then(t=>({default:t.ChannelsPage}))),Z=i.lazy(()=>m(()=>import("./InstancesPage-BzpyR_gc.js"),__vite__mapDeps([6,1,2,3])).then(t=>({default:t.InstancesPage}))),Q=i.lazy(()=>m(()=>import("./SessionsPage-Db09LFdA.js"),__vite__mapDeps([7,1,2,3])).then(t=>({default:t.SessionsPage}))),X=i.lazy(()=>m(()=>import("./CronPage-jh8toFUb.js"),__vite__mapDeps([8,1,2,3])).then(t=>({default:t.CronPage}))),Y=i.lazy(()=>m(()=>import("./SkillsPage-CO3bscrE.js"),__vite__mapDeps([9,1,2,3])).then(t=>({default:t.SkillsPage}))),ee=i.lazy(()=>m(()=>import("./NodesPage-Dl7wMwCj.js"),__vite__mapDeps([10,1,2,3])).then(t=>({default:t.NodesPage}))),te=i.lazy(()=>m(()=>import("./ConfigPage-tHw1llhc.js"),__vite__mapDeps([11,1,3])).then(t=>({default:t.ConfigPage}))),se=i.lazy(()=>m(()=>import("./DebugPage-DLEe4Bh8.js"),__vite__mapDeps([12,1,2,3])).then(t=>({default:t.DebugPage}))),ne=i.lazy(()=>m(()=>import("./LogsPage-id3W2hL7.js"),__vite__mapDeps([13,1,2,3])).then(t=>({default:t.LogsPage})));function ae(){return e.jsx("div",{className:"empty-state",style:{paddingTop:60},children:e.jsx("div",{className:"spinner"})})}function oe(){const[t,n]=i.useState(window.location.hash.slice(1)||"overview"),[o,r]=i.useState(!1),[a,s]=i.useState(null),[c,d]=i.useState(()=>localStorage.getItem("openbot-nav-collapsed")==="1"),h=i.useRef(null),[u,f]=i.useState(0);h.current||(h.current=new q);const v=h.current;i.useEffect(()=>{let l=!1;function x(){const k=(window.location.protocol==="https:"?"wss:":"ws:")+"//"+window.location.host+"/ws";v.connect(k).then(()=>{l||(r(!0),s(null))}).catch(L=>{l||(r(!1),s(L.message),setTimeout(()=>{l||f(R=>R+1)},3e3))})}x();const T=v.on("disconnected",()=>{l||(r(!1),setTimeout(()=>{l||f(j=>j+1)},3e3))});return()=>{l=!0,T()}},[u,v]);const p=i.useCallback(l=>{n(l),window.location.hash=l},[]);i.useEffect(()=>{function l(){n(window.location.hash.slice(1)||"overview")}return window.addEventListener("hashchange",l),()=>window.removeEventListener("hashchange",l)},[]);const b=i.useCallback(()=>{d(l=>{const x=!l;return localStorage.setItem("openbot-nav-collapsed",x?"1":"0"),x})},[]);function M(){if(!o)return e.jsxs("div",{className:"empty-state",style:{paddingTop:80},children:[e.jsx("div",{className:"spinner"}),e.jsx("div",{children:a?"Connection failed: "+a:"Connecting to gateway..."}),e.jsx("button",{className:"btn",style:{marginTop:12},onClick:()=>f(x=>x+1),children:"Retry"})]});const l={gw:v};switch(t){case"chat":return e.jsx(F,{...l});case"overview":return e.jsx(C,{...l});case"channels":return e.jsx(K,{...l});case"instances":return e.jsx(Z,{...l});case"sessions":return e.jsx(Q,{...l});case"cron":return e.jsx(X,{...l});case"skills":return e.jsx(Y,{...l});case"nodes":return e.jsx(ee,{...l});case"config":return e.jsx(te,{...l});case"debug":return e.jsx(se,{...l});case"logs":return e.jsx(ne,{...l});default:return e.jsx(C,{...l})}}return e.jsx(W,{children:e.jsxs("div",{className:"shell"+(t==="chat"?" shell--chat":"")+(c?" shell--collapsed":""),children:[e.jsx($,{connected:o,collapsed:c,onToggleCollapse:b}),e.jsx(J,{tab:t,onNavigate:p}),e.jsxs("div",{className:"content"+(t==="chat"?" content--chat":""),children:[t!=="chat"&&e.jsx(U,{tab:t}),e.jsx(i.Suspense,{fallback:e.jsx(ae,{}),children:M()})]})]})})}I.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(oe,{})}));export{w as I,ce as u};
