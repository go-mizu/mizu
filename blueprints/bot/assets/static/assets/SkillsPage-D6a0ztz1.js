import{a as i,j as e}from"./markdown-Bs6XdLEX.js";import{t as g}from"./utils-BuvrnUzC.js";import{u,I as h}from"./index-b4ey1F3N.js";import"./react-vendor-ZmPOmYi1.js";function v({gw:c}){const{toast:n}=u(),[a,x]=i.useState([]),[o,m]=i.useState(!0),[r,p]=i.useState(""),l=i.useCallback(async()=>{m(!0);try{const s=await c.rpc("skills.status");x(s.skills??[])}catch(s){n("Failed to load skills: "+(s instanceof Error?s.message:"unknown"),"error")}finally{m(!1)}},[c,n]);i.useEffect(()=>{l()},[l]);const d=i.useMemo(()=>{if(!r.trim())return a;const s=r.toLowerCase();return a.filter(t=>t.name.toLowerCase().includes(s)||t.key.toLowerCase().includes(s)||t.description.toLowerCase().includes(s))},[a,r]),j=i.useCallback(async s=>{try{await c.rpc("skills.toggle",{key:s.key,enabled:!s.enabled}),n(s.enabled?`${s.name} disabled`:`${s.name} enabled`,"success"),await l()}catch(t){n("Toggle failed: "+(t instanceof Error?t.message:"unknown"),"error")}},[c,n,l]);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card-title",children:"Skills"}),e.jsxs("div",{className:"card-sub",children:[a.length," skill",a.length!==1?"s":""," registered."]})]}),e.jsxs("button",{className:"btn btn--sm",onClick:l,disabled:o,children:[e.jsx(h,{name:"refresh"}),e.jsx("span",{children:"Refresh"})]})]}),e.jsxs("div",{className:"filters",style:{marginTop:14},children:[e.jsx("div",{className:"field",style:{flex:1,maxWidth:320},children:e.jsx("input",{type:"text",value:r,onChange:s=>p(s.target.value),placeholder:"Search skills..."})}),e.jsxs("span",{className:"label",children:[d.length," shown"]})]}),o&&a.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("div",{className:"spinner"})}):d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsx(h,{name:"zap",size:36})}),e.jsx("div",{children:a.length===0?"No skills registered.":"No skills match your filter."})]}):e.jsx("div",{className:"list",style:{marginTop:16},children:d.map(s=>e.jsxs("div",{className:"list-item",children:[e.jsxs("div",{className:"list-main",children:[e.jsxs("div",{className:"list-title",children:[s.emoji?s.emoji+" ":"",s.name]}),e.jsx("div",{className:"list-sub",children:g(s.description,140)}),e.jsxs("div",{className:"chip-row",style:{marginTop:6},children:[e.jsx("span",{className:"chip",children:s.source}),e.jsx("span",{className:"chip "+(s.eligibility==="ready"||s.eligibility==="ok"?"chip-ok":"chip-warn"),children:s.eligibility}),s.userInvocable&&e.jsx("span",{className:"chip chip-ok",children:"user-invocable"})]}),s.missingBins&&s.missingBins.length>0&&e.jsxs("div",{className:"label",style:{marginTop:6},children:["Missing: ",s.missingBins.join(", ")]})]}),e.jsx("div",{className:"list-meta",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:()=>j(s)}),e.jsx("span",{className:"toggle-track",children:e.jsx("span",{className:"toggle-thumb"})})]})})]},s.key))})]})}export{v as SkillsPage};
