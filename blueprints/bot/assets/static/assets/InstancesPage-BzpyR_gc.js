import{a,j as s}from"./markdown-Bs6XdLEX.js";import{f as m,t as h}from"./utils-BuvrnUzC.js";import{u as x,I as r}from"./index-BMNYCodQ.js";import"./react-vendor-ZmPOmYi1.js";function u({gw:i}){const[t,o]=a.useState([]),[c,l]=a.useState(!0),{toast:d}=x(),n=a.useCallback(()=>{l(!0),i.rpc("system.presence").then(e=>{o(e.instances||[])}).catch(e=>{d("Failed to load instances: "+e.message,"error")}).finally(()=>l(!1))},[i,d]);return a.useEffect(()=>{n()},[n]),s.jsxs("div",{className:"card",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"card-title",children:"Connected Instances"}),s.jsx("div",{className:"card-sub",children:"Dashboard clients and nodes connected to this gateway."})]}),s.jsxs("button",{className:"btn btn--sm",onClick:n,disabled:c,children:[s.jsx(r,{name:"refresh"}),s.jsx("span",{children:"Refresh"})]})]}),c&&t.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("div",{className:"spinner"})}):t.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state-icon",children:s.jsx(r,{name:"radio",size:36})}),s.jsx("div",{children:"No instances connected."})]}):s.jsx("div",{className:"list",style:{marginTop:16},children:t.map(e=>s.jsxs("div",{className:"list-item",children:[s.jsxs("div",{className:"list-main",children:[s.jsx("div",{className:"list-title",children:e.id}),s.jsx("div",{className:"list-sub",children:e.remoteAddr})]}),s.jsxs("div",{className:"list-meta",children:[s.jsx("div",{className:"chip-row",children:s.jsx("span",{className:"chip chip-ok",children:e.role})}),s.jsx("div",{children:m(e.connectedAt)}),s.jsx("div",{className:"mono",style:{fontSize:11},children:h(e.userAgent,48)})]})]},e.id))})]})}export{u as InstancesPage};
