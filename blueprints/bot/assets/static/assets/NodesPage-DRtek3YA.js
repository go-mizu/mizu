import{a as t,j as s}from"./markdown-Bs6XdLEX.js";import{t as x}from"./utils-BuvrnUzC.js";import{u as p,I as o}from"./index-DVYE_7Vo.js";import"./react-vendor-ZmPOmYi1.js";function f({gw:i}){const{toast:l}=p(),[c,m]=t.useState([]),[r,d]=t.useState(!0),[a,h]=t.useState({}),n=t.useCallback(async()=>{d(!0);try{const e=await i.rpc("system.presence");m(e.instances??[])}catch(e){l("Failed to load nodes: "+(e instanceof Error?e.message:"unknown"),"error")}finally{d(!1)}i.rpc("system.status").then(e=>{h({go:e.goVersion||e.go||"",os:e.os||"",arch:e.arch||""})}).catch(()=>{})},[i,l]);return t.useEffect(()=>{n()},[n]),s.jsxs("div",{className:"card",children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"card-title",children:"Nodes"}),s.jsx("div",{className:"card-sub",children:"Paired devices and command exposure."})]}),s.jsxs("button",{className:"btn btn--sm",onClick:n,disabled:r,children:[s.jsx(o,{name:"refresh"}),s.jsx("span",{children:"Refresh"})]})]}),a.go&&s.jsxs("div",{className:"card",style:{marginBottom:16},children:[s.jsx("div",{className:"card-title",children:"System Info"}),s.jsxs("div",{style:{display:"flex",gap:12,marginTop:8,flexWrap:"wrap"},children:[a.go&&s.jsx("span",{className:"chip",children:a.go}),a.os&&s.jsxs("span",{className:"chip",children:[a.os,"/",a.arch]})]})]}),r&&c.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("div",{className:"spinner"})}):c.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state-icon",children:s.jsx(o,{name:"monitor",size:36})}),s.jsx("div",{children:"No nodes connected."})]}):s.jsx("div",{className:"list",style:{marginTop:16},children:c.map(e=>s.jsxs("div",{className:"list-item",children:[s.jsxs("div",{className:"list-main",children:[s.jsx("div",{className:"list-title",children:e.id}),s.jsx("div",{className:"list-sub",children:e.remoteAddr}),s.jsx("div",{className:"list-sub mono",style:{marginTop:4},children:x(e.userAgent,80)})]}),s.jsx("div",{className:"list-meta",children:s.jsxs("div",{className:"chip-row",children:[s.jsx("span",{className:"chip chip-ok",children:e.role}),s.jsx("span",{className:"chip chip-ok",children:"Connected"})]})})]},e.id))})]})}export{f as NodesPage};
