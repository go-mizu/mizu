{{define "content"}}
<div class="repo-header">
    <div class="repo-header-content">
        <div class="repo-header-title">
            <svg class="octicon color-fg-muted mr-2" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Z"/>
            </svg>
            <a href="/{{.Repo.Owner.Login}}" class="repo-owner">{{.Repo.Owner.Login}}</a>
            <span class="repo-separator">/</span>
            <a href="/{{.Repo.FullName}}" class="repo-name">{{.Repo.Name}}</a>
        </div>
    </div>
</div>

<nav class="UnderlineNav">
    <div class="UnderlineNav-body">
        {{range .Repo.Tabs}}
        <a href="{{.URL}}" class="UnderlineNav-item{{if .Active}} selected{{end}}">
            {{if eq .Icon "code"}}
            <svg class="octicon UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"/>
            </svg>
            {{else if eq .Icon "issue-opened"}}
            <svg class="octicon UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"/>
            </svg>
            {{else if eq .Icon "git-pull-request"}}
            <svg class="octicon UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"/>
            </svg>
            {{else if eq .Icon "book"}}
            <svg class="octicon UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z"/>
            </svg>
            {{else if eq .Icon "gear"}}
            <svg class="octicon UnderlineNav-octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                <path d="M8 0a8.2 8.2 0 0 1 .701.031C9.444.095 9.99.645 10.16 1.29l.288 1.107c.018.066.079.158.212.224.231.114.454.243.668.386.123.082.233.09.299.071l1.103-.303c.644-.176 1.392.021 1.82.63.27.385.506.792.704 1.218.315.675.111 1.422-.364 1.891l-.814.806c-.049.048-.098.147-.088.294.016.257.016.515 0 .772-.01.147.04.246.088.294l.814.806c.475.469.679 1.216.364 1.891a7.977 7.977 0 0 1-.704 1.217c-.428.61-1.176.807-1.82.63l-1.102-.302c-.067-.019-.177-.011-.3.071a5.909 5.909 0 0 1-.668.386c-.133.066-.194.158-.211.224l-.29 1.106c-.168.646-.715 1.196-1.458 1.26a8.006 8.006 0 0 1-1.402 0c-.743-.064-1.289-.614-1.458-1.26l-.289-1.106c-.018-.066-.079-.158-.212-.224a5.738 5.738 0 0 1-.668-.386c-.123-.082-.233-.09-.299-.071l-1.103.303c-.644.176-1.392-.021-1.82-.63a8.12 8.12 0 0 1-.704-1.218c-.315-.675-.111-1.422.363-1.891l.815-.806c.05-.048.098-.147.088-.294a6.214 6.214 0 0 1 0-.772c.01-.147-.04-.246-.088-.294l-.815-.806C.635 6.045.431 5.298.746 4.623a7.92 7.92 0 0 1 .704-1.217c.428-.61 1.176-.807 1.82-.63l1.102.302c.067.019.177.011.3-.071.214-.143.437-.272.668-.386.133-.066.194-.158.211-.224l.29-1.106C6.009.645 6.556.095 7.299.03 7.53.01 7.764 0 8 0Z"/>
            </svg>
            {{end}}
            <span>{{.Name}}</span>
            {{if gt .Count 0}}
            <span class="Counter">{{.Count}}</span>
            {{end}}
        </a>
        {{end}}
    </div>
</nav>

<div class="container-xl mt-4">
    <!-- PR Title and Status Header -->
    <div class="gh-header">
        <div class="gh-header-show">
            <h1 class="gh-header-title">
                <span class="gh-header-title-text">{{.Pull.Title}}</span>
                <span class="gh-header-number color-fg-muted">#{{.Pull.Number}}</span>
            </h1>
        </div>

        <!-- Status and Merge Info Row -->
        <div class="gh-header-meta">
            <div class="gh-header-meta-left">
                {{if .Pull.Merged}}
                <span class="State State--merged">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0-1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z"/>
                    </svg>
                    Merged
                </span>
                {{else if eq .Pull.State "open"}}
                <span class="State State--open">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"/>
                    </svg>
                    Open
                </span>
                {{else}}
                <span class="State State--closed">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M3.25 1A2.25 2.25 0 0 1 4 5.372v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.251 2.251 0 0 1 3.25 1Zm9.5 5.5a.75.75 0 0 1 .75.75v3.378a2.251 2.251 0 1 1-1.5 0V7.25a.75.75 0 0 1 .75-.75Z"/>
                    </svg>
                    Closed
                </span>
                {{end}}

                <span class="gh-header-meta-text">
                    {{if .Pull.User}}<a href="/{{.Pull.User.Login}}" class="author text-bold Link--secondary">{{.Pull.User.Login}}</a>{{else}}<span class="author text-bold">unknown</span>{{end}}
                    wants to merge
                    {{.Pull.Commits}} commit{{if ne .Pull.Commits 1}}s{{end}}
                    into
                    {{if .Pull.Base}}<span class="commit-ref"><a href="/{{$.Repo.FullName}}/tree/{{.Pull.Base.Ref}}" class="no-underline">{{.Pull.Base.Label}}</a></span>{{end}}
                    from
                    {{if .Pull.Head}}<span class="commit-ref"><a href="/{{$.Repo.FullName}}/tree/{{.Pull.Head.Ref}}" class="no-underline">{{.Pull.Head.Label}}</a></span>{{end}}
                </span>
            </div>
        </div>
    </div>

    <!-- PR Tabs -->
    <div class="tabnav mt-3">
        <nav class="tabnav-tabs">
            <a href="/{{.Repo.FullName}}/pulls/{{.Pull.Number}}" class="tabnav-tab{{if eq .ActiveTab "conversation"}} selected{{end}}">
                <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                    <path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 13.25 12H9.06l-2.573 2.573A1.458 1.458 0 0 1 4 13.543V12H2.75A1.75 1.75 0 0 1 1 10.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h4.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"/>
                </svg>
                <span>Conversation</span>
                {{if gt .Pull.Comments 0}}
                <span class="Counter">{{.Pull.Comments}}</span>
                {{end}}
            </a>
            <a href="/{{.Repo.FullName}}/pulls/{{.Pull.Number}}/commits" class="tabnav-tab{{if eq .ActiveTab "commits"}} selected{{end}}">
                <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                    <path d="M11.93 8.5a4.002 4.002 0 0 1-7.86 0H.75a.75.75 0 0 1 0-1.5h3.32a4.002 4.002 0 0 1 7.86 0h3.32a.75.75 0 0 1 0 1.5Zm-1.43-.75a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"/>
                </svg>
                <span>Commits</span>
                {{if gt .Pull.Commits 0}}
                <span class="Counter">{{.Pull.Commits}}</span>
                {{end}}
            </a>
            <a href="/{{.Repo.FullName}}/pulls/{{.Pull.Number}}/files" class="tabnav-tab{{if eq .ActiveTab "files"}} selected{{end}}">
                <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                    <path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"/>
                </svg>
                <span>Files changed</span>
                {{if gt .Pull.ChangedFiles 0}}
                <span class="Counter">{{.Pull.ChangedFiles}}</span>
                {{end}}
            </a>
        </nav>

        <!-- Diff Stats -->
        {{if or (gt .Pull.Additions 0) (gt .Pull.Deletions 0)}}
        <div class="diffstat">
            <span class="color-fg-success">+{{formatNumber .Pull.Additions}}</span>
            <span class="color-fg-danger">-{{formatNumber .Pull.Deletions}}</span>
            <span class="diffstat-bar">
                {{$total := add .Pull.Additions .Pull.Deletions}}
                {{$addPercent := 0}}
                {{$delPercent := 0}}
                {{if gt $total 0}}
                {{$addPercent = mul (div (toFloat .Pull.Additions) (toFloat $total)) 100}}
                {{$delPercent = mul (div (toFloat .Pull.Deletions) (toFloat $total)) 100}}
                {{end}}
                <span class="diffstat-block-added" style="width: {{$addPercent}}%;"></span>
                <span class="diffstat-block-deleted" style="width: {{$delPercent}}%;"></span>
            </span>
        </div>
        {{end}}
    </div>

    <!-- Files Toolbar -->
    <div class="pr-review-toolbar">
        <div class="toolbar-left">
            <button class="btn-octicon" type="button" aria-label="Toggle file tree">
                <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                    <path d="M0 1.75C0 .784.784 0 1.75 0h3.5C6.216 0 7 .784 7 1.75v3.5A1.75 1.75 0 0 1 5.25 7H4v4a1 1 0 0 0 1 1h4v-1.25C9 9.784 9.784 9 10.75 9h3.5c.966 0 1.75.784 1.75 1.75v3.5A1.75 1.75 0 0 1 14.25 16h-3.5A1.75 1.75 0 0 1 9 14.25v-.75H5A2.5 2.5 0 0 1 2.5 11V7h-.75A1.75 1.75 0 0 1 0 5.25Zm1.75-.25a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Zm9 9a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Z"/>
                </svg>
            </button>
            <details class="details-reset details-overlay">
                <summary class="btn btn-sm">
                    All commits
                    <span class="dropdown-caret"></span>
                </summary>
                <div class="SelectMenu">
                    <div class="SelectMenu-modal">
                        <div class="SelectMenu-list">
                            <a class="SelectMenu-item" href="#">All commits</a>
                            {{range .Commits}}
                            <a class="SelectMenu-item" href="#">
                                <span class="text-mono f6">{{truncate .SHA 7}}</span>
                                <span class="ml-1">{{if .Commit}}{{truncate .Commit.Message 50}}{{end}}</span>
                            </a>
                            {{end}}
                        </div>
                    </div>
                </div>
            </details>
        </div>
        <div class="toolbar-right">
            <span class="text-small color-fg-muted mr-3">
                <span class="files-viewed-counter">0</span> / {{len .FileViews}} viewed
            </span>
            <input type="text" class="form-control form-control-sm file-filter-input" placeholder="Filter files..." style="width: 180px;">
            <!-- Diff View Toggle -->
            <div class="BtnGroup ml-3">
                <button type="button" class="BtnGroup-item btn btn-sm diff-view-btn selected" data-view="unified" title="Unified view">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 15H2.75A1.75 1.75 0 0 1 1 13.25V2.75C1 1.784 1.784 1 2.75 1Zm10.5 1.5H2.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25Z"/>
                    </svg>
                    Unified
                </button>
                <button type="button" class="BtnGroup-item btn btn-sm diff-view-btn" data-view="split" title="Split view">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM1.75 1.5a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25H7.5V1.5Zm6.25 13H14.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H8v13Z"/>
                    </svg>
                    Split
                </button>
            </div>
            <div class="d-flex flex-items-center mr-2">
                <button class="btn-octicon" type="button" title="Review conversation">
                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                        <path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.824.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"/>
                    </svg>
                </button>
                <span class="Counter ml-1">0</span>
            </div>
            <button class="btn btn-sm btn-primary">Submit review</button>
            <button class="btn-octicon ml-2" type="button" title="Settings">
                <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                    <path d="M8 0a8.2 8.2 0 0 1 .701.031C9.444.095 9.99.645 10.16 1.29l.288 1.107c.018.066.079.158.212.224.231.114.454.243.668.386.123.082.233.09.299.071l1.103-.303c.644-.176 1.392.021 1.82.63.27.385.506.792.704 1.218.315.675.111 1.422-.364 1.891l-.814.806c-.049.048-.098.147-.088.294.016.257.016.515 0 .772-.01.147.04.246.088.294l.814.806c.475.469.679 1.216.364 1.891a7.977 7.977 0 0 1-.704 1.217c-.428.61-1.176.807-1.82.63l-1.102-.302c-.067-.019-.177-.011-.3.071a5.909 5.909 0 0 1-.668.386c-.133.066-.194.158-.211.224l-.29 1.106c-.168.646-.715 1.196-1.458 1.26a8.006 8.006 0 0 1-1.402 0c-.743-.064-1.289-.614-1.458-1.26l-.289-1.106c-.018-.066-.079-.158-.212-.224a5.738 5.738 0 0 1-.668-.386c-.123-.082-.233-.09-.299-.071l-1.103.303c-.644.176-1.392-.021-1.82-.63a8.12 8.12 0 0 1-.704-1.218c-.315-.675-.111-1.422.363-1.891l.815-.806c.05-.048.098-.147.088-.294a6.214 6.214 0 0 1 0-.772c.01-.147-.04-.246-.088-.294l-.815-.806C.635 6.045.431 5.298.746 4.623a7.92 7.92 0 0 1 .704-1.217c.428-.61 1.176-.807 1.82-.63l1.102.302c.067.019.177.011.3-.071.214-.143.437-.272.668-.386.133-.066.194-.158.211-.224l.29-1.106C6.009.645 6.556.095 7.299.03 7.53.01 7.764 0 8 0Z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Files Changed List -->
    <div class="diff-view mt-3">
        {{range .FileViews}}
        {{$lang := fileLanguage .Filename}}
        <div class="file mb-4" id="diff-{{.SHA}}" data-language="{{$lang}}">
            <div class="file-header">
                <div class="file-header-left">
                    <button class="btn-octicon file-collapse-btn" type="button" aria-expanded="true">
                        <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"/>
                        </svg>
                    </button>
                    <a href="#diff-{{.SHA}}" class="Link--primary text-mono f6 file-path">{{.Filename}}</a>
                    <button class="btn-octicon clipboard-btn" type="button" aria-label="Copy path" data-clipboard-text="{{.Filename}}">
                        <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"/>
                            <path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"/>
                        </svg>
                    </button>
                    <button class="btn-octicon" type="button" aria-label="Expand all">
                        <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path d="m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z"/>
                        </svg>
                    </button>
                </div>
                <div class="file-header-right">
                    <span class="diffstat text-small">
                        {{if gt .Additions 0}}<span class="color-fg-success text-bold">+{{.Additions}}</span>{{end}}
                        {{if gt .Deletions 0}}<span class="color-fg-danger text-bold">-{{.Deletions}}</span>{{end}}
                        <span class="diffstat-blocks">
                            {{$total := add .Additions .Deletions}}
                            {{$blocks := 5}}
                            {{if gt $total 0}}
                            {{$addBlocks := div (mul .Additions $blocks) $total}}
                            {{$delBlocks := sub $blocks $addBlocks}}
                            {{range $i := iterate $addBlocks}}<span class="diffstat-block diffstat-block-added"></span>{{end}}
                            {{range $i := iterate $delBlocks}}<span class="diffstat-block diffstat-block-deleted"></span>{{end}}
                            {{else}}
                            {{range $i := iterate 5}}<span class="diffstat-block diffstat-block-neutral"></span>{{end}}
                            {{end}}
                        </span>
                    </span>
                    <label class="viewed-checkbox">
                        <input type="checkbox" class="file-viewed-checkbox">
                        <span>Viewed</span>
                    </label>
                    <button class="btn-octicon" type="button">
                        <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                            <path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="file-content">
                {{if .IsBinary}}
                <div class="empty-diff">Binary file not shown</div>
                {{else if .TooLarge}}
                <div class="empty-diff">Large diffs are not rendered by default.</div>
                {{else if .DiffLines}}
                <!-- Unified View -->
                <table class="diff-table">
                    <tbody>
                        {{range .DiffLines}}
                        {{if eq .Type "hunk"}}
                        <tr class="diff-hunk-row">
                            <td class="blob-num blob-num-hunk">
                                <button class="btn-octicon blob-expand-btn" type="button">
                                    <svg class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
                                        <path d="m8.177 14.323 2.896-2.896a.25.25 0 0 0-.177-.427H8.75V7.764a.75.75 0 0 0-1.5 0V11H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0ZM2.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75ZM8.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z"/>
                                    </svg>
                                </button>
                            </td>
                            <td class="blob-num blob-num-hunk"></td>
                            <td class="blob-code blob-code-hunk">{{.Content}}</td>
                        </tr>
                        {{else}}
                        <tr class="diff-line diff-line-{{.Type}}">
                            <td class="blob-num blob-num-{{.Type}}" data-line-number="{{if .OldLineNum}}{{.OldLineNum}}{{end}}">{{if .OldLineNum}}{{.OldLineNum}}{{end}}</td>
                            <td class="blob-num blob-num-{{.Type}}" data-line-number="{{if .NewLineNum}}{{.NewLineNum}}{{end}}">{{if .NewLineNum}}{{.NewLineNum}}{{end}}</td>
                            <td class="blob-code blob-code-{{.Type}}"><span class="blob-code-marker">{{if eq .Type "addition"}}+{{else if eq .Type "deletion"}}-{{else}} {{end}}</span><code class="blob-code-inner language-{{$lang}}">{{.Content}}</code></td>
                        </tr>
                        {{end}}
                        {{end}}
                    </tbody>
                </table>
                <!-- Split View -->
                <table class="diff-table-split">
                    <colgroup>
                        <col class="col-num">
                        <col class="col-code">
                        <col class="col-divider">
                        <col class="col-num">
                        <col class="col-code">
                    </colgroup>
                    <tbody>
                        {{range .DiffLines}}
                        {{if eq .Type "hunk"}}
                        <tr class="diff-hunk-row">
                            <td class="blob-num-split blob-num-hunk">...</td>
                            <td class="blob-code-split blob-code-hunk">{{.Content}}</td>
                            <td class="split-divider"></td>
                            <td class="blob-num-split blob-num-hunk">...</td>
                            <td class="blob-code-split blob-code-hunk">{{.Content}}</td>
                        </tr>
                        {{else if eq .Type "deletion"}}
                        <tr>
                            <td class="blob-num-split blob-num-deletion">{{.OldLineNum}}</td>
                            <td class="blob-code-split blob-code-deletion"><code class="blob-code-inner language-{{$lang}}">{{.Content}}</code></td>
                            <td class="split-divider"></td>
                            <td class="blob-num-split blob-code-empty"></td>
                            <td class="blob-code-split blob-code-empty"></td>
                        </tr>
                        {{else if eq .Type "addition"}}
                        <tr>
                            <td class="blob-num-split blob-code-empty"></td>
                            <td class="blob-code-split blob-code-empty"></td>
                            <td class="split-divider"></td>
                            <td class="blob-num-split blob-num-addition">{{.NewLineNum}}</td>
                            <td class="blob-code-split blob-code-addition"><code class="blob-code-inner language-{{$lang}}">{{.Content}}</code></td>
                        </tr>
                        {{else}}
                        <tr>
                            <td class="blob-num-split">{{.OldLineNum}}</td>
                            <td class="blob-code-split"><code class="blob-code-inner language-{{$lang}}">{{.Content}}</code></td>
                            <td class="split-divider"></td>
                            <td class="blob-num-split">{{.NewLineNum}}</td>
                            <td class="blob-code-split"><code class="blob-code-inner language-{{$lang}}">{{.Content}}</code></td>
                        </tr>
                        {{end}}
                        {{end}}
                    </tbody>
                </table>
                {{else}}
                <div class="empty-diff">No changes</div>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
</div>

<style>
/* PR Header Styles */
.gh-header {
    padding-bottom: 16px;
    border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));
}

.gh-header-title {
    font-size: 32px;
    font-weight: 400;
    line-height: 1.25;
    word-wrap: break-word;
}

.gh-header-title-text {
    margin-right: 8px;
}

.gh-header-number {
    font-weight: 300;
}

.gh-header-meta {
    margin-top: 8px;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
}

.gh-header-meta-left {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
}

.gh-header-meta-text {
    color: var(--fgColor-muted, var(--color-fg-muted));
}

.commit-ref {
    display: inline-flex;
    align-items: center;
    padding: 2px 6px;
    font-size: 12px;
    font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
    background-color: var(--bgColor-accent-muted, var(--color-accent-subtle));
    border-radius: 6px;
}

.commit-ref a {
    color: var(--fgColor-accent, var(--color-accent-fg));
}

/* State Badges */
.State {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 5px 12px;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    border-radius: 2em;
    white-space: nowrap;
}

.State--open {
    color: #fff;
    background-color: var(--bgColor-open-emphasis, #1a7f37);
}

.State--closed {
    color: #fff;
    background-color: var(--bgColor-closed-emphasis, #cf222e);
}

.State--merged {
    color: #fff;
    background-color: var(--bgColor-done-emphasis, #8250df);
}

/* Tabnav */
.tabnav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));
}

.tabnav-tabs {
    display: flex;
    gap: 0;
    margin-bottom: -1px;
}

.tabnav-tab {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 8px 16px;
    font-size: 14px;
    line-height: 23px;
    color: var(--fgColor-default, var(--color-fg-default));
    text-decoration: none;
    border: 1px solid transparent;
    border-bottom: 0;
}

.tabnav-tab:hover {
    color: var(--fgColor-default, var(--color-fg-default));
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
}

.tabnav-tab.selected {
    color: var(--fgColor-default, var(--color-fg-default));
    background-color: var(--bgColor-default, var(--color-canvas-default));
    border-color: var(--borderColor-default, var(--color-border-default));
    border-radius: 6px 6px 0 0;
}

.tabnav-tab .Counter {
    margin-left: 4px;
}

/* Diffstat */
.diffstat {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
}

.diffstat-bar {
    display: flex;
    width: 100px;
    height: 8px;
    overflow: hidden;
    background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));
    border-radius: 3px;
}

.diffstat-block-added {
    background-color: var(--bgColor-success-emphasis, #1a7f37);
}

.diffstat-block-deleted {
    background-color: var(--bgColor-danger-emphasis, #cf222e);
}

/* PR Review Toolbar */
.pr-review-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    margin-top: 16px;
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
    border: 1px solid var(--borderColor-muted, var(--color-border-muted));
    border-radius: 6px;
}

.toolbar-left,
.toolbar-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* File Diff */
.file {
    border: 1px solid var(--borderColor-muted, var(--color-border-muted));
    border-radius: 6px;
    overflow: hidden;
}

.file-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
    border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));
}

.file-header-left,
.file-header-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.file-path {
    font-weight: 600;
}

.file-content {
    overflow-x: auto;
}

.empty-diff {
    padding: 32px;
    text-align: center;
    color: var(--fgColor-muted, var(--color-fg-muted));
}

/* Diffstat Blocks */
.diffstat-blocks {
    display: inline-flex;
    gap: 1px;
    margin-left: 4px;
}

.diffstat-block {
    width: 8px;
    height: 8px;
    border-radius: 2px;
}

.diffstat-block-neutral {
    background-color: var(--bgColor-neutral-muted, var(--color-neutral-muted));
}

/* Viewed Checkbox */
.viewed-checkbox {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: var(--fgColor-muted, var(--color-fg-muted));
    cursor: pointer;
}

.viewed-checkbox input {
    cursor: pointer;
}

/* Diff Table */
.diff-table {
    width: 100%;
    border-collapse: collapse;
    font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
    font-size: 12px;
    table-layout: fixed;
}

.blob-num {
    width: 50px;
    min-width: 50px;
    padding: 0 10px;
    text-align: right;
    color: var(--fgColor-muted, var(--color-fg-muted));
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
    vertical-align: top;
    user-select: none;
    cursor: pointer;
}

.blob-num:hover {
    color: var(--fgColor-accent, var(--color-accent-fg));
}

.blob-code {
    padding: 0 10px;
    line-height: 20px;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.blob-code-marker {
    display: inline-block;
    width: 16px;
    text-align: center;
    user-select: none;
}

/* Diff Colors */
.blob-num-addition {
    background-color: var(--diffBlob-addition-bgColor-num, #ccffd8);
}

.blob-code-addition {
    background-color: var(--diffBlob-addition-bgColor-line, #e6ffec);
}

.blob-num-deletion {
    background-color: var(--diffBlob-deletion-bgColor-num, #ffd7d5);
}

.blob-code-deletion {
    background-color: var(--diffBlob-deletion-bgColor-line, #ffebe9);
}

.blob-num-hunk,
.blob-code-hunk {
    background-color: var(--diffBlob-hunk-bgColor-num, #ddf4ff);
    color: var(--fgColor-muted, var(--color-fg-muted));
}

.blob-expand-btn {
    padding: 0 4px;
}

/* Buttons */
.btn-octicon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    color: var(--fgColor-muted, var(--color-fg-muted));
    background: transparent;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.btn-octicon:hover {
    color: var(--fgColor-accent, var(--color-accent-fg));
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
}

/* SelectMenu */
.SelectMenu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 100;
}

.SelectMenu-modal {
    width: 300px;
    max-height: 400px;
    overflow-y: auto;
    background-color: var(--bgColor-default, var(--color-canvas-default));
    border: 1px solid var(--borderColor-muted, var(--color-border-muted));
    border-radius: 6px;
    box-shadow: var(--shadow-floating-medium, 0 3px 12px rgba(0,0,0,0.15));
}

.SelectMenu-list {
    padding: 8px 0;
}

.SelectMenu-item {
    display: block;
    padding: 8px 16px;
    color: var(--fgColor-default, var(--color-fg-default));
    text-decoration: none;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.SelectMenu-item:hover {
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
}

/* Button Group */
.BtnGroup {
    display: inline-flex;
    vertical-align: middle;
}

.BtnGroup-item {
    position: relative;
    border-radius: 0;
    border-right-width: 0;
}

.BtnGroup-item:first-child {
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
}

.BtnGroup-item:last-child {
    border-top-right-radius: 6px;
    border-bottom-right-radius: 6px;
    border-right-width: 1px;
}

.BtnGroup-item.selected {
    background-color: var(--button-primary-bgColor-rest, #1f883d);
    color: #fff;
    border-color: var(--button-primary-borderColor-rest, rgba(31, 35, 40, 0.15));
}

.diff-view-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.diff-view-btn .octicon {
    width: 16px;
    height: 16px;
}

/* Split Diff View */
.diff-view.split-view .diff-table {
    display: none;
}

.diff-view.split-view .diff-table-split {
    display: table;
}

.diff-view:not(.split-view) .diff-table-split {
    display: none;
}

.diff-table-split {
    width: 100%;
    border-collapse: collapse;
    font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
    font-size: 12px;
    table-layout: fixed;
}

.diff-table-split col.col-num {
    width: 50px;
}

.diff-table-split col.col-code {
    width: calc(50% - 27px);
}

.diff-table-split col.col-divider {
    width: 4px;
}

.diff-table-split .blob-num-split {
    width: 50px;
    min-width: 50px;
    max-width: 50px;
    padding: 0 10px;
    text-align: right;
    color: var(--fgColor-muted, var(--color-fg-muted));
    background-color: var(--bgColor-muted, var(--color-canvas-subtle));
    vertical-align: top;
    user-select: none;
    cursor: pointer;
    border-right: 1px solid var(--borderColor-muted, var(--color-border-muted));
}

.diff-table-split .blob-code-split {
    width: calc(50% - 52px);
    padding: 0 10px;
    line-height: 20px;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
    vertical-align: top;
}

.diff-table-split .split-divider {
    width: 4px;
    min-width: 4px;
    max-width: 4px;
    background-color: var(--borderColor-default, var(--color-border-default));
}

.diff-table-split .blob-num-deletion {
    background-color: var(--diffBlob-deletion-bgColor-num, #ffd7d5);
}

.diff-table-split .blob-code-deletion {
    background-color: var(--diffBlob-deletion-bgColor-line, #ffebe9);
}

.diff-table-split .blob-num-addition {
    background-color: var(--diffBlob-addition-bgColor-num, #ccffd8);
}

.diff-table-split .blob-code-addition {
    background-color: var(--diffBlob-addition-bgColor-line, #e6ffec);
}

.diff-table-split .blob-code-empty {
    background-color: var(--bgColor-neutral-muted, #f6f8fa);
}

.diff-table-split td.blob-code-empty.blob-num-split {
    background-color: var(--bgColor-neutral-muted, #f6f8fa);
    border-right-color: var(--bgColor-neutral-muted, #f6f8fa);
}

.diff-table-split .blob-num-hunk {
    background-color: var(--diffBlob-hunk-bgColor-num, #ddf4ff);
    text-align: center;
    color: var(--fgColor-muted, var(--color-fg-muted));
}

.diff-table-split .blob-code-hunk {
    background-color: var(--diffBlob-hunk-bgColor-num, #ddf4ff);
    color: var(--fgColor-muted, var(--color-fg-muted));
}

/* Responsive */
@media (max-width: 768px) {
    .gh-header-title {
        font-size: 24px;
    }

    .pr-review-toolbar {
        flex-direction: column;
        gap: 12px;
    }

    .toolbar-left,
    .toolbar-right {
        width: 100%;
        flex-wrap: wrap;
    }

    .file-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }

    .file-header-right {
        width: 100%;
        justify-content: flex-end;
    }

    .blob-num {
        width: 35px;
        min-width: 35px;
        padding: 0 4px;
        font-size: 10px;
    }

    /* Force unified view on mobile */
    .diff-view.split-view .diff-table {
        display: table;
    }
    .diff-view.split-view .diff-table-split {
        display: none;
    }
    .BtnGroup .diff-view-btn[data-view="split"] {
        display: none;
    }
}
</style>

<!-- Prism.js for syntax highlighting -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
<style>
/* Override Prism.js styles for diff view */
.blob-code-inner {
    background: transparent !important;
    padding: 0 !important;
    margin: 0 !important;
    font-size: inherit !important;
    font-family: inherit !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
}
.blob-code-inner.language-none {
    color: inherit;
}
/* Preserve diff colors */
.blob-code-addition .blob-code-inner,
.blob-code-deletion .blob-code-inner {
    background: transparent !important;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-go.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-tsx.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-ruby.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-rust.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markdown.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-scss.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-docker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-makefile.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-diff.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const diffView = document.querySelector('.diff-view');
    const viewBtns = document.querySelectorAll('.diff-view-btn');

    // Load preference from localStorage
    const savedView = localStorage.getItem('diffView') || 'unified';
    if (savedView === 'split') {
        diffView.classList.add('split-view');
        viewBtns.forEach(btn => {
            btn.classList.toggle('selected', btn.dataset.view === 'split');
        });
    }

    viewBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const view = this.dataset.view;

            // Update button states
            viewBtns.forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');

            // Toggle view class
            if (view === 'split') {
                diffView.classList.add('split-view');
            } else {
                diffView.classList.remove('split-view');
            }

            // Save preference
            localStorage.setItem('diffView', view);
        });
    });

    // Apply syntax highlighting
    if (typeof Prism !== 'undefined') {
        Prism.highlightAll();
    }
});
</script>
{{end}}
