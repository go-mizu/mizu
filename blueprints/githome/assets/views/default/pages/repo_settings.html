{{define "content"}}
<div class="page-responsive">
  <!-- Repository Header -->
  <div class="repo-header">
    <div class="d-flex items-center gap-2">
      <svg viewBox="0 0 16 16" width="16" height="16" class="text-muted">
        <path fill="currentColor" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Z"></path>
      </svg>
      <span class="repo-path">
        <a href="/{{.Owner.Username}}" class="repo-path-item">{{.Owner.Username}}</a>
        <span class="repo-path-separator">/</span>
        <a href="/{{.Owner.Username}}/{{.Repository.Name}}" class="repo-path-item">{{.Repository.Name}}</a>
        <span class="repo-path-separator">/</span>
        <span>Settings</span>
      </span>
    </div>
  </div>

  <div class="page-with-sidebar" style="grid-template-columns: 240px 1fr;">
    <!-- Sidebar: Settings Navigation -->
    <div class="page-sidebar">
      <nav class="d-flex flex-column gap-1">
        <a href="#general" class="subnav-item selected">
          <svg viewBox="0 0 16 16" width="16" height="16" class="mr-2">
            <path fill="currentColor" d="M8 0a8.2 8.2 0 0 1 .701.031C9.444.095 9.99.645 10.16 1.29l.288 1.107c.018.066.079.158.212.224.231.114.454.243.668.386.123.082.233.09.299.071l1.1-.303c.652-.18 1.341.029 1.819.507.42.419.679.97.679 1.578a2.14 2.14 0 0 1-.679 1.578 2.155 2.155 0 0 1-1.819.507l-1.1-.303c-.066-.019-.176-.011-.299.071a5.255 5.255 0 0 1-.668.386c-.133.066-.194.158-.212.224l-.288 1.107c-.17.645-.716 1.195-1.459 1.26a8.09 8.09 0 0 1-1.402 0c-.743-.065-1.289-.615-1.459-1.26l-.288-1.107a.34.34 0 0 0-.212-.224 5.255 5.255 0 0 1-.668-.386c-.123-.082-.233-.09-.299-.071l-1.1.303c-.652.18-1.341-.029-1.819-.507A2.146 2.146 0 0 1 0 7.86c0-.607.26-1.159.679-1.578a2.155 2.155 0 0 1 1.819-.507l1.1.303c.066.019.176.011.299-.071.214-.143.437-.272.668-.386a.34.34 0 0 0 .212-.224l.288-1.107C5.256.645 5.802.095 6.545.031A8.2 8.2 0 0 1 8 0Z"></path>
          </svg>
          General
        </a>
        <a href="#collaborators" class="subnav-item">
          <svg viewBox="0 0 16 16" width="16" height="16" class="mr-2">
            <path fill="currentColor" d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"></path>
          </svg>
          Collaborators
        </a>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="page-content">
      <!-- General Settings -->
      <section id="general" class="mb-5">
        <h2 class="mb-3">General</h2>
        <div class="box">
          <div class="box-body">
            <form data-api="/api/v1/repos/{{.Owner.Username}}/{{.Repository.Name}}" data-method="PATCH">
              <div class="form-group">
                <label for="name" class="form-label">Repository name</label>
                <input type="text" id="name" name="name" class="form-control" value="{{.Repository.Name}}" style="max-width: 300px;">
              </div>

              <div class="form-group">
                <label for="description" class="form-label">Description <span class="text-muted">(optional)</span></label>
                <textarea id="description" name="description" class="form-control" rows="3">{{.Repository.Description}}</textarea>
              </div>

              <button type="submit" class="btn btn-primary">Save changes</button>
            </form>
          </div>
        </div>
      </section>

      <!-- Visibility -->
      <section id="visibility" class="mb-5">
        <h2 class="mb-3">Visibility</h2>
        <div class="box">
          <div class="box-body">
            <div class="d-flex items-center justify-between">
              <div>
                <h3 class="text-base">Change repository visibility</h3>
                <p class="text-sm text-muted">
                  This repository is currently <strong>{{if .Repository.IsPrivate}}private{{else}}public{{end}}</strong>.
                </p>
              </div>
              <button class="btn">Change visibility</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Collaborators -->
      <section id="collaborators" class="mb-5">
        <h2 class="mb-3">Collaborators</h2>
        <div class="box">
          <div class="box-header">
            <h3 class="text-base">Manage access</h3>
          </div>
          <div class="box-body">
            {{if .Collaborators}}
            <div class="mb-3">
              {{range .Collaborators}}
              <div class="d-flex items-center justify-between py-2 border-bottom">
                <div class="d-flex items-center gap-2">
                  <span class="avatar avatar-4 avatar-fallback">{{firstChar .UserID}}</span>
                  <span>{{.UserID}}</span>
                </div>
                <div class="d-flex items-center gap-2">
                  <span class="label label-secondary">{{.Permission}}</span>
                  <button class="btn btn-sm btn-danger" data-confirm="Remove this collaborator?" data-delete-url="/api/v1/repos/{{$.Owner.Username}}/{{$.Repository.Name}}/collaborators/{{.UserID}}">Remove</button>
                </div>
              </div>
              {{end}}
            </div>
            {{else}}
            <p class="text-muted mb-3">No collaborators yet.</p>
            {{end}}

            <form class="d-flex gap-2" data-api="/api/v1/repos/{{.Owner.Username}}/{{.Repository.Name}}/collaborators" data-method="PUT">
              <input type="text" name="username" class="form-control" placeholder="Enter username" style="max-width: 200px;">
              <select name="permission" class="form-control form-select" style="max-width: 120px;">
                <option value="read">Read</option>
                <option value="write">Write</option>
                <option value="admin">Admin</option>
              </select>
              <button type="submit" class="btn btn-primary">Add</button>
            </form>
          </div>
        </div>
      </section>

      <!-- Danger Zone -->
      <section id="danger" class="mb-5">
        <h2 class="mb-3 text-danger">Danger Zone</h2>
        <div class="box" style="border-color: var(--color-danger-emphasis);">
          <div class="box-body">
            <div class="d-flex items-center justify-between">
              <div>
                <h3 class="text-base">Delete this repository</h3>
                <p class="text-sm text-muted">
                  Once you delete a repository, there is no going back. Please be certain.
                </p>
              </div>
              <button class="btn btn-danger" data-confirm="Are you sure you want to delete this repository? This action cannot be undone." data-delete-url="/api/v1/repos/{{.Owner.Username}}/{{.Repository.Name}}" data-redirect="/">
                Delete this repository
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>
{{end}}
