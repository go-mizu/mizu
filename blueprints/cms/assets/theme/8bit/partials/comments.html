{{ define "partials/comments.html" }}
{{ if .Theme.Features.comments }}
<section class="comments" id="comments">
    <h3 class="comments__title">
        <span aria-hidden="true">&#128172;</span>
        COMMENTS
        {{ if .Comments }}({{ len .Comments }}){{ end }}
    </h3>

    <!-- Comments List -->
    {{ if .Comments }}
    <div class="comments__list">
        {{ range .Comments }}
        <div class="comment{{ if .ParentID }} comment--reply{{ end }}" id="comment-{{ .ID }}">
            <div class="comment__header">
                <div class="comment__avatar">
                    {{ if .Avatar }}
                    <img src="{{ .Avatar }}" alt="{{ .Author }}" loading="lazy">
                    {{ else }}
                    <div style="width: 100%; height: 100%; background: var(--color-surface-alt); display: flex; align-items: center; justify-content: center;">&#128100;</div>
                    {{ end }}
                </div>
                <span class="comment__author">{{ .Author }}</span>
                <span class="comment__date">{{ .Date | date "Jan 2, 2006" }}</span>
            </div>
            <div class="comment__content">
                {{ .Content }}
            </div>
            <div class="comment__reply">
                <button class="btn btn--ghost btn--sm" data-reply-to="{{ .ID }}">
                    REPLY
                </button>
            </div>
        </div>
        {{ end }}
    </div>
    {{ else }}
    <p style="text-align: center; padding: var(--space-4); color: var(--color-text-muted);">
        NO COMMENTS YET. BE THE FIRST PLAYER!
    </p>
    {{ end }}

    <!-- Comment Form -->
    {{ template "partials/comment-form.html" . }}
</section>
{{ end }}
{{ end }}
