{{ define "title" }}{{ .Post.Title }} - {{ .Site.Name }}{{ end }}

{{ define "meta_description" }}
{{ if .Post.Excerpt }}
<meta name="description" content="{{ truncate .Post.Excerpt 160 }}">
{{ end }}
{{ end }}

{{ define "og_tags" }}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ .Post.Title }}">
<meta property="og:description" content="{{ if .Post.Excerpt }}{{ truncate .Post.Excerpt 160 }}{{ end }}">
<meta property="og:url" content="{{ .Request.URL }}">
{{ if .Post.FeaturedImage }}
<meta property="og:image" content="{{ .Post.FeaturedImage.URL }}">
{{ end }}
{{ if .Post.PublishedAt }}
<meta property="article:published_time" content="{{ .Post.PublishedAt.Format "2006-01-02T15:04:05Z07:00" }}">
{{ end }}
{{ if .Author }}
<meta property="article:author" content="{{ .Author.Name }}">
{{ end }}
{{ end }}

{{ define "body_class" }}single-post{{ end }}

{{ define "content" }}
<article class="container container--narrow">
    <!-- Post Header -->
    <header class="post-header">
        <!-- Category Badge -->
        {{ if .Categories }}
        <div style="margin-bottom: var(--space-2);">
            {{ range .Categories | first 1 }}
            <a href="/category/{{ .Slug }}" class="badge badge--primary">{{ .Name }}</a>
            {{ end }}
        </div>
        {{ end }}

        <h1 class="post-header__title">{{ .Post.Title }}</h1>

        <!-- Meta -->
        {{ template "partials/post-meta.html" . }}
    </header>

    <!-- Featured Image -->
    {{ if .Post.FeaturedImage }}
    <figure class="post-featured-image">
        <img src="{{ .Post.FeaturedImage.URL }}" alt="{{ .Post.Title }}">
    </figure>
    {{ end }}

    <!-- Post Content -->
    <div class="post-content">
        {{ .Post.Content | safe }}
    </div>

    <!-- Post Footer -->
    <footer class="post-footer">
        <!-- Tags -->
        {{ if .Tags }}
        <div class="post-tags">
            <p class="post-tags__label">
                <span aria-hidden="true">&#127991;</span> Tags:
            </p>
            <div class="tags">
                {{ range .Tags }}
                <a href="/tag/{{ .Slug }}" class="tag">{{ .Name }}</a>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <!-- Social Share -->
        {{ if .Theme.Features.social_share }}
        {{ template "partials/social-share.html" . }}
        {{ end }}
    </footer>

    <!-- Author Box -->
    {{ if .Theme.Features.author_box }}
    {{ template "partials/author-box.html" . }}
    {{ end }}

    <!-- Post Navigation -->
    {{ if .Theme.Features.show_post_navigation }}
    {{ template "partials/post-navigation.html" . }}
    {{ end }}

    <!-- Related Posts -->
    {{ if .Theme.Features.related_posts }}
    {{ template "partials/related-posts.html" . }}
    {{ end }}

    <!-- Comments -->
    {{ if .Theme.Features.comments }}
    {{ template "partials/comments.html" . }}
    {{ end }}
</article>

<!-- JSON-LD Structured Data -->
{{ if .Post }}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ .Post.Title }}",
    {{ if .Post.Excerpt }}"description": "{{ truncate .Post.Excerpt 160 }}",{{ end }}
    {{ if .Post.PublishedAt }}"datePublished": "{{ .Post.PublishedAt.Format "2006-01-02T15:04:05Z07:00" }}",{{ end }}
    {{ if .Post.UpdatedAt }}"dateModified": "{{ .Post.UpdatedAt.Format "2006-01-02T15:04:05Z07:00" }}",{{ end }}
    "url": "{{ .Request.URL }}",
    {{ if .Post.FeaturedImage }}"image": "{{ .Post.FeaturedImage.URL }}",{{ end }}
    {{ if .Author }}
    "author": {
        "@type": "Person",
        "name": "{{ .Author.Name }}"
    },
    {{ end }}
    "publisher": {
        "@type": "Organization",
        "name": "{{ .Site.Name }}"
    }
}
</script>
{{ end }}
{{ end }}
