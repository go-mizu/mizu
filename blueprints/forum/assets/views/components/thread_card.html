{{define "thread_card"}}
<div class="thread-card {{if .Sticky}}thread-card--sticky{{end}}">
    <div class="thread-card__vote">
        {{template "vote_controls" (dict "Type" "thread" "ID" .ID "Score" .Score "UserVote" .UserVote "User" $.User)}}
    </div>
    <div class="thread-card__content">
        <h3 class="thread-card__title">
            <a href="/f/{{.Forum.Slug}}/t/{{.ID}}">{{.Title}}</a>
        </h3>

        <div class="thread-card__meta">
            <span class="user-badge">
                <span class="user-badge__name">
                    <a href="/u/{{.Account.Username}}">{{.Account.Username}}</a>
                </span>
            </span>
            <span>Â·</span>
            <span class="text-muted">{{.CreatedAt.Format "2 Jan 2006"}}</span>
            {{if .Forum}}
            <span>Â·</span>
            <span>in <a href="/f/{{.Forum.Slug}}">{{.Forum.Name}}</a></span>
            {{end}}
        </div>

        {{if .Content}}
        <div class="thread-card__preview">
            {{if gt (len .Content) 200}}
                {{slice .Content 0 200}}...
            {{else}}
                {{.Content}}
            {{end}}
        </div>
        {{end}}

        {{if .Tags}}
        <div class="thread-card__tags">
            {{range .Tags}}
            <span class="tag">{{.}}</span>
            {{end}}
        </div>
        {{end}}

        <div class="thread-card__footer">
            <span>ğŸ’¬ {{.PostCount}} comments</span>
            <span>ğŸ‘ {{.ViewCount}} views</span>
            {{if .Sticky}}
            <span class="badge badge--sticky">Sticky</span>
            {{end}}
            {{if .Locked}}
            <span class="badge badge--locked">Locked</span>
            {{end}}
            {{if .NSFW}}
            <span class="badge badge--nsfw">NSFW</span>
            {{end}}
        </div>
    </div>
</div>
{{end}}
