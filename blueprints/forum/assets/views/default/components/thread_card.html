{{define "thread_card"}}
<article class="thread-card" data-thread-id="{{.ID}}">
    <div class="vote-column">
        <button class="vote-btn upvote {{if eq .Vote 1}}active{{end}}" data-action="upvote" data-thread="{{.ID}}" title="Upvote">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 4l-8 8h5v8h6v-8h5z"/>
            </svg>
        </button>
        <span class="vote-score">{{formatScore .Score}}</span>
        <button class="vote-btn downvote {{if eq .Vote -1}}active{{end}}" data-action="downvote" data-thread="{{.ID}}" title="Downvote">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 20l8-8h-5V4H9v8H4z"/>
            </svg>
        </button>
    </div>

    <div class="thread-body">
        <div class="thread-meta">
            {{if .Board}}
                <a href="/b/{{.Board.Name}}" class="board-link">b/{{.Board.Name}}</a>
                <span class="separator">·</span>
            {{end}}
            Posted by
            {{if .Author}}
                <a href="/u/{{.Author.Username}}" class="author-link">u/{{.Author.Username}}</a>
            {{else}}
                <span class="author-deleted">[deleted]</span>
            {{end}}
            <span class="separator">·</span>
            <span class="time" title="{{formatTime .CreatedAt}}">{{formatTimeRelative .CreatedAt}}</span>
            {{if .EditedAt}}
                <span class="edited">(edited)</span>
            {{end}}
        </div>

        <h3 class="thread-title">
            <a href="/b/{{if .Board}}{{.Board.Name}}{{else}}all{{end}}/{{.ID}}/{{slugify .Title}}">{{.Title}}</a>
            {{if eq .Type "link"}}
                <span class="domain">({{.Domain}})</span>
            {{end}}
        </h3>

        {{if or .IsNSFW .IsSpoiler .IsPinned .IsLocked}}
            <div class="thread-tags">
                {{if .IsPinned}}<span class="tag pinned">Pinned</span>{{end}}
                {{if .IsLocked}}<span class="tag locked">Locked</span>{{end}}
                {{if .IsNSFW}}<span class="tag nsfw">NSFW</span>{{end}}
                {{if .IsSpoiler}}<span class="tag spoiler">Spoiler</span>{{end}}
            </div>
        {{end}}

        <div class="thread-actions">
            <a href="/b/{{if .Board}}{{.Board.Name}}{{else}}all{{end}}/{{.ID}}/{{slugify .Title}}" class="action-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                {{.CommentCount}} Comments
            </a>
            <button class="action-btn bookmark-btn {{if .IsBookmarked}}active{{end}}" data-action="bookmark" data-thread="{{.ID}}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="{{if .IsBookmarked}}currentColor{{else}}none{{end}}" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                </svg>
                {{if .IsBookmarked}}Saved{{else}}Save{{end}}
            </button>
            <button class="action-btn share-btn" data-action="share" data-url="/b/{{if .Board}}{{.Board.Name}}{{else}}all{{end}}/{{.ID}}/{{slugify .Title}}">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="18" cy="5" r="3"/>
                    <circle cx="6" cy="12" r="3"/>
                    <circle cx="18" cy="19" r="3"/>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                </svg>
                Share
            </button>
        </div>
    </div>

    {{if .ThumbnailURL}}
        <div class="thread-thumbnail">
            <img src="{{.ThumbnailURL}}" alt="" loading="lazy">
        </div>
    {{end}}
</article>
{{end}}
