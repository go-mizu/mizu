{{define "user.html"}}
{{template "default.html" .}}
{{end}}

{{define "content"}}
<div class="profile-header">
    <h1>{{.Data.User.Username}}</h1>
    <div class="member-since">Member since {{formatTimeRelative .Data.User.CreatedAt}}</div>
</div>

<div class="profile-stats">
    <div class="stat">
        <strong>{{formatNumber .Data.User.Karma}}</strong> Reputation
    </div>
    <div class="stat">
        <strong>{{formatNumber .Data.User.ThreadCount}}</strong> Threads
    </div>
    <div class="stat">
        <strong>{{formatNumber .Data.User.CommentCount}}</strong> Posts
    </div>
</div>

{{if .Data.User.Bio}}
<div class="vb-box" style="margin-top: 15px;">
    <div class="vb-box-header">
        About {{.Data.User.Username}}
    </div>
    <div class="vb-box-content">
        {{.Data.User.Bio}}
    </div>
</div>
{{end}}

<div class="vb-box" style="margin-top: 15px;">
    <div class="vb-box-header">
        Recent Threads by {{.Data.User.Username}}
    </div>
</div>

<div class="sitetable linklisting">
    <table class="forum-table">
        <thead>
            <tr>
                <th>Thread</th>
                <th style="width: 100px;">Forum</th>
                <th style="width: 80px; text-align: center;">Replies</th>
                <th style="width: 140px;">Posted</th>
            </tr>
        </thead>
        <tbody>
            {{range .Data.Threads}}
            <tr>
                <td>
                    <a href="/b/{{if .Board}}{{.Board.Name}}{{else}}all{{end}}/{{.ID}}/{{slugify .Title}}" style="font-weight: bold;">{{.Title}}</a>
                </td>
                <td>
                    {{if .Board}}
                    <a href="/b/{{.Board.Name}}">{{.Board.Name}}</a>
                    {{end}}
                </td>
                <td style="text-align: center;">{{.CommentCount}}</td>
                <td style="font-size: 10px; color: #808080;">{{formatTimeRelative .CreatedAt}}</td>
            </tr>
            {{else}}
            <tr>
                <td colspan="4" class="noresults">No threads yet</td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<div class="vb-box" style="margin-top: 15px;">
    <div class="vb-box-header">
        Recent Posts by {{.Data.User.Username}}
    </div>
</div>

<div class="sitetable nestedlisting">
    {{range .Data.Comments}}
    <div class="thing comment">
        <div class="entry">
            <p class="tagline">
                Posted in
                {{if .Thread}}
                <a href="/b/{{if .Thread.Board}}{{.Thread.Board.Name}}{{else}}all{{end}}/{{.Thread.ID}}/{{slugify .Thread.Title}}">{{.Thread.Title}}</a>
                {{end}}
                &bull;
                <time>{{formatTimeRelative .CreatedAt}}</time>
                &bull;
                <span class="score">{{formatScore .Score}} points</span>
            </p>
            <div class="usertext-body">
                <div class="md">{{safeHTML .ContentHTML}}</div>
            </div>
        </div>
    </div>
    {{else}}
    <div class="noresults">No posts yet</div>
    {{end}}
</div>
{{end}}
