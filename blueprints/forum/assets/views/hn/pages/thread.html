{{define "thread.html"}}
{{template "default.html" .}}
{{end}}

{{define "content"}}
<tr>
    <td>
        <table border="0" cellpadding="0" cellspacing="0" class="itemlist">
        <tbody>
            <tr class="athing" id="{{.Data.Thread.ID}}">
                <td align="right" valign="top" class="title">
                    <span class="rank"></span>
                </td>
                <td valign="top" class="votelinks">
                    <center>
                        <a id="up_{{.Data.Thread.ID}}" class="{{if eq .Data.Thread.Vote 1}}nosee{{end}}" data-action="upvote" data-thread="{{.Data.Thread.ID}}">
                            <div class="votearrow" title="upvote"></div>
                        </a>
                    </center>
                </td>
                <td class="title">
                    <span class="titleline">
                        {{if eq .Data.Thread.Type "link"}}
                            <a href="{{.Data.Thread.URL}}" rel="nofollow">{{.Data.Thread.Title}}</a>
                            <span class="sitebit comhead"> (<a href="/from?site={{.Data.Thread.Domain}}"><span class="sitestr">{{.Data.Thread.Domain}}</span></a>)</span>
                        {{else}}
                            <a href="/b/{{.Data.Thread.Board.Name}}/{{.Data.Thread.ID}}">{{.Data.Thread.Title}}</a>
                        {{end}}
                    </span>
                </td>
            </tr>
            <tr>
                <td colspan="2"></td>
                <td class="subtext">
                    <span class="score" id="score_{{.Data.Thread.ID}}">{{.Data.Thread.Score}} points</span>
                    by {{if .Data.Thread.Author}}<a href="/u/{{.Data.Thread.Author.Username}}" class="hnuser">{{.Data.Thread.Author.Username}}</a>{{else}}<span class="hnuser">[deleted]</span>{{end}}
                    <span class="age" title="{{formatTime .Data.Thread.CreatedAt}}"><a href="/b/{{.Data.Thread.Board.Name}}/{{.Data.Thread.ID}}">{{formatTimeRelative .Data.Thread.CreatedAt}}</a></span>
                    | <a href="#" data-action="hide" data-thread="{{.Data.Thread.ID}}">hide</a>
                    | <a href="/b/{{.Data.Thread.Board.Name}}/{{.Data.Thread.ID}}">{{.Data.Thread.CommentCount}}&nbsp;comments</a>
                </td>
            </tr>
        </tbody>
        </table>
    </td>
</tr>

{{if .Data.Thread.ContentHTML}}
<tr>
    <td>
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="40"></td>
            <td>
                <div style="margin: 10px 0; font-size: 9pt;">
                    {{safeHTML .Data.Thread.ContentHTML}}
                </div>
            </td>
        </tr>
        </table>
    </td>
</tr>
{{end}}

<tr style="height:10px"></tr>

{{if and .CurrentUser (not .Data.Thread.IsLocked)}}
<tr>
    <td>
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="40"></td>
            <td>
                <form action="/api/threads/{{.Data.Thread.ID}}/comments" method="post" class="reply-form" data-action="submit-comment">
                    <textarea name="content" rows="6" cols="60"></textarea>
                    <br><br>
                    <input type="submit" value="add comment">
                </form>
            </td>
        </tr>
        </table>
    </td>
</tr>
{{else if .Data.Thread.IsLocked}}
<tr>
    <td style="padding: 10px 40px; color: #828282;">
        This thread has been locked. New comments cannot be posted.
    </td>
</tr>
{{end}}

<tr style="height:10px"></tr>

<tr>
    <td>
        <table border="0" class="comment-tree">
        <tbody>
            {{range .Data.Comments}}
                {{template "comment" .}}
            {{else}}
                <tr>
                    <td style="padding: 20px 40px; color: #828282;">
                        No comments yet.
                    </td>
                </tr>
            {{end}}
        </tbody>
        </table>
    </td>
</tr>

<tr style="height:10px"></tr>
<tr>
    <td>
        <table width="100%" cellspacing="0" cellpadding="1">
        <tr>
            <td bgcolor="#ff6600"></td>
        </tr>
        </table>
        <br>
        <center>
            <span class="yclinks">
                <a href="/newsguidelines">Guidelines</a>
                | <a href="/newsfaq">FAQ</a>
                | <a href="/lists">Lists</a>
                | <a href="#">API</a>
                | <a href="#">Security</a>
                | <a href="#">Legal</a>
                | <a href="#">Apply to YC</a>
                | <a href="#">Contact</a>
            </span>
        </center>
    </td>
</tr>
</table>
{{end}}
