{{define "pages/members.html"}}
{{template "layouts/default.html" .}}
{{define "title"}}{{.Workspace.Name}} - Members{{end}}
{{define "content"}}
<div class="page-header">
    <h1>Members</h1>
    <div class="page-actions">
        <button class="btn btn-primary btn-sm" onclick="inviteMember()">Invite Member</button>
    </div>
</div>

<div class="members-view">
    {{if .Members}}
    <div class="member-list">
        {{range .Members}}
        <div class="member-item">
            <div class="member-avatar">
                <div class="avatar">U</div>
            </div>
            <div class="member-info">
                <span class="member-id">{{.UserID}}</span>
                <span class="member-role role-{{.Role}}">{{.Role}}</span>
            </div>
            <div class="member-actions">
                {{if ne .Role "owner"}}
                <button class="btn btn-ghost btn-sm" onclick="removeMember('{{.ID}}')">Remove</button>
                {{end}}
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="empty-state">
        <h3 class="empty-state-title">No members</h3>
    </div>
    {{end}}
</div>

<script>
function inviteMember() {
    const userId = prompt('User ID to invite:');
    if (!userId) return;

    fetch('/api/v1/workspaces/{{.Workspace.Slug}}/members', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ user_id: userId, role: 'member' })
    }).then(() => window.location.reload());
}

function removeMember(id) {
    if (!confirm('Remove this member?')) return;
    // Implement member removal
}
</script>
{{end}}
{{end}}
