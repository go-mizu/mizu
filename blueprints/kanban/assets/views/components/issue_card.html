{{define "issue_card"}}
<div class="issue-card" draggable="true" data-issue-id="{{.ID}}" data-issue-key="{{.Key}}">
    <div class="issue-card-header">
        <span class="issue-key">{{.Key}}</span>
        {{if ne .Priority "none"}}
        <span class="issue-priority priority-{{.Priority}}" title="{{priorityLabel .Priority}}">
            {{if eq .Priority "urgent"}}
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 22h20L12 2zm0 4l7 14H5l7-14z"/></svg>
            {{else if eq .Priority "high"}}
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 14l5-5 5 5z"/></svg>
            {{else if eq .Priority "medium"}}
            <svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="11" width="16" height="2"/></svg>
            {{else if eq .Priority "low"}}
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"/></svg>
            {{end}}
        </span>
        {{end}}
    </div>
    <div class="issue-card-title">{{.Title}}</div>
    <div class="issue-card-footer">
        <div class="issue-card-meta">
            {{if .DueDate}}
            <span class="issue-due-date">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                {{formatDate .DueDate}}
            </span>
            {{end}}
        </div>
        {{if .AssigneeIDs}}
        <div class="issue-card-assignees">
            {{range .AssigneeIDs}}
            <div class="avatar avatar-xs" title="Assignee">
                <span>U</span>
            </div>
            {{end}}
        </div>
        {{end}}
    </div>
</div>
{{end}}
