{{define "content"}}
<div class="flex items-center justify-between mb-6">
  <div class="flex items-center gap-4">
    <h1 class="text-2xl font-semibold text-zinc-900">Issues</h1>
    <div class="flex items-center bg-zinc-100 rounded-lg p-1" role="group" aria-label="View options">
      <a href="/w/{{.Workspace.Slug}}/issues?view=list" class="flex items-center justify-center w-8 h-8 rounded-md text-zinc-500 hover:text-zinc-900 hover:bg-white transition-colors" aria-label="List view">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="8" x2="21" y1="6" y2="6"/>
          <line x1="8" x2="21" y1="12" y2="12"/>
          <line x1="8" x2="21" y1="18" y2="18"/>
          <line x1="3" x2="3.01" y1="6" y2="6"/>
          <line x1="3" x2="3.01" y1="12" y2="12"/>
          <line x1="3" x2="3.01" y1="18" y2="18"/>
        </svg>
      </a>
      {{if .DefaultProjectID}}
      <a href="/w/{{.Workspace.Slug}}/board/{{.DefaultProjectID}}" class="flex items-center justify-center w-8 h-8 rounded-md text-zinc-500 hover:text-zinc-900 hover:bg-white transition-colors" aria-label="Board view">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect width="6" height="14" x="4" y="5" rx="2"/>
          <rect width="6" height="10" x="14" y="7" rx="2"/>
        </svg>
      </a>
      {{end}}
      <a href="/w/{{.Workspace.Slug}}/issues?view=calendar" class="flex items-center justify-center w-8 h-8 rounded-md bg-white shadow-sm text-zinc-900" aria-label="Calendar view" aria-current="page">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M8 2v4"/>
          <path d="M16 2v4"/>
          <rect width="18" height="18" x="3" y="4" rx="2"/>
          <path d="M3 10h18"/>
        </svg>
      </a>
      <a href="/w/{{.Workspace.Slug}}/issues?view=gantt" class="flex items-center justify-center w-8 h-8 rounded-md text-zinc-500 hover:text-zinc-900 hover:bg-white transition-colors" aria-label="Gantt chart view">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M3 3v18h18"/>
          <rect x="7" y="6" width="10" height="3"/>
          <rect x="5" y="12" width="8" height="3"/>
          <rect x="9" y="18" width="6" height="3"/>
        </svg>
      </a>
    </div>
  </div>
  <div class="flex items-center gap-2">
    <a href="?view=calendar&month={{.PrevMonth}}" class="inline-flex items-center justify-center w-8 h-8 text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100 rounded-md transition-colors" aria-label="Previous month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m15 18-6-6 6-6"/>
      </svg>
    </a>
    <span class="text-sm font-medium text-zinc-900 min-w-32 text-center">{{.MonthName}} {{.Year}}</span>
    <a href="?view=calendar&month={{.NextMonth}}" class="inline-flex items-center justify-center w-8 h-8 text-zinc-500 hover:text-zinc-900 hover:bg-zinc-100 rounded-md transition-colors" aria-label="Next month">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m9 18 6-6-6-6"/>
      </svg>
    </a>
    <a href="?view=calendar" class="ml-2 px-3 py-1.5 text-sm font-medium text-zinc-700 bg-white border border-zinc-200 rounded-md hover:bg-zinc-50 transition-colors">Today</a>
  </div>
</div>

<div class="bg-white rounded-lg shadow-sm border border-zinc-200 overflow-hidden">
  <!-- Calendar Header -->
  <div class="grid grid-cols-7 bg-zinc-50 border-b border-zinc-200">
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-500 text-center">Mon</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-500 text-center">Tue</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-500 text-center">Wed</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-500 text-center">Thu</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-500 text-center">Fri</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-400 text-center">Sat</div>
    <div class="px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-400 text-center">Sun</div>
  </div>

  <!-- Calendar Grid -->
  <div class="divide-y divide-zinc-100">
    {{range .Days}}
    <div class="grid grid-cols-7 divide-x divide-zinc-100">
      {{range .}}
      <div class="min-h-28 p-2 {{if .IsToday}}bg-zinc-100{{else if .IsWeekend}}bg-zinc-50{{else if .IsOtherMonth}}bg-zinc-50/50{{else}}bg-white{{end}} hover:bg-zinc-50 transition-colors cursor-pointer calendar-day" data-date="{{.Date.Format "2006-01-02"}}">
        <div class="flex items-center justify-between mb-1">
          <span class="text-sm font-medium {{if .IsToday}}text-zinc-900{{else if .IsOtherMonth}}text-zinc-300{{else if .IsWeekend}}text-zinc-400{{else}}text-zinc-700{{end}}">{{.Date.Day}}</span>
          {{if .IsToday}}<span class="text-xs font-medium text-zinc-500">Today</span>{{end}}
        </div>
        <div class="space-y-1">
          {{range $i, $issue := .Issues}}
          {{if lt $i 3}}
          <a href="/w/{{$.Workspace.Slug}}/issue/{{$issue.Key}}"
             class="block px-2 py-1 text-xs rounded {{if $issue.IsOverdue}}bg-red-100 text-red-700 hover:bg-red-200{{else}}bg-zinc-100 text-zinc-700 hover:bg-zinc-200{{end}} transition-colors truncate"
             data-issue-key="{{$issue.Key}}"
             onclick="event.stopPropagation()">
            <span class="font-medium">{{$issue.Key}}</span>
            <span class="ml-1">{{$issue.Title}}</span>
          </a>
          {{end}}
          {{end}}
        </div>
        {{if gt (len .Issues) 3}}
        <button class="mt-1 text-xs text-zinc-600 hover:text-zinc-900 font-medium" data-date="{{.Date.Format "2006-01-02"}}" onclick="event.stopPropagation()">
          +{{sub (len .Issues) 3}} more
        </button>
        {{end}}
      </div>
      {{end}}
    </div>
    {{end}}
  </div>
</div>

<script>
// Calendar day click handler - navigate to issues for that date
document.querySelectorAll('.calendar-day').forEach(day => {
  day.addEventListener('click', (e) => {
    if (e.target.closest('a') || e.target.closest('button[data-date]')) {
      return;
    }
    // Could open a modal or filter issues by date in future
  });
});
</script>
{{end}}
