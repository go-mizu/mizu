{{define "title"}}Settings - Microblog{{end}}

{{define "content"}}
<div class="section-header flex items-center gap-4">
    <a href="javascript:history.back()" class="btn btn-ghost btn-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <line x1="19" y1="12" x2="5" y2="12"/>
            <polyline points="12 19 5 12 12 5"/>
        </svg>
    </a>
    <h1 class="section-title">Settings</h1>
</div>

<!-- Settings Navigation -->
<nav class="border-b">
    <a href="/settings" class="flex items-center gap-4 p-4 hover:bg-hover transition-fast{{if eq .SettingsPage "profile"}} bg-hover{{end}}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
        </svg>
        <div>
            <div class="font-medium">Profile</div>
            <div class="text-sm text-secondary">Edit your profile information</div>
        </div>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" class="ml-auto text-muted">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </a>

    <a href="/settings/account" class="flex items-center gap-4 p-4 hover:bg-hover transition-fast{{if eq .SettingsPage "account"}} bg-hover{{end}}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <div>
            <div class="font-medium">Account</div>
            <div class="text-sm text-secondary">Email, password, and security</div>
        </div>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" class="ml-auto text-muted">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </a>

    <a href="/settings/privacy" class="flex items-center gap-4 p-4 hover:bg-hover transition-fast{{if eq .SettingsPage "privacy"}} bg-hover{{end}}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
            <circle cx="12" cy="12" r="3"/>
        </svg>
        <div>
            <div class="font-medium">Privacy</div>
            <div class="text-sm text-secondary">Control who can see your content</div>
        </div>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" class="ml-auto text-muted">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </a>

    <a href="/settings/appearance" class="flex items-center gap-4 p-4 hover:bg-hover transition-fast{{if eq .SettingsPage "appearance"}} bg-hover{{end}}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <div>
            <div class="font-medium">Appearance</div>
            <div class="text-sm text-secondary">Theme and display options</div>
        </div>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20" class="ml-auto text-muted">
            <polyline points="9 18 15 12 9 6"/>
        </svg>
    </a>
</nav>

<!-- Settings Content -->
<div class="p-4">
    {{if eq .SettingsPage "profile"}}
    <form id="profileSettingsForm" class="space-y-4">
        <div class="form-group">
            <label class="form-label" for="display_name">Display name</label>
            <input type="text" id="display_name" name="display_name" class="form-input" value="{{.Account.DisplayName}}" maxlength="50">
        </div>

        <div class="form-group">
            <label class="form-label" for="bio">Bio</label>
            <textarea id="bio" name="bio" class="form-textarea" rows="3" maxlength="160">{{.Account.Bio}}</textarea>
            <p class="form-hint">Max 160 characters</p>
        </div>

        <div class="form-group">
            <label class="form-label" for="avatar">Avatar URL</label>
            <input type="url" id="avatar" name="avatar_url" class="form-input" value="{{.Account.AvatarURL}}" placeholder="https://...">
        </div>

        <div class="form-group">
            <label class="form-label" for="header">Header URL</label>
            <input type="url" id="header" name="header_url" class="form-input" value="{{.Account.HeaderURL}}" placeholder="https://...">
        </div>

        <button type="submit" class="btn btn-primary">Save changes</button>
    </form>

    {{else if eq .SettingsPage "account"}}
    <form id="accountSettingsForm" class="space-y-4">
        <div class="form-group">
            <label class="form-label" for="email">Email</label>
            <input type="email" id="email" name="email" class="form-input" value="{{.Email}}">
        </div>

        <div class="divider"></div>

        <h3 class="font-bold">Change password</h3>

        <div class="form-group">
            <label class="form-label" for="current_password">Current password</label>
            <input type="password" id="current_password" name="current_password" class="form-input">
        </div>

        <div class="form-group">
            <label class="form-label" for="new_password">New password</label>
            <input type="password" id="new_password" name="new_password" class="form-input" minlength="8">
        </div>

        <div class="form-group">
            <label class="form-label" for="confirm_password">Confirm new password</label>
            <input type="password" id="confirm_password" name="confirm_password" class="form-input">
        </div>

        <button type="submit" class="btn btn-primary">Update account</button>
    </form>

    <div class="divider mt-8"></div>

    <div class="p-4 bg-error-light rounded-xl">
        <h3 class="font-bold text-error mb-2">Danger Zone</h3>
        <p class="text-sm text-secondary mb-4">Once you delete your account, there is no going back. Please be certain.</p>
        <button class="btn btn-danger" id="deleteAccountBtn">Delete account</button>
    </div>

    {{else if eq .SettingsPage "appearance"}}
    <div class="form-group">
        <label class="form-label">Theme</label>
        <div class="flex gap-4">
            <label class="form-check">
                <input type="radio" name="theme" value="light" class="form-check-input" {{if eq .Theme "light"}}checked{{end}}>
                <span class="form-check-label">Light</span>
            </label>
            <label class="form-check">
                <input type="radio" name="theme" value="dark" class="form-check-input" {{if eq .Theme "dark"}}checked{{end}}>
                <span class="form-check-label">Dark</span>
            </label>
            <label class="form-check">
                <input type="radio" name="theme" value="system" class="form-check-input" {{if eq .Theme "system"}}checked{{end}}>
                <span class="form-check-label">System</span>
            </label>
        </div>
    </div>
    {{end}}
</div>

<!-- Logout -->
<div class="p-4 border-t mt-8">
    <button class="btn btn-secondary btn-block" id="logoutBtn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        Log out
    </button>
</div>
{{end}}
