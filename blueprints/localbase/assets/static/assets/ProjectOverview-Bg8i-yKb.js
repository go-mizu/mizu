import{j as e,S as g,p,q as h,G as t,T as s,a as L,r as u,s as a,e as j,B as c,t as F,v as x,w as I}from"./vendor-mantine-aKbh6G_O.js";import{r as y,L as d}from"./vendor-react-CA6k1jPF.js";import{P as _}from"./PageContainer-BshQiLl_.js";import{a as D}from"./auth-CFnvc1BQ.js";import{s as N}from"./storage-B8Q3p-Gp.js";import{d as Q}from"./database-Co5xRXKh.js";import{a as P}from"./client-CvoVCtJO.js";import{f as V}from"./functions-BDE2KpTN.js";import{l as A,c as R,m as G,h as M,K as O,L as K,v as W,M as J,I as E,N as X,H as Y,j as Z,C as B}from"./vendor-icons-BYOfSTr6.js";const $={getStats:()=>P.get("/api/dashboard/stats"),getHealth:()=>P.get("/api/dashboard/health")};function ce(){const[i,f]=y.useState({users:0,tables:0,buckets:0,functions:0}),[z,w]=y.useState([]),[l,m]=y.useState(!0);y.useEffect(()=>{(async()=>{var b;m(!0);try{const[o,n,S,C,k]=await Promise.all([$.getHealth(),D.listUsers().catch(()=>({users:[],total:0})),Q.listTables("public").catch(()=>[]),N.listBuckets().catch(()=>[]),V.listFunctions().catch(()=>[])]),q=[{name:"Database",status:o.services.database?"healthy":"unhealthy"},{name:"Auth",status:o.services.auth?"healthy":"unhealthy"},{name:"Storage",status:o.services.storage?"healthy":"unhealthy"},{name:"Realtime",status:o.services.realtime?"healthy":"unhealthy"}];w(q),f({users:(n==null?void 0:n.total)||((b=n==null?void 0:n.users)==null?void 0:b.length)||0,tables:(S==null?void 0:S.length)||0,buckets:(C==null?void 0:C.length)||0,functions:(k==null?void 0:k.length)||0})}catch(o){console.error("Failed to fetch dashboard data:",o)}finally{m(!1)}})()},[]);const T=r=>{switch(r){case"healthy":return"green";case"degraded":return"yellow";case"unhealthy":return"red";default:return"gray"}},H=[{title:"Table Editor",description:"View and manage your database tables",icon:R,path:"/table-editor",color:"blue"},{title:"SQL Editor",description:"Run SQL queries and manage saved queries",icon:E,path:"/sql-editor",color:"green"},{title:"Authentication",description:"Manage users and auth settings",icon:A,path:"/auth/users",color:"violet"},{title:"Storage",description:"Upload and manage files",icon:G,path:"/storage",color:"orange"}],U=[{action:"Table created",target:"public.profiles",time:"2 minutes ago"},{action:"User signed up",target:"user@example.com",time:"5 minutes ago"},{action:"Policy added",target:"profiles_select",time:"10 minutes ago"},{action:"Function deployed",target:"hello-world",time:"1 hour ago"}];return e.jsx(_,{title:"Project Overview",description:"Welcome to your local Supabase project",children:e.jsxs(g,{gap:"lg",children:[e.jsxs(p,{cols:{base:1,sm:2,lg:4},spacing:"md",children:[e.jsx(v,{title:"Users",value:i.users,icon:A,color:"violet",loading:l,linkTo:"/auth/users"}),e.jsx(v,{title:"Tables",value:i.tables,icon:R,color:"blue",loading:l,linkTo:"/table-editor"}),e.jsx(v,{title:"Storage Buckets",value:i.buckets,icon:G,color:"orange",loading:l,linkTo:"/storage"}),e.jsx(v,{title:"Edge Functions",value:i.functions,icon:M,color:"green",loading:l,linkTo:"/functions"})]}),e.jsxs(p,{cols:{base:1,lg:2},spacing:"lg",children:[e.jsxs(h,{p:"md",radius:"md",withBorder:!0,style:{backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)"},children:[e.jsxs(t,{justify:"space-between",mb:"md",children:[e.jsx(s,{fw:600,style:{color:"var(--lb-text-primary)"},children:"Service Health"}),e.jsx(L,{variant:"light",color:"green",size:"sm",children:"All systems operational"})]}),e.jsx(g,{gap:"sm",children:l?e.jsxs(e.Fragment,{children:[e.jsx(u,{height:40}),e.jsx(u,{height:40}),e.jsx(u,{height:40}),e.jsx(u,{height:40})]}):z.map(r=>e.jsxs(t,{justify:"space-between",children:[e.jsxs(t,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:T(r.status),children:r.status==="healthy"?e.jsx(O,{size:14}):e.jsx(K,{size:14})}),e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:r.name})]}),e.jsxs(t,{gap:"xs",children:[r.latency!==void 0&&e.jsxs(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:[r.latency,"ms"]}),e.jsx(L,{size:"xs",variant:"light",color:T(r.status),children:r.status})]})]},r.name))})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,style:{backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)"},children:[e.jsxs(t,{justify:"space-between",mb:"md",children:[e.jsx(s,{fw:600,style:{color:"var(--lb-text-primary)"},children:"Recent Activity"}),e.jsx(j,{variant:"subtle",size:"xs",rightSection:e.jsx(W,{size:14}),component:d,to:"/logs",children:"View logs"})]}),e.jsx(g,{gap:"sm",children:U.map((r,b)=>e.jsxs(t,{justify:"space-between",children:[e.jsxs(t,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",style:{backgroundColor:"var(--lb-bg-secondary)"},children:e.jsx(J,{size:14})}),e.jsxs(c,{children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:r.action}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:r.target})]})]}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-tertiary)"},children:r.time})]},b))})]})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,style:{backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)"},children:[e.jsx(s,{fw:600,mb:"md",style:{color:"var(--lb-text-primary)"},children:"Quick Actions"}),e.jsx(p,{cols:{base:1,sm:2,lg:4},spacing:"md",children:H.map(r=>e.jsx(F,{component:d,to:r.path,padding:"md",radius:"md",withBorder:!0,style:{cursor:"pointer",backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)",transition:"all var(--lb-transition-normal)"},className:"lb-file-item",children:e.jsxs(t,{children:[e.jsx(a,{size:"lg",radius:"md",variant:"light",color:r.color,children:e.jsx(r.icon,{size:20})}),e.jsxs(c,{style:{flex:1},children:[e.jsx(s,{size:"sm",fw:500,style:{color:"var(--lb-text-primary)"},children:r.title}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:r.description})]}),e.jsx(X,{size:16,style:{opacity:.5,color:"var(--lb-text-muted)"}})]})},r.path))})]}),e.jsxs(p,{cols:{base:1,lg:2},spacing:"lg",children:[e.jsxs(h,{p:"md",radius:"md",withBorder:!0,style:{backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)"},children:[e.jsx(s,{fw:600,mb:"md",style:{color:"var(--lb-text-primary)"},children:"Getting Started"}),e.jsxs(x,{spacing:"sm",size:"sm",children:[e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"green",children:e.jsx(Y,{size:12})}),children:e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"Set up your local Supabase instance"})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"blue",children:e.jsx(E,{size:12})}),children:e.jsxs(t,{gap:"xs",children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"Create your first table"}),e.jsx(j,{variant:"subtle",size:"compact-xs",component:d,to:"/table-editor",children:"Go"})]})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"violet",children:e.jsx(Z,{size:12})}),children:e.jsxs(t,{gap:"xs",children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"Set up Row Level Security"}),e.jsx(j,{variant:"subtle",size:"compact-xs",component:d,to:"/database/policies",children:"Go"})]})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"orange",children:e.jsx(A,{size:12})}),children:e.jsxs(t,{gap:"xs",children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"Add authentication to your app"}),e.jsx(j,{variant:"subtle",size:"compact-xs",component:d,to:"/auth/users",children:"Go"})]})})]})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,style:{backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)"},children:[e.jsx(s,{fw:600,mb:"md",style:{color:"var(--lb-text-primary)"},children:"Resources"}),e.jsxs(g,{gap:"sm",children:[e.jsx(I,{href:"https://supabase.com/docs",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(t,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",style:{backgroundColor:"var(--lb-bg-secondary)"},children:e.jsx(B,{size:14})}),e.jsxs(c,{style:{flex:1},children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"Documentation"}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:"Learn how to use Supabase features"})]})]})}),e.jsx(I,{href:"https://supabase.com/docs/reference",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(t,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",style:{backgroundColor:"var(--lb-bg-secondary)"},children:e.jsx(B,{size:14})}),e.jsxs(c,{style:{flex:1},children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"API Reference"}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:"Complete API documentation"})]})]})}),e.jsx(I,{href:"https://github.com/supabase/supabase",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(t,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",style:{backgroundColor:"var(--lb-bg-secondary)"},children:e.jsx(B,{size:14})}),e.jsxs(c,{style:{flex:1},children:[e.jsx(s,{size:"sm",style:{color:"var(--lb-text-primary)"},children:"GitHub"}),e.jsx(s,{size:"xs",style:{color:"var(--lb-text-secondary)"},children:"View source code and contribute"})]})]})})]})]})]})]})})}function v({title:i,value:f,icon:z,color:w,loading:l,linkTo:m}){return e.jsx(F,{component:d,to:m,padding:"md",radius:"md",withBorder:!0,className:"lb-stat-card",style:{cursor:"pointer",backgroundColor:"var(--lb-bg-primary)",borderColor:"var(--lb-border-default)",transition:"all var(--lb-transition-normal)"},children:e.jsxs(t,{justify:"space-between",children:[e.jsxs(c,{children:[e.jsx(s,{size:"xs",tt:"uppercase",fw:600,style:{color:"var(--lb-text-secondary)",letterSpacing:"0.05em"},children:i}),l?e.jsx(u,{height:32,width:60,mt:4}):e.jsx(s,{size:"xl",fw:700,mt:4,style:{color:"var(--lb-text-primary)",fontSize:"var(--lb-text-3xl)"},children:f.toLocaleString()})]}),e.jsx(a,{size:"xl",radius:"md",variant:"light",color:w,children:e.jsx(z,{size:24})})]})})}export{ce as ProjectOverviewPage};
