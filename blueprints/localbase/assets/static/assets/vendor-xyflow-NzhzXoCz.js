import{j as $}from"./vendor-mantine-BXMqcLry.js";import{e as wa,g as Ll,R as ql,r as O}from"./vendor-react-CFPnf9wS.js";import{i as Tl,a as Fi,b as Dl,c as Oi,d as zl,e as $l,f as Et,g as tn,r as xa,h as Fl,j as si,k as _a,l as Te,m as ai,n as Ol,o as Vl,p as ba,q as Ea,s as Sa,t as ui,u as ci,v as li,w as Bl,x as Hl,y as jl,z as Gl,A as Yl,B as Wl,C as Xl,D as fi,E as $t,F as Ul,G as Kl,H as di,I as Zl,J as Ql,K as Na,L as Ca,M as ka,N as Ma,O as Ft,P as Ia,Q as Aa,R as Jl,S as ef,T as tf,U as nf,V as rf,W as of,X as sf,Y as af,Z as Pa,_ as Ra,$ as uf,a0 as cf,a1 as lf,a2 as ff,a3 as df,a4 as hf,a5 as pf,a6 as gf,a7 as mf,a8 as vf,a9 as yf,aa as wf,ab as xf,ac as _f,ad as bf,ae as Ef}from"./vendor-charts-DoEqOebU.js";function se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=se(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Sf={value:()=>{}};function Ot(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new St(n)}function St(e){this._=e}function Nf(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}St.prototype=Ot.prototype={constructor:St,on:function(e,t){var n=this._,i=Nf(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=Cf(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Vi(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Vi(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new St(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Cf(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Vi(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Sf,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ur="http://www.w3.org/1999/xhtml";const Bi={svg:"http://www.w3.org/2000/svg",xhtml:Ur,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Bi.hasOwnProperty(t)?{space:Bi[t],local:e}:e}function kf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ur&&t.documentElement.namespaceURI===Ur?t.createElement(e):t.createElementNS(n,e)}}function Mf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function La(e){var t=Vt(e);return(t.local?Mf:kf)(t)}function If(){}function hi(e){return e==null?If:function(){return this.querySelector(e)}}function Af(e){typeof e!="function"&&(e=hi(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new le(i,this._parents)}function Pf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rf(){return[]}function qa(e){return e==null?Rf:function(){return this.querySelectorAll(e)}}function Lf(e){return function(){return Pf(e.apply(this,arguments))}}function qf(e){typeof e=="function"?e=Lf(e):e=qa(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(i.push(e.call(u,u.__data__,l,s)),r.push(u));return new le(i,r)}function Ta(e){return function(){return this.matches(e)}}function Da(e){return function(t){return t.matches(e)}}var Tf=Array.prototype.find;function Df(e){return function(){return Tf.call(this.children,e)}}function zf(){return this.firstElementChild}function $f(e){return this.select(e==null?zf:Df(typeof e=="function"?e:Da(e)))}var Ff=Array.prototype.filter;function Of(){return Array.from(this.children)}function Vf(e){return function(){return Ff.call(this.children,e)}}function Bf(e){return this.selectAll(e==null?Of:Vf(typeof e=="function"?e:Da(e)))}function Hf(e){typeof e!="function"&&(e=Ta(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new le(i,this._parents)}function za(e){return new Array(e.length)}function jf(){return new le(this._enter||this._groups.map(za),this._parents)}function Mt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mt.prototype={constructor:Mt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gf(e){return function(){return e}}function Yf(e,t,n,i,r,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new Mt(e,o[s]);for(;s<u;++s)(a=t[s])&&(r[s]=a)}function Wf(e,t,n,i,r,o,s){var a,u,l=new Map,c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",l.has(h)?r[a]=u:l.set(h,u));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(u=l.get(h))?(i[a]=u,u.__data__=o[a],l.delete(h)):n[a]=new Mt(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(r[a]=u)}function Xf(e){return e.__data__}function Uf(e,t){if(!arguments.length)return Array.from(this,Xf);var n=t?Wf:Yf,i=this._parents,r=this._groups;typeof e!="function"&&(e=Gf(e));for(var o=r.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=i[l],f=r[l],d=f.length,h=Kf(e.call(c,c&&c.__data__,l,i)),g=h.length,y=a[l]=new Array(g),v=s[l]=new Array(g),m=u[l]=new Array(d);n(c,f,y,v,m,h,t);for(var x=0,p=0,w,_;x<g;++x)if(w=y[x]){for(x>=p&&(p=x+1);!(_=v[p])&&++p<g;);w._next=_||null}}return s=new le(s,i),s._enter=a,s._exit=u,s}function Kf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zf(){return new le(this._exit||this._groups.map(za),this._parents)}function Qf(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Jf(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var l=n[u],c=i[u],f=l.length,d=a[u]=new Array(f),h,g=0;g<f;++g)(h=l[g]||c[g])&&(d[g]=h);for(;u<r;++u)a[u]=n[u];return new le(a,this._parents)}function ed(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function td(e){e||(e=nd);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,u=r[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new le(r,this._parents).order()}function nd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function id(){return Array.from(this)}function od(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function sd(){let e=0;for(const t of this)++e;return e}function ad(){return!this.node()}function ud(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function cd(e){return function(){this.removeAttribute(e)}}function ld(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fd(e,t){return function(){this.setAttribute(e,t)}}function dd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gd(e,t){var n=Vt(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ld:cd:typeof t=="function"?n.local?pd:hd:n.local?dd:fd)(n,t))}function $a(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function md(e){return function(){this.style.removeProperty(e)}}function vd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yd(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function wd(e,t,n){return arguments.length>1?this.each((t==null?md:typeof t=="function"?yd:vd)(e,t,n??"")):Ve(this.node(),e)}function Ve(e,t){return e.style.getPropertyValue(t)||$a(e).getComputedStyle(e,null).getPropertyValue(t)}function xd(e){return function(){delete this[e]}}function _d(e,t){return function(){this[e]=t}}function bd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ed(e,t){return arguments.length>1?this.each((t==null?xd:typeof t=="function"?bd:_d)(e,t)):this.node()[e]}function Fa(e){return e.trim().split(/^|\s+/)}function pi(e){return e.classList||new Oa(e)}function Oa(e){this._node=e,this._names=Fa(e.getAttribute("class")||"")}Oa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Va(e,t){for(var n=pi(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Ba(e,t){for(var n=pi(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Sd(e){return function(){Va(this,e)}}function Nd(e){return function(){Ba(this,e)}}function Cd(e,t){return function(){(t.apply(this,arguments)?Va:Ba)(this,e)}}function kd(e,t){var n=Fa(e+"");if(arguments.length<2){for(var i=pi(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cd:t?Sd:Nd)(n,t))}function Md(){this.textContent=""}function Id(e){return function(){this.textContent=e}}function Ad(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Pd(e){return arguments.length?this.each(e==null?Md:(typeof e=="function"?Ad:Id)(e)):this.node().textContent}function Rd(){this.innerHTML=""}function Ld(e){return function(){this.innerHTML=e}}function qd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Td(e){return arguments.length?this.each(e==null?Rd:(typeof e=="function"?qd:Ld)(e)):this.node().innerHTML}function Dd(){this.nextSibling&&this.parentNode.appendChild(this)}function zd(){return this.each(Dd)}function $d(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fd(){return this.each($d)}function Od(e){var t=typeof e=="function"?e:La(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vd(){return null}function Bd(e,t){var n=typeof e=="function"?e:La(e),i=t==null?Vd:typeof t=="function"?t:hi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Hd(){var e=this.parentNode;e&&e.removeChild(this)}function jd(){return this.each(Hd)}function Gd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wd(e){return this.select(e?Yd:Gd)}function Xd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ud(e){return function(t){e.call(this,t,this.__data__)}}function Kd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Zd(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Qd(e,t,n){return function(){var i=this.__on,r,o=Ud(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Jd(e,t,n){var i=Kd(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(r=0,c=a[u];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Qd:Zd,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function Ha(e,t,n){var i=$a(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function eh(e,t){return function(){return Ha(this,e,t)}}function th(e,t){return function(){return Ha(this,e,t.apply(this,arguments))}}function nh(e,t){return this.each((typeof t=="function"?th:eh)(e,t))}function*rh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var ja=[null];function le(e,t){this._groups=e,this._parents=t}function lt(){return new le([[document.documentElement]],ja)}function ih(){return this}le.prototype=lt.prototype={constructor:le,select:Af,selectAll:qf,selectChild:$f,selectChildren:Bf,filter:Hf,data:Uf,enter:jf,exit:Zf,join:Qf,merge:Jf,selection:ih,order:ed,sort:td,call:rd,nodes:id,node:od,size:sd,empty:ad,each:ud,attr:gd,style:wd,property:Ed,classed:kd,text:Pd,html:Td,raise:zd,lower:Fd,append:Od,insert:Bd,remove:jd,clone:Wd,datum:Xd,on:Jd,dispatch:nh,[Symbol.iterator]:rh};function ce(e){return typeof e=="string"?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],ja)}function oh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function de(e,t){if(e=oh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const sh={passive:!1},rt={capture:!0,passive:!1};function nn(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function Ga(e){var t=e.document.documentElement,n=ce(e).on("dragstart.drag",Oe,rt);"onselectstart"in t?n.on("selectstart.drag",Oe,rt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ya(e,t){var n=e.document.documentElement,i=ce(e).on("dragstart.drag",null);t&&(i.on("click.drag",Oe,rt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const vt=e=>()=>e;function Kr(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}Kr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ah(e){return!e.ctrlKey&&!e.button}function uh(){return this.parentNode}function ch(e,t){return t??{x:e.x,y:e.y}}function lh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wa(){var e=ah,t=uh,n=ch,i=lh,r={},o=Ot("start","drag","end"),s=0,a,u,l,c,f=0;function d(w){w.on("mousedown.drag",h).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,sh).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,_){if(!(c||!e.call(this,w,_))){var b=p(this,t.call(this,w,_),w,_,"mouse");b&&(ce(w.view).on("mousemove.drag",g,rt).on("mouseup.drag",y,rt),Ga(w.view),nn(w),l=!1,a=w.clientX,u=w.clientY,b("start",w))}}function g(w){if(Oe(w),!l){var _=w.clientX-a,b=w.clientY-u;l=_*_+b*b>f}r.mouse("drag",w)}function y(w){ce(w.view).on("mousemove.drag mouseup.drag",null),Ya(w.view,l),Oe(w),r.mouse("end",w)}function v(w,_){if(e.call(this,w,_)){var b=w.changedTouches,E=t.call(this,w,_),N=b.length,C,q;for(C=0;C<N;++C)(q=p(this,E,w,_,b[C].identifier,b[C]))&&(nn(w),q("start",w,b[C]))}}function m(w){var _=w.changedTouches,b=_.length,E,N;for(E=0;E<b;++E)(N=r[_[E].identifier])&&(Oe(w),N("drag",w,_[E]))}function x(w){var _=w.changedTouches,b=_.length,E,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<b;++E)(N=r[_[E].identifier])&&(nn(w),N("end",w,_[E]))}function p(w,_,b,E,N,C){var q=o.copy(),k=de(C||b,_),M,z,S;if((S=n.call(w,new Kr("beforestart",{sourceEvent:b,target:d,identifier:N,active:s,x:k[0],y:k[1],dx:0,dy:0,dispatch:q}),E))!=null)return M=S.x-k[0]||0,z=S.y-k[1]||0,function P(A,D,L){var R=k,H;switch(A){case"start":r[N]=P,H=s++;break;case"end":delete r[N],--s;case"drag":k=de(L||D,_),H=s;break}q.call(A,w,new Kr(A,{sourceEvent:D,subject:S,target:d,identifier:N,active:H,x:k[0]+M,y:k[1]+z,dx:k[0]-R[0],dy:k[1]-R[1],dispatch:q}),E)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:vt(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:vt(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:vt(w),d):n},d.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:vt(!!w),d):i},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}var Be=0,et=0,Qe=0,Xa=1e3,It,tt,At=0,Re=0,Bt=0,it=typeof performance=="object"&&performance.now?performance:Date,Ua=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gi(){return Re||(Ua(fh),Re=it.now()+Bt)}function fh(){Re=0}function Pt(){this._call=this._time=this._next=null}Pt.prototype=Ka.prototype={constructor:Pt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?gi():+n)+(t==null?0:+t),!this._next&&tt!==this&&(tt?tt._next=this:It=this,tt=this),this._call=e,this._time=n,Zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zr())}};function Ka(e,t,n){var i=new Pt;return i.restart(e,t,n),i}function dh(){gi(),++Be;for(var e=It,t;e;)(t=Re-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Be}function Hi(){Re=(At=it.now())+Bt,Be=et=0;try{dh()}finally{Be=0,ph(),Re=0}}function hh(){var e=it.now(),t=e-At;t>Xa&&(Bt-=t,At=e)}function ph(){for(var e,t=It,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:It=n);tt=e,Zr(i)}function Zr(e){if(!Be){et&&(et=clearTimeout(et));var t=e-Re;t>24?(e<1/0&&(et=setTimeout(Hi,e-it.now()-Bt)),Qe&&(Qe=clearInterval(Qe))):(Qe||(At=it.now(),Qe=setInterval(hh,Xa)),Be=1,Ua(Hi))}}function ji(e,t,n){var i=new Pt;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var gh=Ot("start","end","cancel","interrupt"),mh=[],Za=0,Gi=1,Qr=2,Nt=3,Yi=4,Jr=5,Ct=6;function Ht(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;vh(e,n,{name:t,index:i,group:r,on:gh,tween:mh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Za})}function mi(e,t){var n=me(e,t);if(n.state>Za)throw new Error("too late; already scheduled");return n}function ye(e,t){var n=me(e,t);if(n.state>Nt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Ka(o,0,n.time);function o(l){n.state=Gi,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==Gi)return u();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Nt)return ji(s);h.state===Yi?(h.state=Ct,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Ct,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(ji(function(){n.state===Nt&&(n.state=Yi,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Qr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Qr){for(n.state=Nt,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Jr,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===Jr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ct,n.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function kt(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>Qr&&i.state<Jr,i.state=Ct,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function yh(e){return this.each(function(){kt(this,e)})}function wh(e,t){var n,i;return function(){var r=ye(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function xh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=ye(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===t){r[u]=a;break}u===l&&r.push(a)}o.tween=r}}function _h(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=me(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?wh:xh)(n,e,t))}function vi(e,t,n){var i=e._id;return e.each(function(){var r=ye(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return me(r,i).value[t]}}function Qa(e,t){var n;return(typeof t=="number"?Tl:t instanceof Oi?Fi:(n=Oi(t))?(t=n,Fi):Dl)(e,t)}function bh(e){return function(){this.removeAttribute(e)}}function Eh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function Nh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function Ch(e,t,n){var i,r,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===i&&u===r?o:(r=u,o=t(i=s,a)))}}function kh(e,t,n){var i,r,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===i&&u===r?o:(r=u,o=t(i=s,a)))}}function Mh(e,t){var n=Vt(e),i=n==="transform"?zl:Qa;return this.attrTween(e,typeof t=="function"?(n.local?kh:Ch)(n,i,vi(this,"attr."+e,t)):t==null?(n.local?Eh:bh)(n):(n.local?Nh:Sh)(n,i,t))}function Ih(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ah(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ph(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Ah(e,o)),n}return r._value=t,r}function Rh(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Ih(e,o)),n}return r._value=t,r}function Lh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Vt(e);return this.tween(n,(i.local?Ph:Rh)(i,t))}function qh(e,t){return function(){mi(this,e).delay=+t.apply(this,arguments)}}function Th(e,t){return t=+t,function(){mi(this,e).delay=t}}function Dh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qh:Th)(t,e)):me(this.node(),t).delay}function zh(e,t){return function(){ye(this,e).duration=+t.apply(this,arguments)}}function $h(e,t){return t=+t,function(){ye(this,e).duration=t}}function Fh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zh:$h)(t,e)):me(this.node(),t).duration}function Oh(e,t){if(typeof t!="function")throw new Error;return function(){ye(this,e).ease=t}}function Vh(e){var t=this._id;return arguments.length?this.each(Oh(t,e)):me(this.node(),t).ease}function Bh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,e).ease=n}}function Hh(e){if(typeof e!="function")throw new Error;return this.each(Bh(this._id,e))}function jh(e){typeof e!="function"&&(e=Ta(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new be(i,this._parents,this._name,this._id)}function Gh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<i;++a)s[a]=t[a];return new be(s,this._parents,this._name,this._id)}function Yh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Wh(e,t,n){var i,r,o=Yh(t)?mi:ye;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function Xh(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Wh(n,e,t))}function Uh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Kh(){return this.on("end.remove",Uh(this._id))}function Zh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hi(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],u=a.length,l=o[s]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,Ht(l[d],t,n,d,l,me(c,n)));return new be(o,this._parents,t,n)}function Qh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qa(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var u=i[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,g=me(c,n),y=0,v=d.length;y<v;++y)(h=d[y])&&Ht(h,t,n,y,d,g);o.push(d),s.push(c)}return new be(o,s,t,n)}var Jh=lt.prototype.constructor;function ep(){return new Jh(this._groups,this._parents)}function tp(e,t){var n,i,r;return function(){var o=Ve(this,e),s=(this.style.removeProperty(e),Ve(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function Ja(e){return function(){this.style.removeProperty(e)}}function np(e,t,n){var i,r=n+"",o;return function(){var s=Ve(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function rp(e,t,n){var i,r,o;return function(){var s=Ve(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Ve(this,e))),s===u?null:s===i&&u===r?o:(r=u,o=t(i=s,a))}}function ip(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var u=ye(this,e),l=u.on,c=u.value[o]==null?a||(a=Ja(t)):void 0;(l!==n||r!==c)&&(i=(n=l).copy()).on(s,r=c),u.on=i}}function op(e,t,n){var i=(e+="")=="transform"?$l:Qa;return t==null?this.styleTween(e,tp(e,i)).on("end.style."+e,Ja(e)):typeof t=="function"?this.styleTween(e,rp(e,i,vi(this,"style."+e,t))).each(ip(this._id,e)):this.styleTween(e,np(e,i,t),n).on("end.style."+e,null)}function sp(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function ap(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&sp(e,s,n)),i}return o._value=t,o}function up(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ap(e,t,n??""))}function cp(e){return function(){this.textContent=e}}function lp(e){return function(){var t=e(this);this.textContent=t??""}}function fp(e){return this.tween("text",typeof e=="function"?lp(vi(this,"text",e)):cp(e==null?"":e+""))}function dp(e){return function(t){this.textContent=e.call(this,t)}}function hp(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&dp(r)),t}return i._value=e,i}function pp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,hp(e))}function gp(){for(var e=this._name,t=this._id,n=eu(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=me(u,t);Ht(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new be(i,this._parents,e,n)}function mp(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--r===0&&o()}};n.each(function(){var l=ye(this,i),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),r===0&&o()})}var vp=0;function be(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function eu(){return++vp}var xe=lt.prototype;be.prototype={constructor:be,select:Zh,selectAll:Qh,selectChild:xe.selectChild,selectChildren:xe.selectChildren,filter:jh,merge:Gh,selection:ep,transition:gp,call:xe.call,nodes:xe.nodes,node:xe.node,size:xe.size,empty:xe.empty,each:xe.each,on:Xh,attr:Mh,attrTween:Lh,style:op,styleTween:up,text:fp,textTween:pp,remove:Kh,tween:_h,delay:Dh,duration:Fh,ease:Vh,easeVarying:Hh,end:mp,[Symbol.iterator]:xe[Symbol.iterator]};function yp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wp={time:null,delay:0,duration:250,ease:yp};function xp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _p(e){var t,n;e instanceof be?(t=e._id,e=e._name):(t=eu(),(n=wp).time=gi(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&Ht(u,e,t,l,s,n||xp(u,t));return new be(i,this._parents,e,t)}lt.prototype.interrupt=yh;lt.prototype.transition=_p;const yt=e=>()=>e;function bp(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function _e(e,t,n){this.k=e,this.x=t,this.y=n}_e.prototype={constructor:_e,scale:function(e){return e===1?this:new _e(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _e(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jt=new _e(1,0,0);tu.prototype=_e.prototype;function tu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return jt;return e.__zoom}function rn(e){e.stopImmediatePropagation()}function Je(e){e.preventDefault(),e.stopImmediatePropagation()}function Ep(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Sp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wi(){return this.__zoom||jt}function Np(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cp(){return navigator.maxTouchPoints||"ontouchstart"in this}function kp(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function nu(){var e=Ep,t=Sp,n=kp,i=Np,r=Cp,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Et,l=Ot("start","zoom","end"),c,f,d,h=500,g=150,y=0,v=10;function m(S){S.property("__zoom",Wi).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",q).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(S,P,A,D){var L=S.selection?S.selection():S;L.property("__zoom",Wi),S!==L?_(S,P,A,D):L.interrupt().each(function(){b(this,arguments).event(D).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},m.scaleBy=function(S,P,A,D){m.scaleTo(S,function(){var L=this.__zoom.k,R=typeof P=="function"?P.apply(this,arguments):P;return L*R},A,D)},m.scaleTo=function(S,P,A,D){m.transform(S,function(){var L=t.apply(this,arguments),R=this.__zoom,H=A==null?w(L):typeof A=="function"?A.apply(this,arguments):A,G=R.invert(H),j=typeof P=="function"?P.apply(this,arguments):P;return n(p(x(R,j),H,G),L,s)},A,D)},m.translateBy=function(S,P,A,D){m.transform(S,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),s)},null,D)},m.translateTo=function(S,P,A,D,L){m.transform(S,function(){var R=t.apply(this,arguments),H=this.__zoom,G=D==null?w(R):typeof D=="function"?D.apply(this,arguments):D;return n(jt.translate(G[0],G[1]).scale(H.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof A=="function"?-A.apply(this,arguments):-A),R,s)},D,L)};function x(S,P){return P=Math.max(o[0],Math.min(o[1],P)),P===S.k?S:new _e(P,S.x,S.y)}function p(S,P,A){var D=P[0]-A[0]*S.k,L=P[1]-A[1]*S.k;return D===S.x&&L===S.y?S:new _e(S.k,D,L)}function w(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function _(S,P,A,D){S.on("start.zoom",function(){b(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(D).end()}).tween("zoom",function(){var L=this,R=arguments,H=b(L,R).event(D),G=t.apply(L,R),j=A==null?w(G):typeof A=="function"?A.apply(L,R):A,W=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),I=L.__zoom,T=typeof P=="function"?P.apply(L,R):P,F=u(I.invert(j).concat(W/I.k),T.invert(j).concat(W/T.k));return function(V){if(V===1)V=T;else{var B=F(V),Y=W/B[2];V=new _e(Y,j[0]-B[0]*Y,j[1]-B[1]*Y)}H.zoom(null,V)}})}function b(S,P,A){return!A&&S.__zooming||new E(S,P)}function E(S,P){this.that=S,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,P),this.taps=0}E.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,P){return this.mouse&&S!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var P=ce(this.that).datum();l.call(S,this.that,new bp(S,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:l}),P)}};function N(S,...P){if(!e.apply(this,arguments))return;var A=b(this,P).event(S),D=this.__zoom,L=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,i.apply(this,arguments)))),R=de(S);if(A.wheel)(A.mouse[0][0]!==R[0]||A.mouse[0][1]!==R[1])&&(A.mouse[1]=D.invert(A.mouse[0]=R)),clearTimeout(A.wheel);else{if(D.k===L)return;A.mouse=[R,D.invert(R)],kt(this),A.start()}Je(S),A.wheel=setTimeout(H,g),A.zoom("mouse",n(p(x(D,L),A.mouse[0],A.mouse[1]),A.extent,s));function H(){A.wheel=null,A.end()}}function C(S,...P){if(d||!e.apply(this,arguments))return;var A=S.currentTarget,D=b(this,P,!0).event(S),L=ce(S.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",W,!0),R=de(S,A),H=S.clientX,G=S.clientY;Ga(S.view),rn(S),D.mouse=[R,this.__zoom.invert(R)],kt(this),D.start();function j(I){if(Je(I),!D.moved){var T=I.clientX-H,F=I.clientY-G;D.moved=T*T+F*F>y}D.event(I).zoom("mouse",n(p(D.that.__zoom,D.mouse[0]=de(I,A),D.mouse[1]),D.extent,s))}function W(I){L.on("mousemove.zoom mouseup.zoom",null),Ya(I.view,D.moved),Je(I),D.event(I).end()}}function q(S,...P){if(e.apply(this,arguments)){var A=this.__zoom,D=de(S.changedTouches?S.changedTouches[0]:S,this),L=A.invert(D),R=A.k*(S.shiftKey?.5:2),H=n(p(x(A,R),D,L),t.apply(this,P),s);Je(S),a>0?ce(this).transition().duration(a).call(_,H,D,S):ce(this).call(m.transform,H,D,S)}}function k(S,...P){if(e.apply(this,arguments)){var A=S.touches,D=A.length,L=b(this,P,S.changedTouches.length===D).event(S),R,H,G,j;for(rn(S),H=0;H<D;++H)G=A[H],j=de(G,this),j=[j,this.__zoom.invert(j),G.identifier],L.touch0?!L.touch1&&L.touch0[2]!==j[2]&&(L.touch1=j,L.taps=0):(L.touch0=j,R=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),R&&(L.taps<2&&(f=j[0],c=setTimeout(function(){c=null},h)),kt(this),L.start())}}function M(S,...P){if(this.__zooming){var A=b(this,P).event(S),D=S.changedTouches,L=D.length,R,H,G,j;for(Je(S),R=0;R<L;++R)H=D[R],G=de(H,this),A.touch0&&A.touch0[2]===H.identifier?A.touch0[0]=G:A.touch1&&A.touch1[2]===H.identifier&&(A.touch1[0]=G);if(H=A.that.__zoom,A.touch1){var W=A.touch0[0],I=A.touch0[1],T=A.touch1[0],F=A.touch1[1],V=(V=T[0]-W[0])*V+(V=T[1]-W[1])*V,B=(B=F[0]-I[0])*B+(B=F[1]-I[1])*B;H=x(H,Math.sqrt(V/B)),G=[(W[0]+T[0])/2,(W[1]+T[1])/2],j=[(I[0]+F[0])/2,(I[1]+F[1])/2]}else if(A.touch0)G=A.touch0[0],j=A.touch0[1];else return;A.zoom("touch",n(p(H,G,j),A.extent,s))}}function z(S,...P){if(this.__zooming){var A=b(this,P).event(S),D=S.changedTouches,L=D.length,R,H;for(rn(S),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),R=0;R<L;++R)H=D[R],A.touch0&&A.touch0[2]===H.identifier?delete A.touch0:A.touch1&&A.touch1[2]===H.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(H=de(H,this),Math.hypot(f[0]-H[0],f[1]-H[1])<v)){var G=ce(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return m.wheelDelta=function(S){return arguments.length?(i=typeof S=="function"?S:yt(+S),m):i},m.filter=function(S){return arguments.length?(e=typeof S=="function"?S:yt(!!S),m):e},m.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:yt(!!S),m):r},m.extent=function(S){return arguments.length?(t=typeof S=="function"?S:yt([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),m):t},m.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],m):[o[0],o[1]]},m.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(S){return arguments.length?(n=S,m):n},m.duration=function(S){return arguments.length?(a=+S,m):a},m.interpolate=function(S){return arguments.length?(u=S,m):u},m.on=function(){var S=l.on.apply(l,arguments);return S===l?m:S},m.clickDistance=function(S){return arguments.length?(y=(S=+S)*S,m):Math.sqrt(y)},m.tapDistance=function(S){return arguments.length?(v=+S,m):v},m}const ve={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ot=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ru=["Enter"," ","Escape"],iu={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var He;(function(e){e.Strict="strict",e.Loose="loose"})(He||(He={}));var Pe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pe||(Pe={}));var st;(function(e){e.Partial="partial",e.Full="full"})(st||(st={}));const ou={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ke;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ke||(ke={}));var Rt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Rt||(Rt={}));var Z;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Z||(Z={}));const Xi={[Z.Left]:Z.Right,[Z.Right]:Z.Left,[Z.Top]:Z.Bottom,[Z.Bottom]:Z.Top};function su(e){return e===null?null:e?"valid":"invalid"}const au=e=>"id"in e&&"source"in e&&"target"in e,Mp=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),yi=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ft=(e,t=[0,0])=>{const{width:n,height:i}=Ee(e),r=e.origin??t,o=n*r[0],s=i*r[1];return{x:e.position.x-o,y:e.position.y-s}},Ip=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let s=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(r):yi(r)?r:t.nodeLookup.get(r.id));const a=s?Lt(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Gt(i,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yt(n)},dt=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(r=>{(t.filter===void 0||t.filter(r))&&(n=Gt(n,Lt(r)),i=!0)}),i?Yt(n):{x:0,y:0,width:0,height:0}},wi=(e,t,[n,i,r]=[0,0,1],o=!1,s=!1)=>{const a={...pt(t,[n,i,r]),width:t.width/r,height:t.height/r},u=[];for(const l of e.values()){const{measured:c,selectable:f=!0,hidden:d=!1}=l;if(s&&!f||d)continue;const h=c.width??l.width??l.initialWidth??null,g=c.height??l.height??l.initialHeight??null,y=at(a,Ge(l)),v=(h??0)*(g??0),m=o&&y>0;(!l.internals.handleBounds||m||y>=v||l.dragging)&&u.push(l)}return u},Ap=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Pp(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function Rp({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=Pp(e,s),u=dt(a),l=xi(u,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await i.setViewport(l,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function uu({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:u,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},c=s.origin??i;let f=s.extent||r;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",ve.error005());else{const h=a.measured.width,g=a.measured.height;h&&g&&(f=[[u,l],[u+h,l+g]])}else a&&Ye(s.extent)&&(f=[[s.extent[0][0]+u,s.extent[0][1]+l],[s.extent[1][0]+u,s.extent[1][1]+l]]);const d=Ye(f)?Le(t,f,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",ve.error015())),{position:{x:d.x-u+(s.measured.width??0)*c[0],y:d.y-l+(s.measured.height??0)*c[1]},positionAbsolute:d}}async function Lp({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=o.has(d.id),g=!h&&d.parentId&&s.find(y=>y.id===d.parentId);(h||g)&&s.push(d)}const a=new Set(t.map(d=>d.id)),u=i.filter(d=>d.deletable!==!1),c=Ap(s,u);for(const d of u)a.has(d.id)&&!c.find(g=>g.id===d.id)&&c.push(d);if(!r)return{edges:c,nodes:s};const f=await r({nodes:s,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:s}:{edges:[],nodes:[]}:f}const je=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Le=(e={x:0,y:0},t,n)=>({x:je(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:je(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function cu(e,t,n){const{width:i,height:r}=Ee(n),{x:o,y:s}=n.internals.positionAbsolute;return Le(e,[[o,s],[o+i,s+r]],t)}const Ui=(e,t,n)=>e<t?je(Math.abs(e-t),1,t)/t:e>n?-je(Math.abs(e-n),1,t)/t:0,lu=(e,t,n=15,i=40)=>{const r=Ui(e.x,i,t.width-i)*n,o=Ui(e.y,i,t.height-i)*n;return[r,o]},Gt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ei=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Yt=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Ge=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=yi(e)?e.internals.positionAbsolute:ft(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Lt=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=yi(e)?e.internals.positionAbsolute:ft(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},fu=(e,t)=>Yt(Gt(ei(e),ei(t))),at=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},Ki=e=>he(e.width)&&he(e.height)&&he(e.x)&&he(e.y),he=e=>!isNaN(e)&&isFinite(e),qp=(e,t)=>{},ht=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),pt=({x:e,y:t},[n,i,r],o=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-i)/r};return o?ht(a,s):a},qt=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i});function ze(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Tp(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=ze(e,n),r=ze(e,t);return{top:i,right:r,bottom:i,left:r,x:r*2,y:i*2}}if(typeof e=="object"){const i=ze(e.top??e.y??0,n),r=ze(e.bottom??e.y??0,n),o=ze(e.left??e.x??0,t),s=ze(e.right??e.x??0,t);return{top:i,right:s,bottom:r,left:o,x:o+s,y:i+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Dp(e,t,n,i,r,o){const{x:s,y:a}=qt(e,[t,n,i]),{x:u,y:l}=qt({x:e.x+e.width,y:e.y+e.height},[t,n,i]),c=r-u,f=o-l;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(f)}}const xi=(e,t,n,i,r,o)=>{const s=Tp(o,t,n),a=(t-s.x)/e.width,u=(n-s.y)/e.height,l=Math.min(a,u),c=je(l,i,r),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*c,g=n/2-d*c,y=Dp(e,h,g,c,t,n),v={left:Math.min(y.left-s.left,0),top:Math.min(y.top-s.top,0),right:Math.min(y.right-s.right,0),bottom:Math.min(y.bottom-s.bottom,0)};return{x:h-v.left+v.right,y:g-v.top+v.bottom,zoom:c}},ut=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ye(e){return e!=null&&e!=="parent"}function Ee(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function du(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function hu(e,t={width:0,height:0},n,i,r){const o={...e},s=i.get(n);if(s){const a=s.origin||r;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function Zi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function zp(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}function $p(e){return{...iu,...e||{}}}function nt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:s}=pe(e),a=pt({x:o-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},i),{x:u,y:l}=n?ht(a,t):a;return{xSnapped:u,ySnapped:l,...a}}const _i=e=>({width:e.offsetWidth,height:e.offsetHeight}),pu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Fp=["INPUT","SELECT","TEXTAREA"];function gu(e){var i,r;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Fp.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const mu=e=>"clientX"in e,pe=(e,t)=>{var o,s;const n=mu(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Qi=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,..._i(s)}})};function vu({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+r*.375+s*.375+n*.125,l=t*.125+o*.375+a*.375+i*.125,c=Math.abs(u-e),f=Math.abs(l-t);return[u,l,c,f]}function wt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ji({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case Z.Left:return[t-wt(t-i,o),n];case Z.Right:return[t+wt(i-t,o),n];case Z.Top:return[t,n-wt(n-r,o)];case Z.Bottom:return[t,n+wt(r-n,o)]}}function yu({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:i,targetY:r,targetPosition:o=Z.Top,curvature:s=.25}){const[a,u]=Ji({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}),[l,c]=Ji({pos:o,x1:i,y1:r,x2:e,y2:t,c:s}),[f,d,h,g]=vu({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:a,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${u} ${l},${c} ${i},${r}`,f,d,h,g]}function wu({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,s=Math.abs(i-t)/2,a=i<t?i+s:i-s;return[o,a,r,s]}function Op({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1,zIndexMode:o="basic"}){if(o==="manual")return i;const s=r&&n?i+1e3:i,a=Math.max(e.parentId||r&&e.selected?e.internals.z:0,t.parentId||r&&t.selected?t.internals.z:0);return s+a}function Vp({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=Gt(Lt(e),Lt(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return at(s,Yt(o))>0}const Bp=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Hp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),jp=(e,t,n={})=>{if(!e.source||!e.target)return t;const i=n.getEdgeId||Bp;let r;return au(e)?r={...e}:r={...e,id:i(e)},Hp(r,t)?t:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,t.concat(r))};function xu({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,s,a]=wu({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,s,a]}const eo={[Z.Left]:{x:-1,y:0},[Z.Right]:{x:1,y:0},[Z.Top]:{x:0,y:-1},[Z.Bottom]:{x:0,y:1}},Gp=({source:e,sourcePosition:t=Z.Bottom,target:n})=>t===Z.Left||t===Z.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},to=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Yp({source:e,sourcePosition:t=Z.Bottom,target:n,targetPosition:i=Z.Top,center:r,offset:o,stepPosition:s}){const a=eo[t],u=eo[i],l={x:e.x+a.x*o,y:e.y+a.y*o},c={x:n.x+u.x*o,y:n.y+u.y*o},f=Gp({source:l,sourcePosition:t,target:c}),d=f.x!==0?"x":"y",h=f[d];let g=[],y,v;const m={x:0,y:0},x={x:0,y:0},[,,p,w]=wu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*u[d]===-1){d==="x"?(y=r.x??l.x+(c.x-l.x)*s,v=r.y??(l.y+c.y)/2):(y=r.x??(l.x+c.x)/2,v=r.y??l.y+(c.y-l.y)*s);const b=[{x:y,y:l.y},{x:y,y:c.y}],E=[{x:l.x,y:v},{x:c.x,y:v}];a[d]===h?g=d==="x"?b:E:g=d==="x"?E:b}else{const b=[{x:l.x,y:c.y}],E=[{x:c.x,y:l.y}];if(d==="x"?g=a.x===h?E:b:g=a.y===h?b:E,t===i){const M=Math.abs(e[d]-n[d]);if(M<=o){const z=Math.min(o-1,o-M);a[d]===h?m[d]=(l[d]>e[d]?-1:1)*z:x[d]=(c[d]>n[d]?-1:1)*z}}if(t!==i){const M=d==="x"?"y":"x",z=a[d]===u[M],S=l[M]>c[M],P=l[M]<c[M];(a[d]===1&&(!z&&S||z&&P)||a[d]!==1&&(!z&&P||z&&S))&&(g=d==="x"?b:E)}const N={x:l.x+m.x,y:l.y+m.y},C={x:c.x+x.x,y:c.y+x.y},q=Math.max(Math.abs(N.x-g[0].x),Math.abs(C.x-g[0].x)),k=Math.max(Math.abs(N.y-g[0].y),Math.abs(C.y-g[0].y));q>=k?(y=(N.x+C.x)/2,v=g[0].y):(y=g[0].x,v=(N.y+C.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...g,{x:c.x+x.x,y:c.y+x.y},n],y,v,p,w]}function Wp(e,t,n,i){const r=Math.min(to(e,t)/2,to(t,n)/2,i),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+r*l},${s}Q ${o},${s} ${o},${s+r*c}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+r*u}Q ${o},${s} ${o+r*a},${s}`}function ti({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:i,targetY:r,targetPosition:o=Z.Top,borderRadius:s=5,centerX:a,centerY:u,offset:l=20,stepPosition:c=.5}){const[f,d,h,g,y]=Yp({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:a,y:u},offset:l,stepPosition:c});return[f.reduce((m,x,p)=>{let w="";return p>0&&p<f.length-1?w=Wp(f[p-1],x,f[p+1],s):w=`${p===0?"M":"L"}${x.x} ${x.y}`,m+=w,m},""),d,h,g,y]}function no(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Xp(e){var f;const{sourceNode:t,targetNode:n}=e;if(!no(t)||!no(n))return null;const i=t.internals.handleBounds||ro(t.handles),r=n.internals.handleBounds||ro(n.handles),o=io((i==null?void 0:i.source)??[],e.sourceHandle),s=io(e.connectionMode===He.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!s)return(f=e.onError)==null||f.call(e,"008",ve.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||Z.Bottom,u=(s==null?void 0:s.position)||Z.Top,l=qe(t,o,a),c=qe(n,s,u);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:u}}function ro(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function qe(e,t,n=Z.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Ee(e);if(i)return{x:r+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case Z.Top:return{x:r+s/2,y:o};case Z.Right:return{x:r+s,y:o+a/2};case Z.Bottom:return{x:r+s/2,y:o+a};case Z.Left:return{x:r,y:o+a/2}}}function io(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function ni(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Up(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||i,a.markerEnd||r].forEach(u=>{if(u&&typeof u=="object"){const l=ni(u,t);o.has(l)||(s.push({id:l,color:u.color||n,...u}),o.add(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const _u=1e3,Kp=10,bi={nodeOrigin:[0,0],nodeExtent:ot,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},Zp={...bi,checkEquality:!0};function Ei(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Qp(e,t,n){const i=Ei(bi,n);for(const r of e.values())if(r.parentId)Ni(r,e,t,i);else{const o=ft(r,i.nodeOrigin),s=Ye(r.extent)?r.extent:i.nodeExtent,a=Le(o,s,Ee(r));r.internals.positionAbsolute=a}}function Jp(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],i=[];for(const r of e.handles){const o={id:r.id,width:r.width??1,height:r.height??1,nodeId:e.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?n.push(o):r.type==="target"&&i.push(o)}return{source:n,target:i}}function Si(e){return e==="manual"}function ri(e,t,n,i={}){var l,c;const r=Ei(Zp,i),o={i:0},s=new Map(t),a=r!=null&&r.elevateNodesOnSelect&&!Si(r.zIndexMode)?_u:0;let u=e.length>0;t.clear(),n.clear();for(const f of e){let d=s.get(f.id);if(r.checkEquality&&f===(d==null?void 0:d.internals.userNode))t.set(f.id,d);else{const h=ft(f,r.nodeOrigin),g=Ye(f.extent)?f.extent:r.nodeExtent,y=Le(h,g,Ee(f));d={...r.defaults,...f,measured:{width:(l=f.measured)==null?void 0:l.width,height:(c=f.measured)==null?void 0:c.height},internals:{positionAbsolute:y,handleBounds:Jp(f,d),z:bu(f,a,r.zIndexMode),userNode:f}},t.set(f.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),f.parentId&&Ni(d,t,n,i,o)}return u}function eg(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ni(e,t,n,i,r){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:u}=Ei(bi,i),l=e.parentId,c=t.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}eg(e,n),r&&!c.parentId&&c.internals.rootParentIndex===void 0&&u==="auto"&&(c.internals.rootParentIndex=++r.i,c.internals.z=c.internals.z+r.i*Kp),r&&c.internals.rootParentIndex!==void 0&&(r.i=c.internals.rootParentIndex);const f=o&&!Si(u)?_u:0,{x:d,y:h,z:g}=tg(e,c,s,a,f,u),{positionAbsolute:y}=e.internals,v=d!==y.x||h!==y.y;(v||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:d,y:h}:y,z:g}})}function bu(e,t,n){const i=he(e.zIndex)?e.zIndex:0;return Si(n)?i:i+(e.selected?t:0)}function tg(e,t,n,i,r,o){const{x:s,y:a}=t.internals.positionAbsolute,u=Ee(e),l=ft(e,n),c=Ye(e.extent)?Le(l,e.extent,u):l;let f=Le({x:s+c.x,y:a+c.y},i,u);e.extent==="parent"&&(f=cu(f,u,t));const d=bu(e,r,o),h=t.internals.z??0;return{x:f.x,y:f.y,z:h>=d?h+1:d}}function Ci(e,t,n,i=[0,0]){var s;const r=[],o=new Map;for(const a of e){const u=t.get(a.parentId);if(!u)continue;const l=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Ge(u),c=fu(l,a.rect);o.set(a.parentId,{expandedRect:c,parent:u})}return o.size>0&&o.forEach(({expandedRect:a,parent:u},l)=>{var p;const c=u.internals.positionAbsolute,f=Ee(u),d=u.origin??i,h=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,g=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,y=Math.max(f.width,Math.round(a.width)),v=Math.max(f.height,Math.round(a.height)),m=(y-f.width)*d[0],x=(v-f.height)*d[1];(h>0||g>0||m||x)&&(r.push({id:l,type:"position",position:{x:u.position.x-h+m,y:u.position.y-g+x}}),(p=n.get(l))==null||p.forEach(w=>{e.some(_=>_.id===w.id)||r.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+g}})})),(f.width<a.width||f.height<a.height||h||g)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:y+(h?d[0]*h-m:0),height:v+(g?d[1]*g-x:0)}})}),r}function ng(e,t,n,i,r,o,s){const a=i==null?void 0:i.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const l=[],c=window.getComputedStyle(a),{m22:f}=new window.DOMMatrixReadOnly(c.transform),d=[];for(const h of e.values()){const g=t.get(h.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),u=!0;continue}const y=_i(h.nodeElement),v=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(v||!g.internals.handleBounds||h.force))){const x=h.nodeElement.getBoundingClientRect(),p=Ye(g.extent)?g.extent:o;let{positionAbsolute:w}=g.internals;g.parentId&&g.extent==="parent"?w=cu(w,y,t.get(g.parentId)):p&&(w=Le(w,p,y));const _={...g,measured:y,internals:{...g.internals,positionAbsolute:w,handleBounds:{source:Qi("source",h.nodeElement,x,f,g.id),target:Qi("target",h.nodeElement,x,f,g.id)}}};t.set(g.id,_),g.parentId&&Ni(_,t,n,{nodeOrigin:r,zIndexMode:s}),u=!0,v&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&d.push({id:g.id,parentId:g.parentId,rect:Ge(_,r)}))}}if(d.length>0){const h=Ci(d,t,n,r);l.push(...h)}return{changes:l,updatedInternals:u}}async function rg({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function oo(e,t,n,i,r,o){let s=r;const a=i.get(s)||new Map;i.set(s,a.set(n,t)),s=`${r}-${e}`;const u=i.get(s)||new Map;if(i.set(s,u.set(n,t)),o){s=`${r}-${e}-${o}`;const l=i.get(s)||new Map;i.set(s,l.set(n,t))}}function Eu(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,u={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a},l=`${r}-${s}--${o}-${a}`,c=`${o}-${a}--${r}-${s}`;oo("source",u,c,e,r,s),oo("target",u,l,e,o,a),t.set(i.id,i)}}function Su(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Su(n,t):!1}function so(e,t,n){var r;let i=e;do{if((r=i==null?void 0:i.matches)!=null&&r.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function ig(e,t,n,i){const r=new Map;for(const[o,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Su(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&r.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function on({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,a,u;const r=[];for(const[l,c]of t){const f=(s=n.get(l))==null?void 0:s.internals.userNode;f&&r.push({...f,position:c.position,dragging:i})}if(!e)return[r[0],r];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((u=t.get(e))==null?void 0:u.position)||o.position,dragging:i}:r[0],r]}function og({dragItems:e,snapGrid:t,x:n,y:i}){const r=e.values().next().value;if(!r)return null;const o={x:n-r.distance.x,y:i-r.distance.y},s=ht(o,t);return{x:s.x-o.x,y:s.y-o.y}}function sg({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,a=new Map,u=!1,l={x:0,y:0},c=null,f=!1,d=null,h=!1,g=!1,y=null;function v({noDragClassName:x,handleSelector:p,domNode:w,isSelectable:_,nodeId:b,nodeClickDistance:E=0}){d=ce(w);function N({x:M,y:z}){const{nodeLookup:S,nodeExtent:P,snapGrid:A,snapToGrid:D,nodeOrigin:L,onNodeDrag:R,onSelectionDrag:H,onError:G,updateNodePositions:j}=t();o={x:M,y:z};let W=!1;const I=a.size>1,T=I&&P?ei(dt(a)):null,F=I&&D?og({dragItems:a,snapGrid:A,x:M,y:z}):null;for(const[V,B]of a){if(!S.has(V))continue;let Y={x:M-B.distance.x,y:z-B.distance.y};D&&(Y=F?{x:Math.round(Y.x+F.x),y:Math.round(Y.y+F.y)}:ht(Y,A));let U=null;if(I&&P&&!B.extent&&T){const{positionAbsolute:X}=B.internals,J=X.x-T.x+P[0][0],ne=X.x+B.measured.width-T.x2+P[1][0],ee=X.y-T.y+P[0][1],ae=X.y+B.measured.height-T.y2+P[1][1];U=[[J,ee],[ne,ae]]}const{position:K,positionAbsolute:Q}=uu({nodeId:V,nextPosition:Y,nodeLookup:S,nodeExtent:U||P,nodeOrigin:L,onError:G});W=W||B.position.x!==K.x||B.position.y!==K.y,B.position=K,B.internals.positionAbsolute=Q}if(g=g||W,!!W&&(j(a,!0),y&&(i||R||!b&&H))){const[V,B]=on({nodeId:b,dragItems:a,nodeLookup:S});i==null||i(y,a,V,B),R==null||R(y,V,B),b||H==null||H(y,B)}}async function C(){if(!c)return;const{transform:M,panBy:z,autoPanSpeed:S,autoPanOnNodeDrag:P}=t();if(!P){u=!1,cancelAnimationFrame(s);return}const[A,D]=lu(l,c,S);(A!==0||D!==0)&&(o.x=(o.x??0)-A/M[2],o.y=(o.y??0)-D/M[2],await z({x:A,y:D})&&N(o)),s=requestAnimationFrame(C)}function q(M){var I;const{nodeLookup:z,multiSelectionActive:S,nodesDraggable:P,transform:A,snapGrid:D,snapToGrid:L,selectNodesOnDrag:R,onNodeDragStart:H,onSelectionDragStart:G,unselectNodesAndEdges:j}=t();f=!0,(!R||!_)&&!S&&b&&((I=z.get(b))!=null&&I.selected||j()),_&&R&&b&&(e==null||e(b));const W=nt(M.sourceEvent,{transform:A,snapGrid:D,snapToGrid:L,containerBounds:c});if(o=W,a=ig(z,P,W,b),a.size>0&&(n||H||!b&&G)){const[T,F]=on({nodeId:b,dragItems:a,nodeLookup:z});n==null||n(M.sourceEvent,a,T,F),H==null||H(M.sourceEvent,T,F),b||G==null||G(M.sourceEvent,F)}}const k=Wa().clickDistance(E).on("start",M=>{const{domNode:z,nodeDragThreshold:S,transform:P,snapGrid:A,snapToGrid:D}=t();c=(z==null?void 0:z.getBoundingClientRect())||null,h=!1,g=!1,y=M.sourceEvent,S===0&&q(M),o=nt(M.sourceEvent,{transform:P,snapGrid:A,snapToGrid:D,containerBounds:c}),l=pe(M.sourceEvent,c)}).on("drag",M=>{const{autoPanOnNodeDrag:z,transform:S,snapGrid:P,snapToGrid:A,nodeDragThreshold:D,nodeLookup:L}=t(),R=nt(M.sourceEvent,{transform:S,snapGrid:P,snapToGrid:A,containerBounds:c});if(y=M.sourceEvent,(M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||b&&!L.has(b))&&(h=!0),!h){if(!u&&z&&f&&(u=!0,C()),!f){const H=pe(M.sourceEvent,c),G=H.x-l.x,j=H.y-l.y;Math.sqrt(G*G+j*j)>D&&q(M)}(o.x!==R.xSnapped||o.y!==R.ySnapped)&&a&&f&&(l=pe(M.sourceEvent,c),N(R))}}).on("end",M=>{if(!(!f||h)&&(u=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:z,updateNodePositions:S,onNodeDragStop:P,onSelectionDragStop:A}=t();if(g&&(S(a,!1),g=!1),r||P||!b&&A){const[D,L]=on({nodeId:b,dragItems:a,nodeLookup:z,dragging:!1});r==null||r(M.sourceEvent,a,D,L),P==null||P(M.sourceEvent,D,L),b||A==null||A(M.sourceEvent,L)}}}).filter(M=>{const z=M.target;return!M.button&&(!x||!so(z,`.${x}`,w))&&(!p||so(z,p,w))});d.call(k)}function m(){d==null||d.on(".drag",null)}return{update:v,destroy:m}}function ag(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())at(r,Ge(o))>0&&i.push(o);return i}const ug=250;function cg(e,t,n,i){var a,u;let r=[],o=1/0;const s=ag(e,n,t+ug);for(const l of s){const c=[...((a=l.internals.handleBounds)==null?void 0:a.source)??[],...((u=l.internals.handleBounds)==null?void 0:u.target)??[]];for(const f of c){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:d,y:h}=qe(l,f,f.position,!0),g=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));g>t||(g<o?(r=[{...f,x:d,y:h}],o=g):g===o&&r.push({...f,x:d,y:h}))}}if(!r.length)return null;if(r.length>1){const l=i.type==="source"?"target":"source";return r.find(c=>c.type===l)??r[0]}return r[0]}function Nu(e,t,n,i,r,o=!1){var l,c,f;const s=i.get(e);if(!s)return null;const a=r==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],u=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return u&&o?{...u,...qe(s,u,u.position,!0)}:u}function Cu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function lg(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ku=()=>!0;function fg(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:u,lib:l,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:v,isValidConnection:m=ku,onReconnectEnd:x,updateConnection:p,getTransform:w,getFromHandle:_,autoPanSpeed:b,dragThreshold:E=1,handleDomNode:N}){const C=pu(e.target);let q=0,k;const{x:M,y:z}=pe(e),S=Cu(o,N),P=a==null?void 0:a.getBoundingClientRect();let A=!1;if(!P||!S)return;const D=Nu(r,S,i,u,t);if(!D)return;let L=pe(e,P),R=!1,H=null,G=!1,j=null;function W(){if(!c||!P)return;const[K,Q]=lu(L,P,b);d({x:K,y:Q}),q=requestAnimationFrame(W)}const I={...D,nodeId:r,type:S,position:D.position},T=u.get(r);let V={inProgress:!0,isValid:null,from:qe(T,I,Z.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:T,to:L,toHandle:null,toPosition:Xi[I.position],toNode:null,pointer:L};function B(){A=!0,p(V),g==null||g(e,{nodeId:r,handleId:i,handleType:S})}E===0&&B();function Y(K){if(!A){const{x:ae,y:Se}=pe(K),we=ae-M,Ie=Se-z;if(!(we*we+Ie*Ie>E*E))return;B()}if(!_()||!I){U(K);return}const Q=w();L=pe(K,P),k=cg(pt(L,Q,!1,[1,1]),n,u,I),R||(W(),R=!0);const X=Mu(K,{handle:k,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:s?"target":"source",isValidConnection:m,doc:C,lib:l,flowId:f,nodeLookup:u});j=X.handleDomNode,H=X.connection,G=lg(!!k,X.isValid);const J=u.get(r),ne=J?qe(J,I,Z.Left,!0):V.from,ee={...V,from:ne,isValid:G,to:X.toHandle&&G?qt({x:X.toHandle.x,y:X.toHandle.y},Q):L,toHandle:X.toHandle,toPosition:G&&X.toHandle?X.toHandle.position:Xi[I.position],toNode:X.toHandle?u.get(X.toHandle.nodeId):null,pointer:L};p(ee),V=ee}function U(K){if(!("touches"in K&&K.touches.length>0)){if(A){(k||j)&&H&&G&&(y==null||y(H));const{inProgress:Q,...X}=V,J={...X,toPosition:V.toHandle?V.toPosition:null};v==null||v(K,J),o&&(x==null||x(K,J))}h(),cancelAnimationFrame(q),R=!1,G=!1,H=null,j=null,C.removeEventListener("mousemove",Y),C.removeEventListener("mouseup",U),C.removeEventListener("touchmove",Y),C.removeEventListener("touchend",U)}}C.addEventListener("mousemove",Y),C.addEventListener("mouseup",U),C.addEventListener("touchmove",Y),C.addEventListener("touchend",U)}function Mu(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:u,isValidConnection:l=ku,nodeLookup:c}){const f=o==="target",d=t?s.querySelector(`.${a}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=pe(e),y=s.elementFromPoint(h,g),v=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:d,m={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=Cu(void 0,v),p=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),_=v.classList.contains("connectable"),b=v.classList.contains("connectableend");if(!p||!x)return m;const E={source:f?p:i,sourceHandle:f?w:r,target:f?i:p,targetHandle:f?r:w};m.connection=E;const C=_&&b&&(n===He.Strict?f&&x==="source"||!f&&x==="target":p!==i||w!==r);m.isValid=C&&l(E),m.toHandle=Nu(p,x,w,c,n,!0)}return m}const ii={onPointerDown:fg,isValid:Mu};function dg({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=ce(e);function o({translateExtent:a,width:u,height:l,zoomStep:c=1,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const g=p=>{if(p.sourceEvent.type!=="wheel"||!t)return;const w=n(),_=p.sourceEvent.ctrlKey&&ut()?10:1,b=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*c,E=w[2]*Math.pow(2,b*_);t.scaleTo(E)};let y=[0,0];const v=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(y=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},m=p=>{const w=n();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;const _=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],b=[_[0]-y[0],_[1]-y[1]];y=_;const E=i()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),N={x:w[0]-b[0]*E,y:w[1]-b[1]*E},C=[[0,0],[u,l]];t.setViewportConstrained({x:N.x,y:N.y,zoom:w[2]},C,a)},x=nu().on("start",v).on("zoom",f?m:null).on("zoom.wheel",d?g:null);r.call(x,{})}function s(){r.on("zoom",null)}return{update:o,destroy:s,pointer:de}}const Wt=e=>({x:e.x,y:e.y,zoom:e.k}),sn=({x:e,y:t,zoom:n})=>jt.translate(e,t).scale(n),$e=(e,t)=>e.target.closest(`.${t}`),Iu=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),hg=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,an=(e,t=0,n=hg,i=()=>{})=>{const r=typeof t=="number"&&t>0;return r||i(),r?e.transition().duration(t).ease(n).on("end",i):e},Au=e=>{const t=e.ctrlKey&&ut()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function pg({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:l}){return c=>{if($e(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(c.ctrlKey&&s){const v=de(c),m=Au(c),x=f*Math.pow(2,m);i.scaleTo(n,x,v,c);return}const d=c.deltaMode===1?20:1;let h=r===Pe.Vertical?0:c.deltaX*d,g=r===Pe.Horizontal?0:c.deltaY*d;!ut()&&c.shiftKey&&r!==Pe.Vertical&&(h=c.deltaY*d,g=0),i.translateBy(n,-(h/f)*o,-(g/f)*o,{internal:!0});const y=Wt(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(c,y),e.panScrollTimeout=setTimeout(()=>{l==null||l(c,y),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(c,y))}}function gg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){const o=i.type==="wheel",s=!t&&o&&!i.ctrlKey,a=$e(i,e);if(i.ctrlKey&&o&&a&&i.preventDefault(),s||a)return null;i.preventDefault(),n.call(this,i,r)}}function mg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,s,a;if((o=i.sourceEvent)!=null&&o.internal)return;const r=Wt(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((a=i.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function vg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&Iu(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((a=o.sourceEvent)!=null&&a.internal)&&(r==null||r(o.sourceEvent,Wt(o.transform)))}}function yg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Iu(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),r)){const u=Wt(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,u)},n?150:0)}}}function wg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:u,lib:l,connectionInProgress:c}){return f=>{var v;const d=e||t,h=n&&f.ctrlKey,g=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&($e(f,`${l}-flow__node`)||$e(f,`${l}-flow__edge`)))return!0;if(!i&&!d&&!r&&!o&&!n||s||c&&!g||$e(f,a)&&g||$e(f,u)&&(!g||r&&g&&!e)||!n&&f.ctrlKey&&g)return!1;if(!n&&f.type==="touchstart"&&((v=f.touches)==null?void 0:v.length)>1)return f.preventDefault(),!1;if(!d&&!r&&!h&&g||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const y=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||g)&&y}}function xg({domNode:e,minZoom:t,maxZoom:n,translateExtent:i,viewport:r,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),f=nu().scaleExtent([t,n]).translateExtent(i),d=ce(e).call(f);x({x:r.x,y:r.y,zoom:je(r.zoom,t,n)},[[0,0],[c.width,c.height]],i);const h=d.on("wheel.zoom"),g=d.on("dblclick.zoom");f.wheelDelta(Au);function y(k,M){return d?new Promise(z=>{f==null||f.interpolate((M==null?void 0:M.interpolate)==="linear"?tn:Et).transform(an(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>z(!0)),k)}):Promise.resolve(!1)}function v({noWheelClassName:k,noPanClassName:M,onPaneContextMenu:z,userSelectionActive:S,panOnScroll:P,panOnDrag:A,panOnScrollMode:D,panOnScrollSpeed:L,preventScrolling:R,zoomOnPinch:H,zoomOnScroll:G,zoomOnDoubleClick:j,zoomActivationKeyPressed:W,lib:I,onTransformChange:T,connectionInProgress:F,paneClickDistance:V,selectionOnDrag:B}){S&&!l.isZoomingOrPanning&&m();const Y=P&&!W&&!S;f.clickDistance(B?1/0:!he(V)||V<0?0:V);const U=Y?pg({zoomPanValues:l,noWheelClassName:k,d3Selection:d,d3Zoom:f,panOnScrollMode:D,panOnScrollSpeed:L,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):gg({noWheelClassName:k,preventScrolling:R,d3ZoomHandler:h});if(d.on("wheel.zoom",U,{passive:!1}),!S){const Q=mg({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:s});f.on("start",Q);const X=vg({zoomPanValues:l,panOnDrag:A,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:T});f.on("zoom",X);const J=yg({zoomPanValues:l,panOnDrag:A,panOnScroll:P,onPaneContextMenu:z,onPanZoomEnd:a,onDraggingChange:u});f.on("end",J)}const K=wg({zoomActivationKeyPressed:W,panOnDrag:A,zoomOnScroll:G,panOnScroll:P,zoomOnDoubleClick:j,zoomOnPinch:H,userSelectionActive:S,noPanClassName:M,noWheelClassName:k,lib:I,connectionInProgress:F});f.filter(K),j?d.on("dblclick.zoom",g):d.on("dblclick.zoom",null)}function m(){f.on("zoom",null)}async function x(k,M,z){const S=sn(k),P=f==null?void 0:f.constrain()(S,M,z);return P&&await y(P),new Promise(A=>A(P))}async function p(k,M){const z=sn(k);return await y(z,M),new Promise(S=>S(z))}function w(k){if(d){const M=sn(k),z=d.property("__zoom");(z.k!==k.zoom||z.x!==k.x||z.y!==k.y)&&(f==null||f.transform(d,M,null,{sync:!0}))}}function _(){const k=d?tu(d.node()):{x:0,y:0,k:1};return{x:k.x,y:k.y,zoom:k.k}}function b(k,M){return d?new Promise(z=>{f==null||f.interpolate((M==null?void 0:M.interpolate)==="linear"?tn:Et).scaleTo(an(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>z(!0)),k)}):Promise.resolve(!1)}function E(k,M){return d?new Promise(z=>{f==null||f.interpolate((M==null?void 0:M.interpolate)==="linear"?tn:Et).scaleBy(an(d,M==null?void 0:M.duration,M==null?void 0:M.ease,()=>z(!0)),k)}):Promise.resolve(!1)}function N(k){f==null||f.scaleExtent(k)}function C(k){f==null||f.translateExtent(k)}function q(k){const M=!he(k)||k<0?0:k;f==null||f.clickDistance(M)}return{update:v,destroy:m,setViewport:p,setViewportConstrained:x,getViewport:_,scaleTo:b,scaleBy:E,setScaleExtent:N,setTranslateExtent:C,syncViewport:w,setClickDistance:q}}var We;(function(e){e.Line="line",e.Handle="handle"})(We||(We={}));function _g({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const s=e-t,a=n-i,u=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(u[0]=u[0]*-1),a&&o&&(u[1]=u[1]*-1),u}function ao(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function Ne(e,t){return Math.max(0,t-e)}function Ce(e,t){return Math.max(0,e-t)}function xt(e,t,n){return Math.max(0,t-e,e-n)}function uo(e,t){return e?!t:t}function bg(e,t,n,i,r,o,s,a){let{affectsX:u,affectsY:l}=t;const{isHorizontal:c,isVertical:f}=t,d=c&&f,{xSnapped:h,ySnapped:g}=n,{minWidth:y,maxWidth:v,minHeight:m,maxHeight:x}=i,{x:p,y:w,width:_,height:b,aspectRatio:E}=e;let N=Math.floor(c?h-e.pointerX:0),C=Math.floor(f?g-e.pointerY:0);const q=_+(u?-N:N),k=b+(l?-C:C),M=-o[0]*_,z=-o[1]*b;let S=xt(q,y,v),P=xt(k,m,x);if(s){let L=0,R=0;u&&N<0?L=Ne(p+N+M,s[0][0]):!u&&N>0&&(L=Ce(p+q+M,s[1][0])),l&&C<0?R=Ne(w+C+z,s[0][1]):!l&&C>0&&(R=Ce(w+k+z,s[1][1])),S=Math.max(S,L),P=Math.max(P,R)}if(a){let L=0,R=0;u&&N>0?L=Ce(p+N,a[0][0]):!u&&N<0&&(L=Ne(p+q,a[1][0])),l&&C>0?R=Ce(w+C,a[0][1]):!l&&C<0&&(R=Ne(w+k,a[1][1])),S=Math.max(S,L),P=Math.max(P,R)}if(r){if(c){const L=xt(q/E,m,x)*E;if(S=Math.max(S,L),s){let R=0;!u&&!l||u&&!l&&d?R=Ce(w+z+q/E,s[1][1])*E:R=Ne(w+z+(u?N:-N)/E,s[0][1])*E,S=Math.max(S,R)}if(a){let R=0;!u&&!l||u&&!l&&d?R=Ne(w+q/E,a[1][1])*E:R=Ce(w+(u?N:-N)/E,a[0][1])*E,S=Math.max(S,R)}}if(f){const L=xt(k*E,y,v)/E;if(P=Math.max(P,L),s){let R=0;!u&&!l||l&&!u&&d?R=Ce(p+k*E+M,s[1][0])/E:R=Ne(p+(l?C:-C)*E+M,s[0][0])/E,P=Math.max(P,R)}if(a){let R=0;!u&&!l||l&&!u&&d?R=Ne(p+k*E,a[1][0])/E:R=Ce(p+(l?C:-C)*E,a[0][0])/E,P=Math.max(P,R)}}}C=C+(C<0?P:-P),N=N+(N<0?S:-S),r&&(d?q>k*E?C=(uo(u,l)?-N:N)/E:N=(uo(u,l)?-C:C)*E:c?(C=N/E,l=u):(N=C*E,u=l));const A=u?p+N:p,D=l?w+C:w;return{width:_+(u?-N:N),height:b+(l?-C:C),x:o[0]*N*(u?-1:1)+A,y:o[1]*C*(l?-1:1)+D}}const Pu={width:0,height:0,x:0,y:0},Eg={...Pu,pointerX:0,pointerY:0,aspectRatio:1};function Sg(e){return[[0,0],[e.measured.width,e.measured.height]]}function Ng(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,u=n[1]*s;return[[i-a,r-u],[i+o-a,r+s-u]]}function Cg({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=ce(e);let s={controlDirection:ao("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:l,boundaries:c,keepAspectRatio:f,resizeDirection:d,onResizeStart:h,onResize:g,onResizeEnd:y,shouldResize:v}){let m={...Pu},x={...Eg};s={boundaries:c,resizeDirection:d,keepAspectRatio:f,controlDirection:ao(l)};let p,w=null,_=[],b,E,N,C=!1;const q=Wa().on("start",k=>{const{nodeLookup:M,transform:z,snapGrid:S,snapToGrid:P,nodeOrigin:A,paneDomNode:D}=n();if(p=M.get(t),!p)return;w=(D==null?void 0:D.getBoundingClientRect())??null;const{xSnapped:L,ySnapped:R}=nt(k.sourceEvent,{transform:z,snapGrid:S,snapToGrid:P,containerBounds:w});m={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},x={...m,pointerX:L,pointerY:R,aspectRatio:m.width/m.height},b=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(b=M.get(p.parentId),E=b&&p.extent==="parent"?Sg(b):void 0),_=[],N=void 0;for(const[H,G]of M)if(G.parentId===t&&(_.push({id:H,position:{...G.position},extent:G.extent}),G.extent==="parent"||G.expandParent)){const j=Ng(G,p,G.origin??A);N?N=[[Math.min(j[0][0],N[0][0]),Math.min(j[0][1],N[0][1])],[Math.max(j[1][0],N[1][0]),Math.max(j[1][1],N[1][1])]]:N=j}h==null||h(k,{...m})}).on("drag",k=>{const{transform:M,snapGrid:z,snapToGrid:S,nodeOrigin:P}=n(),A=nt(k.sourceEvent,{transform:M,snapGrid:z,snapToGrid:S,containerBounds:w}),D=[];if(!p)return;const{x:L,y:R,width:H,height:G}=m,j={},W=p.origin??P,{width:I,height:T,x:F,y:V}=bg(x,s.controlDirection,A,s.boundaries,s.keepAspectRatio,W,E,N),B=I!==H,Y=T!==G,U=F!==L&&B,K=V!==R&&Y;if(!U&&!K&&!B&&!Y)return;if((U||K||W[0]===1||W[1]===1)&&(j.x=U?F:m.x,j.y=K?V:m.y,m.x=j.x,m.y=j.y,_.length>0)){const ne=F-L,ee=V-R;for(const ae of _)ae.position={x:ae.position.x-ne+W[0]*(I-H),y:ae.position.y-ee+W[1]*(T-G)},D.push(ae)}if((B||Y)&&(j.width=B&&(!s.resizeDirection||s.resizeDirection==="horizontal")?I:m.width,j.height=Y&&(!s.resizeDirection||s.resizeDirection==="vertical")?T:m.height,m.width=j.width,m.height=j.height),b&&p.expandParent){const ne=W[0]*(j.width??0);j.x&&j.x<ne&&(m.x=ne,x.x=x.x-(j.x-ne));const ee=W[1]*(j.height??0);j.y&&j.y<ee&&(m.y=ee,x.y=x.y-(j.y-ee))}const Q=_g({width:m.width,prevWidth:H,height:m.height,prevHeight:G,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),X={...m,direction:Q};(v==null?void 0:v(k,X))!==!1&&(C=!0,g==null||g(k,X),i(j,D))}).on("end",k=>{C&&(y==null||y(k,{...m}),r==null||r({...m}),C=!1)});o.call(q)}function u(){o.on(".drag",null)}return{update:a,destroy:u}}var un={exports:{}},cn={},ln={exports:{}},fn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var co;function kg(){if(co)return fn;co=1;var e=wa();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,r=e.useEffect,o=e.useLayoutEffect,s=e.useDebugValue;function a(f,d){var h=d(),g=i({inst:{value:h,getSnapshot:d}}),y=g[0].inst,v=g[1];return o(function(){y.value=h,y.getSnapshot=d,u(y)&&v({inst:y})},[f,h,d]),r(function(){return u(y)&&v({inst:y}),f(function(){u(y)&&v({inst:y})})},[f]),s(h),h}function u(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function l(f,d){return d()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return fn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,fn}var lo;function Mg(){return lo||(lo=1,ln.exports=kg()),ln.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo;function Ig(){if(fo)return cn;fo=1;var e=wa(),t=Mg();function n(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var i=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,a=e.useMemo,u=e.useDebugValue;return cn.useSyncExternalStoreWithSelector=function(l,c,f,d,h){var g=o(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=a(function(){function m(b){if(!x){if(x=!0,p=b,b=d(b),h!==void 0&&y.hasValue){var E=y.value;if(h(E,b))return w=E}return w=b}if(E=w,i(p,b))return E;var N=d(b);return h!==void 0&&h(E,N)?(p=b,E):(p=b,w=N)}var x=!1,p,w,_=f===void 0?null:f;return[function(){return m(c())},_===null?void 0:function(){return m(_())}]},[c,f,d,h]);var v=r(l,g[0],g[1]);return s(function(){y.hasValue=!0,y.value=v},[v]),u(v),v},cn}var ho;function Ag(){return ho||(ho=1,un.exports=Ig()),un.exports}var Pg=Ag();const Rg=Ll(Pg),Lg={},po=e=>{let t;const n=new Set,i=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(g=>g(t,h))}},r=()=>t,u={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Lg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(i,r,u);return u},qg=e=>e?po(e):po,{useDebugValue:Tg}=ql,{useSyncExternalStoreWithSelector:Dg}=Rg,zg=e=>e;function Ru(e,t=zg,n){const i=Dg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Tg(i),i}const go=(e,t)=>{const n=qg(e),i=(r,o=t)=>Ru(n,r,o);return Object.assign(i,n),i},$g=(e,t)=>e?go(e,t):go;function re(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}const Xt=O.createContext(null),Fg=Xt.Provider,Lu=ve.error001();function te(e,t){const n=O.useContext(Xt);if(n===null)throw new Error(Lu);return Ru(n,e,t)}function ie(){const e=O.useContext(Xt);if(e===null)throw new Error(Lu);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const mo={display:"none"},Og={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},qu="react-flow__node-desc",Tu="react-flow__edge-desc",Vg="react-flow__aria-live",Bg=e=>e.ariaLiveMessage,Hg=e=>e.ariaLabelConfig;function jg({rfId:e}){const t=te(Bg);return $.jsx("div",{id:`${Vg}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Og,children:t})}function Gg({rfId:e,disableKeyboardA11y:t}){const n=te(Hg);return $.jsxs($.Fragment,{children:[$.jsx("div",{id:`${qu}-${e}`,style:mo,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),$.jsx("div",{id:`${Tu}-${e}`,style:mo,children:n["edge.a11yDescription.default"]}),!t&&$.jsx(jg,{rfId:e})]})}const Ut=O.forwardRef(({position:e="top-left",children:t,className:n,style:i,...r},o)=>{const s=`${e}`.split("-");return $.jsx("div",{className:se(["react-flow__panel",n,...s]),style:i,ref:o,...r,children:t})});Ut.displayName="Panel";function Yg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:$.jsx(Ut,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:$.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Wg=e=>{const t=[],n=[];for(const[,i]of e.nodeLookup)i.selected&&t.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&n.push(i);return{selectedNodes:t,selectedEdges:n}},_t=e=>e.id;function Xg(e,t){return re(e.selectedNodes.map(_t),t.selectedNodes.map(_t))&&re(e.selectedEdges.map(_t),t.selectedEdges.map(_t))}function Ug({onSelectionChange:e}){const t=ie(),{selectedNodes:n,selectedEdges:i}=te(Wg,Xg);return O.useEffect(()=>{const r={nodes:n,edges:i};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(o=>o(r))},[n,i,e]),null}const Kg=e=>!!e.onSelectionChangeHandlers;function Zg({onSelectionChange:e}){const t=te(Kg);return e||t?$.jsx(Ug,{onSelectionChange:e}):null}const Du=[0,0],Qg={x:0,y:0,zoom:1},Jg=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],vo=[...Jg,"rfId"],em=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),yo={translateExtent:ot,nodeOrigin:Du,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function tm(e){const{setNodes:t,setEdges:n,setMinZoom:i,setMaxZoom:r,setTranslateExtent:o,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:u}=te(em,re),l=ie();O.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{c.current=yo,a()}),[]);const c=O.useRef(yo);return O.useEffect(()=>{for(const f of vo){const d=e[f],h=c.current[f];d!==h&&(typeof e[f]>"u"||(f==="nodes"?t(d):f==="edges"?n(d):f==="minZoom"?i(d):f==="maxZoom"?r(d):f==="translateExtent"?o(d):f==="nodeExtent"?s(d):f==="ariaLabelConfig"?l.setState({ariaLabelConfig:$p(d)}):f==="fitView"?l.setState({fitViewQueued:d}):f==="fitViewOptions"?l.setState({fitViewOptions:d}):l.setState({[f]:d})))}c.current=e},vo.map(f=>e[f])),null}function wo(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nm(e){var i;const[t,n]=O.useState(e==="system"?null:e);return O.useEffect(()=>{if(e!=="system"){n(e);return}const r=wo(),o=()=>n(r!=null&&r.matches?"dark":"light");return o(),r==null||r.addEventListener("change",o),()=>{r==null||r.removeEventListener("change",o)}},[e]),t!==null?t:(i=wo())!=null&&i.matches?"dark":"light"}const xo=typeof document<"u"?document:null;function ct(e=null,t={target:xo,actInsideInputWithModifier:!0}){const[n,i]=O.useState(!1),r=O.useRef(!1),o=O.useRef(new Set([])),[s,a]=O.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((f,d)=>f.concat(...d),[]);return[l,c]}return[[],[]]},[e]);return O.useEffect(()=>{const u=(t==null?void 0:t.target)??xo,l=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const c=h=>{var v,m;if(r.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!r.current||r.current&&!l)&&gu(h))return!1;const y=bo(h.code,a);if(o.current.add(h[y]),_o(s,o.current,!1)){const x=((m=(v=h.composedPath)==null?void 0:v.call(h))==null?void 0:m[0])||h.target,p=(x==null?void 0:x.nodeName)==="BUTTON"||(x==null?void 0:x.nodeName)==="A";t.preventDefault!==!1&&(r.current||!p)&&h.preventDefault(),i(!0)}},f=h=>{const g=bo(h.code,a);_o(s,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(h[g]),h.key==="Meta"&&o.current.clear(),r.current=!1},d=()=>{o.current.clear(),i(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,i]),n}function _o(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(r=>t.has(r)))}function bo(e,t){return t.includes(e)?"code":"key"}const rm=()=>{const e=ie();return O.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[i,r,o],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??i,y:t.y??r,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},setCenter:async(t,n,i)=>e.getState().setCenter(t,n,i),fitBounds:async(t,n)=>{const{width:i,height:r,minZoom:o,maxZoom:s,panZoom:a}=e.getState(),u=xi(t,i,r,o,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(u,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:i,snapGrid:r,snapToGrid:o,domNode:s}=e.getState();if(!s)return t;const{x:a,y:u}=s.getBoundingClientRect(),l={x:t.x-a,y:t.y-u},c=n.snapGrid??r,f=n.snapToGrid??o;return pt(l,i,f,c)},flowToScreenPosition:t=>{const{transform:n,domNode:i}=e.getState();if(!i)return t;const{x:r,y:o}=i.getBoundingClientRect(),s=qt(t,n);return{x:s.x+r,y:s.y+o}}}),[])};function zu(e,t){const n=[],i=new Map,r=[];for(const o of e)if(o.type==="add"){r.push(o);continue}else if(o.type==="remove"||o.type==="replace")i.set(o.id,[o]);else{const s=i.get(o.id);s?s.push(o):i.set(o.id,[o])}for(const o of t){const s=i.get(o.id);if(!s){n.push(o);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...o};for(const u of s)im(u,a);n.push(a)}return r.length&&r.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function im(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function $u(e,t){return zu(e,t)}function Fu(e,t){return zu(e,t)}function Ae(e,t){return{id:e,type:"select",selected:t}}function Fe(e,t=new Set,n=!1){const i=[];for(const[r,o]of e){const s=t.has(r);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),i.push(Ae(o.id,s)))}return i}function Eo({items:e=[],lookup:t}){var r;const n=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,s]of e.entries()){const a=t.get(s.id),u=((r=a==null?void 0:a.internals)==null?void 0:r.userNode)??a;u!==void 0&&u!==s&&n.push({id:s.id,item:s,type:"replace"}),u===void 0&&n.push({item:s,type:"add",index:o})}for(const[o]of t)i.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function So(e){return{id:e.id,type:"remove"}}const No=e=>Mp(e),om=e=>au(e);function Ou(e){return O.forwardRef(e)}const sm=typeof window<"u"?O.useLayoutEffect:O.useEffect;function Co(e){const[t,n]=O.useState(BigInt(0)),[i]=O.useState(()=>am(()=>n(r=>r+BigInt(1))));return sm(()=>{const r=i.get();r.length&&(e(r),i.reset())},[t]),i}function am(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Vu=O.createContext(null);function um({children:e}){const t=ie(),n=O.useCallback(a=>{const{nodes:u=[],setNodes:l,hasDefaultNodes:c,onNodesChange:f,nodeLookup:d,fitViewQueued:h,onNodesChangeMiddlewareMap:g}=t.getState();let y=u;for(const m of a)y=typeof m=="function"?m(y):m;let v=Eo({items:y,lookup:d});for(const m of g.values())v=m(v);c&&l(y),v.length>0?f==null||f(v):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:m,nodes:x,setNodes:p}=t.getState();m&&p(x)})},[]),i=Co(n),r=O.useCallback(a=>{const{edges:u=[],setEdges:l,hasDefaultEdges:c,onEdgesChange:f,edgeLookup:d}=t.getState();let h=u;for(const g of a)h=typeof g=="function"?g(h):g;c?l(h):f&&f(Eo({items:h,lookup:d}))},[]),o=Co(r),s=O.useMemo(()=>({nodeQueue:i,edgeQueue:o}),[]);return $.jsx(Vu.Provider,{value:s,children:e})}function cm(){const e=O.useContext(Vu);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const lm=e=>!!e.panZoom;function ki(){const e=rm(),t=ie(),n=cm(),i=te(lm),r=O.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),s=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},u=f=>{var m,x;const{nodeLookup:d,nodeOrigin:h}=t.getState(),g=No(f)?f:d.get(f.id),y=g.parentId?hu(g.position,g.measured,g.parentId,d,h):g.position,v={...g,position:y,width:((m=g.measured)==null?void 0:m.width)??g.width,height:((x=g.measured)==null?void 0:x.height)??g.height};return Ge(v)},l=(f,d,h={replace:!1})=>{s(g=>g.map(y=>{if(y.id===f){const v=typeof d=="function"?d(y):d;return h.replace&&No(v)?v:{...y,...v}}return y}))},c=(f,d,h={replace:!1})=>{a(g=>g.map(y=>{if(y.id===f){const v=typeof d=="function"?d(y):d;return h.replace&&om(v)?v:{...y,...v}}return y}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var d;return(d=o(f))==null?void 0:d.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(d=>({...d}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:s,setEdges:a,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=t.getState(),[g,y,v]=h;return{nodes:f.map(m=>({...m})),edges:d.map(m=>({...m})),viewport:{x:g,y,zoom:v}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:g,onNodesDelete:y,onEdgesDelete:v,triggerNodeChanges:m,triggerEdgeChanges:x,onDelete:p,onBeforeDelete:w}=t.getState(),{nodes:_,edges:b}=await Lp({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:g,onBeforeDelete:w}),E=b.length>0,N=_.length>0;if(E){const C=b.map(So);v==null||v(b),x(C)}if(N){const C=_.map(So);y==null||y(_),m(C)}return(N||E)&&(p==null||p({nodes:_,edges:b})),{deletedNodes:_,deletedEdges:b}},getIntersectingNodes:(f,d=!0,h)=>{const g=Ki(f),y=g?f:u(f),v=h!==void 0;return y?(h||t.getState().nodes).filter(m=>{const x=t.getState().nodeLookup.get(m.id);if(x&&!g&&(m.id===f.id||!x.internals.positionAbsolute))return!1;const p=Ge(v?m:x),w=at(p,y);return d&&w>0||w>=p.width*p.height||w>=y.width*y.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const y=Ki(f)?f:u(f);if(!y)return!1;const v=at(y,d);return h&&v>0||v>=d.width*d.height||v>=y.width*y.height},updateNode:l,updateNodeData:(f,d,h={replace:!1})=>{l(f,g=>{const y=typeof d=="function"?d(g):d;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},updateEdge:c,updateEdgeData:(f,d,h={replace:!1})=>{c(f,g=>{const y=typeof d=="function"?d(g):d;return h.replace?{...g,data:y}:{...g,data:{...g.data,...y}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return Ip(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`))==null?void 0:g.values())??[])},getNodeConnections:({type:f,handleId:d,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`))==null?void 0:g.values())??[])},fitView:async f=>{const d=t.getState().fitViewResolver??zp();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return O.useMemo(()=>({...r,...e,viewportInitialized:i}),[i])}const ko=e=>e.selected,fm=typeof window<"u"?window:void 0;function dm({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ie(),{deleteElements:i}=ki(),r=ct(e,{actInsideInputWithModifier:!1}),o=ct(t,{target:fm});O.useEffect(()=>{if(r){const{edges:s,nodes:a}=n.getState();i({nodes:a.filter(ko),edges:s.filter(ko)}),n.setState({nodesSelectionActive:!1})}},[r]),O.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function hm(e){const t=ie();O.useEffect(()=>{const n=()=>{var r,o,s,a;if(!e.current||!(((o=(r=e.current).checkVisibility)==null?void 0:o.call(r))??!0))return!1;const i=_i(e.current);(i.height===0||i.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",ve.error004())),t.setState({width:i.width||500,height:i.height||500})};if(e.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(e.current),()=>{window.removeEventListener("resize",n),i&&e.current&&i.unobserve(e.current)}}},[])}const Kt={position:"absolute",width:"100%",height:"100%",top:0,left:0},pm=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function gm({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:o=Pe.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:u,translateExtent:l,minZoom:c,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:g,noWheelClassName:y,noPanClassName:v,onViewportChange:m,isControlledViewport:x,paneClickDistance:p,selectionOnDrag:w}){const _=ie(),b=O.useRef(null),{userSelectionActive:E,lib:N,connectionInProgress:C}=te(pm,re),q=ct(d),k=O.useRef();hm(b);const M=O.useCallback(z=>{m==null||m({x:z[0],y:z[1],zoom:z[2]}),x||_.setState({transform:z})},[m,x]);return O.useEffect(()=>{if(b.current){k.current=xg({domNode:b.current,minZoom:c,maxZoom:f,translateExtent:l,viewport:u,onDraggingChange:A=>_.setState({paneDragging:A}),onPanZoomStart:(A,D)=>{const{onViewportChangeStart:L,onMoveStart:R}=_.getState();R==null||R(A,D),L==null||L(D)},onPanZoom:(A,D)=>{const{onViewportChange:L,onMove:R}=_.getState();R==null||R(A,D),L==null||L(D)},onPanZoomEnd:(A,D)=>{const{onViewportChangeEnd:L,onMoveEnd:R}=_.getState();R==null||R(A,D),L==null||L(D)}});const{x:z,y:S,zoom:P}=k.current.getViewport();return _.setState({panZoom:k.current,transform:[z,S,P],domNode:b.current.closest(".react-flow")}),()=>{var A;(A=k.current)==null||A.destroy()}}},[]),O.useEffect(()=>{var z;(z=k.current)==null||z.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:o,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:q,preventScrolling:h,noPanClassName:v,userSelectionActive:E,noWheelClassName:y,lib:N,onTransformChange:M,connectionInProgress:C,selectionOnDrag:w,paneClickDistance:p})},[e,t,n,i,r,o,s,a,q,h,v,E,y,N,M,C,w,p]),$.jsx("div",{className:"react-flow__renderer",ref:b,style:Kt,children:g})}const mm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vm(){const{userSelectionActive:e,userSelectionRect:t}=te(mm,re);return e&&t?$.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const dn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},ym=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function wm({isSelecting:e,selectionKeyPressed:t,selectionMode:n=st.Full,panOnDrag:i,paneClickDistance:r,selectionOnDrag:o,onSelectionStart:s,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:h,children:g}){const y=ie(),{userSelectionActive:v,elementsSelectable:m,dragging:x,connectionInProgress:p}=te(ym,re),w=m&&(e||v),_=O.useRef(null),b=O.useRef(),E=O.useRef(new Set),N=O.useRef(new Set),C=O.useRef(!1),q=L=>{if(C.current||p){C.current=!1;return}u==null||u(L),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},k=L=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){L.preventDefault();return}l==null||l(L)},M=c?L=>c(L):void 0,z=L=>{C.current&&(L.stopPropagation(),C.current=!1)},S=L=>{var T,F;const{domNode:R}=y.getState();if(b.current=R==null?void 0:R.getBoundingClientRect(),!b.current)return;const H=L.target===_.current;if(!H&&!!L.target.closest(".nokey")||!e||!(o&&H||t)||L.button!==0||!L.isPrimary)return;(F=(T=L.target)==null?void 0:T.setPointerCapture)==null||F.call(T,L.pointerId),C.current=!1;const{x:W,y:I}=pe(L.nativeEvent,b.current);y.setState({userSelectionRect:{width:0,height:0,startX:W,startY:I,x:W,y:I}}),H||(L.stopPropagation(),L.preventDefault())},P=L=>{const{userSelectionRect:R,transform:H,nodeLookup:G,edgeLookup:j,connectionLookup:W,triggerNodeChanges:I,triggerEdgeChanges:T,defaultEdgeOptions:F,resetSelectedElements:V}=y.getState();if(!b.current||!R)return;const{x:B,y:Y}=pe(L.nativeEvent,b.current),{startX:U,startY:K}=R;if(!C.current){const ee=t?0:r;if(Math.hypot(B-U,Y-K)<=ee)return;V(),s==null||s(L)}C.current=!0;const Q={startX:U,startY:K,x:B<U?B:U,y:Y<K?Y:K,width:Math.abs(B-U),height:Math.abs(Y-K)},X=E.current,J=N.current;E.current=new Set(wi(G,Q,H,n===st.Partial,!0).map(ee=>ee.id)),N.current=new Set;const ne=(F==null?void 0:F.selectable)??!0;for(const ee of E.current){const ae=W.get(ee);if(ae)for(const{edgeId:Se}of ae.values()){const we=j.get(Se);we&&(we.selectable??ne)&&N.current.add(Se)}}if(!Zi(X,E.current)){const ee=Fe(G,E.current,!0);I(ee)}if(!Zi(J,N.current)){const ee=Fe(j,N.current);T(ee)}y.setState({userSelectionRect:Q,userSelectionActive:!0,nodesSelectionActive:!1})},A=L=>{var R,H;L.button===0&&((H=(R=L.target)==null?void 0:R.releasePointerCapture)==null||H.call(R,L.pointerId),!v&&L.target===_.current&&y.getState().userSelectionRect&&(q==null||q(L)),y.setState({userSelectionActive:!1,userSelectionRect:null}),C.current&&(a==null||a(L),y.setState({nodesSelectionActive:E.current.size>0})))},D=i===!0||Array.isArray(i)&&i.includes(0);return $.jsxs("div",{className:se(["react-flow__pane",{draggable:D,dragging:x,selection:e}]),onClick:w?void 0:dn(q,_),onContextMenu:dn(k,_),onWheel:dn(M,_),onPointerEnter:w?void 0:f,onPointerMove:w?P:d,onPointerUp:w?A:void 0,onPointerDownCapture:w?S:void 0,onClickCapture:w?z:void 0,onPointerLeave:h,ref:_,style:Kt,children:[g,$.jsx(vm,{})]})}function oi({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:o,multiSelectionActive:s,nodeLookup:a,onError:u}=t.getState(),l=a.get(e);if(!l){u==null||u("012",ve.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&s)&&(o({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var c;return(c=i==null?void 0:i.current)==null?void 0:c.blur()})):r([e])}function Bu({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:o,nodeClickDistance:s}){const a=ie(),[u,l]=O.useState(!1),c=O.useRef();return O.useEffect(()=>{c.current=sg({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{oi({id:f,store:a,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),O.useEffect(()=>{var f,d;if(t)(f=c.current)==null||f.destroy();else if(e.current)return(d=c.current)==null||d.update({noDragClassName:n,handleSelector:i,domNode:e.current,isSelectable:o,nodeId:r,nodeClickDistance:s}),()=>{var h;(h=c.current)==null||h.destroy()}},[n,i,t,o,e,r]),u}const xm=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Hu(){const e=ie();return O.useCallback(n=>{const{nodeExtent:i,snapToGrid:r,snapGrid:o,nodesDraggable:s,onError:a,updateNodePositions:u,nodeLookup:l,nodeOrigin:c}=e.getState(),f=new Map,d=xm(s),h=r?o[0]:5,g=r?o[1]:5,y=n.direction.x*h*n.factor,v=n.direction.y*g*n.factor;for(const[,m]of l){if(!d(m))continue;let x={x:m.internals.positionAbsolute.x+y,y:m.internals.positionAbsolute.y+v};r&&(x=ht(x,o));const{position:p,positionAbsolute:w}=uu({nodeId:m.id,nextPosition:x,nodeLookup:l,nodeExtent:i,nodeOrigin:c,onError:a});m.position=p,m.internals.positionAbsolute=w,f.set(m.id,m)}u(f)},[])}const Mi=O.createContext(null),_m=Mi.Provider;Mi.Consumer;const ju=()=>O.useContext(Mi),bm=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Em=(e,t,n)=>i=>{const{connectionClickStartHandle:r,connectionMode:o,connection:s}=i,{fromHandle:a,toHandle:u,isValid:l}=s,c=(u==null?void 0:u.nodeId)===e&&(u==null?void 0:u.id)===t&&(u==null?void 0:u.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:c,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:o===He.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!r,valid:c&&l}};function Sm({type:e="source",position:t=Z.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:l,onMouseDown:c,onTouchStart:f,...d},h){var P,A;const g=s||null,y=e==="target",v=ie(),m=ju(),{connectOnClick:x,noPanClassName:p,rfId:w}=te(bm,re),{connectingFrom:_,connectingTo:b,clickConnecting:E,isPossibleEndHandle:N,connectionInProcess:C,clickConnectionInProcess:q,valid:k}=te(Em(m,g,e),re);m||(A=(P=v.getState()).onError)==null||A.call(P,"010",ve.error010());const M=D=>{const{defaultEdgeOptions:L,onConnect:R,hasDefaultEdges:H}=v.getState(),G={...L,...D};if(H){const{edges:j,setEdges:W}=v.getState();W(jp(G,j))}R==null||R(G),a==null||a(G)},z=D=>{if(!m)return;const L=mu(D.nativeEvent);if(r&&(L&&D.button===0||!L)){const R=v.getState();ii.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:R.autoPanOnConnect,connectionMode:R.connectionMode,connectionRadius:R.connectionRadius,domNode:R.domNode,nodeLookup:R.nodeLookup,lib:R.lib,isTarget:y,handleId:g,nodeId:m,flowId:R.rfId,panBy:R.panBy,cancelConnection:R.cancelConnection,onConnectStart:R.onConnectStart,onConnectEnd:R.onConnectEnd,updateConnection:R.updateConnection,onConnect:M,isValidConnection:n||R.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:R.autoPanSpeed,dragThreshold:R.connectionDragThreshold})}L?c==null||c(D):f==null||f(D)},S=D=>{const{onClickConnectStart:L,onClickConnectEnd:R,connectionClickStartHandle:H,connectionMode:G,isValidConnection:j,lib:W,rfId:I,nodeLookup:T,connection:F}=v.getState();if(!m||!H&&!r)return;if(!H){L==null||L(D.nativeEvent,{nodeId:m,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,id:g}});return}const V=pu(D.target),B=n||j,{connection:Y,isValid:U}=ii.isValid(D.nativeEvent,{handle:{nodeId:m,id:g,type:e},connectionMode:G,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:B,flowId:I,doc:V,lib:W,nodeLookup:T});U&&Y&&M(Y);const K=structuredClone(F);delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,R==null||R(D,K),v.setState({connectionClickStartHandle:null})};return $.jsx("div",{"data-handleid":g,"data-nodeid":m,"data-handlepos":t,"data-id":`${w}-${m}-${g}-${e}`,className:se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,l,{source:!y,target:y,connectable:i,connectablestart:r,connectableend:o,clickconnecting:E,connectingfrom:_,connectingto:b,valid:k,connectionindicator:i&&(!C||N)&&(C||q?o:r)}]),onMouseDown:z,onTouchStart:z,onClick:x?S:void 0,ref:h,...d,children:u})}const Tt=O.memo(Ou(Sm));function Nm({data:e,isConnectable:t,sourcePosition:n=Z.Bottom}){return $.jsxs($.Fragment,{children:[e==null?void 0:e.label,$.jsx(Tt,{type:"source",position:n,isConnectable:t})]})}function Cm({data:e,isConnectable:t,targetPosition:n=Z.Top,sourcePosition:i=Z.Bottom}){return $.jsxs($.Fragment,{children:[$.jsx(Tt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,$.jsx(Tt,{type:"source",position:i,isConnectable:t})]})}function km(){return null}function Mm({data:e,isConnectable:t,targetPosition:n=Z.Top}){return $.jsxs($.Fragment,{children:[$.jsx(Tt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Dt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Mo={input:Nm,default:Cm,output:Mm,group:km};function Im(e){var t,n,i,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((i=e.style)==null?void 0:i.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const Am=e=>{const{width:t,height:n,x:i,y:r}=dt(e.nodeLookup,{filter:o=>!!o.selected});return{width:he(t)?t:null,height:he(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${r}px)`}};function Pm({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=ie(),{width:r,height:o,transformString:s,userSelectionActive:a}=te(Am,re),u=Hu(),l=O.useRef(null);if(O.useEffect(()=>{var d;n||(d=l.current)==null||d.focus({preventScroll:!0})},[n]),Bu({nodeRef:l}),a||!r||!o)return null;const c=e?d=>{const h=i.getState().nodes.filter(g=>g.selected);e(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(Dt,d.key)&&(d.preventDefault(),u({direction:Dt[d.key],factor:d.shiftKey?4:1}))};return $.jsx("div",{className:se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:$.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:r,height:o}})})}const Io=typeof window<"u"?window:void 0,Rm=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Gu({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:u,selectionKeyCode:l,selectionOnDrag:c,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:m,zoomOnScroll:x,zoomOnPinch:p,panOnScroll:w,panOnScrollSpeed:_,panOnScrollMode:b,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:C,translateExtent:q,minZoom:k,maxZoom:M,preventScrolling:z,onSelectionContextMenu:S,noWheelClassName:P,noPanClassName:A,disableKeyboardA11y:D,onViewportChange:L,isControlledViewport:R}){const{nodesSelectionActive:H,userSelectionActive:G}=te(Rm,re),j=ct(l,{target:Io}),W=ct(y,{target:Io}),I=W||N,T=W||w,F=c&&I!==!0,V=j||G||F;return dm({deleteKeyCode:u,multiSelectionKeyCode:g}),$.jsx(gm,{onPaneContextMenu:o,elementsSelectable:m,zoomOnScroll:x,zoomOnPinch:p,panOnScroll:T,panOnScrollSpeed:_,panOnScrollMode:b,zoomOnDoubleClick:E,panOnDrag:!j&&I,defaultViewport:C,translateExtent:q,minZoom:k,maxZoom:M,zoomActivationKeyCode:v,preventScrolling:z,noWheelClassName:P,noPanClassName:A,onViewportChange:L,isControlledViewport:R,paneClickDistance:a,selectionOnDrag:F,children:$.jsxs(wm,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:I,isSelecting:!!V,selectionMode:f,selectionKeyPressed:j,paneClickDistance:a,selectionOnDrag:F,children:[e,H&&$.jsx(Pm,{onSelectionContextMenu:S,noPanClassName:A,disableKeyboardA11y:D})]})})}Gu.displayName="FlowRenderer";const Lm=O.memo(Gu),qm=e=>t=>e?wi(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Tm(e){return te(O.useCallback(qm(e),[e]),re)}const Dm=e=>e.updateNodeInternals;function zm(){const e=te(Dm),[t]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(r=>{const o=r.target.getAttribute("data-id");i.set(o,{id:o,nodeElement:r.target,force:!0})}),e(i)}));return O.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function $m({node:e,nodeType:t,hasDimensions:n,resizeObserver:i}){const r=ie(),o=O.useRef(null),s=O.useRef(null),a=O.useRef(e.sourcePosition),u=O.useRef(e.targetPosition),l=O.useRef(t),c=n&&!!e.internals.handleBounds;return O.useEffect(()=>{o.current&&!e.hidden&&(!c||s.current!==o.current)&&(s.current&&(i==null||i.unobserve(s.current)),i==null||i.observe(o.current),s.current=o.current)},[c,e.hidden]),O.useEffect(()=>()=>{s.current&&(i==null||i.unobserve(s.current),s.current=null)},[]),O.useEffect(()=>{if(o.current){const f=l.current!==t,d=a.current!==e.sourcePosition,h=u.current!==e.targetPosition;(f||d||h)&&(l.current=t,a.current=e.sourcePosition,u.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function Fm({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:r,onContextMenu:o,onDoubleClick:s,nodesDraggable:a,elementsSelectable:u,nodesConnectable:l,nodesFocusable:c,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:g,rfId:y,nodeTypes:v,nodeClickDistance:m,onError:x}){const{node:p,internals:w,isParent:_}=te(B=>{const Y=B.nodeLookup.get(e),U=B.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:U}},re);let b=p.type||"default",E=(v==null?void 0:v[b])||Mo[b];E===void 0&&(x==null||x("003",ve.error003(b)),b="default",E=(v==null?void 0:v.default)||Mo.default);const N=!!(p.draggable||a&&typeof p.draggable>"u"),C=!!(p.selectable||u&&typeof p.selectable>"u"),q=!!(p.connectable||l&&typeof p.connectable>"u"),k=!!(p.focusable||c&&typeof p.focusable>"u"),M=ie(),z=du(p),S=$m({node:p,nodeType:b,hasDimensions:z,resizeObserver:f}),P=Bu({nodeRef:S,disabled:p.hidden||!N,noDragClassName:d,handleSelector:p.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:m}),A=Hu();if(p.hidden)return null;const D=Ee(p),L=Im(p),R=C||N||t||n||i||r,H=n?B=>n(B,{...w.userNode}):void 0,G=i?B=>i(B,{...w.userNode}):void 0,j=r?B=>r(B,{...w.userNode}):void 0,W=o?B=>o(B,{...w.userNode}):void 0,I=s?B=>s(B,{...w.userNode}):void 0,T=B=>{const{selectNodesOnDrag:Y,nodeDragThreshold:U}=M.getState();C&&(!Y||!N||U>0)&&oi({id:e,store:M,nodeRef:S}),t&&t(B,{...w.userNode})},F=B=>{if(!(gu(B.nativeEvent)||g)){if(ru.includes(B.key)&&C){const Y=B.key==="Escape";oi({id:e,store:M,unselect:Y,nodeRef:S})}else if(N&&p.selected&&Object.prototype.hasOwnProperty.call(Dt,B.key)){B.preventDefault();const{ariaLabelConfig:Y}=M.getState();M.setState({ariaLiveMessage:Y["node.a11yDescription.ariaLiveMessage"]({direction:B.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),A({direction:Dt[B.key],factor:B.shiftKey?4:1})}}},V=()=>{var J;if(g||!((J=S.current)!=null&&J.matches(":focus-visible")))return;const{transform:B,width:Y,height:U,autoPanOnNodeFocus:K,setCenter:Q}=M.getState();if(!K)return;wi(new Map([[e,p]]),{x:0,y:0,width:Y,height:U},B,!0).length>0||Q(p.position.x+D.width/2,p.position.y+D.height/2,{zoom:B[2]})};return $.jsx("div",{className:se(["react-flow__node",`react-flow__node-${b}`,{[h]:N},p.className,{selected:p.selected,selectable:C,parent:_,draggable:N,dragging:P}]),ref:S,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:z?"visible":"hidden",...p.style,...L},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:G,onMouseLeave:j,onContextMenu:W,onClick:T,onDoubleClick:I,onKeyDown:k?F:void 0,tabIndex:k?0:void 0,onFocus:k?V:void 0,role:p.ariaRole??(k?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${qu}-${y}`,"aria-label":p.ariaLabel,...p.domAttributes,children:$.jsx(_m,{value:e,children:$.jsx(E,{id:e,data:p.data,type:b,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:p.selected??!1,selectable:C,draggable:N,deletable:p.deletable??!0,isConnectable:q,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:P,dragHandle:p.dragHandle,zIndex:w.z,parentId:p.parentId,...D})})})}var Om=O.memo(Fm);const Vm=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Yu(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,onError:o}=te(Vm,re),s=Tm(e.onlyRenderVisibleElements),a=zm();return $.jsx("div",{className:"react-flow__nodes",style:Kt,children:s.map(u=>$.jsx(Om,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:o},u))})}Yu.displayName="NodeRenderer";const Bm=O.memo(Yu);function Hm(e){return te(O.useCallback(n=>{if(!e)return n.edges.map(r=>r.id);const i=[];if(n.width&&n.height)for(const r of n.edges){const o=n.nodeLookup.get(r.source),s=n.nodeLookup.get(r.target);o&&s&&Vp({sourceNode:o,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&i.push(r.id)}return i},[e]),re)}const jm=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return $.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Gm=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return $.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Ao={[Rt.Arrow]:jm,[Rt.ArrowClosed]:Gm};function Ym(e){const t=ie();return O.useMemo(()=>{var r,o;return Object.prototype.hasOwnProperty.call(Ao,e)?Ao[e]:((o=(r=t.getState()).onError)==null||o.call(r,"009",ve.error009(e)),null)},[e])}const Wm=({id:e,type:t,color:n,width:i=12.5,height:r=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=Ym(t);return u?$.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:$.jsx(u,{color:n,strokeWidth:s})}):null},Wu=({defaultColor:e,rfId:t})=>{const n=te(o=>o.edges),i=te(o=>o.defaultEdgeOptions),r=O.useMemo(()=>Up(n,{id:t,defaultColor:e,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[n,i,t,e]);return r.length?$.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:$.jsx("defs",{children:r.map(o=>$.jsx(Wm,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Wu.displayName="MarkerDefinitions";var Xm=O.memo(Wu);function Xu({x:e,y:t,label:n,labelStyle:i,labelShowBg:r=!0,labelBgStyle:o,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:l,...c}){const[f,d]=O.useState({x:1,y:0,width:0,height:0}),h=se(["react-flow__edge-textwrapper",l]),g=O.useRef(null);return O.useEffect(()=>{if(g.current){const y=g.current.getBBox();d({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),n?$.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...c,children:[r&&$.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),$.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:g,style:i,children:n}),u]}):null}Xu.displayName="EdgeText";const Um=O.memo(Xu);function Zt({path:e,labelX:t,labelY:n,label:i,labelStyle:r,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u,interactionWidth:l=20,...c}){return $.jsxs($.Fragment,{children:[$.jsx("path",{...c,d:e,fill:"none",className:se(["react-flow__edge-path",c.className])}),l?$.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:l,className:"react-flow__edge-interaction"}):null,i&&he(t)&&he(n)?$.jsx(Um,{x:t,y:n,label:i,labelStyle:r,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:u}):null]})}function Po({pos:e,x1:t,y1:n,x2:i,y2:r}){return e===Z.Left||e===Z.Right?[.5*(t+i),n]:[t,.5*(n+r)]}function Uu({sourceX:e,sourceY:t,sourcePosition:n=Z.Bottom,targetX:i,targetY:r,targetPosition:o=Z.Top}){const[s,a]=Po({pos:n,x1:e,y1:t,x2:i,y2:r}),[u,l]=Po({pos:o,x1:i,y1:r,x2:e,y2:t}),[c,f,d,h]=vu({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:l});return[`M${e},${t} C${s},${a} ${u},${l} ${i},${r}`,c,f,d,h]}function Ku(e){return O.memo(({id:t,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:s,targetPosition:a,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:v,interactionWidth:m})=>{const[x,p,w]=Uu({sourceX:n,sourceY:i,sourcePosition:s,targetX:r,targetY:o,targetPosition:a}),_=e.isInternal?void 0:t;return $.jsx(Zt,{id:_,path:x,labelX:p,labelY:w,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:v,interactionWidth:m})})}const Km=Ku({isInternal:!1}),Zu=Ku({isInternal:!0});Km.displayName="SimpleBezierEdge";Zu.displayName="SimpleBezierEdgeInternal";function Qu(e){return O.memo(({id:t,sourceX:n,sourceY:i,targetX:r,targetY:o,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,sourcePosition:h=Z.Bottom,targetPosition:g=Z.Top,markerEnd:y,markerStart:v,pathOptions:m,interactionWidth:x})=>{const[p,w,_]=ti({sourceX:n,sourceY:i,sourcePosition:h,targetX:r,targetY:o,targetPosition:g,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset,stepPosition:m==null?void 0:m.stepPosition}),b=e.isInternal?void 0:t;return $.jsx(Zt,{id:b,path:p,labelX:w,labelY:_,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:y,markerStart:v,interactionWidth:x})})}const Ju=Qu({isInternal:!1}),ec=Qu({isInternal:!0});Ju.displayName="SmoothStepEdge";ec.displayName="SmoothStepEdgeInternal";function tc(e){return O.memo(({id:t,...n})=>{var r;const i=e.isInternal?void 0:t;return $.jsx(Ju,{...n,id:i,pathOptions:O.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Zm=tc({isInternal:!1}),nc=tc({isInternal:!0});Zm.displayName="StepEdge";nc.displayName="StepEdgeInternal";function rc(e){return O.memo(({id:t,sourceX:n,sourceY:i,targetX:r,targetY:o,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[v,m,x]=xu({sourceX:n,sourceY:i,targetX:r,targetY:o}),p=e.isInternal?void 0:t;return $.jsx(Zt,{id:p,path:v,labelX:m,labelY:x,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:g,interactionWidth:y})})}const Qm=rc({isInternal:!1}),ic=rc({isInternal:!0});Qm.displayName="StraightEdge";ic.displayName="StraightEdgeInternal";function oc(e){return O.memo(({id:t,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:s=Z.Bottom,targetPosition:a=Z.Top,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:v,pathOptions:m,interactionWidth:x})=>{const[p,w,_]=yu({sourceX:n,sourceY:i,sourcePosition:s,targetX:r,targetY:o,targetPosition:a,curvature:m==null?void 0:m.curvature}),b=e.isInternal?void 0:t;return $.jsx(Zt,{id:b,path:p,labelX:w,labelY:_,label:u,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:g,markerEnd:y,markerStart:v,interactionWidth:x})})}const Jm=oc({isInternal:!1}),sc=oc({isInternal:!0});Jm.displayName="BezierEdge";sc.displayName="BezierEdgeInternal";const Ro={default:sc,straight:ic,step:nc,smoothstep:ec,simplebezier:Zu},Lo={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ev=(e,t,n)=>n===Z.Left?e-t:n===Z.Right?e+t:e,tv=(e,t,n)=>n===Z.Top?e-t:n===Z.Bottom?e+t:e,qo="react-flow__edgeupdater";function To({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:o,onMouseOut:s,type:a}){return $.jsx("circle",{onMouseDown:r,onMouseEnter:o,onMouseOut:s,className:se([qo,`${qo}-${a}`]),cx:ev(t,i,e),cy:tv(n,i,e),r:i,stroke:"transparent",fill:"transparent"})}function nv({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:i,sourceY:r,targetX:o,targetY:s,sourcePosition:a,targetPosition:u,onReconnect:l,onReconnectStart:c,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const g=ie(),y=(w,_)=>{if(w.button!==0)return;const{autoPanOnConnect:b,domNode:E,isValidConnection:N,connectionMode:C,connectionRadius:q,lib:k,onConnectStart:M,onConnectEnd:z,cancelConnection:S,nodeLookup:P,rfId:A,panBy:D,updateConnection:L}=g.getState(),R=_.type==="target",H=(W,I)=>{d(!1),f==null||f(W,n,_.type,I)},G=W=>l==null?void 0:l(n,W),j=(W,I)=>{d(!0),c==null||c(w,n,_.type),M==null||M(W,I)};ii.onPointerDown(w.nativeEvent,{autoPanOnConnect:b,connectionMode:C,connectionRadius:q,domNode:E,handleId:_.id,nodeId:_.nodeId,nodeLookup:P,isTarget:R,edgeUpdaterType:_.type,lib:k,flowId:A,cancelConnection:S,panBy:D,isValidConnection:N,onConnect:G,onConnectStart:j,onConnectEnd:z,onReconnectEnd:H,updateConnection:L,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:w.currentTarget})},v=w=>y(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),m=w=>y(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>h(!0),p=()=>h(!1);return $.jsxs($.Fragment,{children:[(e===!0||e==="source")&&$.jsx(To,{position:a,centerX:i,centerY:r,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&$.jsx(To,{position:u,centerX:o,centerY:s,radius:t,onMouseDown:m,onMouseEnter:x,onMouseOut:p,type:"target"})]})}function rv({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:r,onDoubleClick:o,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:l,reconnectRadius:c,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:g,edgeTypes:y,noPanClassName:v,onError:m,disableKeyboardA11y:x}){let p=te(Q=>Q.edgeLookup.get(e));const w=te(Q=>Q.defaultEdgeOptions);p=w?{...w,...p}:p;let _=p.type||"default",b=(y==null?void 0:y[_])||Ro[_];b===void 0&&(m==null||m("011",ve.error011(_)),_="default",b=(y==null?void 0:y.default)||Ro.default);const E=!!(p.focusable||t&&typeof p.focusable>"u"),N=typeof f<"u"&&(p.reconnectable||n&&typeof p.reconnectable>"u"),C=!!(p.selectable||i&&typeof p.selectable>"u"),q=O.useRef(null),[k,M]=O.useState(!1),[z,S]=O.useState(!1),P=ie(),{zIndex:A,sourceX:D,sourceY:L,targetX:R,targetY:H,sourcePosition:G,targetPosition:j}=te(O.useCallback(Q=>{const X=Q.nodeLookup.get(p.source),J=Q.nodeLookup.get(p.target);if(!X||!J)return{zIndex:p.zIndex,...Lo};const ne=Xp({id:e,sourceNode:X,targetNode:J,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:Q.connectionMode,onError:m});return{zIndex:Op({selected:p.selected,zIndex:p.zIndex,sourceNode:X,targetNode:J,elevateOnSelect:Q.elevateEdgesOnSelect,zIndexMode:Q.zIndexMode}),...ne||Lo}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),re),W=O.useMemo(()=>p.markerStart?`url('#${ni(p.markerStart,g)}')`:void 0,[p.markerStart,g]),I=O.useMemo(()=>p.markerEnd?`url('#${ni(p.markerEnd,g)}')`:void 0,[p.markerEnd,g]);if(p.hidden||D===null||L===null||R===null||H===null)return null;const T=Q=>{var ee;const{addSelectedEdges:X,unselectNodesAndEdges:J,multiSelectionActive:ne}=P.getState();C&&(P.setState({nodesSelectionActive:!1}),p.selected&&ne?(J({nodes:[],edges:[p]}),(ee=q.current)==null||ee.blur()):X([e])),r&&r(Q,p)},F=o?Q=>{o(Q,{...p})}:void 0,V=s?Q=>{s(Q,{...p})}:void 0,B=a?Q=>{a(Q,{...p})}:void 0,Y=u?Q=>{u(Q,{...p})}:void 0,U=l?Q=>{l(Q,{...p})}:void 0,K=Q=>{var X;if(!x&&ru.includes(Q.key)&&C){const{unselectNodesAndEdges:J,addSelectedEdges:ne}=P.getState();Q.key==="Escape"?((X=q.current)==null||X.blur(),J({edges:[p]})):ne([e])}};return $.jsx("svg",{style:{zIndex:A},children:$.jsxs("g",{className:se(["react-flow__edge",`react-flow__edge-${_}`,p.className,v,{selected:p.selected,animated:p.animated,inactive:!C&&!r,updating:k,selectable:C}]),onClick:T,onDoubleClick:F,onContextMenu:V,onMouseEnter:B,onMouseMove:Y,onMouseLeave:U,onKeyDown:E?K:void 0,tabIndex:E?0:void 0,role:p.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":E?`${Tu}-${g}`:void 0,ref:q,...p.domAttributes,children:[!z&&$.jsx(b,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:C,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:D,sourceY:L,targetX:R,targetY:H,sourcePosition:G,targetPosition:j,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:W,markerEnd:I,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),N&&$.jsx(nv,{edge:p,isReconnectable:N,reconnectRadius:c,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:D,sourceY:L,targetX:R,targetY:H,sourcePosition:G,targetPosition:j,setUpdateHover:M,setReconnecting:S})]})})}var iv=O.memo(rv);const ov=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ac({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:r,onReconnect:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:c,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:y}){const{edgesFocusable:v,edgesReconnectable:m,elementsSelectable:x,onError:p}=te(ov,re),w=Hm(t);return $.jsxs("div",{className:"react-flow__edges",children:[$.jsx(Xm,{defaultColor:e,rfId:n}),w.map(_=>$.jsx(iv,{id:_,edgesFocusable:v,edgesReconnectable:m,elementsSelectable:x,noPanClassName:r,onReconnect:o,onContextMenu:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:l,onClick:c,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:p,edgeTypes:i,disableKeyboardA11y:y},_))]})}ac.displayName="EdgeRenderer";const sv=O.memo(ac),av=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function uv({children:e}){const t=te(av);return $.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function cv(e){const t=ki(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const lv=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function fv(e){const t=te(lv),n=ie();return O.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function dv(e){return e.connection.inProgress?{...e.connection,to:pt(e.connection.to,e.transform)}:{...e.connection}}function hv(e){return dv}function pv(e){const t=hv();return te(t,re)}const gv=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function mv({containerStyle:e,style:t,type:n,component:i}){const{nodesConnectable:r,width:o,height:s,isValid:a,inProgress:u}=te(gv,re);return!(o&&r&&u)?null:$.jsx("svg",{style:e,width:o,height:s,className:"react-flow__connectionline react-flow__container",children:$.jsx("g",{className:se(["react-flow__connection",su(a)]),children:$.jsx(uc,{style:t,type:n,CustomComponent:i,isValid:a})})})}const uc=({style:e,type:t=ke.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:r,from:o,fromNode:s,fromHandle:a,fromPosition:u,to:l,toNode:c,toHandle:f,toPosition:d,pointer:h}=pv();if(!r)return;if(n)return $.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:o.x,fromY:o.y,toX:l.x,toY:l.y,fromPosition:u,toPosition:d,connectionStatus:su(i),toNode:c,toHandle:f,pointer:h});let g="";const y={sourceX:o.x,sourceY:o.y,sourcePosition:u,targetX:l.x,targetY:l.y,targetPosition:d};switch(t){case ke.Bezier:[g]=yu(y);break;case ke.SimpleBezier:[g]=Uu(y);break;case ke.Step:[g]=ti({...y,borderRadius:0});break;case ke.SmoothStep:[g]=ti(y);break;default:[g]=xu(y)}return $.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};uc.displayName="ConnectionLine";const vv={};function Do(e=vv){O.useRef(e),ie(),O.useEffect(()=>{},[e])}function yv(){ie(),O.useRef(!1),O.useEffect(()=>{},[])}function cc({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:o,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:v,connectionLineContainerStyle:m,selectionKeyCode:x,selectionOnDrag:p,selectionMode:w,multiSelectionKeyCode:_,panActivationKeyCode:b,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:C,elementsSelectable:q,defaultViewport:k,translateExtent:M,minZoom:z,maxZoom:S,preventScrolling:P,defaultMarkerColor:A,zoomOnScroll:D,zoomOnPinch:L,panOnScroll:R,panOnScrollSpeed:H,panOnScrollMode:G,zoomOnDoubleClick:j,panOnDrag:W,onPaneClick:I,onPaneMouseEnter:T,onPaneMouseMove:F,onPaneMouseLeave:V,onPaneScroll:B,onPaneContextMenu:Y,paneClickDistance:U,nodeClickDistance:K,onEdgeContextMenu:Q,onEdgeMouseEnter:X,onEdgeMouseMove:J,onEdgeMouseLeave:ne,reconnectRadius:ee,onReconnect:ae,onReconnectStart:Se,onReconnectEnd:we,noDragClassName:Ie,noWheelClassName:Xe,noPanClassName:Ue,disableKeyboardA11y:Ke,nodeExtent:Qt,rfId:gt,viewport:De,onViewportChange:Ze}){return Do(e),Do(t),yv(),cv(n),fv(De),$.jsx(Lm,{onPaneClick:I,onPaneMouseEnter:T,onPaneMouseMove:F,onPaneMouseLeave:V,onPaneContextMenu:Y,onPaneScroll:B,paneClickDistance:U,deleteKeyCode:N,selectionKeyCode:x,selectionOnDrag:p,selectionMode:w,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:_,panActivationKeyCode:b,zoomActivationKeyCode:E,elementsSelectable:q,zoomOnScroll:D,zoomOnPinch:L,zoomOnDoubleClick:j,panOnScroll:R,panOnScrollSpeed:H,panOnScrollMode:G,panOnDrag:W,defaultViewport:k,translateExtent:M,minZoom:z,maxZoom:S,onSelectionContextMenu:f,preventScrolling:P,noDragClassName:Ie,noWheelClassName:Xe,noPanClassName:Ue,disableKeyboardA11y:Ke,onViewportChange:Ze,isControlledViewport:!!De,children:$.jsxs(uv,{children:[$.jsx(sv,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:s,onReconnect:ae,onReconnectStart:Se,onReconnectEnd:we,onlyRenderVisibleElements:C,onEdgeContextMenu:Q,onEdgeMouseEnter:X,onEdgeMouseMove:J,onEdgeMouseLeave:ne,reconnectRadius:ee,defaultMarkerColor:A,noPanClassName:Ue,disableKeyboardA11y:Ke,rfId:gt}),$.jsx(mv,{style:y,type:g,component:v,containerStyle:m}),$.jsx("div",{className:"react-flow__edgelabel-renderer"}),$.jsx(Bm,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:u,onNodeMouseLeave:l,onNodeContextMenu:c,nodeClickDistance:K,onlyRenderVisibleElements:C,noPanClassName:Ue,noDragClassName:Ie,disableKeyboardA11y:Ke,nodeExtent:Qt,rfId:gt}),$.jsx("div",{className:"react-flow__viewport-portal"})]})})}cc.displayName="GraphView";const wv=O.memo(cc),zo=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:s,fitViewOptions:a,minZoom:u=.5,maxZoom:l=2,nodeOrigin:c,nodeExtent:f,zIndexMode:d="basic"}={})=>{const h=new Map,g=new Map,y=new Map,v=new Map,m=i??t??[],x=n??e??[],p=c??[0,0],w=f??ot;Eu(y,v,m);const _=ri(x,h,g,{nodeOrigin:p,nodeExtent:w,zIndexMode:d});let b=[0,0,1];if(s&&r&&o){const E=dt(h,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))}),{x:N,y:C,zoom:q}=xi(E,r,o,u,l,(a==null?void 0:a.padding)??.1);b=[N,C,q]}return{rfId:"1",width:r??0,height:o??0,transform:b,nodes:x,nodesInitialized:_,nodeLookup:h,parentLookup:g,edges:m,edgeLookup:v,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:u,maxZoom:l,translateExtent:ot,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:He.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:p,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{...ou},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:qp,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:iu,zIndexMode:d,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},xv=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:f,zIndexMode:d})=>$g((h,g)=>{async function y(){const{nodeLookup:v,panZoom:m,fitViewOptions:x,fitViewResolver:p,width:w,height:_,minZoom:b,maxZoom:E}=g();m&&(await Rp({nodes:v,width:w,height:_,panZoom:m,minZoom:b,maxZoom:E},x),p==null||p.resolve(!0),h({fitViewResolver:null}))}return{...zo({nodes:e,edges:t,width:r,height:o,fitView:s,fitViewOptions:a,minZoom:u,maxZoom:l,nodeOrigin:c,nodeExtent:f,defaultNodes:n,defaultEdges:i,zIndexMode:d}),setNodes:v=>{const{nodeLookup:m,parentLookup:x,nodeOrigin:p,elevateNodesOnSelect:w,fitViewQueued:_,zIndexMode:b}=g(),E=ri(v,m,x,{nodeOrigin:p,nodeExtent:f,elevateNodesOnSelect:w,checkEquality:!0,zIndexMode:b});_&&E?(y(),h({nodes:v,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:v,nodesInitialized:E})},setEdges:v=>{const{connectionLookup:m,edgeLookup:x}=g();Eu(m,x,v),h({edges:v})},setDefaultNodesAndEdges:(v,m)=>{if(v){const{setNodes:x}=g();x(v),h({hasDefaultNodes:!0})}if(m){const{setEdges:x}=g();x(m),h({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:m,nodeLookup:x,parentLookup:p,domNode:w,nodeOrigin:_,nodeExtent:b,debug:E,fitViewQueued:N,zIndexMode:C}=g(),{changes:q,updatedInternals:k}=ng(v,x,p,w,_,b,C);k&&(Qp(x,p,{nodeOrigin:_,nodeExtent:b,zIndexMode:C}),N?(y(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(q==null?void 0:q.length)>0&&(E&&console.log("React Flow: trigger node changes",q),m==null||m(q)))},updateNodePositions:(v,m=!1)=>{const x=[];let p=[];const{nodeLookup:w,triggerNodeChanges:_,connection:b,updateConnection:E,onNodesChangeMiddlewareMap:N}=g();for(const[C,q]of v){const k=w.get(C),M=!!(k!=null&&k.expandParent&&(k!=null&&k.parentId)&&(q!=null&&q.position)),z={id:C,type:"position",position:M?{x:Math.max(0,q.position.x),y:Math.max(0,q.position.y)}:q.position,dragging:m};if(k&&b.inProgress&&b.fromNode.id===k.id){const S=qe(k,b.fromHandle,Z.Left,!0);E({...b,from:S})}M&&k.parentId&&x.push({id:C,parentId:k.parentId,rect:{...q.internals.positionAbsolute,width:q.measured.width??0,height:q.measured.height??0}}),p.push(z)}if(x.length>0){const{parentLookup:C,nodeOrigin:q}=g(),k=Ci(x,w,C,q);p.push(...k)}for(const C of N.values())p=C(p);_(p)},triggerNodeChanges:v=>{const{onNodesChange:m,setNodes:x,nodes:p,hasDefaultNodes:w,debug:_}=g();if(v!=null&&v.length){if(w){const b=$u(v,p);x(b)}_&&console.log("React Flow: trigger node changes",v),m==null||m(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:m,setEdges:x,edges:p,hasDefaultEdges:w,debug:_}=g();if(v!=null&&v.length){if(w){const b=Fu(v,p);x(b)}_&&console.log("React Flow: trigger edge changes",v),m==null||m(v)}},addSelectedNodes:v=>{const{multiSelectionActive:m,edgeLookup:x,nodeLookup:p,triggerNodeChanges:w,triggerEdgeChanges:_}=g();if(m){const b=v.map(E=>Ae(E,!0));w(b);return}w(Fe(p,new Set([...v]),!0)),_(Fe(x))},addSelectedEdges:v=>{const{multiSelectionActive:m,edgeLookup:x,nodeLookup:p,triggerNodeChanges:w,triggerEdgeChanges:_}=g();if(m){const b=v.map(E=>Ae(E,!0));_(b);return}_(Fe(x,new Set([...v]))),w(Fe(p,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:m}={})=>{const{edges:x,nodes:p,nodeLookup:w,triggerNodeChanges:_,triggerEdgeChanges:b}=g(),E=v||p,N=m||x,C=E.map(k=>{const M=w.get(k.id);return M&&(M.selected=!1),Ae(k.id,!1)}),q=N.map(k=>Ae(k.id,!1));_(C),b(q)},setMinZoom:v=>{const{panZoom:m,maxZoom:x}=g();m==null||m.setScaleExtent([v,x]),h({minZoom:v})},setMaxZoom:v=>{const{panZoom:m,minZoom:x}=g();m==null||m.setScaleExtent([x,v]),h({maxZoom:v})},setTranslateExtent:v=>{var m;(m=g().panZoom)==null||m.setTranslateExtent(v),h({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:m,triggerNodeChanges:x,triggerEdgeChanges:p,elementsSelectable:w}=g();if(!w)return;const _=m.reduce((E,N)=>N.selected?[...E,Ae(N.id,!1)]:E,[]),b=v.reduce((E,N)=>N.selected?[...E,Ae(N.id,!1)]:E,[]);x(_),p(b)},setNodeExtent:v=>{const{nodes:m,nodeLookup:x,parentLookup:p,nodeOrigin:w,elevateNodesOnSelect:_,nodeExtent:b,zIndexMode:E}=g();v[0][0]===b[0][0]&&v[0][1]===b[0][1]&&v[1][0]===b[1][0]&&v[1][1]===b[1][1]||(ri(m,x,p,{nodeOrigin:w,nodeExtent:v,elevateNodesOnSelect:_,checkEquality:!1,zIndexMode:E}),h({nodeExtent:v}))},panBy:v=>{const{transform:m,width:x,height:p,panZoom:w,translateExtent:_}=g();return rg({delta:v,panZoom:w,transform:m,translateExtent:_,width:x,height:p})},setCenter:async(v,m,x)=>{const{width:p,height:w,maxZoom:_,panZoom:b}=g();if(!b)return Promise.resolve(!1);const E=typeof(x==null?void 0:x.zoom)<"u"?x.zoom:_;return await b.setViewport({x:p/2-v*E,y:w/2-m*E,zoom:E},{duration:x==null?void 0:x.duration,ease:x==null?void 0:x.ease,interpolate:x==null?void 0:x.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...ou}})},updateConnection:v=>{h({connection:v})},reset:()=>h({...zo()})}},Object.is);function _v({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:r,initialHeight:o,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:u,fitView:l,nodeOrigin:c,nodeExtent:f,zIndexMode:d,children:h}){const[g]=O.useState(()=>xv({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:l,minZoom:s,maxZoom:a,fitViewOptions:u,nodeOrigin:c,nodeExtent:f,zIndexMode:d}));return $.jsx(Fg,{value:g,children:$.jsx(um,{children:h})})}function bv({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:r,width:o,height:s,fitView:a,fitViewOptions:u,minZoom:l,maxZoom:c,nodeOrigin:f,nodeExtent:d,zIndexMode:h}){return O.useContext(Xt)?$.jsx($.Fragment,{children:e}):$.jsx(_v,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:r,initialWidth:o,initialHeight:s,fitView:a,initialFitViewOptions:u,initialMinZoom:l,initialMaxZoom:c,nodeOrigin:f,nodeExtent:d,zIndexMode:h,children:e})}const Ev={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Sv({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:o,edgeTypes:s,onNodeClick:a,onEdgeClick:u,onInit:l,onMove:c,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:x,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:b,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:C,onNodesDelete:q,onEdgesDelete:k,onDelete:M,onSelectionChange:z,onSelectionDragStart:S,onSelectionDrag:P,onSelectionDragStop:A,onSelectionContextMenu:D,onSelectionStart:L,onSelectionEnd:R,onBeforeDelete:H,connectionMode:G,connectionLineType:j=ke.Bezier,connectionLineStyle:W,connectionLineComponent:I,connectionLineContainerStyle:T,deleteKeyCode:F="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:B=!1,selectionMode:Y=st.Full,panActivationKeyCode:U="Space",multiSelectionKeyCode:K=ut()?"Meta":"Control",zoomActivationKeyCode:Q=ut()?"Meta":"Control",snapToGrid:X,snapGrid:J,onlyRenderVisibleElements:ne=!1,selectNodesOnDrag:ee,nodesDraggable:ae,autoPanOnNodeFocus:Se,nodesConnectable:we,nodesFocusable:Ie,nodeOrigin:Xe=Du,edgesFocusable:Ue,edgesReconnectable:Ke,elementsSelectable:Qt=!0,defaultViewport:gt=Qg,minZoom:De=.5,maxZoom:Ze=2,translateExtent:Pi=ot,preventScrolling:Ac=!0,nodeExtent:Jt,defaultMarkerColor:Pc="#b1b1b7",zoomOnScroll:Rc=!0,zoomOnPinch:Lc=!0,panOnScroll:qc=!1,panOnScrollSpeed:Tc=.5,panOnScrollMode:Dc=Pe.Free,zoomOnDoubleClick:zc=!0,panOnDrag:$c=!0,onPaneClick:Fc,onPaneMouseEnter:Oc,onPaneMouseMove:Vc,onPaneMouseLeave:Bc,onPaneScroll:Hc,onPaneContextMenu:jc,paneClickDistance:Gc=1,nodeClickDistance:Yc=0,children:Wc,onReconnect:Xc,onReconnectStart:Uc,onReconnectEnd:Kc,onEdgeContextMenu:Zc,onEdgeDoubleClick:Qc,onEdgeMouseEnter:Jc,onEdgeMouseMove:el,onEdgeMouseLeave:tl,reconnectRadius:nl=10,onNodesChange:rl,onEdgesChange:il,noDragClassName:ol="nodrag",noWheelClassName:sl="nowheel",noPanClassName:Ri="nopan",fitView:Li,fitViewOptions:qi,connectOnClick:al,attributionPosition:ul,proOptions:cl,defaultEdgeOptions:ll,elevateNodesOnSelect:fl=!0,elevateEdgesOnSelect:dl=!1,disableKeyboardA11y:Ti=!1,autoPanOnConnect:hl,autoPanOnNodeDrag:pl,autoPanSpeed:gl,connectionRadius:ml,isValidConnection:vl,onError:yl,style:wl,id:Di,nodeDragThreshold:xl,connectionDragThreshold:_l,viewport:bl,onViewportChange:El,width:Sl,height:Nl,colorMode:Cl="light",debug:kl,onScroll:mt,ariaLabelConfig:Ml,zIndexMode:zi="basic",...Il},Al){const en=Di||"1",Pl=nm(Cl),Rl=O.useCallback($i=>{$i.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),mt==null||mt($i)},[mt]);return $.jsx("div",{"data-testid":"rf__wrapper",...Il,onScroll:Rl,style:{...wl,...Ev},ref:Al,className:se(["react-flow",r,Pl]),id:Di,role:"application",children:$.jsxs(bv,{nodes:e,edges:t,width:Sl,height:Nl,fitView:Li,fitViewOptions:qi,minZoom:De,maxZoom:Ze,nodeOrigin:Xe,nodeExtent:Jt,zIndexMode:zi,children:[$.jsx(wv,{onInit:l,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:x,onNodeMouseMove:p,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:b,nodeTypes:o,edgeTypes:s,connectionLineType:j,connectionLineStyle:W,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:V,selectionOnDrag:B,selectionMode:Y,deleteKeyCode:F,multiSelectionKeyCode:K,panActivationKeyCode:U,zoomActivationKeyCode:Q,onlyRenderVisibleElements:ne,defaultViewport:gt,translateExtent:Pi,minZoom:De,maxZoom:Ze,preventScrolling:Ac,zoomOnScroll:Rc,zoomOnPinch:Lc,zoomOnDoubleClick:zc,panOnScroll:qc,panOnScrollSpeed:Tc,panOnScrollMode:Dc,panOnDrag:$c,onPaneClick:Fc,onPaneMouseEnter:Oc,onPaneMouseMove:Vc,onPaneMouseLeave:Bc,onPaneScroll:Hc,onPaneContextMenu:jc,paneClickDistance:Gc,nodeClickDistance:Yc,onSelectionContextMenu:D,onSelectionStart:L,onSelectionEnd:R,onReconnect:Xc,onReconnectStart:Uc,onReconnectEnd:Kc,onEdgeContextMenu:Zc,onEdgeDoubleClick:Qc,onEdgeMouseEnter:Jc,onEdgeMouseMove:el,onEdgeMouseLeave:tl,reconnectRadius:nl,defaultMarkerColor:Pc,noDragClassName:ol,noWheelClassName:sl,noPanClassName:Ri,rfId:en,disableKeyboardA11y:Ti,nodeExtent:Jt,viewport:bl,onViewportChange:El}),$.jsx(tm,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:ae,autoPanOnNodeFocus:Se,nodesConnectable:we,nodesFocusable:Ie,edgesFocusable:Ue,edgesReconnectable:Ke,elementsSelectable:Qt,elevateNodesOnSelect:fl,elevateEdgesOnSelect:dl,minZoom:De,maxZoom:Ze,nodeExtent:Jt,onNodesChange:rl,onEdgesChange:il,snapToGrid:X,snapGrid:J,connectionMode:G,translateExtent:Pi,connectOnClick:al,defaultEdgeOptions:ll,fitView:Li,fitViewOptions:qi,onNodesDelete:q,onEdgesDelete:k,onDelete:M,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:S,onSelectionDragStop:A,onMove:c,onMoveStart:f,onMoveEnd:d,noPanClassName:Ri,nodeOrigin:Xe,rfId:en,autoPanOnConnect:hl,autoPanOnNodeDrag:pl,autoPanSpeed:gl,onError:yl,connectionRadius:ml,isValidConnection:vl,selectNodesOnDrag:ee,nodeDragThreshold:xl,connectionDragThreshold:_l,onBeforeDelete:H,debug:kl,ariaLabelConfig:Ml,zIndexMode:zi}),$.jsx(Zg,{onSelectionChange:z}),Wc,$.jsx(Yg,{proOptions:cl,position:ul}),$.jsx(Gg,{rfId:en,disableKeyboardA11y:Ti})]})})}var l0=Ou(Sv);function f0(e){const[t,n]=O.useState(e),i=O.useCallback(r=>n(o=>$u(r,o)),[]);return[t,n,i]}function d0(e){const[t,n]=O.useState(e),i=O.useCallback(r=>n(o=>Fu(r,o)),[]);return[t,n,i]}function Nv({dimensions:e,lineWidth:t,variant:n,className:i}){return $.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:se(["react-flow__background-pattern",n,i])})}function Cv({radius:e,className:t}){return $.jsx("circle",{cx:e,cy:e,r:e,className:se(["react-flow__background-pattern","dots",t])})}var Me;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Me||(Me={}));const kv={[Me.Dots]:1,[Me.Lines]:1,[Me.Cross]:6},Mv=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function lc({id:e,variant:t=Me.Dots,gap:n=20,size:i,lineWidth:r=1,offset:o=0,color:s,bgColor:a,style:u,className:l,patternClassName:c}){const f=O.useRef(null),{transform:d,patternId:h}=te(Mv,re),g=i||kv[t],y=t===Me.Dots,v=t===Me.Cross,m=Array.isArray(n)?n:[n,n],x=[m[0]*d[2]||1,m[1]*d[2]||1],p=g*d[2],w=Array.isArray(o)?o:[o,o],_=v?[p,p]:x,b=[w[0]*d[2]||1+_[0]/2,w[1]*d[2]||1+_[1]/2],E=`${h}${e||""}`;return $.jsxs("svg",{className:se(["react-flow__background",l]),style:{...u,...Kt,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[$.jsx("pattern",{id:E,x:d[0]%x[0],y:d[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`,children:y?$.jsx(Cv,{radius:p/2,className:c}):$.jsx(Nv,{dimensions:_,lineWidth:r,variant:t,className:c})}),$.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}lc.displayName="Background";const h0=O.memo(lc);function Iv(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:$.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Av(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:$.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Pv(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:$.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Rv(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:$.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Lv(){return $.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:$.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function bt({children:e,className:t,...n}){return $.jsx("button",{type:"button",className:se(["react-flow__controls-button",t]),...n,children:e})}const qv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function fc({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:l,children:c,position:f="bottom-left",orientation:d="vertical","aria-label":h}){const g=ie(),{isInteractive:y,minZoomReached:v,maxZoomReached:m,ariaLabelConfig:x}=te(qv,re),{zoomIn:p,zoomOut:w,fitView:_}=ki(),b=()=>{p(),o==null||o()},E=()=>{w(),s==null||s()},N=()=>{_(r),a==null||a()},C=()=>{g.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u==null||u(!y)},q=d==="horizontal"?"horizontal":"vertical";return $.jsxs(Ut,{className:se(["react-flow__controls",q,l]),position:f,style:e,"data-testid":"rf__controls","aria-label":h??x["controls.ariaLabel"],children:[t&&$.jsxs($.Fragment,{children:[$.jsx(bt,{onClick:b,className:"react-flow__controls-zoomin",title:x["controls.zoomIn.ariaLabel"],"aria-label":x["controls.zoomIn.ariaLabel"],disabled:m,children:$.jsx(Iv,{})}),$.jsx(bt,{onClick:E,className:"react-flow__controls-zoomout",title:x["controls.zoomOut.ariaLabel"],"aria-label":x["controls.zoomOut.ariaLabel"],disabled:v,children:$.jsx(Av,{})})]}),n&&$.jsx(bt,{className:"react-flow__controls-fitview",onClick:N,title:x["controls.fitView.ariaLabel"],"aria-label":x["controls.fitView.ariaLabel"],children:$.jsx(Pv,{})}),i&&$.jsx(bt,{className:"react-flow__controls-interactive",onClick:C,title:x["controls.interactive.ariaLabel"],"aria-label":x["controls.interactive.ariaLabel"],children:y?$.jsx(Lv,{}):$.jsx(Rv,{})}),c]})}fc.displayName="Controls";const p0=O.memo(fc);function Tv({id:e,x:t,y:n,width:i,height:r,style:o,color:s,strokeColor:a,strokeWidth:u,className:l,borderRadius:c,shapeRendering:f,selected:d,onClick:h}){const{background:g,backgroundColor:y}=o||{},v=s||g||y;return $.jsx("rect",{className:se(["react-flow__minimap-node",{selected:d},l]),x:t,y:n,rx:c,ry:c,width:i,height:r,style:{fill:v,stroke:a,strokeWidth:u},shapeRendering:f,onClick:h?m=>h(m,e):void 0})}const Dv=O.memo(Tv),zv=e=>e.nodes.map(t=>t.id),hn=e=>e instanceof Function?e:()=>e;function $v({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:o=Dv,onClick:s}){const a=te(zv,re),u=hn(t),l=hn(e),c=hn(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return $.jsx($.Fragment,{children:a.map(d=>$.jsx(Ov,{id:d,nodeColorFunc:u,nodeStrokeColorFunc:l,nodeClassNameFunc:c,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:o,onClick:s,shapeRendering:f},d))})}function Fv({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:a,onClick:u}){const{node:l,x:c,y:f,width:d,height:h}=te(g=>{const{internals:y}=g.nodeLookup.get(e),v=y.userNode,{x:m,y:x}=y.positionAbsolute,{width:p,height:w}=Ee(v);return{node:v,x:m,y:x,width:p,height:w}},re);return!l||l.hidden||!du(l)?null:$.jsx(a,{x:c,y:f,width:d,height:h,style:l.style,selected:!!l.selected,className:i(l),color:t(l),borderRadius:r,strokeColor:n(l),strokeWidth:o,shapeRendering:s,onClick:u,id:l.id})}const Ov=O.memo(Fv);var Vv=O.memo($v);const Bv=200,Hv=150,jv=e=>!e.hidden,Gv=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?fu(dt(e.nodeLookup,{filter:jv}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Yv="react-flow__minimap-desc";function dc({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:u,maskColor:l,maskStrokeColor:c,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:g,pannable:y=!1,zoomable:v=!1,ariaLabel:m,inversePan:x,zoomStep:p=1,offsetScale:w=5}){const _=ie(),b=O.useRef(null),{boundingRect:E,viewBB:N,rfId:C,panZoom:q,translateExtent:k,flowWidth:M,flowHeight:z,ariaLabelConfig:S}=te(Gv,re),P=(e==null?void 0:e.width)??Bv,A=(e==null?void 0:e.height)??Hv,D=E.width/P,L=E.height/A,R=Math.max(D,L),H=R*P,G=R*A,j=w*R,W=E.x-(H-E.width)/2-j,I=E.y-(G-E.height)/2-j,T=H+j*2,F=G+j*2,V=`${Yv}-${C}`,B=O.useRef(0),Y=O.useRef();B.current=R,O.useEffect(()=>{if(b.current&&q)return Y.current=dg({domNode:b.current,panZoom:q,getTransform:()=>_.getState().transform,getViewScale:()=>B.current}),()=>{var X;(X=Y.current)==null||X.destroy()}},[q]),O.useEffect(()=>{var X;(X=Y.current)==null||X.update({translateExtent:k,width:M,height:z,inversePan:x,pannable:y,zoomStep:p,zoomable:v})},[y,v,x,p,k,M,z]);const U=h?X=>{var ee;const[J,ne]=((ee=Y.current)==null?void 0:ee.pointer(X))||[0,0];h(X,{x:J,y:ne})}:void 0,K=g?O.useCallback((X,J)=>{const ne=_.getState().nodeLookup.get(J).internals.userNode;g(X,ne)},[]):void 0,Q=m??S["minimap.ariaLabel"];return $.jsx(Ut,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*R:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:se(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:$.jsxs("svg",{width:P,height:A,viewBox:`${W} ${I} ${T} ${F}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":V,ref:b,onClick:U,children:[Q&&$.jsx("title",{id:V,children:Q}),$.jsx(Vv,{onClick:K,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:a}),$.jsx("path",{className:"react-flow__minimap-mask",d:`M${W-j},${I-j}h${T+j*2}v${F+j*2}h${-T-j*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}dc.displayName="MiniMap";const g0=O.memo(dc),Wv=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Xv={[We.Line]:"right",[We.Handle]:"bottom-right"};function Uv({nodeId:e,position:t,variant:n=We.Handle,className:i,style:r=void 0,children:o,color:s,minWidth:a=10,minHeight:u=10,maxWidth:l=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,autoScale:h=!0,shouldResize:g,onResizeStart:y,onResize:v,onResizeEnd:m}){const x=ju(),p=typeof e=="string"?e:x,w=ie(),_=O.useRef(null),b=n===We.Handle,E=te(O.useCallback(Wv(b&&h),[b,h]),re),N=O.useRef(null),C=t??Xv[n];O.useEffect(()=>{if(!(!_.current||!p))return N.current||(N.current=Cg({domNode:_.current,nodeId:p,getStoreItems:()=>{const{nodeLookup:k,transform:M,snapGrid:z,snapToGrid:S,nodeOrigin:P,domNode:A}=w.getState();return{nodeLookup:k,transform:M,snapGrid:z,snapToGrid:S,nodeOrigin:P,paneDomNode:A}},onChange:(k,M)=>{const{triggerNodeChanges:z,nodeLookup:S,parentLookup:P,nodeOrigin:A}=w.getState(),D=[],L={x:k.x,y:k.y},R=S.get(p);if(R&&R.expandParent&&R.parentId){const H=R.origin??A,G=k.width??R.measured.width??0,j=k.height??R.measured.height??0,W={id:R.id,parentId:R.parentId,rect:{width:G,height:j,...hu({x:k.x??R.position.x,y:k.y??R.position.y},{width:G,height:j},R.parentId,S,H)}},I=Ci([W],S,P,A);D.push(...I),L.x=k.x?Math.max(H[0]*G,k.x):void 0,L.y=k.y?Math.max(H[1]*j,k.y):void 0}if(L.x!==void 0&&L.y!==void 0){const H={id:p,type:"position",position:{...L}};D.push(H)}if(k.width!==void 0&&k.height!==void 0){const G={id:p,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:k.width,height:k.height}};D.push(G)}for(const H of M){const G={...H,type:"position"};D.push(G)}z(D)},onEnd:({width:k,height:M})=>{const z={id:p,type:"dimensions",resizing:!1,dimensions:{width:k,height:M}};w.getState().triggerNodeChanges([z])}})),N.current.update({controlPosition:C,boundaries:{minWidth:a,minHeight:u,maxWidth:l,maxHeight:c},keepAspectRatio:f,resizeDirection:d,onResizeStart:y,onResize:v,onResizeEnd:m,shouldResize:g}),()=>{var k;(k=N.current)==null||k.destroy()}},[C,a,u,l,c,f,y,v,m,g]);const q=C.split("-");return $.jsx("div",{className:se(["react-flow__resize-control","nodrag",...q,n,i]),ref:_,style:{...r,scale:E,...s&&{[b?"backgroundColor":"borderColor"]:s}},children:o})}O.memo(Uv);function Ii(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pn,$o;function Kv(){if($o)return pn;$o=1;var e=xa(),t=4;function n(i){return e(i,t)}return pn=n,pn}var gn,Fo;function hc(){if(Fo)return gn;Fo=1;var e=Fl();function t(n){return typeof n=="function"?n:e}return gn=t,gn}var mn,Oo;function pc(){if(Oo)return mn;Oo=1;var e=_a(),t=si(),n=hc(),i=Te();function r(o,s){var a=i(o)?e:t;return a(o,n(s))}return mn=r,mn}var vn,Vo;function gc(){return Vo||(Vo=1,vn=pc()),vn}var yn,Bo;function Zv(){if(Bo)return yn;Bo=1;var e=si();function t(n,i){var r=[];return e(n,function(o,s,a){i(o,s,a)&&r.push(o)}),r}return yn=t,yn}var wn,Ho;function mc(){if(Ho)return wn;Ho=1;var e=Ol(),t=Zv(),n=ai(),i=Te();function r(o,s){var a=i(o)?e:t;return a(o,n(s,3))}return wn=r,wn}var xn,jo;function Qv(){if(jo)return xn;jo=1;var e=Object.prototype,t=e.hasOwnProperty;function n(i,r){return i!=null&&t.call(i,r)}return xn=n,xn}var _n,Go;function vc(){if(Go)return _n;Go=1;var e=Qv(),t=Vl();function n(i,r){return i!=null&&t(i,r,e)}return _n=n,_n}var bn,Yo;function Jv(){if(Yo)return bn;Yo=1;var e=ba(),t=Ea(),n=Sa(),i=Te(),r=ui(),o=ci(),s=Bl(),a=li(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(r(h)&&(i(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||a(h)||n(h)))return!h.length;var g=t(h);if(g==u||g==l)return!h.size;if(s(h))return!e(h).length;for(var y in h)if(f.call(h,y))return!1;return!0}return bn=d,bn}var En,Wo;function yc(){if(Wo)return En;Wo=1;function e(t){return t===void 0}return En=e,En}var Sn,Xo;function ey(){if(Xo)return Sn;Xo=1;function e(t,n,i,r){var o=-1,s=t==null?0:t.length;for(r&&s&&(i=t[++o]);++o<s;)i=n(i,t[o],o,t);return i}return Sn=e,Sn}var Nn,Uo;function ty(){if(Uo)return Nn;Uo=1;function e(t,n,i,r,o){return o(t,function(s,a,u){i=r?(r=!1,s):n(i,s,a,u)}),i}return Nn=e,Nn}var Cn,Ko;function wc(){if(Ko)return Cn;Ko=1;var e=ey(),t=si(),n=ai(),i=ty(),r=Te();function o(s,a,u){var l=r(s)?e:i,c=arguments.length<3;return l(s,n(a,4),u,c,t)}return Cn=o,Cn}var kn,Zo;function ny(){if(Zo)return kn;Zo=1;var e=Hl(),t=e("length");return kn=t,kn}var Mn,Qo;function ry(){if(Qo)return Mn;Qo=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=t+n+i,o="\\ufe0e\\ufe0f",s="["+e+"]",a="["+r+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+a+"|"+u+")",c="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",g=l+"?",y="["+o+"]?",v="(?:"+h+"(?:"+[c,f,d].join("|")+")"+y+g+")*",m=y+g+v,x="(?:"+[c+a+"?",a,f,d,s].join("|")+")",p=RegExp(u+"(?="+u+")|"+x+m,"g");function w(_){for(var b=p.lastIndex=0;p.test(_);)++b;return b}return Mn=w,Mn}var In,Jo;function iy(){if(Jo)return In;Jo=1;var e=ny(),t=jl(),n=ry();function i(r){return t(r)?n(r):e(r)}return In=i,In}var An,es;function oy(){if(es)return An;es=1;var e=ba(),t=Ea(),n=ui(),i=Gl(),r=iy(),o="[object Map]",s="[object Set]";function a(u){if(u==null)return 0;if(n(u))return i(u)?r(u):u.length;var l=t(u);return l==o||l==s?u.size:e(u).length}return An=a,An}var Pn,ts;function sy(){if(ts)return Pn;ts=1;var e=_a(),t=Yl(),n=Wl(),i=ai(),r=Xl(),o=Te(),s=ci(),a=fi(),u=$t(),l=li();function c(f,d,h){var g=o(f),y=g||s(f)||l(f);if(d=i(d,4),h==null){var v=f&&f.constructor;y?h=g?new v:[]:u(f)?h=a(v)?t(r(f)):{}:h={}}return(y?e:n)(f,function(m,x,p){return d(h,m,x,p)}),h}return Pn=c,Pn}var Rn,ns;function xc(){if(ns)return Rn;ns=1;var e=ui(),t=Ul();function n(i){return t(i)&&e(i)}return Rn=n,Rn}var Ln,rs;function ay(){if(rs)return Ln;rs=1;var e=Kl(),t=di(),n=Zl(),i=xc(),r=t(function(o){return n(e(o,1,i,!0))});return Ln=r,Ln}var qn,is;function uy(){if(is)return qn;is=1;var e=Ql();function t(n,i){return e(i,function(r){return n[r]})}return qn=t,qn}var Tn,os;function _c(){if(os)return Tn;os=1;var e=uy(),t=Na();function n(i){return i==null?[]:e(i,t(i))}return Tn=n,Tn}var Dn,ss;function fe(){if(ss)return Dn;ss=1;var e;if(typeof Ii=="function")try{e={clone:Kv(),constant:ka(),each:gc(),filter:mc(),has:vc(),isArray:Te(),isEmpty:Jv(),isFunction:fi(),isUndefined:yc(),keys:Na(),map:Ca(),reduce:wc(),size:oy(),transform:sy(),union:ay(),values:_c()}}catch{}return e||(e=window._),Dn=e,Dn}var zn,as;function Ai(){if(as)return zn;as=1;var e=fe();zn=r;var t="\0",n="\0",i="";function r(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(c){return this._label=c,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return e.keys(this._nodes)},r.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._in[f])})},r.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(f){return e.isEmpty(c._out[f])})},r.prototype.setNodes=function(c,f){var d=arguments,h=this;return e.each(c,function(g){d.length>1?h.setNode(g,f):h.setNode(g)}),this},r.prototype.setNode=function(c,f){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},r.prototype.node=function(c){return this._nodes[c]},r.prototype.hasNode=function(c){return e.has(this._nodes,c)},r.prototype.removeNode=function(c){var f=this;if(e.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},r.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var d=f;!e.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},r.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},r.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},r.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return e.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},r.prototype.predecessors=function(c){var f=this._preds[c];if(f)return e.keys(f)},r.prototype.successors=function(c){var f=this._sucs[c];if(f)return e.keys(f)},r.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return e.union(f,this.successors(c))},r.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},r.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;e.each(this._nodes,function(y,v){c(v)&&f.setNode(v,y)}),e.each(this._edgeObjs,function(y){f.hasNode(y.v)&&f.hasNode(y.w)&&f.setEdge(y,d.edge(y))});var h={};function g(y){var v=d.parent(y);return v===void 0||f.hasNode(v)?(h[y]=v,v):v in h?h[v]:g(v)}return this._isCompound&&e.each(f.nodes(),function(y){f.setParent(y,g(y))}),f},r.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return e.values(this._edgeObjs)},r.prototype.setPath=function(c,f){var d=this,h=arguments;return e.reduce(c,function(g,y){return h.length>1?d.setEdge(g,y,f):d.setEdge(g,y),y}),this},r.prototype.setEdge=function(){var c,f,d,h,g=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(c=y.v,f=y.w,d=y.name,arguments.length===2&&(h=arguments[1],g=!0)):(c=y,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),c=""+c,f=""+f,e.isUndefined(d)||(d=""+d);var v=a(this._isDirected,c,f,d);if(e.has(this._edgeLabels,v))return g&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=g?h:this._defaultEdgeLabelFn(c,f,d);var m=u(this._isDirected,c,f,d);return c=m.v,f=m.w,Object.freeze(m),this._edgeObjs[v]=m,o(this._preds[f],c),o(this._sucs[c],f),this._in[f][v]=m,this._out[c][v]=m,this._edgeCount++,this},r.prototype.edge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,c,f,d);return this._edgeLabels[h]},r.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,c,f,d);return e.has(this._edgeLabels,h)},r.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,c,f,d),g=this._edgeObjs[h];return g&&(c=g.v,f=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],s(this._preds[f],c),s(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},r.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=e.values(d);return f?e.filter(h,function(g){return g.v===f}):h}},r.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=e.values(d);return f?e.filter(h,function(g){return g.w===f}):h}},r.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function o(c,f){c[f]?c[f]++:c[f]=1}function s(c,f){--c[f]||delete c[f]}function a(c,f,d,h){var g=""+f,y=""+d;if(!c&&g>y){var v=g;g=y,y=v}return g+i+y+i+(e.isUndefined(h)?t:h)}function u(c,f,d,h){var g=""+f,y=""+d;if(!c&&g>y){var v=g;g=y,y=v}var m={v:g,w:y};return h&&(m.name=h),m}function l(c,f){return a(c,f.v,f.w,f.name)}return zn}var $n,us;function cy(){return us||(us=1,$n="2.1.8"),$n}var Fn,cs;function ly(){return cs||(cs=1,Fn={Graph:Ai(),version:cy()}),Fn}var On,ls;function fy(){if(ls)return On;ls=1;var e=fe(),t=Ai();On={write:n,read:o};function n(s){var a={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:i(s),edges:r(s)};return e.isUndefined(s.graph())||(a.value=e.clone(s.graph())),a}function i(s){return e.map(s.nodes(),function(a){var u=s.node(a),l=s.parent(a),c={v:a};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function r(s){return e.map(s.edges(),function(a){var u=s.edge(a),l={v:a.v,w:a.w};return e.isUndefined(a.name)||(l.name=a.name),e.isUndefined(u)||(l.value=u),l})}function o(s){var a=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(u){a.setNode(u.v,u.value),u.parent&&a.setParent(u.v,u.parent)}),e.each(s.edges,function(u){a.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),a}return On}var Vn,fs;function dy(){if(fs)return Vn;fs=1;var e=fe();Vn=t;function t(n){var i={},r=[],o;function s(a){e.has(i,a)||(i[a]=!0,o.push(a),e.each(n.successors(a),s),e.each(n.predecessors(a),s))}return e.each(n.nodes(),function(a){o=[],s(a),o.length&&r.push(o)}),r}return Vn}var Bn,ds;function bc(){if(ds)return Bn;ds=1;var e=fe();Bn=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var i=this._keyIndices[n];if(i!==void 0)return this._arr[i].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,i){var r=this._keyIndices;if(n=String(n),!e.has(r,n)){var o=this._arr,s=o.length;return r[n]=s,o.push({key:n,priority:i}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,i){var r=this._keyIndices[n];if(i>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[r].priority+" New: "+i);this._arr[r].priority=i,this._decrease(r)},t.prototype._heapify=function(n){var i=this._arr,r=2*n,o=r+1,s=n;r<i.length&&(s=i[r].priority<i[s].priority?r:s,o<i.length&&(s=i[o].priority<i[s].priority?o:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var i=this._arr,r=i[n].priority,o;n!==0&&(o=n>>1,!(i[o].priority<r));)this._swap(n,o),n=o},t.prototype._swap=function(n,i){var r=this._arr,o=this._keyIndices,s=r[n],a=r[i];r[n]=a,r[i]=s,o[a.key]=n,o[s.key]=i},Bn}var Hn,hs;function Ec(){if(hs)return Hn;hs=1;var e=fe(),t=bc();Hn=i;var n=e.constant(1);function i(o,s,a,u){return r(o,String(s),a||n,u||function(l){return o.outEdges(l)})}function r(o,s,a,u){var l={},c=new t,f,d,h=function(g){var y=g.v!==f?g.v:g.w,v=l[y],m=a(g),x=d.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+m);x<v.distance&&(v.distance=x,v.predecessor=f,c.decrease(y,x))};for(o.nodes().forEach(function(g){var y=g===s?0:Number.POSITIVE_INFINITY;l[g]={distance:y},c.add(g,y)});c.size()>0&&(f=c.removeMin(),d=l[f],d.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(h);return l}return Hn}var jn,ps;function hy(){if(ps)return jn;ps=1;var e=Ec(),t=fe();jn=n;function n(i,r,o){return t.transform(i.nodes(),function(s,a){s[a]=e(i,a,r,o)},{})}return jn}var Gn,gs;function Sc(){if(gs)return Gn;gs=1;var e=fe();Gn=t;function t(n){var i=0,r=[],o={},s=[];function a(u){var l=o[u]={onStack:!0,lowlink:i,index:i++};if(r.push(u),n.successors(u).forEach(function(d){e.has(o,d)?o[d].onStack&&(l.lowlink=Math.min(l.lowlink,o[d].index)):(a(d),l.lowlink=Math.min(l.lowlink,o[d].lowlink))}),l.lowlink===l.index){var c=[],f;do f=r.pop(),o[f].onStack=!1,c.push(f);while(u!==f);s.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||a(u)}),s}return Gn}var Yn,ms;function py(){if(ms)return Yn;ms=1;var e=fe(),t=Sc();Yn=n;function n(i){return e.filter(t(i),function(r){return r.length>1||r.length===1&&i.hasEdge(r[0],r[0])})}return Yn}var Wn,vs;function gy(){if(vs)return Wn;vs=1;var e=fe();Wn=n;var t=e.constant(1);function n(r,o,s){return i(r,o||t,s||function(a){return r.outEdges(a)})}function i(r,o,s){var a={},u=r.nodes();return u.forEach(function(l){a[l]={},a[l][l]={distance:0},u.forEach(function(c){l!==c&&(a[l][c]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(c){var f=c.v===l?c.w:c.v,d=o(c);a[l][f]={distance:d,predecessor:l}})}),u.forEach(function(l){var c=a[l];u.forEach(function(f){var d=a[f];u.forEach(function(h){var g=d[l],y=c[h],v=d[h],m=g.distance+y.distance;m<v.distance&&(v.distance=m,v.predecessor=y.predecessor)})})}),a}return Wn}var Xn,ys;function Nc(){if(ys)return Xn;ys=1;var e=fe();Xn=t,t.CycleException=n;function t(i){var r={},o={},s=[];function a(u){if(e.has(o,u))throw new n;e.has(r,u)||(o[u]=!0,r[u]=!0,e.each(i.predecessors(u),a),delete o[u],s.push(u))}if(e.each(i.sinks(),a),e.size(r)!==i.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,Xn}var Un,ws;function my(){if(ws)return Un;ws=1;var e=Nc();Un=t;function t(n){try{e(n)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Un}var Kn,xs;function Cc(){if(xs)return Kn;xs=1;var e=fe();Kn=t;function t(i,r,o){e.isArray(r)||(r=[r]);var s=(i.isDirected()?i.successors:i.neighbors).bind(i),a=[],u={};return e.each(r,function(l){if(!i.hasNode(l))throw new Error("Graph does not have node: "+l);n(i,l,o==="post",u,s,a)}),a}function n(i,r,o,s,a,u){e.has(s,r)||(s[r]=!0,o||u.push(r),e.each(a(r),function(l){n(i,l,o,s,a,u)}),o&&u.push(r))}return Kn}var Zn,_s;function vy(){if(_s)return Zn;_s=1;var e=Cc();Zn=t;function t(n,i){return e(n,i,"post")}return Zn}var Qn,bs;function yy(){if(bs)return Qn;bs=1;var e=Cc();Qn=t;function t(n,i){return e(n,i,"pre")}return Qn}var Jn,Es;function wy(){if(Es)return Jn;Es=1;var e=fe(),t=Ai(),n=bc();Jn=i;function i(r,o){var s=new t,a={},u=new n,l;function c(d){var h=d.v===l?d.w:d.v,g=u.priority(h);if(g!==void 0){var y=o(d);y<g&&(a[h]=l,u.decrease(h,y))}}if(r.nodeCount()===0)return s;e.each(r.nodes(),function(d){u.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),u.decrease(r.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),e.has(a,l))s.setEdge(l,a[l]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(l).forEach(c)}return s}return Jn}var er,Ss;function xy(){return Ss||(Ss=1,er={components:dy(),dijkstra:Ec(),dijkstraAll:hy(),findCycles:py(),floydWarshall:gy(),isAcyclic:my(),postorder:vy(),preorder:yy(),prim:wy(),tarjan:Sc(),topsort:Nc()}),er}var tr,Ns;function _y(){if(Ns)return tr;Ns=1;var e=ly();return tr={Graph:e.Graph,json:fy(),alg:xy(),version:e.version},tr}var nr,Cs;function ge(){if(Cs)return nr;Cs=1;var e;if(typeof Ii=="function")try{e=_y()}catch{}return e||(e=window.graphlib),nr=e,nr}var rr,ks;function by(){if(ks)return rr;ks=1;var e=xa(),t=1,n=4;function i(r){return e(r,t|n)}return rr=i,rr}var ir,Ms;function Ey(){if(Ms)return ir;Ms=1;var e=di(),t=Ia(),n=Ma(),i=Ft(),r=Object.prototype,o=r.hasOwnProperty,s=e(function(a,u){a=Object(a);var l=-1,c=u.length,f=c>2?u[2]:void 0;for(f&&n(u[0],u[1],f)&&(c=1);++l<c;)for(var d=u[l],h=i(d),g=-1,y=h.length;++g<y;){var v=h[g],m=a[v];(m===void 0||t(m,r[v])&&!o.call(a,v))&&(a[v]=d[v])}return a});return ir=s,ir}var or,Is;function Sy(){if(Is)return or;Is=1;var e=Aa(),t=hc(),n=Ft();function i(r,o){return r==null?r:e(r,t(o),n)}return or=i,or}var sr,As;function kc(){if(As)return sr;As=1;var e=Jl(),t=Ia();function n(i,r,o){(o!==void 0&&!t(i[r],o)||o===void 0&&!(r in i))&&e(i,r,o)}return sr=n,sr}var ar,Ps;function Mc(){if(Ps)return ar;Ps=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return ar=e,ar}var ur,Rs;function Ny(){if(Rs)return ur;Rs=1;var e=ef(),t=Ft();function n(i){return e(i,t(i))}return ur=n,ur}var cr,Ls;function Cy(){if(Ls)return cr;Ls=1;var e=kc(),t=tf(),n=nf(),i=sf(),r=rf(),o=Sa(),s=Te(),a=xc(),u=ci(),l=fi(),c=$t(),f=of(),d=li(),h=Mc(),g=Ny();function y(v,m,x,p,w,_,b){var E=h(v,x),N=h(m,x),C=b.get(N);if(C){e(v,x,C);return}var q=_?_(E,N,x+"",v,m,b):void 0,k=q===void 0;if(k){var M=s(N),z=!M&&u(N),S=!M&&!z&&d(N);q=N,M||z||S?s(E)?q=E:a(E)?q=i(E):z?(k=!1,q=t(N,!0)):S?(k=!1,q=n(N,!0)):q=[]:f(N)||o(N)?(q=E,o(E)?q=g(E):(!c(E)||l(E))&&(q=r(N))):k=!1}k&&(b.set(N,q),w(q,N,p,_,b),b.delete(N)),e(v,x,q)}return cr=y,cr}var lr,qs;function ky(){if(qs)return lr;qs=1;var e=af(),t=kc(),n=Aa(),i=Cy(),r=$t(),o=Ft(),s=Mc();function a(u,l,c,f,d){u!==l&&n(l,function(h,g){if(d||(d=new e),r(h))i(u,l,g,c,a,f,d);else{var y=f?f(s(u,g),h,g+"",u,l,d):void 0;y===void 0&&(y=h),t(u,g,y)}},o)}return lr=a,lr}var fr,Ts;function My(){if(Ts)return fr;Ts=1;var e=di(),t=Ma();function n(i){return e(function(r,o){var s=-1,a=o.length,u=a>1?o[a-1]:void 0,l=a>2?o[2]:void 0;for(u=i.length>3&&typeof u=="function"?(a--,u):void 0,l&&t(o[0],o[1],l)&&(u=a<3?void 0:u,a=1),r=Object(r);++s<a;){var c=o[s];c&&i(r,c,s,u)}return r})}return fr=n,fr}var dr,Ds;function Iy(){if(Ds)return dr;Ds=1;var e=ky(),t=My(),n=t(function(i,r,o){e(i,r,o)});return dr=n,dr}var hr,zs;function Ay(){if(zs)return hr;zs=1;var e=Pa(),t=Ra(),n=uf(),i=$t(),r=cf();function o(s,a,u,l){if(!i(s))return s;a=t(a,s);for(var c=-1,f=a.length,d=f-1,h=s;h!=null&&++c<f;){var g=r(a[c]),y=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return s;if(c!=d){var v=h[g];y=l?l(v,g,h):void 0,y===void 0&&(y=i(v)?v:n(a[c+1])?[]:{})}e(h,g,y),h=h[g]}return s}return hr=o,hr}var pr,$s;function Py(){if($s)return pr;$s=1;var e=lf(),t=Ay(),n=Ra();function i(r,o,s){for(var a=-1,u=o.length,l={};++a<u;){var c=o[a],f=e(r,c);s(f,c)&&t(l,n(c,r),f)}return l}return pr=i,pr}var gr,Fs;function Ry(){if(Fs)return gr;Fs=1;var e=Py(),t=ff();function n(i,r){return e(i,r,function(o,s){return t(i,s)})}return gr=n,gr}var mr,Os;function Ly(){if(Os)return mr;Os=1;var e=Ry(),t=df(),n=t(function(i,r){return i==null?{}:e(i,r)});return mr=n,mr}var vr,Vs;function qy(){if(Vs)return vr;Vs=1;var e=hf(),t=0;function n(i){var r=++t;return e(i)+r}return vr=n,vr}var yr,Bs;function Ty(){if(Bs)return yr;Bs=1;function e(t,n,i){for(var r=-1,o=t.length,s=n.length,a={};++r<o;){var u=r<s?n[r]:void 0;i(a,t[r],u)}return a}return yr=e,yr}var wr,Hs;function Dy(){if(Hs)return wr;Hs=1;var e=Pa(),t=Ty();function n(i,r){return t(i||[],r||[],e)}return wr=n,wr}var xr,js;function oe(){if(js)return xr;js=1;var e;if(typeof Ii=="function")try{e={cloneDeep:by(),constant:ka(),defaults:Ey(),each:gc(),filter:mc(),find:Ef(),flatten:bf(),forEach:pc(),forIn:Sy(),has:vc(),isUndefined:yc(),last:_f(),map:Ca(),mapValues:xf(),max:wf(),merge:Iy(),min:yf(),minBy:vf(),now:mf(),pick:Ly(),range:gf(),reduce:wc(),sortBy:pf(),uniqueId:qy(),values:_c(),zipObject:Dy()}}catch{}return e||(e=window._),xr=e,xr}var _r,Gs;function zy(){if(Gs)return _r;Gs=1,_r=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,r=i._prev;if(r!==i)return t(r),r},e.prototype.enqueue=function(i){var r=this._sentinel;i._prev&&i._next&&t(i),i._next=r._next,r._next._prev=i,r._next=i,i._prev=r},e.prototype.toString=function(){for(var i=[],r=this._sentinel,o=r._prev;o!==r;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"};function t(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function n(i,r){if(i!=="_next"&&i!=="_prev")return r}return _r}var br,Ys;function $y(){if(Ys)return br;Ys=1;var e=oe(),t=ge().Graph,n=zy();br=r;var i=e.constant(1);function r(l,c){if(l.nodeCount()<=1)return[];var f=a(l,c||i),d=o(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(d,function(h){return l.outEdges(h.v,h.w)}),!0)}function o(l,c,f){for(var d=[],h=c[c.length-1],g=c[0],y;l.nodeCount();){for(;y=g.dequeue();)s(l,c,f,y);for(;y=h.dequeue();)s(l,c,f,y);if(l.nodeCount()){for(var v=c.length-2;v>0;--v)if(y=c[v].dequeue(),y){d=d.concat(s(l,c,f,y,!0));break}}}return d}function s(l,c,f,d,h){var g=h?[]:void 0;return e.forEach(l.inEdges(d.v),function(y){var v=l.edge(y),m=l.node(y.v);h&&g.push({v:y.v,w:y.w}),m.out-=v,u(c,f,m)}),e.forEach(l.outEdges(d.v),function(y){var v=l.edge(y),m=y.w,x=l.node(m);x.in-=v,u(c,f,x)}),l.removeNode(d.v),g}function a(l,c){var f=new t,d=0,h=0;e.forEach(l.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var m=f.edge(v.v,v.w)||0,x=c(v),p=m+x;f.setEdge(v.v,v.w,p),h=Math.max(h,f.node(v.v).out+=x),d=Math.max(d,f.node(v.w).in+=x)});var g=e.range(h+d+3).map(function(){return new n}),y=d+1;return e.forEach(f.nodes(),function(v){u(g,y,f.node(v))}),{graph:f,buckets:g,zeroIdx:y}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return br}var Er,Ws;function Fy(){if(Ws)return Er;Ws=1;var e=oe(),t=$y();Er={run:n,undo:r};function n(o){var s=o.graph().acyclicer==="greedy"?t(o,a(o)):i(o);e.forEach(s,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function a(u){return function(l){return u.edge(l).weight}}}function i(o){var s=[],a={},u={};function l(c){e.has(u,c)||(u[c]=!0,a[c]=!0,e.forEach(o.outEdges(c),function(f){e.has(a,f.w)?s.push(f):l(f.w)}),delete a[c])}return e.forEach(o.nodes(),l),s}function r(o){e.forEach(o.edges(),function(s){var a=o.edge(s);if(a.reversed){o.removeEdge(s);var u=a.forwardName;delete a.reversed,delete a.forwardName,o.setEdge(s.w,s.v,a,u)}})}return Er}var Sr,Xs;function ue(){if(Xs)return Sr;Xs=1;var e=oe(),t=ge().Graph;Sr={addDummyNode:n,simplify:i,asNonCompoundGraph:r,successorWeights:o,predecessorWeights:s,intersectRect:a,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:d,partition:h,time:g,notime:y};function n(v,m,x,p){var w;do w=e.uniqueId(p);while(v.hasNode(w));return x.dummy=m,v.setNode(w,x),w}function i(v){var m=new t().setGraph(v.graph());return e.forEach(v.nodes(),function(x){m.setNode(x,v.node(x))}),e.forEach(v.edges(),function(x){var p=m.edge(x.v,x.w)||{weight:0,minlen:1},w=v.edge(x);m.setEdge(x.v,x.w,{weight:p.weight+w.weight,minlen:Math.max(p.minlen,w.minlen)})}),m}function r(v){var m=new t({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(x){v.children(x).length||m.setNode(x,v.node(x))}),e.forEach(v.edges(),function(x){m.setEdge(x,v.edge(x))}),m}function o(v){var m=e.map(v.nodes(),function(x){var p={};return e.forEach(v.outEdges(x),function(w){p[w.w]=(p[w.w]||0)+v.edge(w).weight}),p});return e.zipObject(v.nodes(),m)}function s(v){var m=e.map(v.nodes(),function(x){var p={};return e.forEach(v.inEdges(x),function(w){p[w.v]=(p[w.v]||0)+v.edge(w).weight}),p});return e.zipObject(v.nodes(),m)}function a(v,m){var x=v.x,p=v.y,w=m.x-x,_=m.y-p,b=v.width/2,E=v.height/2;if(!w&&!_)throw new Error("Not possible to find intersection inside of the rectangle");var N,C;return Math.abs(_)*b>Math.abs(w)*E?(_<0&&(E=-E),N=E*w/_,C=E):(w<0&&(b=-b),N=b,C=b*_/w),{x:x+N,y:p+C}}function u(v){var m=e.map(e.range(d(v)+1),function(){return[]});return e.forEach(v.nodes(),function(x){var p=v.node(x),w=p.rank;e.isUndefined(w)||(m[w][p.order]=x)}),m}function l(v){var m=e.min(e.map(v.nodes(),function(x){return v.node(x).rank}));e.forEach(v.nodes(),function(x){var p=v.node(x);e.has(p,"rank")&&(p.rank-=m)})}function c(v){var m=e.min(e.map(v.nodes(),function(_){return v.node(_).rank})),x=[];e.forEach(v.nodes(),function(_){var b=v.node(_).rank-m;x[b]||(x[b]=[]),x[b].push(_)});var p=0,w=v.graph().nodeRankFactor;e.forEach(x,function(_,b){e.isUndefined(_)&&b%w!==0?--p:p&&e.forEach(_,function(E){v.node(E).rank+=p})})}function f(v,m,x,p){var w={width:0,height:0};return arguments.length>=4&&(w.rank=x,w.order=p),n(v,"border",w,m)}function d(v){return e.max(e.map(v.nodes(),function(m){var x=v.node(m).rank;if(!e.isUndefined(x))return x}))}function h(v,m){var x={lhs:[],rhs:[]};return e.forEach(v,function(p){m(p)?x.lhs.push(p):x.rhs.push(p)}),x}function g(v,m){var x=e.now();try{return m()}finally{console.log(v+" time: "+(e.now()-x)+"ms")}}function y(v,m){return m()}return Sr}var Nr,Us;function Oy(){if(Us)return Nr;Us=1;var e=oe(),t=ue();Nr={run:n,undo:r};function n(o){o.graph().dummyChains=[],e.forEach(o.edges(),function(s){i(o,s)})}function i(o,s){var a=s.v,u=o.node(a).rank,l=s.w,c=o.node(l).rank,f=s.name,d=o.edge(s),h=d.labelRank;if(c!==u+1){o.removeEdge(s);var g,y,v;for(v=0,++u;u<c;++v,++u)d.points=[],y={width:0,height:0,edgeLabel:d,edgeObj:s,rank:u},g=t.addDummyNode(o,"edge",y,"_d"),u===h&&(y.width=d.width,y.height=d.height,y.dummy="edge-label",y.labelpos=d.labelpos),o.setEdge(a,g,{weight:d.weight},f),v===0&&o.graph().dummyChains.push(g),a=g;o.setEdge(a,l,{weight:d.weight},f)}}function r(o){e.forEach(o.graph().dummyChains,function(s){var a=o.node(s),u=a.edgeLabel,l;for(o.setEdge(a.edgeObj,u);a.dummy;)l=o.successors(s)[0],o.removeNode(s),u.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(u.x=a.x,u.y=a.y,u.width=a.width,u.height=a.height),s=l,a=o.node(s)})}return Nr}var Cr,Ks;function zt(){if(Ks)return Cr;Ks=1;var e=oe();Cr={longestPath:t,slack:n};function t(i){var r={};function o(s){var a=i.node(s);if(e.has(r,s))return a.rank;r[s]=!0;var u=e.min(e.map(i.outEdges(s),function(l){return o(l.w)-i.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),a.rank=u}e.forEach(i.sources(),o)}function n(i,r){return i.node(r.w).rank-i.node(r.v).rank-i.edge(r).minlen}return Cr}var kr,Zs;function Ic(){if(Zs)return kr;Zs=1;var e=oe(),t=ge().Graph,n=zt().slack;kr=i;function i(a){var u=new t({directed:!1}),l=a.nodes()[0],c=a.nodeCount();u.setNode(l,{});for(var f,d;r(u,a)<c;)f=o(u,a),d=u.hasNode(f.v)?n(a,f):-n(a,f),s(u,a,d);return u}function r(a,u){function l(c){e.forEach(u.nodeEdges(c),function(f){var d=f.v,h=c===d?f.w:d;!a.hasNode(h)&&!n(u,f)&&(a.setNode(h,{}),a.setEdge(c,h,{}),l(h))})}return e.forEach(a.nodes(),l),a.nodeCount()}function o(a,u){return e.minBy(u.edges(),function(l){if(a.hasNode(l.v)!==a.hasNode(l.w))return n(u,l)})}function s(a,u,l){e.forEach(a.nodes(),function(c){u.node(c).rank+=l})}return kr}var Mr,Qs;function Vy(){if(Qs)return Mr;Qs=1;var e=oe(),t=Ic(),n=zt().slack,i=zt().longestPath,r=ge().alg.preorder,o=ge().alg.postorder,s=ue().simplify;Mr=a,a.initLowLimValues=f,a.initCutValues=u,a.calcCutValue=c,a.leaveEdge=h,a.enterEdge=g,a.exchangeEdges=y;function a(p){p=s(p),i(p);var w=t(p);f(w),u(w,p);for(var _,b;_=h(w);)b=g(w,p,_),y(w,p,_,b)}function u(p,w){var _=o(p,p.nodes());_=_.slice(0,_.length-1),e.forEach(_,function(b){l(p,w,b)})}function l(p,w,_){var b=p.node(_),E=b.parent;p.edge(_,E).cutvalue=c(p,w,_)}function c(p,w,_){var b=p.node(_),E=b.parent,N=!0,C=w.edge(_,E),q=0;return C||(N=!1,C=w.edge(E,_)),q=C.weight,e.forEach(w.nodeEdges(_),function(k){var M=k.v===_,z=M?k.w:k.v;if(z!==E){var S=M===N,P=w.edge(k).weight;if(q+=S?P:-P,m(p,_,z)){var A=p.edge(_,z).cutvalue;q+=S?-A:A}}}),q}function f(p,w){arguments.length<2&&(w=p.nodes()[0]),d(p,{},1,w)}function d(p,w,_,b,E){var N=_,C=p.node(b);return w[b]=!0,e.forEach(p.neighbors(b),function(q){e.has(w,q)||(_=d(p,w,_,q,b))}),C.low=N,C.lim=_++,E?C.parent=E:delete C.parent,_}function h(p){return e.find(p.edges(),function(w){return p.edge(w).cutvalue<0})}function g(p,w,_){var b=_.v,E=_.w;w.hasEdge(b,E)||(b=_.w,E=_.v);var N=p.node(b),C=p.node(E),q=N,k=!1;N.lim>C.lim&&(q=C,k=!0);var M=e.filter(w.edges(),function(z){return k===x(p,p.node(z.v),q)&&k!==x(p,p.node(z.w),q)});return e.minBy(M,function(z){return n(w,z)})}function y(p,w,_,b){var E=_.v,N=_.w;p.removeEdge(E,N),p.setEdge(b.v,b.w,{}),f(p),u(p,w),v(p,w)}function v(p,w){var _=e.find(p.nodes(),function(E){return!w.node(E).parent}),b=r(p,_);b=b.slice(1),e.forEach(b,function(E){var N=p.node(E).parent,C=w.edge(E,N),q=!1;C||(C=w.edge(N,E),q=!0),w.node(E).rank=w.node(N).rank+(q?C.minlen:-C.minlen)})}function m(p,w,_){return p.hasEdge(w,_)}function x(p,w,_){return _.low<=w.lim&&w.lim<=_.lim}return Mr}var Ir,Js;function By(){if(Js)return Ir;Js=1;var e=zt(),t=e.longestPath,n=Ic(),i=Vy();Ir=r;function r(u){switch(u.graph().ranker){case"network-simplex":a(u);break;case"tight-tree":s(u);break;case"longest-path":o(u);break;default:a(u)}}var o=t;function s(u){t(u),n(u)}function a(u){i(u)}return Ir}var Ar,ea;function Hy(){if(ea)return Ar;ea=1;var e=oe();Ar=t;function t(r){var o=i(r);e.forEach(r.graph().dummyChains,function(s){for(var a=r.node(s),u=a.edgeObj,l=n(r,o,u.v,u.w),c=l.path,f=l.lca,d=0,h=c[d],g=!0;s!==u.w;){if(a=r.node(s),g){for(;(h=c[d])!==f&&r.node(h).maxRank<a.rank;)d++;h===f&&(g=!1)}if(!g){for(;d<c.length-1&&r.node(h=c[d+1]).minRank<=a.rank;)d++;h=c[d]}r.setParent(s,h),s=r.successors(s)[0]}})}function n(r,o,s,a){var u=[],l=[],c=Math.min(o[s].low,o[a].low),f=Math.max(o[s].lim,o[a].lim),d,h;d=s;do d=r.parent(d),u.push(d);while(d&&(o[d].low>c||f>o[d].lim));for(h=d,d=a;(d=r.parent(d))!==h;)l.push(d);return{path:u.concat(l.reverse()),lca:h}}function i(r){var o={},s=0;function a(u){var l=s;e.forEach(r.children(u),a),o[u]={low:l,lim:s++}}return e.forEach(r.children(),a),o}return Ar}var Pr,ta;function jy(){if(ta)return Pr;ta=1;var e=oe(),t=ue();Pr={run:n,cleanup:s};function n(a){var u=t.addDummyNode(a,"root",{},"_root"),l=r(a),c=e.max(e.values(l))-1,f=2*c+1;a.graph().nestingRoot=u,e.forEach(a.edges(),function(h){a.edge(h).minlen*=f});var d=o(a)+1;e.forEach(a.children(),function(h){i(a,u,f,d,c,l,h)}),a.graph().nodeRankFactor=f}function i(a,u,l,c,f,d,h){var g=a.children(h);if(!g.length){h!==u&&a.setEdge(u,h,{weight:0,minlen:l});return}var y=t.addBorderNode(a,"_bt"),v=t.addBorderNode(a,"_bb"),m=a.node(h);a.setParent(y,h),m.borderTop=y,a.setParent(v,h),m.borderBottom=v,e.forEach(g,function(x){i(a,u,l,c,f,d,x);var p=a.node(x),w=p.borderTop?p.borderTop:x,_=p.borderBottom?p.borderBottom:x,b=p.borderTop?c:2*c,E=w!==_?1:f-d[h]+1;a.setEdge(y,w,{weight:b,minlen:E,nestingEdge:!0}),a.setEdge(_,v,{weight:b,minlen:E,nestingEdge:!0})}),a.parent(h)||a.setEdge(u,y,{weight:0,minlen:f+d[h]})}function r(a){var u={};function l(c,f){var d=a.children(c);d&&d.length&&e.forEach(d,function(h){l(h,f+1)}),u[c]=f}return e.forEach(a.children(),function(c){l(c,1)}),u}function o(a){return e.reduce(a.edges(),function(u,l){return u+a.edge(l).weight},0)}function s(a){var u=a.graph();a.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(a.edges(),function(l){var c=a.edge(l);c.nestingEdge&&a.removeEdge(l)})}return Pr}var Rr,na;function Gy(){if(na)return Rr;na=1;var e=oe(),t=ue();Rr=n;function n(r){function o(s){var a=r.children(s),u=r.node(s);if(a.length&&e.forEach(a,o),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)i(r,"borderLeft","_bl",s,u,l),i(r,"borderRight","_br",s,u,l)}}e.forEach(r.children(),o)}function i(r,o,s,a,u,l){var c={width:0,height:0,rank:l,borderType:o},f=u[o][l-1],d=t.addDummyNode(r,"border",c,s);u[o][l]=d,r.setParent(d,a),f&&r.setEdge(f,d,{weight:1})}return Rr}var Lr,ra;function Yy(){if(ra)return Lr;ra=1;var e=oe();Lr={adjust:t,undo:n};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&i(l)}function n(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(a(l),i(l))}function i(l){e.forEach(l.nodes(),function(c){r(l.node(c))}),e.forEach(l.edges(),function(c){r(l.edge(c))})}function r(l){var c=l.width;l.width=l.height,l.height=c}function o(l){e.forEach(l.nodes(),function(c){s(l.node(c))}),e.forEach(l.edges(),function(c){var f=l.edge(c);e.forEach(f.points,s),e.has(f,"y")&&s(f)})}function s(l){l.y=-l.y}function a(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var f=l.edge(c);e.forEach(f.points,u),e.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Lr}var qr,ia;function Wy(){if(ia)return qr;ia=1;var e=oe();qr=t;function t(n){var i={},r=e.filter(n.nodes(),function(l){return!n.children(l).length}),o=e.max(e.map(r,function(l){return n.node(l).rank})),s=e.map(e.range(o+1),function(){return[]});function a(l){if(!e.has(i,l)){i[l]=!0;var c=n.node(l);s[c.rank].push(l),e.forEach(n.successors(l),a)}}var u=e.sortBy(r,function(l){return n.node(l).rank});return e.forEach(u,a),s}return qr}var Tr,oa;function Xy(){if(oa)return Tr;oa=1;var e=oe();Tr=t;function t(i,r){for(var o=0,s=1;s<r.length;++s)o+=n(i,r[s-1],r[s]);return o}function n(i,r,o){for(var s=e.zipObject(o,e.map(o,function(d,h){return h})),a=e.flatten(e.map(r,function(d){return e.sortBy(e.map(i.outEdges(d),function(h){return{pos:s[h.w],weight:i.edge(h).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),f=0;return e.forEach(a.forEach(function(d){var h=d.pos+u;c[h]+=d.weight;for(var g=0;h>0;)h%2&&(g+=c[h+1]),h=h-1>>1,c[h]+=d.weight;f+=d.weight*g})),f}return Tr}var Dr,sa;function Uy(){if(sa)return Dr;sa=1;var e=oe();Dr=t;function t(n,i){return e.map(i,function(r){var o=n.inEdges(r);if(o.length){var s=e.reduce(o,function(a,u){var l=n.edge(u),c=n.node(u.v);return{sum:a.sum+l.weight*c.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return Dr}var zr,aa;function Ky(){if(aa)return zr;aa=1;var e=oe();zr=t;function t(r,o){var s={};e.forEach(r,function(u,l){var c=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(o.edges(),function(u){var l=s[u.v],c=s[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(s[u.w]))});var a=e.filter(s,function(u){return!u.indegree});return n(a)}function n(r){var o=[];function s(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&i(l,c)}}function a(l){return function(c){c.in.push(l),--c.indegree===0&&r.push(c)}}for(;r.length;){var u=r.pop();o.push(u),e.forEach(u.in.reverse(),s(u)),e.forEach(u.out,a(u))}return e.map(e.filter(o,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function i(r,o){var s=0,a=0;r.weight&&(s+=r.barycenter*r.weight,a+=r.weight),o.weight&&(s+=o.barycenter*o.weight,a+=o.weight),r.vs=o.vs.concat(r.vs),r.barycenter=s/a,r.weight=a,r.i=Math.min(o.i,r.i),o.merged=!0}return zr}var $r,ua;function Zy(){if(ua)return $r;ua=1;var e=oe(),t=ue();$r=n;function n(o,s){var a=t.partition(o,function(y){return e.has(y,"barycenter")}),u=a.lhs,l=e.sortBy(a.rhs,function(y){return-y.i}),c=[],f=0,d=0,h=0;u.sort(r(!!s)),h=i(c,l,h),e.forEach(u,function(y){h+=y.vs.length,c.push(y.vs),f+=y.barycenter*y.weight,d+=y.weight,h=i(c,l,h)});var g={vs:e.flatten(c,!0)};return d&&(g.barycenter=f/d,g.weight=d),g}function i(o,s,a){for(var u;s.length&&(u=e.last(s)).i<=a;)s.pop(),o.push(u.vs),a++;return a}function r(o){return function(s,a){return s.barycenter<a.barycenter?-1:s.barycenter>a.barycenter?1:o?a.i-s.i:s.i-a.i}}return $r}var Fr,ca;function Qy(){if(ca)return Fr;ca=1;var e=oe(),t=Uy(),n=Ky(),i=Zy();Fr=r;function r(a,u,l,c){var f=a.children(u),d=a.node(u),h=d?d.borderLeft:void 0,g=d?d.borderRight:void 0,y={};h&&(f=e.filter(f,function(_){return _!==h&&_!==g}));var v=t(a,f);e.forEach(v,function(_){if(a.children(_.v).length){var b=r(a,_.v,l,c);y[_.v]=b,e.has(b,"barycenter")&&s(_,b)}});var m=n(v,l);o(m,y);var x=i(m,c);if(h&&(x.vs=e.flatten([h,x.vs,g],!0),a.predecessors(h).length)){var p=a.node(a.predecessors(h)[0]),w=a.node(a.predecessors(g)[0]);e.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+p.order+w.order)/(x.weight+2),x.weight+=2}return x}function o(a,u){e.forEach(a,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function s(a,u){e.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight)}return Fr}var Or,la;function Jy(){if(la)return Or;la=1;var e=oe(),t=ge().Graph;Or=n;function n(r,o,s){var a=i(r),u=new t({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(l){return r.node(l)});return e.forEach(r.nodes(),function(l){var c=r.node(l),f=r.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||a),e.forEach(r[s](l),function(d){var h=d.v===l?d.w:d.v,g=u.edge(h,l),y=e.isUndefined(g)?0:g.weight;u.setEdge(h,l,{weight:r.edge(d).weight+y})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function i(r){for(var o;r.hasNode(o=e.uniqueId("_root")););return o}return Or}var Vr,fa;function e0(){if(fa)return Vr;fa=1;var e=oe();Vr=t;function t(n,i,r){var o={},s;e.forEach(r,function(a){for(var u=n.parent(a),l,c;u;){if(l=n.parent(u),l?(c=o[l],o[l]=u):(c=s,s=u),c&&c!==u){i.setEdge(c,u);return}u=l}})}return Vr}var Br,da;function t0(){if(da)return Br;da=1;var e=oe(),t=Wy(),n=Xy(),i=Qy(),r=Jy(),o=e0(),s=ge().Graph,a=ue();Br=u;function u(d){var h=a.maxRank(d),g=l(d,e.range(1,h+1),"inEdges"),y=l(d,e.range(h-1,-1,-1),"outEdges"),v=t(d);f(d,v);for(var m=Number.POSITIVE_INFINITY,x,p=0,w=0;w<4;++p,++w){c(p%2?g:y,p%4>=2),v=a.buildLayerMatrix(d);var _=n(d,v);_<m&&(w=0,x=e.cloneDeep(v),m=_)}f(d,x)}function l(d,h,g){return e.map(h,function(y){return r(d,y,g)})}function c(d,h){var g=new s;e.forEach(d,function(y){var v=y.graph().root,m=i(y,v,g,h);e.forEach(m.vs,function(x,p){y.node(x).order=p}),o(y,g,m.vs)})}function f(d,h){e.forEach(h,function(g){e.forEach(g,function(y,v){d.node(y).order=v})})}return Br}var Hr,ha;function n0(){if(ha)return Hr;ha=1;var e=oe(),t=ge().Graph,n=ue();Hr={positionX:g,findType1Conflicts:i,findType2Conflicts:r,addConflict:s,hasConflict:a,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h};function i(m,x){var p={};function w(_,b){var E=0,N=0,C=_.length,q=e.last(b);return e.forEach(b,function(k,M){var z=o(m,k),S=z?m.node(z).order:C;(z||k===q)&&(e.forEach(b.slice(N,M+1),function(P){e.forEach(m.predecessors(P),function(A){var D=m.node(A),L=D.order;(L<E||S<L)&&!(D.dummy&&m.node(P).dummy)&&s(p,A,P)})}),N=M+1,E=S)}),b}return e.reduce(x,w),p}function r(m,x){var p={};function w(b,E,N,C,q){var k;e.forEach(e.range(E,N),function(M){k=b[M],m.node(k).dummy&&e.forEach(m.predecessors(k),function(z){var S=m.node(z);S.dummy&&(S.order<C||S.order>q)&&s(p,z,k)})})}function _(b,E){var N=-1,C,q=0;return e.forEach(E,function(k,M){if(m.node(k).dummy==="border"){var z=m.predecessors(k);z.length&&(C=m.node(z[0]).order,w(E,q,M,N,C),q=M,N=C)}w(E,q,E.length,C,b.length)}),E}return e.reduce(x,_),p}function o(m,x){if(m.node(x).dummy)return e.find(m.predecessors(x),function(p){return m.node(p).dummy})}function s(m,x,p){if(x>p){var w=x;x=p,p=w}var _=m[x];_||(m[x]=_={}),_[p]=!0}function a(m,x,p){if(x>p){var w=x;x=p,p=w}return e.has(m[x],p)}function u(m,x,p,w){var _={},b={},E={};return e.forEach(x,function(N){e.forEach(N,function(C,q){_[C]=C,b[C]=C,E[C]=q})}),e.forEach(x,function(N){var C=-1;e.forEach(N,function(q){var k=w(q);if(k.length){k=e.sortBy(k,function(A){return E[A]});for(var M=(k.length-1)/2,z=Math.floor(M),S=Math.ceil(M);z<=S;++z){var P=k[z];b[q]===q&&C<E[P]&&!a(p,q,P)&&(b[P]=q,b[q]=_[q]=_[P],C=E[P])}}})}),{root:_,align:b}}function l(m,x,p,w,_){var b={},E=c(m,x,p,_),N=_?"borderLeft":"borderRight";function C(M,z){for(var S=E.nodes(),P=S.pop(),A={};P;)A[P]?M(P):(A[P]=!0,S.push(P),S=S.concat(z(P))),P=S.pop()}function q(M){b[M]=E.inEdges(M).reduce(function(z,S){return Math.max(z,b[S.v]+E.edge(S))},0)}function k(M){var z=E.outEdges(M).reduce(function(P,A){return Math.min(P,b[A.w]-E.edge(A))},Number.POSITIVE_INFINITY),S=m.node(M);z!==Number.POSITIVE_INFINITY&&S.borderType!==N&&(b[M]=Math.max(b[M],z))}return C(q,E.predecessors.bind(E)),C(k,E.successors.bind(E)),e.forEach(w,function(M){b[M]=b[p[M]]}),b}function c(m,x,p,w){var _=new t,b=m.graph(),E=y(b.nodesep,b.edgesep,w);return e.forEach(x,function(N){var C;e.forEach(N,function(q){var k=p[q];if(_.setNode(k),C){var M=p[C],z=_.edge(M,k);_.setEdge(M,k,Math.max(E(m,q,C),z||0))}C=q})}),_}function f(m,x){return e.minBy(e.values(x),function(p){var w=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY;return e.forIn(p,function(b,E){var N=v(m,E)/2;w=Math.max(b+N,w),_=Math.min(b-N,_)}),w-_})}function d(m,x){var p=e.values(x),w=e.min(p),_=e.max(p);e.forEach(["u","d"],function(b){e.forEach(["l","r"],function(E){var N=b+E,C=m[N],q;if(C!==x){var k=e.values(C);q=E==="l"?w-e.min(k):_-e.max(k),q&&(m[N]=e.mapValues(C,function(M){return M+q}))}})})}function h(m,x){return e.mapValues(m.ul,function(p,w){if(x)return m[x.toLowerCase()][w];var _=e.sortBy(e.map(m,w));return(_[1]+_[2])/2})}function g(m){var x=n.buildLayerMatrix(m),p=e.merge(i(m,x),r(m,x)),w={},_;e.forEach(["u","d"],function(E){_=E==="u"?x:e.values(x).reverse(),e.forEach(["l","r"],function(N){N==="r"&&(_=e.map(_,function(M){return e.values(M).reverse()}));var C=(E==="u"?m.predecessors:m.successors).bind(m),q=u(m,_,p,C),k=l(m,_,q.root,q.align,N==="r");N==="r"&&(k=e.mapValues(k,function(M){return-M})),w[E+N]=k})});var b=f(m,w);return d(w,b),h(w,m.graph().align)}function y(m,x,p){return function(w,_,b){var E=w.node(_),N=w.node(b),C=0,q;if(C+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":q=-E.width/2;break;case"r":q=E.width/2;break}if(q&&(C+=p?q:-q),q=0,C+=(E.dummy?x:m)/2,C+=(N.dummy?x:m)/2,C+=N.width/2,e.has(N,"labelpos"))switch(N.labelpos.toLowerCase()){case"l":q=N.width/2;break;case"r":q=-N.width/2;break}return q&&(C+=p?q:-q),q=0,C}}function v(m,x){return m.node(x).width}return Hr}var jr,pa;function r0(){if(pa)return jr;pa=1;var e=oe(),t=ue(),n=n0().positionX;jr=i;function i(o){o=t.asNonCompoundGraph(o),r(o),e.forEach(n(o),function(s,a){o.node(a).x=s})}function r(o){var s=t.buildLayerMatrix(o),a=o.graph().ranksep,u=0;e.forEach(s,function(l){var c=e.max(e.map(l,function(f){return o.node(f).height}));e.forEach(l,function(f){o.node(f).y=u+c/2}),u+=c+a})}return jr}var Gr,ga;function i0(){if(ga)return Gr;ga=1;var e=oe(),t=Fy(),n=Oy(),i=By(),r=ue().normalizeRanks,o=Hy(),s=ue().removeEmptyRanks,a=jy(),u=Gy(),l=Yy(),c=t0(),f=r0(),d=ue(),h=ge().Graph;Gr=g;function g(I,T){var F=T&&T.debugTiming?d.time:d.notime;F("layout",function(){var V=F("  buildLayoutGraph",function(){return C(I)});F("  runLayout",function(){y(V,F)}),F("  updateInputGraph",function(){v(I,V)})})}function y(I,T){T("    makeSpaceForEdgeLabels",function(){q(I)}),T("    removeSelfEdges",function(){R(I)}),T("    acyclic",function(){t.run(I)}),T("    nestingGraph.run",function(){a.run(I)}),T("    rank",function(){i(d.asNonCompoundGraph(I))}),T("    injectEdgeLabelProxies",function(){k(I)}),T("    removeEmptyRanks",function(){s(I)}),T("    nestingGraph.cleanup",function(){a.cleanup(I)}),T("    normalizeRanks",function(){r(I)}),T("    assignRankMinMax",function(){M(I)}),T("    removeEdgeLabelProxies",function(){z(I)}),T("    normalize.run",function(){n.run(I)}),T("    parentDummyChains",function(){o(I)}),T("    addBorderSegments",function(){u(I)}),T("    order",function(){c(I)}),T("    insertSelfEdges",function(){H(I)}),T("    adjustCoordinateSystem",function(){l.adjust(I)}),T("    position",function(){f(I)}),T("    positionSelfEdges",function(){G(I)}),T("    removeBorderNodes",function(){L(I)}),T("    normalize.undo",function(){n.undo(I)}),T("    fixupEdgeLabelCoords",function(){A(I)}),T("    undoCoordinateSystem",function(){l.undo(I)}),T("    translateGraph",function(){S(I)}),T("    assignNodeIntersects",function(){P(I)}),T("    reversePoints",function(){D(I)}),T("    acyclic.undo",function(){t.undo(I)})}function v(I,T){e.forEach(I.nodes(),function(F){var V=I.node(F),B=T.node(F);V&&(V.x=B.x,V.y=B.y,T.children(F).length&&(V.width=B.width,V.height=B.height))}),e.forEach(I.edges(),function(F){var V=I.edge(F),B=T.edge(F);V.points=B.points,e.has(B,"x")&&(V.x=B.x,V.y=B.y)}),I.graph().width=T.graph().width,I.graph().height=T.graph().height}var m=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},p=["acyclicer","ranker","rankdir","align"],w=["width","height"],_={width:0,height:0},b=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},N=["labelpos"];function C(I){var T=new h({multigraph:!0,compound:!0}),F=W(I.graph());return T.setGraph(e.merge({},x,j(F,m),e.pick(F,p))),e.forEach(I.nodes(),function(V){var B=W(I.node(V));T.setNode(V,e.defaults(j(B,w),_)),T.setParent(V,I.parent(V))}),e.forEach(I.edges(),function(V){var B=W(I.edge(V));T.setEdge(V,e.merge({},E,j(B,b),e.pick(B,N)))}),T}function q(I){var T=I.graph();T.ranksep/=2,e.forEach(I.edges(),function(F){var V=I.edge(F);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(T.rankdir==="TB"||T.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function k(I){e.forEach(I.edges(),function(T){var F=I.edge(T);if(F.width&&F.height){var V=I.node(T.v),B=I.node(T.w),Y={rank:(B.rank-V.rank)/2+V.rank,e:T};d.addDummyNode(I,"edge-proxy",Y,"_ep")}})}function M(I){var T=0;e.forEach(I.nodes(),function(F){var V=I.node(F);V.borderTop&&(V.minRank=I.node(V.borderTop).rank,V.maxRank=I.node(V.borderBottom).rank,T=e.max(T,V.maxRank))}),I.graph().maxRank=T}function z(I){e.forEach(I.nodes(),function(T){var F=I.node(T);F.dummy==="edge-proxy"&&(I.edge(F.e).labelRank=F.rank,I.removeNode(T))})}function S(I){var T=Number.POSITIVE_INFINITY,F=0,V=Number.POSITIVE_INFINITY,B=0,Y=I.graph(),U=Y.marginx||0,K=Y.marginy||0;function Q(X){var J=X.x,ne=X.y,ee=X.width,ae=X.height;T=Math.min(T,J-ee/2),F=Math.max(F,J+ee/2),V=Math.min(V,ne-ae/2),B=Math.max(B,ne+ae/2)}e.forEach(I.nodes(),function(X){Q(I.node(X))}),e.forEach(I.edges(),function(X){var J=I.edge(X);e.has(J,"x")&&Q(J)}),T-=U,V-=K,e.forEach(I.nodes(),function(X){var J=I.node(X);J.x-=T,J.y-=V}),e.forEach(I.edges(),function(X){var J=I.edge(X);e.forEach(J.points,function(ne){ne.x-=T,ne.y-=V}),e.has(J,"x")&&(J.x-=T),e.has(J,"y")&&(J.y-=V)}),Y.width=F-T+U,Y.height=B-V+K}function P(I){e.forEach(I.edges(),function(T){var F=I.edge(T),V=I.node(T.v),B=I.node(T.w),Y,U;F.points?(Y=F.points[0],U=F.points[F.points.length-1]):(F.points=[],Y=B,U=V),F.points.unshift(d.intersectRect(V,Y)),F.points.push(d.intersectRect(B,U))})}function A(I){e.forEach(I.edges(),function(T){var F=I.edge(T);if(e.has(F,"x"))switch((F.labelpos==="l"||F.labelpos==="r")&&(F.width-=F.labeloffset),F.labelpos){case"l":F.x-=F.width/2+F.labeloffset;break;case"r":F.x+=F.width/2+F.labeloffset;break}})}function D(I){e.forEach(I.edges(),function(T){var F=I.edge(T);F.reversed&&F.points.reverse()})}function L(I){e.forEach(I.nodes(),function(T){if(I.children(T).length){var F=I.node(T),V=I.node(F.borderTop),B=I.node(F.borderBottom),Y=I.node(e.last(F.borderLeft)),U=I.node(e.last(F.borderRight));F.width=Math.abs(U.x-Y.x),F.height=Math.abs(B.y-V.y),F.x=Y.x+F.width/2,F.y=V.y+F.height/2}}),e.forEach(I.nodes(),function(T){I.node(T).dummy==="border"&&I.removeNode(T)})}function R(I){e.forEach(I.edges(),function(T){if(T.v===T.w){var F=I.node(T.v);F.selfEdges||(F.selfEdges=[]),F.selfEdges.push({e:T,label:I.edge(T)}),I.removeEdge(T)}})}function H(I){var T=d.buildLayerMatrix(I);e.forEach(T,function(F){var V=0;e.forEach(F,function(B,Y){var U=I.node(B);U.order=Y+V,e.forEach(U.selfEdges,function(K){d.addDummyNode(I,"selfedge",{width:K.label.width,height:K.label.height,rank:U.rank,order:Y+ ++V,e:K.e,label:K.label},"_se")}),delete U.selfEdges})})}function G(I){e.forEach(I.nodes(),function(T){var F=I.node(T);if(F.dummy==="selfedge"){var V=I.node(F.e.v),B=V.x+V.width/2,Y=V.y,U=F.x-B,K=V.height/2;I.setEdge(F.e,F.label),I.removeNode(T),F.label.points=[{x:B+2*U/3,y:Y-K},{x:B+5*U/6,y:Y-K},{x:B+U,y:Y},{x:B+5*U/6,y:Y+K},{x:B+2*U/3,y:Y+K}],F.label.x=F.x,F.label.y=F.y}})}function j(I,T){return e.mapValues(e.pick(I,T),Number)}function W(I){var T={};return e.forEach(I,function(F,V){T[V.toLowerCase()]=F}),T}return Gr}var Yr,ma;function o0(){if(ma)return Yr;ma=1;var e=oe(),t=ue(),n=ge().Graph;Yr={debugOrdering:i};function i(r){var o=t.buildLayerMatrix(r),s=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(r.nodes(),function(a){s.setNode(a,{label:a}),s.setParent(a,"layer"+r.node(a).rank)}),e.forEach(r.edges(),function(a){s.setEdge(a.v,a.w,{},a.name)}),e.forEach(o,function(a,u){var l="layer"+u;s.setNode(l,{rank:"same"}),e.reduce(a,function(c,f){return s.setEdge(c,f,{style:"invis"}),f})}),s}return Yr}var Wr,va;function s0(){return va||(va=1,Wr="0.8.5"),Wr}var Xr,ya;function m0(){return ya||(ya=1,Xr={graphlib:ge(),layout:i0(),debug:o0(),util:{time:ue().time,notime:ue().notime},version:s0()}),Xr}export{h0 as B,p0 as C,Tt as H,Rt as M,Z as P,_v as R,d0 as a,ki as b,g0 as c,l0 as i,m0 as r,f0 as u};
