import{j as o,B as j,G as y,T as x,A as oe,d as S,F as v,a3 as Te,e as M,W as B,X as Pe}from"./vendor-mantine-aKbh6G_O.js";import{g as ve,r as f}from"./vendor-react-CA6k1jPF.js";import{r as $e,H as q,P as Q,R as ke,u as Ie,a as Le,b as He,M as _e,i as ze,B as Ae,C as Fe,c as De}from"./vendor-xyflow-DR63r_xn.js";import{P as Oe}from"./PageContainer-BshQiLl_.js";import{d as Ve}from"./database-Co5xRXKh.js";import{p as X}from"./pgmeta-Ch70PY3U.js";import{V as D,C as We,aU as ce,aV as le,aW as ue,aX as he,J as Ge,am as Ue,aY as Me}from"./vendor-icons-BYOfSTr6.js";import"./vendor-charts-X2wGYlzF.js";import"./client-CvoVCtJO.js";var Be=$e();const K=ve(Be);function qe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const s=document.implementation.createHTMLDocument(),r=s.createElement("base"),a=s.createElement("a");return s.head.appendChild(r),s.body.appendChild(a),t&&(r.href=t),a.href=e,a.href}const Qe=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function E(e){const t=[];for(let s=0,r=e.length;s<r;s++)t.push(e[s]);return t}let C=null;function de(e={}){return C||(e.includeStyleProperties?(C=e.includeStyleProperties,C):(C=E(window.getComputedStyle(document.documentElement)),C))}function k(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function Xe(e){const t=k(e,"border-left-width"),s=k(e,"border-right-width");return e.clientWidth+t+s}function Ke(e){const t=k(e,"border-top-width"),s=k(e,"border-bottom-width");return e.clientHeight+t+s}function fe(e,t={}){const s=t.width||Xe(e),r=t.height||Ke(e);return{width:s,height:r}}function Ne(){let e,t;try{t=process}catch{}const s=t&&t.env?t.env.devicePixelRatio:null;return s&&(e=parseInt(s,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const p=16384;function Je(e){(e.width>p||e.height>p)&&(e.width>p&&e.height>p?e.width>e.height?(e.height*=p/e.width,e.width=p):(e.width*=p/e.height,e.height=p):e.width>p?(e.height*=p/e.width,e.width=p):(e.width*=p/e.height,e.height=p))}function I(e){return new Promise((t,s)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=s,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function Ze(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Ye(e,t,s){const r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg"),n=document.createElementNS(r,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${s}`),a.setAttribute("viewBox",`0 0 ${t} ${s}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),a.appendChild(n),n.appendChild(e),Ze(a)}const m=(e,t)=>{if(e instanceof t)return!0;const s=Object.getPrototypeOf(e);return s===null?!1:s.constructor.name===t.name||m(s,t)};function et(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function tt(e,t){return de(t).map(s=>{const r=e.getPropertyValue(s),a=e.getPropertyPriority(s);return`${s}: ${r}${a?" !important":""};`}).join(" ")}function rt(e,t,s,r){const a=`.${e}:${t}`,n=s.cssText?et(s):tt(s,r);return document.createTextNode(`${a}{${n}}`)}function N(e,t,s,r){const a=window.getComputedStyle(e,s),n=a.getPropertyValue("content");if(n===""||n==="none")return;const i=Qe();try{t.className=`${t.className} ${i}`}catch{return}const c=document.createElement("style");c.appendChild(rt(i,s,a,r)),t.appendChild(c)}function st(e,t,s){N(e,t,":before",s),N(e,t,":after",s)}const J="application/font-woff",Z="image/jpeg",nt={woff:J,woff2:J,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Z,jpeg:Z,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function at(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function O(e){const t=at(e).toLowerCase();return nt[t]||""}function it(e){return e.split(/,/)[1]}function F(e){return e.search(/^(data:)/)!==-1}function ot(e,t){return`data:${t};base64,${e}`}async function me(e,t,s){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const a=await r.blob();return new Promise((n,i)=>{const c=new FileReader;c.onerror=i,c.onloadend=()=>{try{n(s({res:r,result:c.result}))}catch(l){i(l)}},c.readAsDataURL(a)})}const A={};function ct(e,t,s){let r=e.replace(/\?.*/,"");return s&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function V(e,t,s){const r=ct(e,t,s.includeQueryParams);if(A[r]!=null)return A[r];s.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const n=await me(e,s.fetchRequestInit,({res:i,result:c})=>(t||(t=i.headers.get("Content-Type")||""),it(c)));a=ot(n,t)}catch(n){a=s.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;n&&(i=typeof n=="string"?n:n.message),i&&console.warn(i)}return A[r]=a,a}async function lt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):I(t)}async function ut(e,t){if(e.currentSrc){const n=document.createElement("canvas"),i=n.getContext("2d");n.width=e.clientWidth,n.height=e.clientHeight,i==null||i.drawImage(e,0,0,n.width,n.height);const c=n.toDataURL();return I(c)}const s=e.poster,r=O(s),a=await V(s,r,t);return I(a)}async function ht(e,t){var s;try{if(!((s=e==null?void 0:e.contentDocument)===null||s===void 0)&&s.body)return await L(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function dt(e,t){return m(e,HTMLCanvasElement)?lt(e):m(e,HTMLVideoElement)?ut(e,t):m(e,HTMLIFrameElement)?ht(e,t):e.cloneNode(ge(e))}const ft=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",ge=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function mt(e,t,s){var r,a;if(ge(t))return t;let n=[];return ft(e)&&e.assignedNodes?n=E(e.assignedNodes()):m(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?n=E(e.contentDocument.body.childNodes):n=E(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),n.length===0||m(e,HTMLVideoElement)||await n.reduce((i,c)=>i.then(()=>L(c,s)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function gt(e,t,s){const r=t.style;if(!r)return;const a=window.getComputedStyle(e);a.cssText?(r.cssText=a.cssText,r.transformOrigin=a.transformOrigin):de(s).forEach(n=>{let i=a.getPropertyValue(n);n==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),m(e,HTMLIFrameElement)&&n==="display"&&i==="inline"&&(i="block"),n==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),r.setProperty(n,i,a.getPropertyPriority(n))})}function pt(e,t){m(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),m(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function yt(e,t){if(m(e,HTMLSelectElement)){const r=Array.from(t.children).find(a=>e.value===a.getAttribute("value"));r&&r.setAttribute("selected","")}}function xt(e,t,s){return m(t,Element)&&(gt(e,t,s),st(e,t,s),pt(e,t),yt(e,t)),t}async function bt(e,t){const s=e.querySelectorAll?e.querySelectorAll("use"):[];if(s.length===0)return e;const r={};for(let n=0;n<s.length;n++){const c=s[n].getAttribute("xlink:href");if(c){const l=e.querySelector(c),h=document.querySelector(c);!l&&h&&!r[c]&&(r[c]=await L(h,t,!0))}}const a=Object.values(r);if(a.length){const n="http://www.w3.org/1999/xhtml",i=document.createElementNS(n,"svg");i.setAttribute("xmlns",n),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const c=document.createElementNS(n,"defs");i.appendChild(c);for(let l=0;l<a.length;l++)c.appendChild(a[l]);e.appendChild(i)}return e}async function L(e,t,s){return!s&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>dt(r,t)).then(r=>mt(e,r,t)).then(r=>xt(e,r,t)).then(r=>bt(r,t))}const pe=/url\((['"]?)([^'"]+?)\1\)/g,wt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Et=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function St(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ct(e){const t=[];return e.replace(pe,(s,r,a)=>(t.push(a),s)),t.filter(s=>!F(s))}async function Rt(e,t,s,r,a){try{const n=s?qe(t,s):t,i=O(t);let c;return a||(c=await V(n,i,r)),e.replace(St(t),`$1${c}$3`)}catch{}return e}function jt(e,{preferredFontFormat:t}){return t?e.replace(Et,s=>{for(;;){const[r,,a]=wt.exec(s)||[];if(!a)return"";if(a===t)return`src: ${r};`}}):e}function ye(e){return e.search(pe)!==-1}async function xe(e,t,s){if(!ye(e))return e;const r=jt(e,s);return Ct(r).reduce((n,i)=>n.then(c=>Rt(c,i,t,s)),Promise.resolve(r))}async function R(e,t,s){var r;const a=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(a){const n=await xe(a,null,s);return t.style.setProperty(e,n,t.style.getPropertyPriority(e)),!0}return!1}async function Tt(e,t){await R("background",e,t)||await R("background-image",e,t),await R("mask",e,t)||await R("-webkit-mask",e,t)||await R("mask-image",e,t)||await R("-webkit-mask-image",e,t)}async function Pt(e,t){const s=m(e,HTMLImageElement);if(!(s&&!F(e.src))&&!(m(e,SVGImageElement)&&!F(e.href.baseVal)))return;const r=s?e.src:e.href.baseVal,a=await V(r,O(r),t);await new Promise((n,i)=>{e.onload=n,e.onerror=t.onImageErrorHandler?(...l)=>{try{n(t.onImageErrorHandler(...l))}catch(h){i(h)}}:i;const c=e;c.decode&&(c.decode=n),c.loading==="lazy"&&(c.loading="eager"),s?(e.srcset="",e.src=a):e.href.baseVal=a})}async function vt(e,t){const r=E(e.childNodes).map(a=>be(a,t));await Promise.all(r).then(()=>e)}async function be(e,t){m(e,Element)&&(await Tt(e,t),await Pt(e,t),await vt(e,t))}function $t(e,t){const{style:s}=e;t.backgroundColor&&(s.backgroundColor=t.backgroundColor),t.width&&(s.width=`${t.width}px`),t.height&&(s.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(a=>{s[a]=r[a]}),e}const Y={};async function ee(e){let t=Y[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},Y[e]=t,t}async function te(e,t){let s=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,n=(s.match(/url\([^)]+\)/g)||[]).map(async i=>{let c=i.replace(r,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),me(c,t.fetchRequestInit,({result:l})=>(s=s.replace(i,`url(${l})`),[i,l]))});return Promise.all(n).then(()=>s)}function re(e){if(e==null)return[];const t=[],s=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(s,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=a.exec(r);if(l===null)break;t.push(l[0])}r=r.replace(a,"");const n=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(i,"gi");for(;;){let l=n.exec(r);if(l===null){if(l=c.exec(r),l===null)break;n.lastIndex=c.lastIndex}else c.lastIndex=n.lastIndex;t.push(l[0])}return t}async function kt(e,t){const s=[],r=[];return e.forEach(a=>{if("cssRules"in a)try{E(a.cssRules||[]).forEach((n,i)=>{if(n.type===CSSRule.IMPORT_RULE){let c=i+1;const l=n.href,h=ee(l).then(g=>te(g,t)).then(g=>re(g).forEach(b=>{try{a.insertRule(b,b.startsWith("@import")?c+=1:a.cssRules.length)}catch(H){console.error("Error inserting rule from remote css",{rule:b,error:H})}})).catch(g=>{console.error("Error loading remote css",g.toString())});r.push(h)}})}catch(n){const i=e.find(c=>c.href==null)||document.styleSheets[0];a.href!=null&&r.push(ee(a.href).then(c=>te(c,t)).then(c=>re(c).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",n)}}),Promise.all(r).then(()=>(e.forEach(a=>{if("cssRules"in a)try{E(a.cssRules||[]).forEach(n=>{s.push(n)})}catch(n){console.error(`Error while reading CSS rules from ${a.href}`,n)}}),s))}function It(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>ye(t.style.getPropertyValue("src")))}async function Lt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const s=E(e.ownerDocument.styleSheets),r=await kt(s,t);return It(r)}function we(e){return e.trim().replace(/["']/g,"")}function Ht(e){const t=new Set;function s(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(n=>{t.add(we(n))}),Array.from(r.children).forEach(n=>{n instanceof HTMLElement&&s(n)})}return s(e),t}async function _t(e,t){const s=await Lt(e,t),r=Ht(e);return(await Promise.all(s.filter(n=>r.has(we(n.style.fontFamily))).map(n=>{const i=n.parentStyleSheet?n.parentStyleSheet.href:null;return xe(n.cssText,i,t)}))).join(`
`)}async function zt(e,t){const s=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await _t(e,t);if(s){const r=document.createElement("style"),a=document.createTextNode(s);r.appendChild(a),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function At(e,t={}){const{width:s,height:r}=fe(e,t),a=await L(e,t,!0);return await zt(a,t),await be(a,t),$t(a,t),await Ye(a,s,r)}async function Ft(e,t={}){const{width:s,height:r}=fe(e,t),a=await At(e,t),n=await I(a),i=document.createElement("canvas"),c=i.getContext("2d"),l=t.pixelRatio||Ne(),h=t.canvasWidth||s,g=t.canvasHeight||r;return i.width=h*l,i.height=g*l,t.skipAutoScale||Je(i),i.style.width=`${h}`,i.style.height=`${g}`,t.backgroundColor&&(c.fillStyle=t.backgroundColor,c.fillRect(0,0,i.width,i.height)),c.drawImage(n,0,0,i.width,i.height),i}async function Dt(e,t={}){return(await Ft(e,t)).toDataURL()}const Ot=({column:e})=>e.is_primary_key?o.jsx(S,{label:"Primary Key",withArrow:!0,position:"left",children:o.jsx(D,{size:12,color:"var(--supabase-brand)"})}):e.is_identity?o.jsx(S,{label:"Identity",withArrow:!0,position:"left",children:o.jsx(ce,{size:12,color:"#666"})}):e.is_unique?o.jsx(S,{label:"Unique",withArrow:!0,position:"left",children:o.jsx(le,{size:12,color:"#666"})}):e.is_nullable?o.jsx(S,{label:"Nullable",withArrow:!0,position:"left",children:o.jsx(ue,{size:12,color:"#666"})}):o.jsx(S,{label:"Non-Nullable",withArrow:!0,position:"left",children:o.jsx(he,{size:12,color:"#666"})});function Vt({data:e}){return o.jsxs(j,{style:{background:"var(--supabase-bg-surface)",border:"1px solid var(--supabase-border)",borderRadius:8,minWidth:250,maxWidth:320,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:[o.jsxs(y,{justify:"space-between",px:"sm",py:"xs",style:{borderBottom:"1px solid var(--supabase-border)",borderRadius:"8px 8px 0 0",background:"var(--supabase-bg)"},children:[o.jsxs(y,{gap:6,children:[o.jsx(D,{size:14,color:"var(--supabase-brand)"}),o.jsx(x,{size:"sm",fw:600,style:{color:"var(--mantine-color-text)"},children:e.label})]}),o.jsx(oe,{variant:"subtle",size:"xs",component:"a",href:`/table-editor?schema=${e.schema}&table=${e.label}`,target:"_blank",children:o.jsx(We,{size:12})})]}),o.jsx(j,{py:4,children:e.columns.map((r,a)=>o.jsxs(y,{px:"sm",py:4,gap:8,wrap:"nowrap",style:{height:28,position:"relative"},children:[o.jsx(q,{type:"target",position:Q.Left,id:`${r.name}-target`,style:{background:"var(--supabase-brand)",width:8,height:8,top:36+a*28+28/2,left:-4}}),o.jsx(Ot,{column:r}),o.jsx(x,{size:"xs",fw:r.is_primary_key?600:400,style:{flex:1,color:r.is_primary_key?"var(--mantine-color-text)":"var(--mantine-color-dimmed)"},children:r.name}),o.jsx(x,{size:"xs",c:"dimmed",style:{opacity:.7},children:r.type}),o.jsx(q,{type:"source",position:Q.Right,id:`${r.name}-source`,style:{background:"var(--supabase-brand)",width:8,height:8,top:36+a*28+28/2,right:-4}})]},r.name))})]})}const Wt=f.memo(Vt),se=280,ne=50,ae=28,Gt={tableNode:Wt};function ie(e,t,s="LR"){const r=new K.graphlib.Graph;return r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:s,nodesep:80,ranksep:150}),e.forEach(n=>{var h;const i=n.data,c=((h=i==null?void 0:i.columns)==null?void 0:h.length)??0,l=ne+c*ae;r.setNode(n.id,{width:se,height:l})}),t.forEach(n=>{r.setEdge(n.source,n.target)}),K.layout(r),{nodes:e.map(n=>{var g;const i=r.node(n.id),c=n.data,l=((g=c==null?void 0:c.columns)==null?void 0:g.length)??0,h=ne+l*ae;return{...n,position:{x:i.x-se/2,y:i.y-h/2}}}),edges:t}}function Ut(){const[e,t]=f.useState([]),[s,r]=f.useState("public"),[a,n]=f.useState([]),[i,c]=f.useState([]),[l,h]=f.useState(!0),[g,b,H]=Ie([]),[_,T,Ee]=Le([]),{fitView:$,getNodes:W}=He(),z=f.useRef(null);f.useEffect(()=>{Ve.listSchemas().then(u=>{t(u??[])})},[]);const G=f.useCallback(async()=>{h(!0);try{const u=await X.getSchemaVisualization(s);n(u.tables??[]),c(u.relationships??[])}catch(u){const w=u;v.show({title:"Error",message:w.message||"Failed to load schema data",color:"red"})}finally{h(!1)}},[s]);f.useEffect(()=>{G()},[G]),f.useEffect(()=>{if(a.length===0){b([]),T([]);return}const u=a.map((d,U)=>({id:`${d.schema}.${d.name}`,type:"tableNode",position:{x:U%4*350,y:Math.floor(U/4)*400},data:{label:d.name,schema:d.schema,columns:d.columns}})),w=i.map(d=>({id:`${d.constraint_name}`,source:`${d.source_schema}.${d.source_table}`,target:`${d.target_schema}.${d.target_table}`,sourceHandle:`${d.source_columns[0]}-source`,targetHandle:`${d.target_columns[0]}-target`,type:"smoothstep",animated:!1,style:{stroke:"var(--supabase-border)",strokeWidth:1.5,strokeDasharray:"5,5"},markerEnd:{type:_e.ArrowClosed,width:15,height:15,color:"var(--supabase-border)"},label:d.constraint_name,labelStyle:{fontSize:10,fill:"var(--mantine-color-dimmed)"},labelBgStyle:{fill:"var(--supabase-bg-surface)",fillOpacity:.8}})),{nodes:P,edges:je}=ie(u,w,"LR");b(P),T(je),setTimeout(()=>$({padding:.2}),100)},[a,i,b,T,$]);const Se=f.useCallback(()=>{const{nodes:u,edges:w}=ie(W(),_,"LR");b(u),T(w),setTimeout(()=>$({padding:.2}),100)},[_,W,b,T,$]),Ce=f.useCallback(async()=>{try{const u=await X.getSchemaSQL(s);await navigator.clipboard.writeText(u),v.show({title:"Copied",message:"SQL schema copied to clipboard",color:"green"})}catch(u){const w=u;v.show({title:"Error",message:w.message||"Failed to copy SQL",color:"red"})}},[s]),Re=f.useCallback(()=>{if(!z.current)return;const u=z.current.querySelector(".react-flow__viewport");u&&Dt(u,{backgroundColor:"var(--supabase-bg)",width:u.scrollWidth,height:u.scrollHeight}).then(w=>{const P=document.createElement("a");P.download=`${s}-schema.png`,P.href=w,P.click(),v.show({title:"Exported",message:"Schema diagram exported as PNG",color:"green"})}).catch(()=>{v.show({title:"Error",message:"Failed to export image",color:"red"})})},[s]);return o.jsx(Oe,{title:"Schema Visualizer",description:"Visualize your database schema as an interactive diagram",fullWidth:!0,noPadding:!0,children:o.jsxs(j,{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 140px)"},children:[o.jsx(j,{px:"md",py:"xs",style:{borderBottom:"1px solid var(--supabase-border)",backgroundColor:"var(--supabase-bg-surface)"},children:o.jsxs(y,{justify:"space-between",children:[o.jsxs(y,{gap:"md",children:[o.jsx(x,{size:"sm",c:"dimmed",children:"schema"}),o.jsx(Te,{size:"xs",value:s,onChange:u=>u&&r(u),data:e.map(u=>({value:u,label:u})),style:{width:150}})]}),o.jsxs(y,{gap:"xs",children:[o.jsx(S,{label:"Copy as SQL",children:o.jsx(M,{variant:"default",size:"xs",leftSection:o.jsx(Ge,{size:14}),onClick:Ce,children:"Copy as SQL"})}),o.jsx(S,{label:"Download as PNG",children:o.jsx(oe,{variant:"default",size:"md",onClick:Re,children:o.jsx(Ue,{size:16})})}),o.jsx(M,{variant:"default",size:"xs",leftSection:o.jsx(Me,{size:14}),onClick:Se,children:"Auto layout"})]})]})}),o.jsx(j,{ref:z,style:{flex:1,position:"relative"},children:l?o.jsx(B,{style:{height:"100%"},children:o.jsx(Pe,{size:"lg"})}):a.length===0?o.jsx(B,{style:{height:"100%"},children:o.jsxs(x,{c:"dimmed",children:['No tables in schema "',s,'"']})}):o.jsxs(ze,{nodes:g,edges:_,onNodesChange:H,onEdgesChange:Ee,nodeTypes:Gt,fitView:!0,minZoom:.1,maxZoom:2,defaultEdgeOptions:{type:"smoothstep"},proOptions:{hideAttribution:!0},children:[o.jsx(Ae,{color:"var(--supabase-border)",gap:20,size:1}),o.jsx(Fe,{}),o.jsx(De,{nodeColor:"var(--supabase-brand)",maskColor:"rgba(0, 0, 0, 0.3)",style:{background:"var(--supabase-bg-surface)"}})]})}),o.jsx(j,{px:"md",py:"xs",style:{borderTop:"1px solid var(--supabase-border)",backgroundColor:"var(--supabase-bg-surface)"},children:o.jsxs(y,{gap:"lg",justify:"center",children:[o.jsxs(y,{gap:6,children:[o.jsx(D,{size:14,color:"var(--supabase-brand)"}),o.jsx(x,{size:"xs",c:"dimmed",children:"Primary key"})]}),o.jsxs(y,{gap:6,children:[o.jsx(ce,{size:14,color:"#666"}),o.jsx(x,{size:"xs",c:"dimmed",children:"Identity"})]}),o.jsxs(y,{gap:6,children:[o.jsx(le,{size:14,color:"#666"}),o.jsx(x,{size:"xs",c:"dimmed",children:"Unique"})]}),o.jsxs(y,{gap:6,children:[o.jsx(ue,{size:14,color:"#666"}),o.jsx(x,{size:"xs",c:"dimmed",children:"Nullable"})]}),o.jsxs(y,{gap:6,children:[o.jsx(he,{size:14,color:"#666"}),o.jsx(x,{size:"xs",c:"dimmed",children:"Non-Nullable"})]})]})})]})})}function Yt(){return o.jsx(ke,{children:o.jsx(Ut,{})})}export{Yt as SchemaVisualizerPage};
