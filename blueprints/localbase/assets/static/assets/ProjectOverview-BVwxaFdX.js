import{j as e,S as g,p,q as h,G as i,T as s,a as C,r as m,s as a,e as b,B as o,t as F,v as x,w as k}from"./vendor-mantine-0E1e8SJ8.js";import{r as f,L as d}from"./vendor-react-CFPnf9wS.js";import{P as _}from"./PageContainer-BJil4t7q.js";import{a as D}from"./auth-CFnvc1BQ.js";import{s as Q}from"./storage-COHXYSuF.js";import{d as V}from"./database-CiK1Mmeb.js";import{a as P}from"./client-CvoVCtJO.js";import{f as M}from"./functions-Bm-D4nxs.js";import{l as B,c as G,m as R,h as O,J,K,u as W,L as N,I as E,M as X,G as Y,j as Z,B as T}from"./vendor-icons-rmXLq6rR.js";const $={getStats:()=>P.get("/api/dashboard/stats"),getHealth:()=>P.get("/api/dashboard/health")};function oe(){const[n,y]=f.useState({users:0,tables:0,buckets:0,functions:0}),[v,w]=f.useState([]),[r,u]=f.useState(!0);f.useEffect(()=>{(async()=>{var j;u(!0);try{const[l,c,S,I,A]=await Promise.all([$.getHealth(),D.listUsers().catch(()=>({users:[],total:0})),V.listTables("public").catch(()=>[]),Q.listBuckets().catch(()=>[]),M.listFunctions().catch(()=>[])]),H=[{name:"Database",status:l.services.database?"healthy":"unhealthy"},{name:"Auth",status:l.services.auth?"healthy":"unhealthy"},{name:"Storage",status:l.services.storage?"healthy":"unhealthy"},{name:"Realtime",status:l.services.realtime?"healthy":"unhealthy"}];w(H),y({users:(c==null?void 0:c.total)||((j=c==null?void 0:c.users)==null?void 0:j.length)||0,tables:(S==null?void 0:S.length)||0,buckets:(I==null?void 0:I.length)||0,functions:(A==null?void 0:A.length)||0})}catch(l){console.error("Failed to fetch dashboard data:",l)}finally{u(!1)}})()},[]);const L=t=>{switch(t){case"healthy":return"green";case"degraded":return"yellow";case"unhealthy":return"red";default:return"gray"}},U=[{title:"Table Editor",description:"View and manage your database tables",icon:G,path:"/table-editor",color:"blue"},{title:"SQL Editor",description:"Run SQL queries and manage saved queries",icon:E,path:"/sql-editor",color:"green"},{title:"Authentication",description:"Manage users and auth settings",icon:B,path:"/auth/users",color:"violet"},{title:"Storage",description:"Upload and manage files",icon:R,path:"/storage",color:"orange"}],q=[{action:"Table created",target:"public.profiles",time:"2 minutes ago"},{action:"User signed up",target:"user@example.com",time:"5 minutes ago"},{action:"Policy added",target:"profiles_select",time:"10 minutes ago"},{action:"Function deployed",target:"hello-world",time:"1 hour ago"}];return e.jsx(_,{title:"Project Overview",description:"Welcome to your local Supabase project",children:e.jsxs(g,{gap:"lg",children:[e.jsxs(p,{cols:{base:1,sm:2,lg:4},spacing:"md",children:[e.jsx(z,{title:"Users",value:n.users,icon:B,color:"violet",loading:r,linkTo:"/auth/users"}),e.jsx(z,{title:"Tables",value:n.tables,icon:G,color:"blue",loading:r,linkTo:"/table-editor"}),e.jsx(z,{title:"Storage Buckets",value:n.buckets,icon:R,color:"orange",loading:r,linkTo:"/storage"}),e.jsx(z,{title:"Edge Functions",value:n.functions,icon:O,color:"green",loading:r,linkTo:"/functions"})]}),e.jsxs(p,{cols:{base:1,lg:2},spacing:"lg",children:[e.jsxs(h,{p:"md",radius:"md",withBorder:!0,children:[e.jsxs(i,{justify:"space-between",mb:"md",children:[e.jsx(s,{fw:600,children:"Service Health"}),e.jsx(C,{variant:"light",color:"green",size:"sm",children:"All systems operational"})]}),e.jsx(g,{gap:"sm",children:r?e.jsxs(e.Fragment,{children:[e.jsx(m,{height:40}),e.jsx(m,{height:40}),e.jsx(m,{height:40}),e.jsx(m,{height:40})]}):v.map(t=>e.jsxs(i,{justify:"space-between",children:[e.jsxs(i,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:L(t.status),children:t.status==="healthy"?e.jsx(J,{size:14}):e.jsx(K,{size:14})}),e.jsx(s,{size:"sm",children:t.name})]}),e.jsxs(i,{gap:"xs",children:[t.latency!==void 0&&e.jsxs(s,{size:"xs",c:"dimmed",children:[t.latency,"ms"]}),e.jsx(C,{size:"xs",variant:"light",color:L(t.status),children:t.status})]})]},t.name))})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,children:[e.jsxs(i,{justify:"space-between",mb:"md",children:[e.jsx(s,{fw:600,children:"Recent Activity"}),e.jsx(b,{variant:"subtle",size:"xs",rightSection:e.jsx(W,{size:14}),component:d,to:"/logs",children:"View logs"})]}),e.jsx(g,{gap:"sm",children:q.map((t,j)=>e.jsxs(i,{justify:"space-between",children:[e.jsxs(i,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",children:e.jsx(N,{size:14})}),e.jsxs(o,{children:[e.jsx(s,{size:"sm",children:t.action}),e.jsx(s,{size:"xs",c:"dimmed",children:t.target})]})]}),e.jsx(s,{size:"xs",c:"dimmed",children:t.time})]},j))})]})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,children:[e.jsx(s,{fw:600,mb:"md",children:"Quick Actions"}),e.jsx(p,{cols:{base:1,sm:2,lg:4},spacing:"md",children:U.map(t=>e.jsx(F,{component:d,to:t.path,padding:"md",radius:"md",withBorder:!0,style:{cursor:"pointer"},children:e.jsxs(i,{children:[e.jsx(a,{size:"lg",radius:"md",variant:"light",color:t.color,children:e.jsx(t.icon,{size:20})}),e.jsxs(o,{style:{flex:1},children:[e.jsx(s,{size:"sm",fw:500,children:t.title}),e.jsx(s,{size:"xs",c:"dimmed",children:t.description})]}),e.jsx(X,{size:16,style:{opacity:.5}})]})},t.path))})]}),e.jsxs(p,{cols:{base:1,lg:2},spacing:"lg",children:[e.jsxs(h,{p:"md",radius:"md",withBorder:!0,children:[e.jsx(s,{fw:600,mb:"md",children:"Getting Started"}),e.jsxs(x,{spacing:"sm",size:"sm",children:[e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"green",children:e.jsx(Y,{size:12})}),children:e.jsx(s,{size:"sm",children:"Set up your local Supabase instance"})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"blue",children:e.jsx(E,{size:12})}),children:e.jsxs(i,{gap:"xs",children:[e.jsx(s,{size:"sm",children:"Create your first table"}),e.jsx(b,{variant:"subtle",size:"compact-xs",component:d,to:"/table-editor",children:"Go"})]})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"violet",children:e.jsx(Z,{size:12})}),children:e.jsxs(i,{gap:"xs",children:[e.jsx(s,{size:"sm",children:"Set up Row Level Security"}),e.jsx(b,{variant:"subtle",size:"compact-xs",component:d,to:"/database/policies",children:"Go"})]})}),e.jsx(x.Item,{icon:e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"orange",children:e.jsx(B,{size:12})}),children:e.jsxs(i,{gap:"xs",children:[e.jsx(s,{size:"sm",children:"Add authentication to your app"}),e.jsx(b,{variant:"subtle",size:"compact-xs",component:d,to:"/auth/users",children:"Go"})]})})]})]}),e.jsxs(h,{p:"md",radius:"md",withBorder:!0,children:[e.jsx(s,{fw:600,mb:"md",children:"Resources"}),e.jsxs(g,{gap:"sm",children:[e.jsx(k,{href:"https://supabase.com/docs",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(i,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",children:e.jsx(T,{size:14})}),e.jsxs(o,{style:{flex:1},children:[e.jsx(s,{size:"sm",children:"Documentation"}),e.jsx(s,{size:"xs",c:"dimmed",children:"Learn how to use Supabase features"})]})]})}),e.jsx(k,{href:"https://supabase.com/docs/reference",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(i,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",children:e.jsx(T,{size:14})}),e.jsxs(o,{style:{flex:1},children:[e.jsx(s,{size:"sm",children:"API Reference"}),e.jsx(s,{size:"xs",c:"dimmed",children:"Complete API documentation"})]})]})}),e.jsx(k,{href:"https://github.com/supabase/supabase",target:"_blank",underline:"never",c:"inherit",children:e.jsxs(i,{gap:"sm",children:[e.jsx(a,{size:"sm",radius:"xl",variant:"light",color:"gray",children:e.jsx(T,{size:14})}),e.jsxs(o,{style:{flex:1},children:[e.jsx(s,{size:"sm",children:"GitHub"}),e.jsx(s,{size:"xs",c:"dimmed",children:"View source code and contribute"})]})]})})]})]})]})]})})}function z({title:n,value:y,icon:v,color:w,loading:r,linkTo:u}){return e.jsx(F,{component:d,to:u,padding:"md",radius:"md",withBorder:!0,style:{cursor:"pointer"},children:e.jsxs(i,{justify:"space-between",children:[e.jsxs(o,{children:[e.jsx(s,{size:"xs",c:"dimmed",tt:"uppercase",fw:600,children:n}),r?e.jsx(m,{height:32,width:60,mt:4}):e.jsx(s,{size:"xl",fw:700,mt:4,children:y.toLocaleString()})]}),e.jsx(a,{size:"xl",radius:"md",variant:"light",color:w,children:e.jsx(v,{size:24})})]})})}export{oe as ProjectOverviewPage};
