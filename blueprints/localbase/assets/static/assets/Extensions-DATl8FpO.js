import{j as e,B as l,X as I,G as i,a8 as L,b as T,I as A,T as n,p,t as f,a as b,d as B,e as N}from"./vendor-mantine-aKbh6G_O.js";import{r as a}from"./vendor-react-CA6k1jPF.js";import{d as y}from"./database-Co5xRXKh.js";import{aZ as d,a as _,o as D,H as F}from"./vendor-icons-BYOfSTr6.js";import"./client-CvoVCtJO.js";function O(){const[E,v]=a.useState([]),[z,m]=a.useState(!0),[x,t]=a.useState(null),[r,w]=a.useState(""),[S,h]=a.useState(null),j=async()=>{try{m(!0),t(null);const s=await y.listExtensions();v(s)}catch(s){t(s instanceof Error?s.message:"Failed to load extensions")}finally{m(!1)}};a.useEffect(()=>{j()},[]);const C=async s=>{try{h(s.name),s.installed_version?alert("To disable an extension, use SQL: DROP EXTENSION IF EXISTS "+s.name):(await y.enableExtension(s.name),await j())}catch(u){t(u instanceof Error?u.message:"Failed to toggle extension")}finally{h(null)}},g=E.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.comment&&s.comment.toLowerCase().includes(r.toLowerCase())),o=g.filter(s=>s.installed_version),c=g.filter(s=>!s.installed_version);return z?e.jsx(l,{p:"xl",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(I,{size:"lg"})}):e.jsxs(l,{p:"md",children:[e.jsxs(i,{justify:"space-between",mb:"lg",children:[e.jsxs(i,{gap:"xs",children:[e.jsx(d,{size:24,style:{color:"var(--mantine-color-green-6)"}}),e.jsx(L,{order:3,children:"Extensions"})]}),e.jsx(T,{placeholder:"Search extensions...",leftSection:e.jsx(_,{size:16}),value:r,onChange:s=>w(s.target.value),style:{width:300}})]}),x&&e.jsx(A,{icon:e.jsx(D,{size:16}),color:"red",mb:"md",children:x}),e.jsxs(l,{mb:"xl",children:[e.jsxs(n,{fw:600,size:"sm",mb:"sm",c:"dimmed",children:["INSTALLED (",o.length,")"]}),e.jsx(p,{cols:{base:1,sm:2,lg:3},spacing:"md",children:o.map(s=>e.jsxs(f,{withBorder:!0,padding:"md",children:[e.jsxs(i,{justify:"space-between",mb:"xs",children:[e.jsxs(i,{gap:"xs",children:[e.jsx(d,{size:18,style:{color:"var(--mantine-color-green-6)"}}),e.jsx(n,{fw:600,size:"sm",children:s.name})]}),e.jsxs(b,{color:"green",variant:"light",size:"sm",children:["v",s.installed_version]})]}),e.jsx(n,{size:"xs",c:"dimmed",lineClamp:2,mb:"sm",children:s.comment||"No description available"}),e.jsxs(i,{justify:"space-between",children:[e.jsxs(n,{size:"xs",c:"dimmed",children:["Default: v",s.default_version]}),e.jsx(B,{label:"Extension is installed",children:e.jsx(F,{size:16,style:{color:"var(--mantine-color-green-6)"}})})]})]},s.name))}),o.length===0&&e.jsx(n,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No installed extensions found"})]}),e.jsxs(l,{children:[e.jsxs(n,{fw:600,size:"sm",mb:"sm",c:"dimmed",children:["AVAILABLE (",c.length,")"]}),e.jsx(p,{cols:{base:1,sm:2,lg:3},spacing:"md",children:c.map(s=>e.jsxs(f,{withBorder:!0,padding:"md",children:[e.jsxs(i,{justify:"space-between",mb:"xs",children:[e.jsxs(i,{gap:"xs",children:[e.jsx(d,{size:18,style:{color:"var(--mantine-color-gray-5)"}}),e.jsx(n,{fw:600,size:"sm",children:s.name})]}),e.jsxs(b,{color:"gray",variant:"light",size:"sm",children:["v",s.default_version]})]}),e.jsx(n,{size:"xs",c:"dimmed",lineClamp:2,mb:"sm",children:s.comment||"No description available"}),e.jsx(N,{size:"xs",variant:"light",onClick:()=>C(s),loading:S===s.name,fullWidth:!0,children:"Enable"})]},s.name))}),c.length===0&&e.jsx(n,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No additional extensions available"})]})]})}export{O as ExtensionsPage};
