import{a as r}from"./client-CvoVCtJO.js";const f={listSchemas:()=>r.get("/api/database/schemas"),createSchema:e=>r.post("/api/database/schemas",{name:e}),listTables:(e="public")=>r.get(`/api/database/tables?schema=${e}`),getTable:(e,t)=>r.get(`/api/database/tables/${e}/${t}`),createTable:e=>r.post("/api/database/tables",e),dropTable:(e,t)=>r.delete(`/api/database/tables/${e}/${t}`),listColumns:(e,t)=>r.get(`/api/database/tables/${e}/${t}/columns`),addColumn:(e,t,a)=>r.post(`/api/database/tables/${e}/${t}/columns`,a),alterColumn:(e,t,a,s)=>r.put(`/api/database/tables/${e}/${t}/columns/${a}`,s),dropColumn:(e,t,a)=>r.delete(`/api/database/tables/${e}/${t}/columns/${a}`),listPolicies:(e,t)=>r.get(`/api/database/policies/${e}/${t}`),createPolicy:e=>r.post("/api/database/policies",e),dropPolicy:(e,t,a)=>r.delete(`/api/database/policies/${e}/${t}/${a}`),listExtensions:()=>r.get("/api/database/extensions"),enableExtension:e=>r.post("/api/database/extensions",{name:e}),executeQuery:e=>r.post("/api/database/query",{query:e}),selectTable:(e,t)=>{const a=t?`/rest/v1/${e}?${t}`:`/rest/v1/${e}`;return r.get(a)},insertRow:(e,t)=>r.post(`/rest/v1/${e}`,t,{headers:{Prefer:"return=representation"}}),updateRow:(e,t,a)=>r.patch(`/rest/v1/${e}?${t}`,a,{headers:{Prefer:"return=representation"}}),deleteRow:(e,t)=>r.delete(`/rest/v1/${e}?${t}`),getTableData:async(e,t,a)=>{const s=new URLSearchParams;a!=null&&a.limit&&s.set("limit",String(a.limit)),a!=null&&a.offset&&s.set("offset",String(a.offset)),a!=null&&a.order&&s.set("order",a.order),a!=null&&a.select&&s.set("select",a.select),a!=null&&a.includeCount&&s.set("count","true"),a!=null&&a.filters&&Object.entries(a.filters).forEach(([n,$])=>{s.set(n,$)});const l=s.toString(),b=`/api/database/tables/${e}/${t}/data${l?"?"+l:""}`,c=localStorage.getItem("supabase_service_key")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJsb2NhbGJhc2UiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNzA0MDY3MjAwLCJleHAiOjE4NjE4MzM2MDB9.service_role_key_signature",u=await fetch(b,{headers:{"Content-Type":"application/json",apikey:c,Authorization:`Bearer ${c}`}});if(!u.ok)throw new Error(`Failed to fetch table data: ${u.statusText}`);const d=await u.json(),i=u.headers.get("X-Total-Count");return{data:d,totalCount:i?parseInt(i,10):void 0}},exportTableData:(e,t,a="json",s)=>{const l=new URLSearchParams;return l.set("format",a),s&&Object.entries(s).forEach(([b,c])=>{l.set(b,c)}),`/api/database/tables/${e}/${t}/export?${l.toString()}`},bulkOperation:(e,t,a,s,l)=>r.post(`/api/database/tables/${e}/${t}/bulk`,{operation:a,ids:s,column:(l==null?void 0:l.column)||"id",data:l==null?void 0:l.data})};export{f as d};
