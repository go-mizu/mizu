---
title: "Cookies"
---

In this lesson, you will learn how to use cookies in Mizu to store and read small pieces of data between requests. Cookies are one of the simplest ways to remember users, track sessions, or store preferences like language or theme. Mizu makes cookie handling straightforward through `Ctx.Cookie()` and `Ctx.SetCookie()`.

### Code

Copy this program into a file named `main.go`:

```go
package main

import (
	"log"
	"net/http"
	"time"

	"github.com/go-mizu/mizu"
)

// Set a cookie named "username"
func setCookie(c *mizu.Ctx) error {
	name := c.Query("name")
	if name == "" {
		name = "Guest"
	}

	c.SetCookie(&http.Cookie{
		Name:     "username",
		Value:    name,
		Path:     "/",
		HttpOnly: true,
		Expires:  time.Now().Add(24 * time.Hour),
	})

	return c.Text(200, "Cookie set for "+name)
}

// Read a cookie named "username"
func getCookie(c *mizu.Ctx) error {
	cookie, err := c.Cookie("username")
	if err != nil {
		return c.Text(404, "No cookie found")
	}
	return c.Text(200, "Welcome back, "+cookie.Value)
}

// Delete the cookie by setting expiration to the past
func clearCookie(c *mizu.Ctx) error {
	c.SetCookie(&http.Cookie{
		Name:    "username",
		Value:   "",
		Path:    "/",
		Expires: time.Unix(0, 0),
		MaxAge:  -1,
	})
	return c.Text(200, "Cookie cleared")
}

func main() {
	app := mizu.New()

	app.Get("/set", setCookie)
	app.Get("/get", getCookie)
	app.Get("/clear", clearCookie)

	if err := app.Listen(":8080"); err != nil {
		log.Fatal(err)
	}
}
```

### Run the lesson

Start the server:

```bash
go run .
```

Then try these examples:

#### Set a cookie

Visit [http://localhost:8080/set?name=Alice](http://localhost:8080/set?name=Alice)
You’ll see `Cookie set for Alice`, and your browser now has a cookie named `username`.

#### Get the cookie

Visit [http://localhost:8080/get](http://localhost:8080/get)
You’ll see `Welcome back, Alice`. The value is read from the cookie you just set.

#### Clear the cookie

Visit [http://localhost:8080/clear](http://localhost:8080/clear)
You’ll see `Cookie cleared`, and the browser cookie is deleted.

### How it works

| Method                         | Purpose                           | Example                                                            |
| ------------------------------ | --------------------------------- | ------------------------------------------------------------------ |
| `c.SetCookie(ck *http.Cookie)` | Sends a cookie to the client      | Sets name, value, expiry, and options like `HttpOnly` or `Secure`. |
| `c.Cookie("name")`             | Reads a cookie sent by the client | Returns a `*http.Cookie` and an error if not found.                |

- **Setting a cookie** adds a `Set-Cookie` header to the HTTP response.
- **Reading a cookie** checks the request headers for a matching cookie name.
- **Deleting a cookie** works by sending a new cookie with an empty value and an expiration date in the past.

This pattern gives you complete control over session-like behavior without needing an external dependency or database.

### Try something new

Add another handler that counts how many times a user has visited your site:

```go
func visitCount(c *mizu.Ctx) error {
	ck, _ := c.Cookie("visits")
	count := 0
	if ck != nil {
		fmt.Sscanf(ck.Value, "%d", &count)
	}
	count++

	c.SetCookie(&http.Cookie{
		Name:    "visits",
		Value:   fmt.Sprintf("%d", count),
		Path:    "/",
		Expires: time.Now().Add(24 * time.Hour),
	})

	return c.Text(200, fmt.Sprintf("You’ve visited %d times", count))
}
```

Register it with `app.Get("/visits", visitCount)` and reload the page several times.
You’ll see the count increase with every visit.

Cookies are the foundation for sessions, login tracking, and personalization.

Continue to the next lesson: [Middleware Basics](./008-middleware-basics) to learn how to wrap your handlers with reusable logic such as logging, timing, and authentication checks.
