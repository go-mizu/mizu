---
title: "Layouts"
description: "Learn how to use layouts and slots to create consistent page structures"
---

# Layouts

Layouts are the HTML shell that wraps your pages. They contain the common structure shared across pages: doctype, head, navigation, footer, and more. This guide explains how to create layouts and use the slot system.

## What is a Layout?

A layout is a template that defines the outer structure of your pages. Instead of repeating the HTML boilerplate in every page, you define it once in a layout:

```html
<!-- Without layouts: every page repeats this -->
<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <nav>...</nav>
    <!-- Page content here -->
    <footer>...</footer>
</body>
</html>
```

```html
<!-- With layouts: defined once, pages fill in the blanks -->
<!-- Layout -->
<!DOCTYPE html>
<html>
<head>
    <title>{{slot "title"}}</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <nav>...</nav>
    {{slot "content"}}
    <footer>...</footer>
</body>
</html>
```

## Creating a Layout

Layouts go in the `views/layouts/` directory:

```
views/
├── layouts/
│   ├── default.html    # The default layout
│   ├── admin.html      # Admin panel layout
│   └── minimal.html    # Minimal layout (no nav/footer)
```

### Basic Layout Example

```html
<!-- views/layouts/default.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{slot "title" "My App"}}</title>
    <link rel="stylesheet" href="/css/main.css">
    {{slot "head"}}
</head>
<body>
    <header>
        {{partial "header"}}
    </header>

    <nav>
        {{partial "nav"}}
    </nav>

    <main>
        {{slot "content"}}
    </main>

    <aside>
        {{slot "sidebar"}}
    </aside>

    <footer>
        {{partial "footer"}}
    </footer>

    <script src="/js/main.js"></script>
    {{stack "scripts"}}
</body>
</html>
```

## The Slot System

Slots are placeholders in layouts that pages can fill with content.

### Defining Slots

Use the `slot` function in layouts:

```html
{{slot "name"}}                     <!-- Slot with no default -->
{{slot "name" "Default content"}}   <!-- Slot with default value -->
```

### Filling Slots

Pages fill slots using `define` blocks:

```html
<!-- views/pages/about.html -->
{{define "title"}}About Us - My App{{end}}

{{define "content"}}
<h1>About Us</h1>
<p>Welcome to our company.</p>
{{end}}

{{define "sidebar"}}
<h3>Quick Links</h3>
<ul>
    <li><a href="/team">Our Team</a></li>
    <li><a href="/history">History</a></li>
</ul>
{{end}}
```

### Slots with Default Values

When a page doesn't fill a slot, the default value (if any) is used:

```html
<!-- Layout -->
<title>{{slot "title" "Welcome"}}</title>  <!-- Default: "Welcome" -->

{{slot "sidebar"}}  <!-- No default, renders empty if not filled -->
```

```html
<!-- Page (doesn't define "title" or "sidebar") -->
{{define "content"}}
<p>Just some content.</p>
{{end}}
```

Result:
```html
<title>Welcome</title>  <!-- Used default -->
<!-- sidebar is empty because no default and page didn't define it -->
```

## Multiple Layouts

Create different layouts for different sections of your site.

### Admin Layout

```html
<!-- views/layouts/admin.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Admin - {{slot "title"}}</title>
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body class="admin">
    <div class="admin-sidebar">
        <nav>
            <a href="/admin">Dashboard</a>
            <a href="/admin/users">Users</a>
            <a href="/admin/posts">Posts</a>
            <a href="/admin/settings">Settings</a>
        </nav>
    </div>
    <div class="admin-content">
        <header>
            <h1>{{slot "page-title"}}</h1>
        </header>
        <main>
            {{slot "content"}}
        </main>
    </div>
</body>
</html>
```

### Using a Different Layout

**Option 1: In the page template**

```html
<!-- views/pages/admin/dashboard.html -->
{{define "layout"}}admin{{end}}

{{define "page-title"}}Dashboard{{end}}

{{define "content"}}
<div class="stats">
    <p>Welcome to the admin panel!</p>
</div>
{{end}}
```

**Option 2: In the handler**

```go
func dashboardHandler(c *mizu.Ctx) error {
    return view.Render(c, "admin/dashboard", data, view.Layout("admin"))
}
```

The handler option takes precedence over the template option.

### Minimal Layout

For simple pages that don't need full navigation:

```html
<!-- views/layouts/minimal.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{slot "title"}}</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 50px auto; }
    </style>
</head>
<body>
    {{slot "content"}}
</body>
</html>
```

### No Layout

For AJAX responses or partial HTML:

```go
// Returns just the page content, no layout
view.Render(c, "user-row", data, view.NoLayout())
```

## The Stack System

Stacks complement slots by collecting content from multiple sources. They're perfect for scripts and styles that components might need.

### How Stacks Work

1. **Push** content to a named stack:
```html
{{push "scripts"}}<script src="/js/chart.js"></script>{{end}}
```

2. **Render** the stack in the layout:
```html
{{stack "scripts"}}
```

All pushed content is concatenated in order.

### Example: Component Scripts

A chart component needs Chart.js:

```html
<!-- views/components/chart.html -->
<canvas id="chart-{{.ID}}"></canvas>

{{push "scripts"}}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    new Chart(document.getElementById('chart-{{.ID}}'), {
        type: '{{.Type}}',
        data: {{safeJSON .ChartData}}
    });
</script>
{{end}}
```

The layout renders all scripts at the bottom:

```html
<!-- views/layouts/default.html -->
<body>
    {{slot "content"}}
    {{stack "scripts"}}
</body>
```

Now, using the chart component automatically includes its scripts:

```html
{{component "chart" (dict "ID" "sales" "Type" "bar" "ChartData" .Data.SalesData)}}
```

### Deduplication

By default, duplicate stack entries are removed. If multiple components push the same script:

```html
{{push "scripts"}}<script src="/lib/htmx.js"></script>{{end}}
{{push "scripts"}}<script src="/lib/htmx.js"></script>{{end}}
```

Result (with `DedupeStacks: true`):
```html
<script src="/lib/htmx.js"></script>
```

### Common Stacks

| Stack Name | Purpose |
|------------|---------|
| `scripts` | JavaScript files and inline scripts |
| `styles` | CSS files and inline styles |
| `head` | Additional head content (meta tags, etc.) |
| `foot` | Content before closing body tag |

## Layout Data Access

Layouts have access to the same data as pages:

```html
<!-- Layout can use .Data -->
<nav>
    {{if .Data.CurrentUser}}
        <span>Hello, {{.Data.CurrentUser.Name}}</span>
        <a href="/logout">Logout</a>
    {{else}}
        <a href="/login">Login</a>
    {{end}}
</nav>
```

### Built-in Context

Layouts can access:

```html
<body data-page="{{.Page}}" data-layout="{{.Layout}}">
    <!-- Request info -->
    <link rel="canonical" href="https://example.com{{.Request.URL.Path}}">
</body>
```

## Nesting and Composition

### Using Partials in Layouts

Break layouts into smaller pieces:

```html
<!-- views/layouts/default.html -->
<!DOCTYPE html>
<html>
<head>
    {{partial "meta-tags"}}
    <title>{{slot "title"}}</title>
    {{partial "stylesheets"}}
</head>
<body>
    {{partial "header"}}
    {{partial "navigation"}}
    <main>{{slot "content"}}</main>
    {{partial "footer"}}
    {{partial "scripts"}}
</body>
</html>
```

### Dynamic Navigation

Highlight the current page:

```html
<!-- views/partials/nav.html -->
<nav>
    <a href="/" {{if eq .Request.URL.Path "/"}}class="active"{{end}}>Home</a>
    <a href="/about" {{if eq .Request.URL.Path "/about"}}class="active"{{end}}>About</a>
    <a href="/contact" {{if eq .Request.URL.Path "/contact"}}class="active"{{end}}>Contact</a>
</nav>
```

## Best Practices

### 1. Keep Layouts Focused

Each layout should serve a clear purpose:

- `default.html` - Main public pages
- `admin.html` - Admin panel
- `auth.html` - Login/signup pages
- `email.html` - Email templates

### 2. Use Meaningful Slot Names

```html
<!-- Good: describes the purpose -->
{{slot "page-title"}}
{{slot "sidebar-widgets"}}
{{slot "footer-links"}}

<!-- Avoid: generic names -->
{{slot "content1"}}
{{slot "extra"}}
```

### 3. Always Provide Defaults for Optional Slots

```html
<!-- Optional sidebar with sensible default -->
{{slot "sidebar" ""}}

<!-- Meta description with fallback -->
<meta name="description" content="{{slot "description" "Welcome to My App"}}">
```

### 4. Use Stacks for Component Assets

Don't hardcode component scripts in the layout. Let components declare their dependencies:

```html
<!-- Bad: layout knows about component needs -->
<script src="/js/chart.js"></script>

<!-- Good: component pushes its own scripts -->
{{stack "scripts"}}
```

### 5. Keep Layouts DRY with Partials

If multiple layouts share elements, extract them:

```html
<!-- Both layouts use the same header -->
{{partial "header"}}
```

## Common Patterns

### Conditional Layout Sections

```html
{{if slot "sidebar"}}
<div class="with-sidebar">
    <main>{{slot "content"}}</main>
    <aside>{{slot "sidebar"}}</aside>
</div>
{{else}}
<main class="full-width">{{slot "content"}}</main>
{{end}}
```

### Flash Messages

Display flash messages from the session:

```html
{{if .Data.Flash}}
<div class="flash flash-{{.Data.Flash.Type}}">
    {{.Data.Flash.Message}}
</div>
{{end}}
```

### Page-Specific Body Classes

```html
<body class="page-{{.Page}} layout-{{.Layout}}">
```

Pages can add more classes:

```html
{{define "body-class"}}dark-mode{{end}}
```

```html
<body class="page-{{.Page}} {{slot "body-class"}}">
```
