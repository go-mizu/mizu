---
title: "Layouts"
description: "Learn how to use layouts to create consistent page structures"
---

Layouts are the HTML shell that wraps your pages. They contain the common structure shared across pages: doctype, head, navigation, footer, and more. This guide explains how to create and use layouts.

## What is a Layout?

A layout is a template that defines the outer structure of your pages. Instead of repeating the HTML boilerplate in every page, you define it once in a layout:

```html
<!-- Without layouts: every page repeats this -->
<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <nav>...</nav>
    <!-- Page content here -->
    <footer>...</footer>
</body>
</html>
```

```html
<!-- With layouts: defined once, pages fill in the blanks -->
<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <nav>...</nav>
    {{template "content" .}}
    <footer>...</footer>
</body>
</html>
```

## Creating a Layout

Layouts are template files that use `{{template "content" .}}` to include page content.

### Basic Layout Example

```html
<!-- views/layout.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <header>
        <nav>
            <a href="/">Home</a>
            <a href="/about">About</a>
            <a href="/contact">Contact</a>
        </nav>
    </header>

    <main>
        {{template "content" .}}
    </main>

    <footer>
        <p>&copy; 2024 My Company</p>
    </footer>

    <script src="/js/main.js"></script>
</body>
</html>
```

### Page Template

Pages define a "content" block that gets inserted into the layout:

```html
<!-- views/home.html -->
{{define "content"}}
<h1>Welcome, {{.Name}}!</h1>
<p>This is the home page.</p>
{{end}}
```

## Setting the Default Layout

Configure the default layout in your engine:

```go
engine := view.New(view.Config{
    Dir:           "./views",
    Extension:     ".html",
    DefaultLayout: "layout",  // Uses layout.html
})
```

## Multiple Layouts

Create different layouts for different sections of your site.

### Directory Structure

```
views/
├── layout.html       # Main public layout
├── admin-layout.html # Admin panel layout
├── minimal.html      # Minimal layout (login, etc.)
├── home.html
├── about.html
└── admin/
    └── dashboard.html
```

### Admin Layout Example

```html
<!-- views/admin-layout.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Admin - {{.Title}}</title>
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body class="admin">
    <div class="admin-sidebar">
        <nav>
            <a href="/admin">Dashboard</a>
            <a href="/admin/users">Users</a>
            <a href="/admin/posts">Posts</a>
            <a href="/admin/settings">Settings</a>
        </nav>
    </div>
    <div class="admin-content">
        <header>
            <h1>{{.PageTitle}}</h1>
        </header>
        <main>
            {{template "content" .}}
        </main>
    </div>
</body>
</html>
```

### Using a Different Layout

Override the default layout when rendering:

```go
func dashboardHandler(c *mizu.Ctx) error {
    return view.From(c).Render(c, "admin/dashboard", view.Data{
        "Title":     "Dashboard",
        "PageTitle": "Admin Dashboard",
        "Stats":     stats,
    }, view.Layout("admin-layout"))
}
```

### Minimal Layout

For simple pages that don't need full navigation:

```html
<!-- views/minimal.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
    </style>
</head>
<body>
    {{template "content" .}}
</body>
</html>
```

```go
func loginHandler(c *mizu.Ctx) error {
    return view.From(c).Render(c, "login", view.Data{
        "Title": "Login",
    }, view.Layout("minimal"))
}
```

## No Layout

For AJAX responses, partial HTML, or API endpoints that return HTML fragments:

```go
// Returns just the page content, no layout
view.From(c).Render(c, "user-row", data, view.NoLayout())
```

This is useful for:
- HTMX partial updates
- AJAX content loading
- Email templates (that define their own complete HTML)

## Layout Data Access

Layouts have access to all data passed to `Render()`:

```go
view.From(c).Render(c, "home", view.Data{
    "Title":       "Home Page",
    "CurrentUser": user,
    "Year":        time.Now().Year(),
})
```

```html
<!-- views/layout.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
</head>
<body>
    <nav>
        {{if .CurrentUser}}
            <span>Hello, {{.CurrentUser.Name}}</span>
            <a href="/logout">Logout</a>
        {{else}}
            <a href="/login">Login</a>
        {{end}}
    </nav>

    <main>
        {{template "content" .}}
    </main>

    <footer>
        <p>&copy; {{.Year}} My Company</p>
    </footer>
</body>
</html>
```

## Additional Template Blocks

Pages can define more than just "content". Use Go's template inheritance:

### Layout with Multiple Blocks

```html
<!-- views/layout.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{.Title}}</title>
    {{block "head" .}}{{end}}
</head>
<body>
    <nav>...</nav>

    <main>
        {{template "content" .}}
    </main>

    <footer>...</footer>

    {{block "scripts" .}}{{end}}
</body>
</html>
```

### Page with Extra Blocks

```html
<!-- views/chart-page.html -->
{{define "head"}}
<link rel="stylesheet" href="/css/charts.css">
{{end}}

{{define "content"}}
<h1>Statistics</h1>
<div id="chart"></div>
{{end}}

{{define "scripts"}}
<script src="/js/chart.js"></script>
<script>
    renderChart('#chart', {{.ChartData}});
</script>
{{end}}
```

The `block` directive defines a template with optional default content. If the page doesn't define that block, the default (or nothing) is used.

## Common Patterns

### Dynamic Navigation

Highlight the current page:

```html
<!-- views/layout.html -->
<nav>
    <a href="/" class="{{if eq .CurrentPath "/"}}active{{end}}">Home</a>
    <a href="/about" class="{{if eq .CurrentPath "/about"}}active{{end}}">About</a>
    <a href="/contact" class="{{if eq .CurrentPath "/contact"}}active{{end}}">Contact</a>
</nav>
```

Pass the current path in your handler or middleware:

```go
view.Data{
    "CurrentPath": c.Path(),
}
```

### Flash Messages

Display flash messages from sessions:

```html
{{if .Flash}}
<div class="flash flash-{{.Flash.Type}}">
    {{.Flash.Message}}
</div>
{{end}}
```

### Page-Specific Body Classes

```html
<body class="{{.BodyClass}}">
```

```go
view.Data{
    "BodyClass": "page-home dark-mode",
}
```

### Meta Tags

```html
<head>
    <title>{{.Title}}</title>
    <meta name="description" content="{{.Description}}">
    {{if .NoIndex}}<meta name="robots" content="noindex">{{end}}
</head>
```

## Best Practices

### 1. Keep Layouts Focused

Each layout should serve a clear purpose:

- `layout.html` - Main public pages
- `admin-layout.html` - Admin panel
- `auth-layout.html` - Login/signup pages
- `email-layout.html` - Email templates

### 2. Pass Common Data via Middleware

Instead of passing the same data in every handler, use middleware:

```go
func commonDataMiddleware(next mizu.Handler) mizu.Handler {
    return func(c *mizu.Ctx) error {
        c.Locals("Year", time.Now().Year())
        c.Locals("CurrentPath", c.Path())
        return next(c)
    }
}
```

### 3. Use Meaningful Names

```go
// Good: clear purpose
view.Layout("admin-layout")
view.Layout("email-layout")

// Avoid: unclear
view.Layout("layout2")
view.Layout("other")
```

### 4. Don't Overcomplicate

Start simple. Most sites only need 2-3 layouts:
- Main layout for public pages
- Admin layout for backend
- Minimal layout for auth pages

### 5. Test All Layouts

Make sure every layout works with your data:

```go
// In tests
func TestLayouts(t *testing.T) {
    engine := view.New(config)

    layouts := []string{"layout", "admin-layout", "minimal"}
    for _, layout := range layouts {
        var buf bytes.Buffer
        err := engine.Render(&buf, "test-page", testData, view.Layout(layout))
        if err != nil {
            t.Errorf("Layout %s failed: %v", layout, err)
        }
    }
}
```
