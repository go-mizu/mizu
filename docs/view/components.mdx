---
title: "Components"
description: "Build reusable, isolated UI components for your templates"
---

# Components

Components are reusable UI pieces with isolated data. They receive only the data you explicitly pass, making them predictable and easy to reuse across your application.

## What is a Component?

A component is a self-contained template that:

1. **Receives explicit data** - Only sees what you pass to it
2. **Has no implicit access** - Cannot access `.Data` from the parent
3. **Is reusable** - Works the same way everywhere
4. **Can have assets** - Can push scripts/styles to stacks

Think of components like functions: they take input (data) and produce output (HTML).

## Creating Components

Components go in `views/components/`:

```
views/
└── components/
    ├── button.html
    ├── card.html
    ├── alert.html
    └── forms/
        ├── input.html
        └── select.html
```

### Basic Component

```html
<!-- views/components/button.html -->
<button class="btn btn-{{.Variant}}" type="{{default .Type "button"}}">
    {{.Label}}
</button>
```

### Using a Component

Use the `component` function with `dict` to pass data:

```html
{{component "button" (dict "Label" "Click Me" "Variant" "primary")}}
```

Result:
```html
<button class="btn btn-primary" type="button">
    Click Me
</button>
```

## The `dict` Function

`dict` creates a map from key-value pairs:

```html
{{dict "Key1" "Value1" "Key2" "Value2"}}
```

This is essential for passing multiple values to components:

```html
{{component "user-card" (dict
    "Name" "Alice"
    "Email" "alice@example.com"
    "Avatar" "/images/alice.jpg"
    "Role" "Admin"
)}}
```

### Passing Variables

You can mix literals and variables:

```html
{{component "profile" (dict
    "User" .Data.CurrentUser
    "ShowEmail" true
    "Theme" .Data.Settings.Theme
)}}
```

### Passing Entire Objects

Pass a struct directly:

```html
{{component "user-card" .Data.User}}
```

The component then accesses fields directly:

```html
<!-- views/components/user-card.html -->
<div class="user-card">
    <img src="{{.Avatar}}">
    <h3>{{.Name}}</h3>
    <p>{{.Email}}</p>
</div>
```

## Data Isolation

Components are isolated from the parent template's data. This is intentional:

```html
<!-- Page template -->
{{/* .Data.Title exists here */}}

{{component "button" (dict "Label" "Save")}}
```

```html
<!-- views/components/button.html -->
<button>
    {{.Label}}
    {{/* .Data.Title is NOT available here */}}
</button>
```

**Why isolation?**

1. **Predictability** - Components behave the same everywhere
2. **Reusability** - No hidden dependencies on parent data
3. **Maintainability** - Clear interface of what data a component needs
4. **Testing** - Easy to test with specific inputs

## Component Examples

### Alert Component

```html
<!-- views/components/alert.html -->
<div class="alert alert-{{default .Type "info"}}" role="alert">
    {{if .Title}}
    <strong>{{.Title}}</strong>
    {{end}}
    <p>{{.Message}}</p>
    {{if .Dismissible}}
    <button class="alert-close" aria-label="Close">&times;</button>
    {{end}}
</div>
```

Usage:

```html
{{component "alert" (dict
    "Type" "success"
    "Title" "Success!"
    "Message" "Your changes have been saved."
    "Dismissible" true
)}}

{{component "alert" (dict
    "Type" "error"
    "Message" "Something went wrong."
)}}
```

### Card Component

```html
<!-- views/components/card.html -->
<div class="card {{if .Featured}}card-featured{{end}}">
    {{if .Image}}
    <img src="{{.Image}}" class="card-image" alt="{{.Title}}">
    {{end}}
    <div class="card-body">
        <h3 class="card-title">{{.Title}}</h3>
        {{if .Subtitle}}
        <p class="card-subtitle">{{.Subtitle}}</p>
        {{end}}
        <div class="card-content">
            {{.Content}}
        </div>
        {{if .Actions}}
        <div class="card-actions">
            {{range .Actions}}
            {{component "button" .}}
            {{end}}
        </div>
        {{end}}
    </div>
</div>
```

Usage:

```html
{{component "card" (dict
    "Title" "Getting Started"
    "Subtitle" "Learn the basics"
    "Content" "This guide will help you understand..."
    "Image" "/images/guide.jpg"
    "Featured" true
    "Actions" (list
        (dict "Label" "Read More" "Variant" "primary")
        (dict "Label" "Save" "Variant" "secondary")
    )
)}}
```

### Form Input Component

```html
<!-- views/components/forms/input.html -->
<div class="form-group">
    <label for="{{.ID}}" class="form-label">
        {{.Label}}
        {{if .Required}}<span class="required">*</span>{{end}}
    </label>
    <input
        type="{{default .Type "text"}}"
        id="{{.ID}}"
        name="{{.Name}}"
        class="form-input {{if .Error}}is-invalid{{end}}"
        value="{{.Value}}"
        placeholder="{{.Placeholder}}"
        {{if .Required}}required{{end}}
        {{if .Disabled}}disabled{{end}}
    >
    {{if .Error}}
    <p class="form-error">{{.Error}}</p>
    {{end}}
    {{if .Help}}
    <p class="form-help">{{.Help}}</p>
    {{end}}
</div>
```

Usage:

```html
{{component "forms/input" (dict
    "ID" "email"
    "Name" "email"
    "Type" "email"
    "Label" "Email Address"
    "Placeholder" "you@example.com"
    "Required" true
    "Help" "We'll never share your email."
)}}

{{component "forms/input" (dict
    "ID" "name"
    "Name" "name"
    "Label" "Full Name"
    "Value" .Data.FormValues.Name
    "Error" .Data.FormErrors.Name
)}}
```

## Components with Scripts

Components can push their own JavaScript to stacks:

```html
<!-- views/components/modal.html -->
<div class="modal" id="modal-{{.ID}}" data-modal>
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h2>{{.Title}}</h2>
            <button class="modal-close" data-modal-close>&times;</button>
        </div>
        <div class="modal-body">
            {{.Content}}
        </div>
        {{if .Footer}}
        <div class="modal-footer">
            {{.Footer}}
        </div>
        {{end}}
    </div>
</div>

{{push "scripts"}}
<script>
    // Modal initialization (runs once per page)
    if (!window.modalInitialized) {
        document.addEventListener('click', function(e) {
            if (e.target.matches('[data-modal-open]')) {
                const modal = document.getElementById(e.target.dataset.modalOpen);
                modal?.classList.add('active');
            }
            if (e.target.matches('[data-modal-close], .modal-backdrop')) {
                e.target.closest('.modal')?.classList.remove('active');
            }
        });
        window.modalInitialized = true;
    }
</script>
{{end}}
```

Usage:

```html
<button data-modal-open="confirm-delete">Delete Item</button>

{{component "modal" (dict
    "ID" "confirm-delete"
    "Title" "Confirm Delete"
    "Content" "Are you sure you want to delete this item?"
    "Footer" `<button data-modal-close>Cancel</button>
              <button class="btn-danger" type="submit">Delete</button>`
)}}
```

## Nested Components

Components can use other components:

```html
<!-- views/components/post-card.html -->
<article class="post-card">
    {{component "avatar" (dict "Src" .Author.Avatar "Name" .Author.Name)}}
    <div class="post-card-content">
        <h2>{{.Title}}</h2>
        <p>{{.Excerpt}}</p>
        <div class="post-card-meta">
            {{component "badge" (dict "Text" .Category "Color" "blue")}}
            <span>{{.Date}}</span>
        </div>
    </div>
</article>
```

## Component Patterns

### Slot-like Behavior

While components don't have slots, you can achieve similar results:

```html
<!-- views/components/section.html -->
<section class="section {{.Class}}">
    {{if .Title}}
    <h2 class="section-title">{{.Title}}</h2>
    {{end}}
    <div class="section-content">
        {{safeHTML .Content}}
    </div>
</section>
```

Usage:

```html
{{component "section" (dict
    "Title" "Features"
    "Class" "bg-gray"
    "Content" `
        <ul>
            <li>Feature one</li>
            <li>Feature two</li>
        </ul>
    `
)}}
```

### Conditional Rendering

```html
<!-- views/components/status-badge.html -->
{{$colors := dict
    "active" "green"
    "pending" "yellow"
    "inactive" "gray"
    "error" "red"
}}
<span class="badge badge-{{index $colors .Status}}">
    {{.Status | title}}
</span>
```

### List Components

```html
<!-- views/components/user-list.html -->
<ul class="user-list">
    {{range .Users}}
    <li class="user-list-item">
        {{component "avatar" (dict "Src" .Avatar "Size" "small")}}
        <span class="user-name">{{.Name}}</span>
    </li>
    {{else}}
    <li class="user-list-empty">No users found.</li>
    {{end}}
</ul>
```

## Best Practices

### 1. Single Responsibility

Each component should do one thing well:

```html
<!-- Good: focused components -->
{{component "avatar" .}}
{{component "user-name" .}}
{{component "user-actions" .}}

<!-- Avoid: mega-component -->
{{component "user-everything" .}}
```

### 2. Document Expected Data

Add a comment listing expected fields:

```html
<!-- views/components/product-card.html -->
{{/*
Expected data:
  - ID: string (required)
  - Name: string (required)
  - Price: float64 (required)
  - Image: string (optional, defaults to placeholder)
  - OnSale: bool (optional)
  - SalePrice: float64 (required if OnSale)
*/}}
<div class="product-card">
    ...
</div>
```

### 3. Use Defaults for Optional Fields

```html
<img src="{{default .Image "/placeholder.png"}}">
<button type="{{default .Type "button"}}">
```

### 4. Keep Components Small

If a component grows too large, split it:

```html
<!-- Instead of one massive form component -->
{{component "form-header" .}}
{{component "form-fields" .}}
{{component "form-actions" .}}
```

### 5. Test Component Rendering

```go
func TestButtonComponent(t *testing.T) {
    engine := view.New(view.Options{Dir: "testdata/views"})

    var buf bytes.Buffer
    err := engine.RenderComponent(&buf, "button", view.Data{
        "Label":   "Submit",
        "Variant": "primary",
    })

    assert.NoError(t, err)
    assert.Contains(t, buf.String(), `class="btn btn-primary"`)
    assert.Contains(t, buf.String(), "Submit")
}
```

## Component vs Partial

Use **components** when:
- The template needs specific, isolated data
- You want predictable, reusable behavior
- The piece is a complete UI element

Use **partials** when:
- You're breaking up a large template
- You need access to the full data context
- You're extracting repeated code in one template

```html
<!-- Component: isolated, explicit data -->
{{component "button" (dict "Label" "Save")}}

<!-- Partial: shares parent context -->
{{partial "sidebar"}}
```
