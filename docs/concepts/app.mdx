---
title: "App"
description: "The main entry point that runs your Mizu application."
---

A Mizu application is the main part of your web server. <br/>
It creates the router, manages middleware, runs the HTTP server, and handles shutdown safely when the server stops.

### Create an app

Every Mizu project begins by creating an `App` instance.

```go
package main

import "github.com/go-mizu/mizu"

func home(c *mizu.Ctx) error {
	return c.Text(200, "Hello, Mizu!")
}

func main() {
	app := mizu.New()
	app.Get("/", home)
	app.Listen(":3000")
}
```

`mizu.New()` creates a new app.<br/>
`app.Get()` adds a route.<br/>
`app.Listen()` starts the server on the given port.<br/>
When you visit [http://localhost:3000](http://localhost:3000), the server responds with "Hello, Mizu!".

### How it works

The `App` type embeds Mizu's `Router`, so you can define routes and middleware on it directly.
When `Listen` is called, Mizu starts a standard Go `net/http` server.
When the server receives a stop signal (SIGINT or SIGTERM), Mizu performs a graceful shutdown and lets running requests finish first.

Mizu automatically handles:

- Graceful shutdown when system signals are received
- Structured logging for startup and shutdown
- Panic recovery in handlers to prevent crashes

### Configuration options

You can customize shutdown behavior when creating the app:

```go
app := mizu.New(
	mizu.WithPreShutdownDelay(2 * time.Second),
	mizu.WithShutdownTimeout(30 * time.Second),
)
```

| Option | Default | Description |
|--------|---------|-------------|
| `WithPreShutdownDelay` | 1 second | Time to wait after receiving shutdown signal before starting drain. Useful for load balancers to stop sending traffic. |
| `WithShutdownTimeout` | 15 seconds | Maximum time to wait for active requests to complete during shutdown. |

### Starting the server

Mizu provides three ways to start your server:

```go
// Listen on a TCP address
app.Listen(":3000")

// Listen with TLS
app.ListenTLS(":443", "cert.pem", "key.pem")

// Use an existing listener
listener, _ := net.Listen("tcp", ":3000")
app.Serve(listener)
```

### Health checks

You can add a health check endpoint for monitoring.<br/>
This helps detect when the server is ready or shutting down.

```go
http.Handle("/healthz", app.HealthzHandler())
```

The endpoint returns `200 OK` when running and `503 Service Unavailable` during shutdown.<br/>
It works with load balancers and orchestration tools such as Kubernetes.

### Next steps

Once your app is running, learn more about these topics:

- [Routing](/concepts/routing) to define URLs and methods
- [Handler](/concepts/handler) to write request logic
- [Logging](/concepts/logging) to record activity and errors
- [Error](/concepts/error) to manage errors in one place