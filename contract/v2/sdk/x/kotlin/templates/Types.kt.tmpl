{{define "Types.kt.tmpl"}}// Code generated by sdkkotlin. DO NOT EDIT.

package {{.Package}}

import kotlinx.serialization.*
import kotlinx.serialization.json.*
{{- if .HasDate}}
import kotlinx.datetime.Instant
{{- end}}

// MARK: - Generated Types
{{range $type := .Types}}
{{- if $type.Description}}
/**
 * {{$type.Description}}
 */
{{- end}}
{{- if eq $type.Kind "struct"}}
@Serializable
data class {{$type.KotlinName}}(
{{- if not $type.Fields}}
    // Empty data class - acts as a marker type
    val _placeholder: Unit = Unit
{{- else}}
{{- $fields := $type.Fields}}
{{- $lastIdx := len $fields | add -1}}
{{- range $i, $f := $fields}}
{{- if $f.Description}}
    /** {{$f.Description}} */
{{- end}}
{{- if $f.Enum}}
    @SerialName({{kotlinString $f.JSONName}})
    val {{$f.KotlinName}}: {{$type.KotlinName}}{{$f.KotlinName | pascal}}{{if or $f.Optional $f.Nullable}}? = null{{end}}{{if lt $i $lastIdx}},{{end}}
{{- else}}
    @SerialName({{kotlinString $f.JSONName}})
    val {{$f.KotlinName}}: {{$f.KotlinType}}{{if or $f.Optional $f.Nullable}} = null{{end}}{{if lt $i $lastIdx}},{{end}}
{{- end}}
{{- end}}
{{- end}}
)
{{- if $type.Fields}}
{{- range $field := $type.Fields}}
{{- if $field.Enum}}

/**
 * Valid values for {{$type.KotlinName}}.{{$field.KotlinName}}.
 */
@Serializable
enum class {{$type.KotlinName}}{{$field.KotlinName | pascal}} {
{{- range $i, $e := $field.Enum}}
    @SerialName({{kotlinString $e.Value}})
    {{$e.Name}}{{if lt $i (sub (len $field.Enum) 1)}},{{end}}
{{- end}}
}
{{- end}}
{{- end}}
{{- end}}
{{- end}}

{{- if eq $type.Kind "slice"}}
typealias {{$type.KotlinName}} = List<{{$type.Elem}}>
{{- end}}

{{- if eq $type.Kind "map"}}
typealias {{$type.KotlinName}} = Map<String, {{$type.Elem}}>
{{- end}}

{{- if eq $type.Kind "union"}}
/**
 * Discriminated union (tag: "{{$type.Tag}}").
 */
@Serializable
sealed class {{$type.KotlinName}} {
    /** The discriminator tag value. */
    abstract val {{$type.Tag}}: String
{{range $type.Variants}}
{{- if .Description}}
    /** {{.Description}} */
{{- end}}
    @Serializable
    @SerialName({{kotlinString .Value}})
    data class {{.KotlinName}}(
        override val {{$type.Tag}}: String = {{kotlinString .Value}}
        // Add variant-specific fields here if needed
    ) : {{$type.KotlinName}}()
{{end}}
    companion object {
{{- range $type.Variants}}
        /** Returns true if this is a {{.KotlinName}} variant. */
        fun {{$type.KotlinName}}.is{{.KotlinName}}(): Boolean = this is {{.KotlinName}}

        /** Returns the {{.KotlinName}} value if this is a {{.KotlinName}} variant, null otherwise. */
        fun {{$type.KotlinName}}.as{{.KotlinName}}OrNull(): {{.KotlinName}}? = this as? {{.KotlinName}}
{{- end}}
    }
}
{{- end}}
{{end}}
{{end}}
