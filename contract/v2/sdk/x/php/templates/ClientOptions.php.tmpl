{{define "ClientOptions.php.tmpl"}}<?php

declare(strict_types=1);

// Code generated by sdkphp. DO NOT EDIT.

namespace {{.Namespace}};

/**
 * Configuration options for the SDK client.
 */
final readonly class ClientOptions
{
    /**
     * @param string|null $apiKey API key for authentication
     * @param string $baseUrl Base URL for API requests
     * @param float $timeout Request timeout in seconds
     * @param float $connectTimeout Connection timeout in seconds
     * @param int $maxRetries Maximum retry attempts
     * @param array<string, string> $defaultHeaders Default headers
     * @param AuthMode $authMode Authentication mode
     */
    public function __construct(
        public ?string $apiKey = null,
        public string $baseUrl = {{phpQuote .Client.BaseURL}},
        public float $timeout = 60.0,
        public float $connectTimeout = 10.0,
        public int $maxRetries = 2,
        public array $defaultHeaders = [
{{- range $i, $h := .Client.Headers}}
            {{phpQuote $h.K}} => {{phpQuote $h.V}},
{{- end}}
        ],
        public AuthMode $authMode = AuthMode::Bearer,
    ) {}

    /**
     * Creates a new instance with a different API key.
     */
    public function withApiKey(?string $apiKey): self
    {
        return new self(
            apiKey: $apiKey,
            baseUrl: $this->baseUrl,
            timeout: $this->timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with a different base URL.
     */
    public function withBaseUrl(string $baseUrl): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $baseUrl,
            timeout: $this->timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with a different timeout.
     */
    public function withTimeout(float $timeout): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $this->baseUrl,
            timeout: $timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with a different connect timeout.
     */
    public function withConnectTimeout(float $connectTimeout): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $this->baseUrl,
            timeout: $this->timeout,
            connectTimeout: $connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with different max retries.
     */
    public function withMaxRetries(int $maxRetries): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $this->baseUrl,
            timeout: $this->timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with different default headers.
     *
     * @param array<string, string> $defaultHeaders
     */
    public function withDefaultHeaders(array $defaultHeaders): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $this->baseUrl,
            timeout: $this->timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $defaultHeaders,
            authMode: $this->authMode,
        );
    }

    /**
     * Creates a new instance with a different auth mode.
     */
    public function withAuthMode(AuthMode $authMode): self
    {
        return new self(
            apiKey: $this->apiKey,
            baseUrl: $this->baseUrl,
            timeout: $this->timeout,
            connectTimeout: $this->connectTimeout,
            maxRetries: $this->maxRetries,
            defaultHeaders: $this->defaultHeaders,
            authMode: $authMode,
        );
    }
}
{{end}}