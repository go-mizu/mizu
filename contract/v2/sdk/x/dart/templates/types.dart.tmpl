{{define "types.dart.tmpl"}}// Code generated by sdkdart. DO NOT EDIT.

// MARK: - Generated Types
{{range $type := .Types}}
{{- if $type.Description}}
/// {{$type.Description}}
{{- end}}
{{- if eq $type.Kind "struct"}}
class {{$type.DartName}} {
{{- if not $type.Fields}}
  const {{$type.DartName}}();

  factory {{$type.DartName}}.fromJson(Map<String, dynamic> json) {
    return const {{$type.DartName}}();
  }

  Map<String, dynamic> toJson() => {};

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
      other is {{$type.DartName}} && runtimeType == other.runtimeType;

  @override
  int get hashCode => runtimeType.hashCode;

  @override
  String toString() => '{{$type.DartName}}()';
{{- else}}
{{- range $type.Fields}}
{{- if .Description}}
  /// {{.Description}}
{{- end}}
{{- if .Enum}}
  final {{$type.DartName}}{{.DartName | pascal}} {{.DartName}};
{{- else}}
  final {{.DartType}} {{.DartName}};
{{- end}}
{{- end}}

  const {{$type.DartName}}({
{{- range $type.Fields}}
{{- if or .Optional .Nullable}}
    this.{{.DartName}},
{{- else if .Const}}
    this.{{.DartName}} = {{dartString .Const}},
{{- else}}
    required this.{{.DartName}},
{{- end}}
{{- end}}
  });

  factory {{$type.DartName}}.fromJson(Map<String, dynamic> json) {
    return {{$type.DartName}}(
{{- range $type.Fields}}
{{- if .Enum}}
      {{.DartName}}: {{$type.DartName}}{{.DartName | pascal}}.fromJson(json[{{dartString .JSONName}}] as String),
{{- else if eq .DartType "String"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as String,
{{- else if eq .DartType "String?"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as String?,
{{- else if eq .DartType "int"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as int,
{{- else if eq .DartType "int?"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as int?,
{{- else if eq .DartType "double"}}
      {{.DartName}}: (json[{{dartString .JSONName}}] as num).toDouble(),
{{- else if eq .DartType "double?"}}
      {{.DartName}}: (json[{{dartString .JSONName}}] as num?)?.toDouble(),
{{- else if eq .DartType "bool"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as bool,
{{- else if eq .DartType "bool?"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as bool?,
{{- else if eq .DartType "DateTime"}}
      {{.DartName}}: DateTime.parse(json[{{dartString .JSONName}}] as String),
{{- else if eq .DartType "DateTime?"}}
      {{.DartName}}: json[{{dartString .JSONName}}] != null ? DateTime.parse(json[{{dartString .JSONName}}] as String) : null,
{{- else if eq .DartType "Object"}}
      {{.DartName}}: json[{{dartString .JSONName}}] as Object,
{{- else if eq .DartType "Object?"}}
      {{.DartName}}: json[{{dartString .JSONName}}],
{{- else if hasPrefix .DartType "List<"}}
{{- $elemType := listElem .DartType}}
{{- if isPrimitive $elemType}}
      {{.DartName}}: (json[{{dartString .JSONName}}] as List<dynamic>{{if or .Optional .Nullable}}?{{end}}){{if or .Optional .Nullable}}?{{end}}.cast<{{$elemType}}>().toList(),
{{- else}}
      {{.DartName}}: (json[{{dartString .JSONName}}] as List<dynamic>{{if or .Optional .Nullable}}?{{end}}){{if or .Optional .Nullable}}?{{end}}.map((e) => {{$elemType}}.fromJson(e as Map<String, dynamic>)).toList(),
{{- end}}
{{- else if hasPrefix .DartType "Map<"}}
      {{.DartName}}: (json[{{dartString .JSONName}}] as Map<String, dynamic>{{if or .Optional .Nullable}}?{{end}}){{if or .Optional .Nullable}}?{{end}}.cast<String, dynamic>(),
{{- else if or .Optional .Nullable}}
      {{.DartName}}: json[{{dartString .JSONName}}] != null ? {{.DartType | trim "?"}}.fromJson(json[{{dartString .JSONName}}] as Map<String, dynamic>) : null,
{{- else}}
      {{.DartName}}: {{.DartType}}.fromJson(json[{{dartString .JSONName}}] as Map<String, dynamic>),
{{- end}}
{{- end}}
    );
  }

  Map<String, dynamic> toJson() => {
{{- range $type.Fields}}
{{- if or .Optional .Nullable}}
{{- if .Enum}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}}!.toJson(),
{{- else if eq .DartType "DateTime?"}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}}!.toIso8601String(),
{{- else if hasPrefix .DartType "List<"}}
{{- $elemType := listElem .DartType}}
{{- if isPrimitive $elemType}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}},
{{- else}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}}!.map((e) => e.toJson()).toList(),
{{- end}}
{{- else if hasPrefix .DartType "Map<"}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}},
{{- else if or (eq .DartType "String?") (eq .DartType "int?") (eq .DartType "double?") (eq .DartType "bool?") (eq .DartType "Object?")}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}},
{{- else}}
        if ({{.DartName}} != null) {{dartString .JSONName}}: {{.DartName}}!.toJson(),
{{- end}}
{{- else}}
{{- if .Enum}}
        {{dartString .JSONName}}: {{.DartName}}.toJson(),
{{- else if eq .DartType "DateTime"}}
        {{dartString .JSONName}}: {{.DartName}}.toIso8601String(),
{{- else if hasPrefix .DartType "List<"}}
{{- $elemType := listElem .DartType}}
{{- if isPrimitive $elemType}}
        {{dartString .JSONName}}: {{.DartName}},
{{- else}}
        {{dartString .JSONName}}: {{.DartName}}.map((e) => e.toJson()).toList(),
{{- end}}
{{- else if hasPrefix .DartType "Map<"}}
        {{dartString .JSONName}}: {{.DartName}},
{{- else if or (eq .DartType "String") (eq .DartType "int") (eq .DartType "double") (eq .DartType "bool") (eq .DartType "Object")}}
        {{dartString .JSONName}}: {{.DartName}},
{{- else}}
        {{dartString .JSONName}}: {{.DartName}}.toJson(),
{{- end}}
{{- end}}
{{- end}}
      };

  {{$type.DartName}} copyWith({
{{- range $type.Fields}}
{{- if .Enum}}
    {{$type.DartName}}{{.DartName | pascal}}? {{.DartName}},
{{- else if or .Optional .Nullable}}
    {{.DartType}} {{.DartName}},
{{- else}}
    {{.DartType}}? {{.DartName}},
{{- end}}
{{- end}}
  }) {
    return {{$type.DartName}}(
{{- range $type.Fields}}
      {{.DartName}}: {{.DartName}} ?? this.{{.DartName}},
{{- end}}
    );
  }

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
      other is {{$type.DartName}} &&
          runtimeType == other.runtimeType{{range $type.Fields}} &&
          {{.DartName}} == other.{{.DartName}}{{end}};

  @override
  int get hashCode => Object.hash(
{{- $fields := $type.Fields}}
{{- $lastIdx := len $fields | add -1}}
{{- range $i, $f := $fields}}
        {{$f.DartName}},
{{- end}}
      );

  @override
  String toString() => '{{$type.DartName}}({{range $i, $f := $type.Fields}}{{if $i}}, {{end}}{{$f.DartName}}: ${{$f.DartName}}{{end}})';
{{- end}}
}
{{- if $type.Fields}}
{{- range $field := $type.Fields}}
{{- if $field.Enum}}

/// Valid values for {{$type.DartName}}.{{$field.DartName}}.
enum {{$type.DartName}}{{$field.DartName | pascal}} {
{{- range $field.Enum}}
  {{.Name}}({{dartString .Value}}),
{{- end}}
  ;

  final String value;
  const {{$type.DartName}}{{$field.DartName | pascal}}(this.value);

  factory {{$type.DartName}}{{$field.DartName | pascal}}.fromJson(String json) {
    return {{$type.DartName}}{{$field.DartName | pascal}}.values.firstWhere(
      (e) => e.value == json,
      orElse: () => throw ArgumentError('Unknown {{$type.DartName}}{{$field.DartName | pascal}}: $json'),
    );
  }

  String toJson() => value;
}
{{- end}}
{{- end}}
{{- end}}
{{- end}}

{{- if eq $type.Kind "slice"}}
typedef {{$type.DartName}} = List<{{$type.Elem}}>;
{{- end}}

{{- if eq $type.Kind "map"}}
typedef {{$type.DartName}} = Map<String, {{$type.Elem}}>;
{{- end}}

{{- if eq $type.Kind "union"}}
/// Discriminated union (tag: "{{$type.Tag}}").
sealed class {{$type.DartName}} {
  const {{$type.DartName}}();

  /// The discriminator tag value.
  String get {{$type.Tag}};

  factory {{$type.DartName}}.fromJson(Map<String, dynamic> json) {
    final tag = json[{{dartString $type.Tag}}] as String;
    return switch (tag) {
{{- range $type.Variants}}
      {{dartString .Value}} => {{.ClassName}}.fromJson(json),
{{- end}}
      _ => throw ArgumentError('Unknown {{$type.DartName}} {{$type.Tag}}: $tag'),
    };
  }

  Map<String, dynamic> toJson();
{{- range $type.Variants}}

  /// Returns true if this is a {{.DartName}} variant.
  bool get is{{.ClassName}} => this is {{.ClassName}};

  /// Returns the {{.DartName}} value if this is a {{.DartName}} variant.
  {{.ClassName}}? get {{.DartName}}Value => this is {{.ClassName}} ? this as {{.ClassName}} : null;
{{- end}}
}
{{- range $type.Variants}}
{{if .Description}}
/// {{.Description}}
{{- end}}
final class {{.ClassName}} extends {{$type.DartName}} {
  @override
  String get {{$type.Tag}} => {{dartString .Value}};

  const {{.ClassName}}();

  factory {{.ClassName}}.fromJson(Map<String, dynamic> json) {
    return const {{.ClassName}}();
  }

  @override
  Map<String, dynamic> toJson() => {
        {{dartString $type.Tag}}: {{$type.Tag}},
      };

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
      other is {{.ClassName}} && runtimeType == other.runtimeType;

  @override
  int get hashCode => runtimeType.hashCode;

  @override
  String toString() => '{{.ClassName}}()';
}
{{- end}}
{{- end}}
{{end}}
{{end}}
