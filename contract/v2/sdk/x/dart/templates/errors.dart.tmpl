{{define "errors.dart.tmpl"}}// Code generated by sdkdart. DO NOT EDIT.

/// Base error type for all SDK errors.
sealed class SDKException implements Exception {
  const SDKException();

  /// Returns true if this error is potentially retriable.
  bool get isRetriable;

  /// Returns true if this is a client error (4xx).
  bool get isClientError;

  /// Returns true if this is a server error (5xx).
  bool get isServerError;
}

/// Network connection failed.
final class ConnectionException extends SDKException {
  /// The underlying cause of the connection failure.
  final Object? cause;

  const ConnectionException([this.cause]);

  @override
  bool get isRetriable => true;

  @override
  bool get isClientError => false;

  @override
  bool get isServerError => false;

  @override
  String toString() => 'ConnectionException: ${cause ?? 'Unknown error'}';
}

/// Server returned an error status code.
final class ApiException extends SDKException {
  /// The HTTP status code.
  final int statusCode;

  /// The error message.
  final String message;

  /// The raw response body.
  final String? body;

  const ApiException({
    required this.statusCode,
    required this.message,
    this.body,
  });

  @override
  bool get isRetriable => statusCode >= 500 || statusCode == 429;

  @override
  bool get isClientError => statusCode >= 400 && statusCode < 500;

  @override
  bool get isServerError => statusCode >= 500;

  @override
  String toString() => 'ApiException: HTTP $statusCode - $message';
}

/// Request timed out.
final class SDKTimeoutException extends SDKException {
  const SDKTimeoutException();

  @override
  bool get isRetriable => true;

  @override
  bool get isClientError => false;

  @override
  bool get isServerError => false;

  @override
  String toString() => 'SDKTimeoutException: Request timed out';
}

/// Request was cancelled.
final class CancelledException extends SDKException {
  const CancelledException();

  @override
  bool get isRetriable => false;

  @override
  bool get isClientError => false;

  @override
  bool get isServerError => false;

  @override
  String toString() => 'CancelledException: Request was cancelled';
}

/// Failed to encode request body.
final class EncodingException extends SDKException {
  /// The underlying cause of the encoding failure.
  final Object? cause;

  const EncodingException([this.cause]);

  @override
  bool get isRetriable => false;

  @override
  bool get isClientError => false;

  @override
  bool get isServerError => false;

  @override
  String toString() => 'EncodingException: ${cause ?? 'Failed to encode request'}';
}

/// Failed to decode response body.
final class DecodingException extends SDKException {
  /// The underlying cause of the decoding failure.
  final Object? cause;

  const DecodingException([this.cause]);

  @override
  bool get isRetriable => false;

  @override
  bool get isClientError => false;

  @override
  bool get isServerError => false;

  @override
  String toString() => 'DecodingException: ${cause ?? 'Failed to decode response'}';
}

// MARK: - Helper Extensions

extension SDKExceptionHelpers on SDKException {
  /// Returns true if this is an authentication error (401).
  bool get isAuthError => this is ApiException && (this as ApiException).statusCode == 401;

  /// Returns true if this is a forbidden error (403).
  bool get isForbidden => this is ApiException && (this as ApiException).statusCode == 403;

  /// Returns true if this is a not found error (404).
  bool get isNotFound => this is ApiException && (this as ApiException).statusCode == 404;

  /// Returns true if this is a rate limit error (429).
  bool get isRateLimited => this is ApiException && (this as ApiException).statusCode == 429;
}
{{end}}
