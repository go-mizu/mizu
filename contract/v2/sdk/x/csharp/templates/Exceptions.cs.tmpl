// <auto-generated>
// This file was generated by Mizu SDK Generator. Do not edit manually.
// </auto-generated>

namespace {{.Namespace}};

/// <summary>
/// Base exception type for all SDK errors.
/// </summary>
public abstract class SdkException : Exception
{
    /// <summary>
    /// Creates a new SDK exception.
    /// </summary>
    protected SdkException(string message) : base(message) { }

    /// <summary>
    /// Creates a new SDK exception with an inner exception.
    /// </summary>
    protected SdkException(string message, Exception innerException)
        : base(message, innerException) { }

    /// <summary>
    /// Returns true if this error is potentially retriable.
    /// </summary>
    public abstract bool IsRetriable { get; }
}

/// <summary>
/// Network connection failed.
/// </summary>
public sealed class ConnectionException : SdkException
{
    /// <summary>
    /// Creates a new connection exception.
    /// </summary>
    public ConnectionException(Exception innerException)
        : base("Connection failed", innerException) { }

    /// <inheritdoc />
    public override bool IsRetriable => true;
}

/// <summary>
/// Server returned an error status code.
/// </summary>
public sealed class ApiException : SdkException
{
    /// <summary>
    /// The HTTP status code.
    /// </summary>
    public int StatusCode { get; }

    /// <summary>
    /// The raw response body, if available.
    /// </summary>
    public string? ResponseBody { get; }

    /// <summary>
    /// Creates a new API exception.
    /// </summary>
    public ApiException(int statusCode, string message, string? responseBody = null)
        : base(message)
    {
        StatusCode = statusCode;
        ResponseBody = responseBody;
    }

    /// <inheritdoc />
    public override bool IsRetriable => StatusCode >= 500 || StatusCode == 429;

    /// <summary>
    /// Returns true if this is a client error (4xx).
    /// </summary>
    public bool IsClientError => StatusCode >= 400 && StatusCode < 500;

    /// <summary>
    /// Returns true if this is a server error (5xx).
    /// </summary>
    public bool IsServerError => StatusCode >= 500;
}

/// <summary>
/// Request timed out.
/// </summary>
public sealed class SdkTimeoutException : SdkException
{
    /// <summary>
    /// Creates a new timeout exception.
    /// </summary>
    public SdkTimeoutException() : base("Request timed out") { }

    /// <summary>
    /// Creates a new timeout exception with an inner exception.
    /// </summary>
    public SdkTimeoutException(Exception innerException)
        : base("Request timed out", innerException) { }

    /// <inheritdoc />
    public override bool IsRetriable => true;
}

/// <summary>
/// Request was cancelled via CancellationToken.
/// </summary>
public sealed class CancelledException : SdkException
{
    /// <summary>
    /// Creates a new cancelled exception.
    /// </summary>
    public CancelledException() : base("Request was cancelled") { }

    /// <inheritdoc />
    public override bool IsRetriable => false;
}

/// <summary>
/// Failed to serialize request body.
/// </summary>
public sealed class SerializationException : SdkException
{
    /// <summary>
    /// Creates a new serialization exception.
    /// </summary>
    public SerializationException(Exception innerException)
        : base("Failed to serialize request", innerException) { }

    /// <inheritdoc />
    public override bool IsRetriable => false;
}

/// <summary>
/// Failed to deserialize response body.
/// </summary>
public sealed class DeserializationException : SdkException
{
    /// <summary>
    /// Creates a new deserialization exception.
    /// </summary>
    public DeserializationException(Exception innerException)
        : base("Failed to deserialize response", innerException) { }

    /// <inheritdoc />
    public override bool IsRetriable => false;
}
