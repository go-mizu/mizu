// <auto-generated>
// This file was generated by Mizu SDK Generator. Do not edit manually.
// </auto-generated>

using System.Runtime.CompilerServices;
using {{.Namespace}}.Models;

namespace {{.Namespace}}.Resources;
{{range .Resources}}

{{- if .Description}}
/// <summary>
/// {{.Description}}
/// </summary>
{{- end}}
public sealed class {{.ClassName}}
{
    private readonly HttpClientWrapper _client;

    internal {{.ClassName}}(HttpClientWrapper client)
    {
        _client = client;
    }
{{range .Methods}}
{{- if .IsStreaming}}

{{- if .Description}}
    /// <summary>
    /// {{.Description}}
    /// </summary>
{{- end}}
{{- if .HasInput}}
    /// <param name="request">The request parameters.</param>
{{- end}}
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>An async enumerable of {{.StreamItemType}} items.</returns>
    /// <exception cref="ApiException">Thrown when the API returns an error.</exception>
    public async IAsyncEnumerable<{{.StreamItemType}}> {{.CSharpName}}(
{{- if .HasInput}}
        {{.InputType}} request,
{{- end}}
        [EnumeratorCancellation] CancellationToken cancellationToken = default)
    {
        await foreach (var item in _client.StreamAsync<{{.StreamItemType}}>(
            HttpMethod.{{pascal (lower .HTTPMethod)}},
            {{csharpQuote .HTTPPath}},
{{- if .HasInput}}
            request,
{{- else}}
            null,
{{- end}}
            cancellationToken))
        {
            yield return item;
        }
    }
{{- else if and .HasInput .HasOutput}}

{{- if .Description}}
    /// <summary>
    /// {{.Description}}
    /// </summary>
{{- end}}
    /// <param name="request">The request parameters.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>The response.</returns>
    /// <exception cref="ApiException">Thrown when the API returns an error.</exception>
    public async Task<{{.OutputType}}> {{.CSharpName}}(
        {{.InputType}} request,
        CancellationToken cancellationToken = default)
    {
        return await _client.RequestAsync<{{.OutputType}}>(
            HttpMethod.{{pascal (lower .HTTPMethod)}},
            {{csharpQuote .HTTPPath}},
            request,
            cancellationToken);
    }
{{- else if .HasInput}}

{{- if .Description}}
    /// <summary>
    /// {{.Description}}
    /// </summary>
{{- end}}
    /// <param name="request">The request parameters.</param>
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <exception cref="ApiException">Thrown when the API returns an error.</exception>
    public async Task {{.CSharpName}}(
        {{.InputType}} request,
        CancellationToken cancellationToken = default)
    {
        await _client.RequestAsync(
            HttpMethod.{{pascal (lower .HTTPMethod)}},
            {{csharpQuote .HTTPPath}},
            request,
            cancellationToken);
    }
{{- else if .HasOutput}}

{{- if .Description}}
    /// <summary>
    /// {{.Description}}
    /// </summary>
{{- end}}
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <returns>The response.</returns>
    /// <exception cref="ApiException">Thrown when the API returns an error.</exception>
    public async Task<{{.OutputType}}> {{.CSharpName}}(
        CancellationToken cancellationToken = default)
    {
        return await _client.RequestAsync<{{.OutputType}}>(
            HttpMethod.{{pascal (lower .HTTPMethod)}},
            {{csharpQuote .HTTPPath}},
            null,
            cancellationToken);
    }
{{- else}}

{{- if .Description}}
    /// <summary>
    /// {{.Description}}
    /// </summary>
{{- end}}
    /// <param name="cancellationToken">Cancellation token.</param>
    /// <exception cref="ApiException">Thrown when the API returns an error.</exception>
    public async Task {{.CSharpName}}(
        CancellationToken cancellationToken = default)
    {
        await _client.RequestAsync(
            HttpMethod.{{pascal (lower .HTTPMethod)}},
            {{csharpQuote .HTTPPath}},
            null,
            cancellationToken);
    }
{{- end}}
{{- end}}
}
{{end}}
