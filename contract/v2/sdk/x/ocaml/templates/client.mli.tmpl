{{define "client.mli.tmpl"}}(** Code generated by sdkocaml. DO NOT EDIT.

    HTTP client for {{.ModuleName}} API.
*)

(** API client handle. *)
type t

(** Create a new client with default configuration.

    {[
      let* client = create () in
      (* use client *)
    ]}
*)
val create : unit -> t Lwt.t

(** Create a new client with custom configuration.

    {[
      let config = Config.make ~api_key:"sk-..." () in
      let* client = create_with config in
      (* use client *)
    ]}
*)
val create_with : Config.t -> t Lwt.t

(** Perform an HTTP request.

    @param meth HTTP method
    @param path Request path
    @param body Optional request body
    @param headers Extra headers
    @return Response body or error
*)
val request :
  t ->
  meth:Cohttp.Code.meth ->
  path:string ->
  ?body:string ->
  ?headers:(string * string) list ->
  unit ->
  (string, Errors.t) result Lwt.t

(** Perform an HTTP request and decode JSON response.

    @param meth HTTP method
    @param path Request path
    @param body Optional request body (will be JSON encoded)
    @param encode JSON encoder for request body
    @param decode JSON decoder for response
    @return Decoded response or error
*)
val request_json :
  t ->
  meth:Cohttp.Code.meth ->
  path:string ->
  ?body:'a ->
  encode:('a -> Yojson.Safe.t) ->
  decode:(Yojson.Safe.t -> 'b) ->
  unit ->
  ('b, Errors.t) result Lwt.t

{{if .HasSSE}}
(** Perform a streaming SSE request.

    @param meth HTTP method
    @param path Request path
    @param body Request body
    @param encode JSON encoder for request body
    @param decode JSON decoder for events
    @return Stream of parsed events or error
*)
val stream :
  t ->
  meth:Cohttp.Code.meth ->
  path:string ->
  body:'a ->
  encode:('a -> Yojson.Safe.t) ->
  decode:(Yojson.Safe.t -> 'b) ->
  unit ->
  ('b Streaming.event Lwt_stream.t, Errors.t) result Lwt.t
{{end}}
{{end}}